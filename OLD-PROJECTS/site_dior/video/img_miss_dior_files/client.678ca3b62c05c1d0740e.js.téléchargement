!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.OneToOneAPI=t():e.OneToOneAPI=t()}(self,(function(){return function(){var e,t={36742:function(e,t,n){"use strict";n.d(t,{default:function(){return ih}});var r=n(57306),i=(n(92222),n(41539),n(12419),n(39714),n(15306),n(34575)),o=n.n(i),a=n(93913),l=n.n(a),c=n(81506),s=n.n(c),u=n(2205),d=n.n(u),p=n(78585),m=n.n(p),f=n(29754),h=n.n(f),g=n(59713),v=n.n(g),E=n(67294),S=n(28449);function T(e,t){if(!t.hasOwnProperty("id")||!t.hasOwnProperty("component"))throw new Error("registerComponentAction payload must include 'id' and 'component'.");return e.dispatch(S.b9.REGISTER_COMPONENT,{id:t.id,component:t.component})}function b(e,t){if(!t.hasOwnProperty("id"))throw new Error("unregisterComponentAction payload must include 'id'.");e.dispatch(S.b9.UNREGISTER_COMPONENT,{id:t.id})}function y(e,t){if(!t.hasOwnProperty("id")||!t.hasOwnProperty("action"))throw new Error("dispatchComponentEvent payload must include 'id' and 'action'.");t.remoteOnly?e.dispatchRemote(S.b9.EVENT,t):e.dispatchLocalAndRemote(S.b9.EVENT,t,t.localOnly)}var C=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(e,t,n){var a;return o()(this,i),(a=r.call(this,e,t)).componentId=null,a.state=n||{},a}return l()(i,[{key:"registerActiveComponent",value:function(e){if(null===e)throw new Error("Component can't be registered with a null id!");this.componentId=e,this.context.executeAction(T,{id:e,component:this})}},{key:"unregisterActiveComponent",value:function(e){this.componentId=null,this.context.executeAction(b,{id:e})}},{key:"__componentDidReceiveEvent",value:function(e,t){if("__setState"===e){var n={},r=!1;for(var i in t){var o=t[i];this.state[i]!==o&&(n[i]=o,r=!0)}r&&this.setState(n)}else"function"==typeof this.componentDidReceiveEvent?this.componentDidReceiveEvent(e,t):console.warn("Component received unhandeled event",this,e,t)}},{key:"setLocalAndRemoteState",value:function(e){this.setState(e),this.setRemoteState(e)}},{key:"setRemoteState",value:function(e){this.dispatchComponentEvent("__setState",e,!0)}},{key:"dispatchComponentEvent",value:function(e,t,n){if(null===this.componentId)throw new Error("The component must be registered as an active component before dispatching an event!");return n||this.__componentDidReceiveEvent(e,t),this.context.executeAction(y,{id:this.componentId,action:e,data:t,remoteOnly:!0})}}]),i}(E.Component);C.contextType=r.Il;var x=C,O=n(94184),I=n.n(O),A=n(8991),N=n(52543),w=n(60414);function R(e,t){var n={tool:t,clientSelectedTool:!0};e.dispatchLocalAndRemote(S.Ie.SELECT,n,!1)}function k(e){e.dispatchLocalAndRemote(S.Ie.DESELECT,{clientDeSelectedTool:!0},!1)}function L(e,t){if(!t.hasOwnProperty("show"))throw new Error("setToolOverlay payload must include 'show'");e.dispatch(S.Ie.SET_TOOL_OVERLAY,t)}function D(e){e.getService("trackingService")._track({category:"pre_call",action:"load"})}function P(e,t){var n=e.getService("trackingService");e.getService("externalInterfaceService").emit("call_widget:clicked_book_meeting_button",{type:t.type,url:t.url}),n._track({category:"pre_call",action:"clicked_book_meeting",data:{bookSettings:t}})}function M(e){e.getService("trackingService")._track({category:"initiation",action:"open_popup"})}function B(e){e.getService("trackingService")._track({category:"initiation",action:"close_popup"})}function j(e){e.getService("trackingService")._track({category:"initiation",action:"open_widget"})}function U(e,t){e.getService("trackingService")._track({category:"initiation",action:"load",data:t})}function G(e,t){e.getService("trackingService")._track({category:"pre_call",action:"minimize_queue_window",data:t}),e.getService("externalInterfaceService").emit("call_widget:minimized_queue_view",t)}function F(e,t){e.getService("trackingService")._track({category:"pre_call",action:"maximize_queue_window",data:t}),e.getService("externalInterfaceService").emit("call_widget:maximized_queue_view",t)}function W(e){e.getService("trackingService").track("pre_call","open_media_setting")}function H(e,t){var n=t.type,r=t.selectedAnswer;e.getService("trackingService")._track({category:"post-call",action:"poll-answer",data:V(n,r)})}function V(e,t){switch(e){case"nps":return{rating:t,scale:10,questionId:"nps",subAction:"call-rating"};case"thumbsUpOrDown":return{rating:t,scale:2,questionId:"thumbsUpOrDown",subAction:"call-rating"};case"text":return{freeText:t,questionId:"freeText",subAction:"call-rating"};default:return{}}}function z(e,t){e.getService("trackingService")._track({category:"call",action:"minimize_call_window"}),e.getService("externalInterfaceService").emit("call_widget:minimized_call_view")}function Z(e,t){t.target&&e.getService("trackingService").track("click",t.target,t.data&&{payload:t.data})}n(57327),n(21249),n(2707);var Y,K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter((function(e){return e.show})).sort((function(e,t){return e.position-t.position})).map((function(e){return e.item}))},q=n(44444),Q=(n(82526),n(38880),n(49337),n(47941),n(54747),n(46183)),X="0 0 0 4px",J=(0,N.Z)((function(){return{container:{display:"flex",alignItems:"center",justifyContent:"center",opacity:0},show:{transition:"opacity 0.1s ease-in-out",opacity:1},text:{fontWeight:500,fontSize:"12px",whiteSpace:"nowrap"}}}))((function(e){var t=e.count,n=e.isLoading,r=e.badgeTextColor,i=e.classes,o=!1;if(!t&&!n)return null;t>99&&(o=!0);var a=I()(i.text),l=I()(i.container,(!!t||n)&&i.show),c=r||"rgba(255, 255, 255, 1)",s={loader:{margin:X,width:12,height:12,borderColor:"".concat(c," ").concat(c," transparent")},count:{color:c,margin:X,width:12,lineHeight:"".concat(12,"px")}},u=E.createElement("span",null,E.createElement(Q.aN,{position:"relative",type:"small",style:s.loader})),d=E.createElement(Q.xv,{className:a,style:s.count},o?99:t);return E.createElement("div",{className:l},n?u:d)})),$=n(63038),ee=n.n($),te=(0,N.Z)((function(e){return{container:{transform:"translate(calc(0px), calc(-100% - ".concat(10,"px))"),backgroundColor:"rgba(62, 62, 62, 1)",position:"fixed",display:"flex",textAlign:"center",justifyContent:"center",alignItems:"center",borderRadius:"4px",maxWidth:150,zIndex:7,boxShadow:"0px 2px 6px rgba(0, 0, 0, 0.04), 0px 0px 1px rgba(0, 0, 0, 0.04), 0px 16px 24px rgba(0, 0, 0, 0.06)",opacity:0,transition:"opacity 1s",direction:null!=e&&e.rtl?"rtl":"unset"},text:{color:"rgba(255, 255, 255, 1)",userSelect:"none",fontSize:"12px",lineHeight:"18px",fontWeight:"700",padding:"8px 12px",margin:0},arrow:{pointerEvents:"none",content:'""',position:"fixed",zIndex:7,borderStyle:"solid",transform:"rotate(180deg) translate(0px, calc(100% - 2px))",borderColor:"\n      transparent\n      transparent\n      ".concat("rgba(62, 62, 62, 1)","\n      transparent\n    "),borderWidth:"6px",opacity:0,transition:"opacity 1s"},show:{opacity:1}}}))((function(e){var t=e.text,n=e.onClick,r=e.classes,i=(0,E.useState)(!1),o=ee()(i,2),a=o[0],l=o[1];(0,E.useEffect)((function(){return Y=setTimeout((function(){return l(!0)}),200),function(){return clearTimeout(Y)}}),[]);var c=I()(r.container,a&&r.show),s=I()(r.arrow,a&&r.show);return E.createElement(E.Fragment,null,E.createElement(Q.L9,{onClick:n,className:c},E.createElement(Q.xv,{className:r.text},t)),E.createElement("span",{className:s}))})),ne=(0,N.Z)((function(e){return{wrapper:{display:"flex",justifyContent:"center",direction:null!=e&&e.rtl?"rtl":"unset"},container:v()({display:"flex",pointerEvents:"auto",justifyContent:"center",alignItems:"center",border:"none",borderRadius:"4px",padding:(0,q.isTabletDevice)()?0:12,height:36,width:40,margin:"0 1px",backgroundColor:"transparent",transition:"background-color 0.1s ease-in-out"},e.breakpoints.up("sm"),{"&:hover":{backgroundColor:"rgba(42, 42, 42, 1)"}}),containerWithLabel:{width:"auto"},active:{backgroundColor:"rgba(42, 42, 42, 1)"},running:{backgroundColor:"rgba(255, 255, 255, 1)","&:hover":{backgroundColor:"rgba(255, 255, 255, 1)"}},icon:{display:"flex",justifyContent:"center",alignItems:"center",minWidth:24,minHeight:24},interactable:{cursor:"pointer"},disabled:{opacity:.3,pointerEvents:"none","&:hover":{backgroundColor:"transparent"}}}}))((function(e){var t=e.onClick,n=e.hideTooltip,r=void 0!==n&&n,i=e.showStaticTooltip,o=void 0!==i&&i,a=e.title,l=void 0===a?"":a,c=e.disabled,s=e.ariaLabel,u=e.icon,d=e.iconClassName,p=e.className,m=e.containerClassName,f=e.count,h=e.isUpdatingCount,g=e.onClickTooltip,v=e.interactable,S=void 0===v||v,T=e.scaleOnHover,b=void 0!==T&&T,_=e.style,y=e.badgeTextColor,C=e.active,x=e.running,O=e.testId,N=e.textElement,w=e.classes,R=I()(w.container,S&&w.interactable,C&&w.active,x&&w.running,(!!N||void 0!==f&&f>0)&&w.containerWithLabel,p,c&&w.disabled),k=I()(m,w.wrapper),L=I()(w.icon,d);return E.createElement("div",{className:k},o&&l&&g&&E.createElement(te,{text:l,onClick:g}),E.createElement(Q.u,{text:s,placement:"top",disabled:r||o||!!N},E.createElement(A.E.button,{className:R,style:_,onClick:function(e){t&&S&&t(e)},disabled:c,tabIndex:!S||c?-1:0,"aria-label":s||"","data-testid":O,whileHover:b&&S&&{scale:1.05}},E.createElement("span",{className:L},u),N,E.createElement(J,{count:f,isLoading:h,badgeTextColor:y}))))})),re=n(38784);function ie(e){var t=e.getStore("CompareStore");e.dispatchLocalAndRemote(S.sK.SET_VISIBILITY,{visible:!t.visible})}function oe(e,t){var n=t.collapsed;e.dispatch(S.sK.SET_COLLAPSED,{collapsed:n})}function ae(e,t){e.dispatchLocalAndRemote(S.sK.SET_VISIBILITY,{visible:t.visible},t.localOnly)}function le(e,t){e.dispatchLocalAndRemote(S.sK.DESTROY,null,t.localOnly)}function ce(e){e.dispatchLocalAndRemote(S.sK.SET_VISIBILITY,{visible:!1})}function se(e,t){if(!t.externalId)throw new Error("addProductToCompare payload must include 'externalId'.");e.dispatchLocalAndRemote(S.sK.ADD,t)}function ue(e,t){if(!t.externalId)throw new Error("removeProductFromCompare payload must include 'externalId'.");e.dispatchLocalAndRemote(S.sK.REMOVE,t)}function de(e,t){e.dispatchLocalAndRemote(S.sK.SET_VISIBLE_ATTRIBUTES,t)}function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fe,he,ge,ve=(0,w.A1)((function(e){var t=e.showingVideoOverlay,n=e.pdaOpen,i=e.isBasketOpen,o=e.isLoading,a=e.numberOfBasketItems,l=e.clientIsMobile,c=e.classes,s=e.hasChanges,u=e.disabled,d=void 0!==u&&u,p=e.isNativeSDK,m=e.onClick,f=(0,r.bp)(),h=I()((0,q.isMobileDevice)()&&c.clientContainer,n&&(0,q.isMobileDevice)()&&c.pdaContainer,i&&!n&&(0,q.isMobileDevice)()&&c.basketOpen,(!!a||o)&&c.containerWithItems,a<10&&l&&c.clientSmallContainerWithItems,a<10&&!1,a>9&&!1,!!s&&!i&&c.hasChanges,!!s&&!i&&!a&&!o&&c.hasChangesNoItems,l&&t&&c.videoOverlayContainer),g=(n||i)&&(0,q.isMobileDevice)()?"rgba(42, 42, 42, 1)":"rgba(250, 250, 250, 1)",v=(n||i)&&(0,q.isMobileDevice)()?"rgba(42, 42, 42, 1)":"rgba(250, 250, 250, 1)",T={marginTop:(0,q.isMobileDevice)()&&n?"-1px":"0px"};return E.createElement(ne,{testId:"cart-control-button",ariaLabel:f.getText("AGENT_BAG_TITLE"),onClick:function(){"function"==typeof m&&m(S.Js.CART),p&&f.executeAction(ce)},className:h,icon:E.createElement(Q.w7,{type:"callcontrol",color:g,style:T}),count:a,disabled:d,isUpdatingCount:o,badgeTextColor:v,active:i})}),["BasketStore","ViewportStore"],(function(e,t){var n,r,i=e.ViewportStore.getClientViewportFrame().clientIsMobile,o=t.currentTool===S.Js.CART;return{isLoading:null===(n=e.BasketStore.getBasket())||void 0===n?void 0:n.isLoading,numberOfBasketItems:e.BasketStore.numberOfBasketItems,isBasketOpen:o,clientIsMobile:i,hasChanges:e.BasketStore.hasChanges,isNativeSDK:null===(r=e.NativeSDKStore)||void 0===r?void 0:r.isNativeSDK}})),Ee=(0,N.Z)((function(){return{clientContainer:me(me({height:36,width:36,margin:"0 0 0 ".concat((0,q.isMobileDevice)()?8:12,"px"),padding:0,border:"2px solid transparent",borderRadius:"100%",backgroundColor:"rgba(42, 42, 42, 0.15)",transition:"width 0.1s, border-radius 0.1s 0.1s",backdropFilter:"blur(4px)"},(0,re.pv)()),{},{"&:hover":{backgroundColor:"rgba(42, 42, 42, 0.15)"}}),videoOverlayContainer:{backgroundColor:"rgba(255, 255, 255, 0.15)","&:focus":{backgroundColor:"rgba(255, 255, 255, 0.15)"}},pdaContainer:{backdropFilter:"blur(54px)",backgroundColor:"rgba(246, 246, 246, 0.8);",border:"2px solid white","&:hover":{backgroundColor:"rgba(246, 246, 246, 0.8)"}},basketOpen:{backgroundColor:"rgba(255, 255, 255, 1)","&:hover":{backgroundColor:"rgba(255, 255, 255, 1)"}},containerWithItems:{position:"relative",transition:"width 0.1s",width:64,borderRadius:"6px"},smallContainerWithItems:{maxWidth:56},clientSmallContainerWithItems:{maxWidth:62},largeContainerWithItems:{maxWidth:64},hasChanges:{"&::after":{position:"absolute",top:"4px",width:"6px",height:"6px",background:"#E12147",borderRadius:"10px",content:'""'}},hasChangesNoItems:{position:"relative","&::after":{transform:"translateX(8px)"}}}}))(ve),Se=n(98759),Te=(0,w.A1)((function(e){var t=e.currentTool,n=e.withBackground,i=e.scaleOnHover,o=e.onClick,a=e.className,l=e.classes,c=(0,r.bp)(),s=I()(n&&l.withBackground,a),u=n?"rgba(0, 0, 0, 1)":"rgba(250, 250, 250, 1)";return E.createElement(ne,{className:s,ariaLabel:c.getText("ACTION_BAR_BUTTON_ARIA_LABEL_SETTINGS"),icon:E.createElement(Q.ew,{color:u}),onClick:function(){return o?o(S.Js.SETTINGS):t===S.Js.SETTINGS?c.executeAction(Se.Xd,{dialogId:"device-settings"}):c.executeAction(Se.T0,{dimmer:!1,position:{bottom:"80px",right:"12px"}})},testId:"settings-control-button",active:t===S.Js.SETTINGS,scaleOnHover:i})}),["SystemDialogStore"],(function(e){return{isSettingsOpen:e.SystemDialogStore.isActiveDialog("device-settings")}})),be=(0,N.Z)((function(e){return{withBackground:{backgroundColor:e.palette.white.main,boxShadow:e.boxShadow.initial,"&:hover":{boxShadow:e.boxShadow.hover,backgroundColor:"#f2f2f2"}}}}))(Te),_e=(n(41817),n(32165),n(69826),n(91038),n(66992),n(47042),n(88674),n(78783),n(33948),n(87757)),ye=n.n(_e),Ce=(n(35666),n(48926)),xe=n.n(Ce),Oe=(n(19601),n(23123),n(60285),n(21145)),Ie=n.n(Oe),Ae=window.RTCPeerConnection,Ne=window.RTCIceCandidate,we="function"==typeof(null===(fe=navigator)||void 0===fe||null===(he=fe.mediaDevices)||void 0===he||null===(ge=he.getUserMedia)||void 0===ge?void 0:ge.bind)?navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices):null,Re=Ie().browserDetails.browser,ke=(Ie().browserDetails.version,void 0!==Ae&&"function"==typeof we);function Le(){try{if(!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var e=new Ae;try{e.addTransceiver("audio")}catch(e){return!1}e.close()}catch(e){return!1}return!0}function De(){return(De=xe()(ye().mark((function e(t,n){var r,i,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&0!==t.getVideoTracks().length){e.next=2;break}return e.abrupt("return",!1);case 2:if(i=t.getVideoTracks()[0],o=i.getConstraints(),(null===(r=o.aspectRatio)||void 0===r?void 0:r.exact)!==n){e.next=7;break}return console.log("Track already have same aspect ratio, skipping"),e.abrupt("return",!0);case 7:return o.aspectRatio={exact:n},e.prev=8,e.next=11,i.applyConstraints(o);case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(8),console.log("Unable to set video orientation",e.t0),e.abrupt("return",!1);case 17:return e.abrupt("return",!0);case 18:case"end":return e.stop()}}),e,null,[[8,13]])})))).apply(this,arguments)}(0,q.chromeNewerOrEqualTo)("72"),ke&&"browser-".concat(Re),we||(we=function(){return new Promise((function(e,t){console.log("getUserMedia not supported..."),t(new window.PermissionDeniedError("PermissionDeniedError"))}))});var Pe,Me,Be,je=function(e){if(e){var t=e.getVideoTracks();if(t)return Ye(t,!!Ge(e))}},Ue=function(e){if(e){var t=e.getAudioTracks();if(t)return Ye(t)}},Ge=function(e){if(e)return(e.getVideoTracks()||[]).find((function(e){return!!(e.getSettings()||{}).displaySurface}))},Fe=function(e){return!!e&&(e.getVideoTracks().filter((function(e){return e.contentHint!==Qe&&(!e.canvas&&"CanvasCaptureMediaStreamTrack"!=typeof e||(null==e?void 0:e.canvas.id)!==Qe)}))||[]).length>0},We=function(e){return!!e&&(e.getAudioTracks().filter((function(e){return e.contentHint!==qe&&"MediaStreamAudioDestinationNode"!==e.label}))||[]).length>0},He=function(e){return!Fe(e)||e.getVideoTracks().every((function(e){return null==e?void 0:e.muted}))},Ve=function(e){return!!Fe(e)&&e.getVideoTracks().some((function(e){return null==e?void 0:e.enabled}))},ze=function(e){return!!We(e)&&e.getAudioTracks().some((function(e){return null==e?void 0:e.enabled}))},Ze=function(e,t){e&&e.length&&e.map((function(e){return e.enabled=t}))},Ye=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(e||[]).some((function(e){var r=e.getSettings();return!!(t=r&&!r.displaySurface&&(e.enabled||n)?r.deviceId:null)})),t},Ke=function(e,t){var n;return!(!e||!t)&&(null===(n=t.find((function(t){return t.deviceId===e})))||void 0===n?void 0:n.deviceId)},qe="silence",Qe="black-void";"undefined"==typeof MediaStream&&(window.MediaStream=function(){function e(){o()(this,e),this.id="dummy0dummy1dummy2dummy3dummy5dummy6"}return l()(e,[{key:"getAudioTracks",value:function(){return[]}},{key:"getTracks",value:function(){return[]}},{key:"getVideoTracks",value:function(){return[]}},{key:"getTrackById",value:function(){return null}},{key:"addTrack",value:function(){}},{key:"removeTrack",value:function(){}},{key:"clone",value:function(){return this}}]),e}());var Xe={},Je={},$e=function(e,t){if((t=t||new MediaStream).getAudioTracks().length)We(t)&&et(e);else try{et(e),Xe[e]=(null!==(n=Be)&&void 0!==n&&n.stream&&(Me.stop(),Pe.close(),Be.stream.getTracks((function(e){return e.stop()}))),Pe=new AudioContext,Me=Pe.createOscillator(),Be=Me.connect(Pe.createMediaStreamDestination()),Me.start(),Object.assign(Be.stream.getAudioTracks()[0],{enabled:!1,contentHint:qe})),t.addTrack(Xe[e])}catch(e){console.warn("Failed to setup audio silence track",e)}var n;if(t.getVideoTracks().length)Fe(t)&&tt(e);else try{tt(e);var r={};(0,q.isMobileDevice)()&&(r.width=240,r.height=320),Je[e]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,n=void 0===t?320:t,r=e.height,i=void 0===r?180:r,o=function(){var e=document.getElementById(Qe);if(e)return e;(e=Object.assign(document.createElement("canvas"),{width:n,height:i})).setAttribute("id",Qe);var t=e.getContext("2d");t.fillStyle="rgba(0, 0, 0, 0)",t.fillRect(0,0,n,i);var r=setInterval((function(){t.fillRect(0,0,n,i),"live"!==(null==a?void 0:a.readyState)&&clearInterval(r)}),1e3);return e},a=o().captureStream().getVideoTracks()[0];return Object.assign(a,{enabled:!1,contentHint:Qe})}(r),t.addTrack(Je[e])}catch(e){console.warn("Failed to setup black video track",e)}return t},et=function(e){Xe[e]&&Xe[e].stop()},tt=function(e){Je[e]&&Je[e].stop()},nt=function(){var e=xe()(ye().mark((function e(t,n){var r,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(r=navigator)&&void 0!==r&&r.permissions){e.next=2;break}return e.abrupt("return",void 0);case 2:return e.prev=2,e.next=5,navigator.permissions.query({name:t});case 5:return i=e.sent,n&&(i.onchange=n),e.abrupt("return","granted"===i.state);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",void 0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n){return e.apply(this,arguments)}}(),rt=function(){document.querySelectorAll("video").forEach((function(e){e.srcObject&&(e.srcObject=e.srcObject)}))},it=function(e){if(e)return(document.querySelectorAll("[data-stream-id='".concat(e.id,"']"))||[])[0]},ot=function(e){return e.split(" ")[7]},at=n(82782),lt="room_message",ct="dispatch",st="dispatch_resend",ut="dispatch_confirm",dt="agent_ready",pt="hangup",mt="pause_call",ft="ready_for_connection",ht="remoteStreamAdded",gt="remoteStreamRemoved",vt="localStreamUpdated",Et="status",St="connected",Tt="reconnecting",bt="error",_t="error",yt="user_action",Ct="remote_user_action",xt="timeout",Ot="remote_unload",It="viddget:invalid_client",At="viddget:unsupported_browser",Nt="viddget:failed_to_join_queue",wt="viddget:joined_queue",Rt="viddget:call_ended",kt="viddget:session_id",Lt="viddget:viewport_mode",Dt="viddget:ready",Pt="viddget:request_client_data",Mt="viddget:forwarded_event",Bt="viddget:drag_minimized",jt="viddget:close",Ut="videoinput",Gt="audioinput",Ft="audiooutput",Wt="i_want_to_help",Ht=(0,at.Z)(["CLIENT_MINIMIZED","CLIENT_RESTORED_MINIMIZED"]);function Vt(e,t){t||(t={}),e.dispatch(S.t.SET_SPLIT_SCREEN,t)}function zt(e,t){t.hasOwnProperty("isDragging")||(t.isDragging=!0),e.dispatch(S.t.SET_IS_DRAGGING,t)}var Zt=n(39666);function Yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kt(e,t){console.log("Updating session status",t.status),e.dispatch(S.Nb.STATUS,t)}function qt(e,t){console.log("Restoring call session status"),e.dispatch(S.Nb.STATUS_RESTORE,t)}function Qt(e,t){Zt.v("call",t?{sessionId:t.sessionId}:null),t&&Zt.YA("callId",t.sessionId),e.dispatch(S.Nb.METADATA,t)}function Xt(e,t){var n=t.err,r=e.getService("trackingService");if(e.messageService.sendToRoom("client_get_user_media_error",{reason:n&&n.name?n.name:"UnknownError",message:n&&n.message?n.message:null}),n&&"NotAllowedError"===n.name)if((0,q.isChrome)()||(0,q.isFirefox)()||(0,q.isSafari)()){r.track(t.preview?"pre_call":"call","display_general_user_media_denied",{error:n});var i=!(0,q.isMobileDevice)()&&((0,q.isChrome)()||(0,q.isFirefox)());t.preview||i?e.executeAction(Se.kn,{video:null==t?void 0:t.useVideo,audio:null==t?void 0:t.useMicrophone}):e.dispatch(S.Nb.SHOW_MEDIA_GUIDE,{status:!0})}else e.executeAction(Se.FI,{title:e.getText("CLIENT_SETTINGS_USER_MEDIA_DENIED_TITLE"),message:e.getText("CLIENT_SETTINGS_USER_MEDIA_DENIED_MESSAGE_DEFAULT")});else r.track(t.preview?"pre_call":"call","display_unknown_media_error",{error:n}),e.executeAction(Se.FI,{title:e.getText("CLIENT_SETTINGS_USER_MEDIA_UNKNOWN_ERROR_TITLE"),message:e.getText("CLIENT_SETTINGS_USER_MEDIA_UNKNOWN_ERROR_MESSAGE",n.name)})}function Jt(e){e.dispatch(S.Nb.SHOW_MEDIA_GUIDE,{status:!1})}function $t(e,t){e.dispatch(S.Nb.CLIENT_PLATFORM,t),e.dispatch(S.Nb.MERCHANT_INTEGRATION,t.merchantIntegration)}function en(e,t){if(e.dispatch(S.Nb.AGENT_PLATFORM,t),!(0,q.isMobileDevice)()&&!(0,q.isTabletDevice)()&&(null==t?void 0:t.device)===q.DeviceType.MOBILE)return Vt(e,{splitScreen:!0})}function tn(e,t){e.dispatch(S.Nb.MEDIA_TRANSPORT,t)}function nn(e,t){return e.dispatch(S.Nb.INITIAL_MODE,t)}function rn(e,t){var n=e.settings.get("coBrowsing"),r=e.settings.get("virtualTryOn",{});r.perfectCorp&&!(0,q.isPerfectCorpSupported)()&&(r.enabled=!1);var i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yt(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({coBrowsing:n,virtualTryOn:r},t);e.dispatch(S.Nb.MERCHANT_INTEGRATION,i)}function on(e,t){var n=e.getStore("CallSessionStore"),r=n.getStatus()===S.kp.RUNNING,i=n.isRemoteBusy;if(t.stream&&r&&!i){var o=function(e){if(Ve(e)&&!He(e)){var t=it(e);if(t&&!(t.readyState<2)){var n=document.createElement("canvas"),r=n.getContext("2d");n.height=t.videoHeight,n.width=t.videoWidth,r.drawImage(t,0,0);var i=n.toDataURL("image/png");return r=null,n=null,i}}}(t.stream);o&&e.dispatch(S.Nb.SET_STREAM_CAPTURE_IMAGE,{capturedImage:o})}}var an=n(58832),ln=n(9042),cn=n(65659),sn=n.n(cn),un=n(3999);n(17727);var dn=function(e){var t=!1;return{canceled:function(){return t},promise:new Promise((function(n,r){e.then((function(e){return t?r({isCanceled:!0}):n(e)})).catch((function(e){return r(t?{isCanceled:!0}:e)}))})),cancel:function(){t=!0}}};function pn(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return mn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function mn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var fn=!1,hn=null;function gn(e,t){return vn.apply(this,arguments)}function vn(){return vn=xe()(ye().mark((function e(t,n){var r,i,o,a,l,c,s;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.getService("trackingService"),a=!!n.video,l=!!n.microphone,i=(0,q.isMobileDevice)()?!!n.video&&{width:{ideal:800},height:{ideal:600}}:!!n.video&&{width:{ideal:1280},height:{ideal:720}},e.next=6,Sn(t);case 6:return c=e.sent,o=!!l&&n.microphone,n.video&&!0!==n.video&&Ke(n.video,c)&&(i.deviceId={exact:n.video}),n.microphone&&!0!==n.microphone&&Ke(n.microphone,c)&&(o={deviceId:{exact:n.microphone}}),n.video&&((0,q.isMobileDevice)()||(0,q.isTabletDevice)())&&!i.deviceId&&(i.facingMode={ideal:n.facingMode||S._X.FRONT}),!i||(0,q.isFirefox)()&&(0,q.isMobileDevice)()||(i.frameRate={min:5,max:30,ideal:24}),hn&&hn.cancel(),s=dn(new Promise((function(e,c){if(i||o){var u={video:i,audio:o,fake:!1},d=function(){var i=xe()(ye().mark((function i(o){var c,u,d,p,m,f,h;return ye().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!s.canceled()){i.next=3;break}return console.warn("A successful request to local user media was aborted"),i.abrupt("return");case 3:return(c=t.getStore("MediaStreamStore").getLocalMediaStream()).getTracks().forEach((function(e){e.removeEventListener("ended",En)})),u="enabled_video",l&&!ze(c)&&(u="enabled_audio"),a&&!Ve(c)&&(u="enabled_video"),r.track(n.preview?"pre_call":"call",u,{payload:{audio:l,video:a,preview:n.preview}}),t.executeAction(Sn),o=$e(S.lo.CAMERA,o),i.next=13,Cn(t,{stream:o});case 13:o.getTracks().forEach((function(e){e.context=t,e.addEventListener("ended",En)})),d=t.getService("callSessionService").mediaConnection,p=function(){c&&c.getTracks().forEach((function(e){return e.stop()})),t.dispatch(S.Lm.RECEIVED_LOCAL_STREAM,{stream:o}),"function"==typeof n.callback&&n.callback(o),e(o)},m=function(){n.preview||d&&(t.getStore("MediaStreamStore").localMediaStreams[S.lo.CAMERA]=o,d.publish(t.getStore("MediaStreamStore").publishableLocalMediaStreams)),p()},d?(f=t.getStore("MediaStreamStore").activeLocalCameraStream,h=f!==c?S.oI.AUDIO:null,d.replaceStreamTracks(c,o,h).then(xe()(ye().mark((function e(){var n,r,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.dispatchRemote(S.Lm.TOGGLE_STREAM_INPUT,{isClientStream:!0,video:Ve(o),audio:ze(o)}),t.getStore("ClientCallControlStore").getDisplayState()!==S.LT.SCREENSHARE){e.next=19;break}n=pn(o.getVideoTracks()),e.prev=3,n.s();case 5:if((r=n.n()).done){e.next=11;break}return i=r.value,e.next=9,d.scaleResolution(i,S.Rs.VIDEO_THUMBNAIL_HEIGHT);case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:p();case 20:case"end":return e.stop()}}),e,null,[[3,13,16,19]])})))).catch((function(){m()}))):m();case 18:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}(),p=function(e){if(s.canceled())console.warn("A failed request to local user media was aborted");else{var i=t.getStore("MediaStreamStore").getLocalMediaStream();if(!(e instanceof Error)){var o=e.name||"UnknownError",u="";e.message&&(u=e.message),e.constraint&&(u&&(u+=" "),u+="[".concat(e.constraint,"]")),(e=new Error(u)).name=o}var d="failed_to_enable_video";if(l&&!ze(i)&&(d="failed_to_enable_audio"),a&&!Ve(i)&&(d="failed_to_enable_video"),r.track(n.preview?"pre_call":"call",d,{error:e.message}),"PermissionDeniedError"!==e.name&&"PermissionDismissedError"!==e.name||(e.name="NotAllowedError"),"NotReadableError"===e.name&&((null==i?void 0:i.getTracks())||[]).some((function(e){return"live"===e.readyState})))return i.getTracks().forEach((function(e){return e.stop()})),gn(t,n);"function"==typeof n.callback&&n.callback(null,e),"function"!=typeof n.callback&&t.executeAction(Xt,{useVideo:a&&!Ve(i),useMicrophone:l&&!ze(i),preview:n.preview,err:e}),"NotFoundError"!==e.name&&"NotAllowedError"!==e.name?c(e):c(new un.ZR("User must ensure video/audio hardware/access"))}};if((0,q.safariOlderThan)("12.1"))if(a&&fn){var m=sn().merge({},u,{audio:!1});we(m).then((function(e){e.getTracks().forEach((function(e){e.stop()})),we(u).then((function(e){fn=!1,d(e)}),p)}),p)}else we(u).then((function(e){l&&!a&&(fn=!0),d(e)}),p);else we(u).then(d,p)}else yn(t,{preview:n.preview,video:!1,audio:!1}),"function"==typeof n.callback&&n.callback(null),e(null)}))),hn=s,e.abrupt("return",s);case 16:case"end":return e.stop()}}),e)}))),vn.apply(this,arguments)}var En=function(e){var t=(null==e?void 0:e.currentTarget)||{},n=t.context,r=t.kind;if(n&&r){var i=n.getStore("MediaStreamStore").getLocalMediaStream();if(i){var o,a;if("audio"===r)o=je(i)||!1,a=!0;else{if("video"!==r)return;o=!0,a=Ue(i)||!1}gn(n,{video:o,microphone:a}).catch((function(e){console.error("Access to camera or microphone lost",e)}))}}};function Sn(e,t){return(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices():new Promise((function(e){e([])}))).then((function(n){return e.dispatch(S.Lm.AVAILABLE_DEVICES,n),t&&"function"==typeof t.callback&&t.callback(n),n}),(function(){return e.dispatch(S.Lm.AVAILABLE_DEVICES,[]),t&&"function"==typeof t.callback&&t.callback([]),[]}))}function Tn(e,t){e.dispatch(S.Lm.RECEIVED_REMOTE_STREAM,t)}function bn(e){(function(e){var t=e.getStore("MediaStreamStore").getLocalMediaStream(S.lo.SCREENSHARE);t&&(t.getTracks().forEach((function(e){return e.stop()})),e.dispatchLocalAndRemote(S.Lm.TOGGLE_STREAM_INPUT,{isClientStream:!0,video:!1,audio:!1,type:S.lo.SCREENSHARE}),(0,an.hD)(e,{state:S.LT.DEFAULT}))})(e),e.getStore("MediaStreamStore").remoteMediaStreams.forEach((function(t,n){e.dispatch(S.Lm.RECEIVED_REMOTE_STREAM,{type:n,stream:null})}))}function _n(e,t){e.dispatch(S.Lm.PLAYING_REMOTE_STREAM,t.stream)}function yn(e,t){var n=e.getStore("MediaStreamStore").getLocalMediaStream(),r=e.getService("trackingService"),i="";if(t.hasOwnProperty("audio")&&(i="toggle_audio"),t.hasOwnProperty("video")&&(i="toggle_video"),r.track(t.preview?"pre_call":"call",i,{payload:{audio:t.audio,video:t.video,preview:t.preview}}),!n&&(t.audio||t.video)||t.video&&!Fe(n)||t.audio&&!We(n)||(0,q.isIOS)()&&(0,q.mobileSafariNewerOrEqualTo)(15)&&(0,q.mobileSafariOlderThan)(15.2)&&t.video)return gn(e,{video:t.video||je(n),microphone:t.audio||Ue(n),preview:t.preview,callback:null==t?void 0:t.callback});t.isClientStream=!0,e.dispatchLocalAndRemote(S.Lm.TOGGLE_STREAM_INPUT,t)}function Cn(e,t){var n,r,i=t.stream,o=e.getStore("CallSessionStore").getClientPlatform(),a=e.getStore("CallSessionStore").getAgentPlatform(),l=(e.getStore("CallSessionStore").getStatus(),null==o||null===(n=o.device)||void 0===n||n.type,q.DeviceType.MOBILE,(null==a?void 0:a.device)===q.DeviceType.MOBILE),c=e.getStore("MediaStreamStore").activeLocalCameraStream,s=e.getStore("MediaStreamStore").getLocalMediaStream(),u=16/9;switch(!0){case(null===(r=e.virtualBackgroundService)||void 0===r?void 0:r.isOn())&&c!==i&&s===i:u=16/9;break;case(0,q.isTabletDevice)():u=4/3;break;case l&&!(0,q.isMobileDevice)():u=3/4;break;case!(0,q.isMobileDevice)():u=16/9;break;case(0,q.isMobileDevice)()&&Fe(i):var d=i.getVideoTracks()[0].getSettings();if(d.width/d.height==3/4)return void console.log("Video seems to have correct aspect ratio, skip applying aspect ratio");u=4/3;break;case(0,q.isMobileDevice)():u=3/4}return function(e,t){return De.apply(this,arguments)}(i,u)}function xn(e,t){var n=e.getStore("MediaStreamStore").getMediaDevices("audiooutput"),r=sn().find(n,{deviceId:t});e.dispatch(S.Lm.SELECT_AUDIO_OUTPUT_MEDIA_DEVICE,r)}function On(e,t){e.dispatch(S.Lm.DISCARD_LOCAL_STREAMS,t)}var In=n(8920),An=(0,N.Z)((function(){return{failedMark:{width:20,height:20,backgroundColor:"#FFA500",borderRadius:"50%",border:"1px solid #FFFFFF",position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",top:-10,right:2}}}))((function(e){var t,n,r,i=e.classes,o=(0,In.Z)();return E.createElement("span",{className:i.failedMark},E.createElement(Q.Cz,{color:null==o||null===(t=o.general)||void 0===t||null===(n=t.buttons)||void 0===n||null===(r=n.alert)||void 0===r?void 0:r.color}))})),Nn=(0,N.Z)((function(e){return{wrapper:{position:"relative"},container:{backgroundColor:"transparent","&:hover":{backgroundColor:"rgba(42, 42, 42, 1)"}},withBackground:{backgroundColor:e.palette.white.main,boxShadow:e.boxShadow.initial,"&:hover":{boxShadow:e.boxShadow.hover,backgroundColor:"#f2f2f2"}},inactive:{backgroundColor:"#E12147","&:hover":{backgroundColor:"#da0031"}},failedStyle:{backgroundColor:"#999999","&:hover":{backgroundColor:"#999999"}}}}))((function(e){var t=e.displayState,n=e.withBackground,i=e.scaleOnHover,o=e.showMicInputCallout,a=e.hasAudioPermission,l=e.onClick,c=e.className,s=e.audioEnabled,u=e.classes,d=e.failed,p=(0,r.bp)(),m=I()(!n&&u.container,n&&u.withBackground,!s&&n&&!d&&u.inactive,!s&&n&&d&&u.failedStyle,c),f=function(){return p.executeAction(an.oD)},h=n?"black":"white",g=s?E.createElement(Q.Hs,{color:h}):E.createElement(Q.vY,{lineColor:a?"rgba(225, 33, 71, 1)":"white"});return E.createElement("div",{className:u.wrapper},E.createElement(ne,{ariaLabel:p.getText("ACTION_BAR_BUTTON_ARIA_LABEL_MICROPHONE"),className:m,displayState:t,icon:g,onClick:function(){return f(),l?l():p.executeAction(yn,{audio:!s})},onClickTooltip:f,showStaticTooltip:o,title:p.getText("CALL_SESSION_CLIENT_ACTIVTE_MEDIA_MIC_CALLOUT"),testId:"microphone-control-button",scaleOnHover:i&&!d}),d&&E.createElement(An,null))})),wn=(0,N.Z)((function(e){return{wrapper:{position:"relative"},container:{backgroundColor:"transparent","&:hover":{backgroundColor:"rgba(42, 42, 42, 1)"}},withBackground:{backgroundColor:e.palette.white.main,boxShadow:e.boxShadow.initial,"&:hover":{boxShadow:e.boxShadow.hover,backgroundColor:"#f2f2f2"}},inactive:{backgroundColor:"#E12147","&:hover":{backgroundColor:"#da0031"}},failedStyle:{backgroundColor:"#999999","&:hover":{backgroundColor:"#999999"}}}}))((function(e){var t=e.displayState,n=e.withBackground,i=e.scaleOnHover,o=e.showCamInputCallout,a=e.onClick,l=e.className,c=e.videoEnabled,s=e.hasCameraPermission,u=e.failed,d=e.classes,p=(0,r.bp)(),m=function(){return p.executeAction(an.yE)},f=I()(!n&&d.container,n&&d.withBackground,!c&&n&&!u&&d.inactive,!c&&n&&u&&d.failedStyle,l),h=n?"black":"white",g=c?E.createElement(Q.hn,{color:h}):E.createElement(Q.GI,{lineColor:s?"rgba(225, 33, 71, 1)":"white"});return E.createElement("div",{className:d.wrapper},E.createElement(ne,{ariaLabel:p.getText("ACTION_BAR_BUTTON_ARIA_LABEL_CAMERA"),className:f,displayState:t,icon:g,onClick:function(){return m(),a?a():p.executeAction(yn,{video:!c})},onClickTooltip:m,showStaticTooltip:o,title:p.getText("CALL_SESSION_CLIENT_ACTIVTE_MEDIA_CAM_CALLOUT"),scaleOnHover:i&!u}),u&&E.createElement(An,null))}));function Rn(e,t){var n=e.getStore("ApplicationStore").getCurrentScreenName(),r=e.getService("trackingService"),i="string"==typeof t?t:t.screen;r.track("screen","screen_change",{payload:{from:n,to:i}}),e.dispatch(S.B7.SCREEN,t)}var kn=(0,at.Z)("Client",["SESSION_ID","RECEIVED_MEETING_DATA","RECEIVED_CLIENT_METADATA"]);function Ln(e,t){e.dispatch(kn.SESSION_ID,t)}function Dn(e,t){if(!t.hasOwnProperty("roomId"))throw new Error("joinRoom payload must include 'roomId'.");var n=t.connectionData||{},r=t.roomId;return e.executeAction(Kt,{status:S.kp.STARTING}),e.executeAction(Rn,"main"),e.executeAction(Mn,{connectionData:n,roomId:r})}function Pn(e){e.callSessionService.abortCallAgent()}function Mn(e,t){if(!t.hasOwnProperty("roomId"))throw new Error("callAgent payload must include 'roomId'.");var n=t.connectionData||{},r=t.roomId;return e.callSessionService.callAgent({connectionData:n,roomId:r}).catch((function(){e.executeAction(Se.FI,{dialogId:"could-not-connect-queue-call",title:e.getText("CALL_SESSION_CLIENT_CONNECTION_FAILED_TITLE"),message:e.getText("CALL_SESSION_CONNECTION_PROBLEM_RESTORE_ATTEMPT_1"),canBeClosed:!1}),setTimeout((function(){e.executeAction(Se.Xd,{dialogId:"could-not-connect-queue-call"}),e.callSessionService.abortCallAgent()}),3e3)}))}function Bn(e){var t=e.getStore("CallSessionStore");t.getStatus()===S.kp.WAITING?e.callSessionService.connectWithAgent():console.log("Can't connect to agent from external interface when in call session status: ".concat(t.getStatus()))}function jn(e,t){var n=t.reason;return e.callSessionService.hangupCall(n)}function Un(e){e.externalInterfaceService.emit("viddget:integration_settings_request")}var Gn=n(97464),Fn=(0,w.A1)((function(e){var t=e.isShowingHangupDialog,n=(0,r.bp)(),i=(0,E.useState)(!1),o=ee()(i,2),a=o[0],l=o[1];return E.createElement(ne,{ariaLabel:n.getText("ACTION_BAR_BUTTON_ARIA_LABEL_LEAVE_CALL"),icon:E.createElement(Q.LX,null),onClick:function(){a||n.executeAction(Se.V2,{dialogId:Gn.Js,withCloseIcon:!0,message:n.getText("AGENT_CLIENT_HANGUP_TITLE"),cancelButtonTitle:n.getText("CALL_SESSION_CLIENT_HANGUP_ABORT_BTN_LABEL"),buttonTitle:n.getText("AGENT_CLIENT_HANGUP_CONFIRM_BTN_LABEL"),callback:function(e){e&&(n.executeAction(jn),l(!0))}})},active:t})}),["SystemDialogStore"],(function(e){return{isShowingHangupDialog:!!e.SystemDialogStore.getDialog(Gn.Js)}}));function Wn(e,t){e.dispatch(S.pX.OPEN_ALL_PRODUCTS_PANEL,t)}function Hn(e,t){e.dispatch(S.pX.CLOSE_ALL_PRODUCTS_PANEL,t)}function Vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vn(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Zn=function(e){var t=e.showingVideoOverlay,n=e.pdaOpen,i=e.numberOfProductsInDrawer,o=void 0===i?0:i,a=e.allProductsView.open,l=e.classes,c=(0,r.bp)(),s=c.getText,u=c.executeAction,d=(0,E.useState)(o),p=ee()(d,2),m=p[0],f=p[1],h=(0,E.useState)(!1),g=ee()(h,2),v=g[0],S=g[1];(0,E.useEffect)((function(){o>m&&!a?(S(!0),f(o)):f(o)}),[o,a,m]);var T=I()(l.container,n&&l.pdaContainer,t&&l.videoOverlayContainer,a&&l.openContainer),b=I()(l.label,(n||a)&&l.darkLabel),_=n||a?"rgba(42, 42, 42, 1)":"rgba(250, 250, 250, 1)",y=E.createElement("span",{className:l.iconWrapper},E.createElement(Q.Bv,{color:_,style:{minHeight:24,minWidth:24,marginLeft:6}}),v&&E.createElement(A.E.div,{initial:"scale",animate:v?"scale":"",variants:{scale:{scale:[1,1.7,1,1]}},className:l.notificationBadge}));return E.createElement(ne,{ariaLabel:s("CLIENT_PRODUCT_LIST_BUTTON_ARIA_LABEL"),className:T,icon:y,textElement:E.createElement(Q.xv,{className:b},s("CLIENT_PRODUCT_LIST_BUTTON_LABEL")),onClick:function(){a?u(Hn):(S(!1),u(Wn))}})};Zn=(0,w.ZP)(Zn,["ActivePanelStore","ProductDrawerStore"],(function(e){return{numberOfProductsInDrawer:e.ProductDrawerStore.products.length,allProductsView:e.ActivePanelStore.getAllProductsView()}}));var Yn=(0,N.Z)((function(){return{container:zn(zn({height:36,margin:0,padding:0,pointerEvents:"auto",border:"2px solid transparent",borderRadius:"6px",backgroundColor:"rgba(42, 42, 42, 0.15)",transition:"unset",backdropFilter:"blur(4px)"},(0,re.pv)()),{},{"&:hover":{backgroundColor:"rgba(42, 42, 42, 0.15)"}}),pdaContainer:{backdropFilter:"blur(54px)",backgroundColor:"rgba(246, 246, 246, 0.8)",border:"2px solid white","&:hover":{backgroundColor:"rgba(246, 246, 246, 0.8)"}},videoOverlayContainer:{backgroundColor:"rgba(255, 255, 255, 0.15)"},openContainer:{backgroundColor:"#FFFFFF","&:hover":{backgroundColor:"#FFFFFF"}},label:{color:"rgba(250, 250, 250, 1)",padding:"0 8px 0 8px",margin:0,fontSize:"12px",lineHeight:"16px",fontWeight:"500",whiteSpace:"nowrap"},darkLabel:{color:"rgba(42, 42, 42, 1)"},iconWrapper:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center"},notificationBadge:{borderRadius:"100%",right:2,top:2,height:6,width:6,backgroundColor:"rgba(225, 33, 71, 1)",position:"absolute"}}}))(Zn);function Kn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kn(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qn=(0,N.Z)((function(){return{container:qn(qn({height:36,width:36,margin:0,padding:0,border:"2px solid white",backdropFilter:"blur(54px)",borderRadius:"100%",backgroundColor:"rgba(250, 250, 250, 0.8)",transition:"unset"},(0,re.pv)()),{},{"&:hover":{border:"border: 2px solid #FAFAFA",backgroundColor:"rgba(250, 250, 250, 0.8)"},"&:active":{border:"border: 2px solid #EEEEEE",backgroundColor:"rgba(238, 238, 238, 0.8)"}}),mobileContainer:{margin:"0 8px 0 0"}}}))((function(e){var t=e.classes,n=(0,r.bp)(),i=n.getText,o=I()(t.container,(0,q.isMobileDevice)()&&t.mobileContainer);return E.createElement(ne,{ariaLabel:i("CLIENT_MENU_BUTTON_CLOSE_PDA_ARIA_LABEL"),className:o,icon:E.createElement(Q.aM,{type:"small",style:{width:"12px",height:"12px"},color:"rgba(42, 42, 42, 1)"}),onClick:function(){n.executeAction(ln.P8,null)}})})),Xn=(0,w.A1)((function(e){var t=e.count,n=e.onClick,i=e.currentTool,o=e.disabled,a=void 0!==o&&o,l=e.isNativeSDK,c=(0,r.bp)();return E.createElement(ne,{ariaLabel:c.getText("AGENT_TRY_ON_HEADER"),icon:E.createElement(Q.x_,{type:"callcontrol",color:"rgba(250, 250, 250, 1)"}),style:{maxWidth:"64px"},onClick:function(){"function"==typeof n&&n(S.Js.VIRTUAL_TRY_ON),l&&c.executeAction(k)},disabled:a,count:t,testId:"vto-control-button",active:i===S.Js.VIRTUAL_TRY_ON})}),["VirtualTryOnStore"],(function(e){var t;return{isNativeSDK:null===(t=e.NativeSDKStore)||void 0===t?void 0:t.isNativeSDK,count:e.VirtualTryOnStore.tryOnIds.length}})),Jn=function(e){var t=e.callTime,n=e.containerClassName,r=e.labelClassName;return E.createElement("div",{className:n},E.createElement("span",{className:r},t))},$n=Jn=(0,w.ZP)(Jn,["CallSessionTimeStore"],(function(e){return{callTime:e.CallSessionTimeStore.getElapsedHumanTime()}})),er=(0,N.Z)((function(){return{container:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"55px"},label:{fontWeight:"500",fontSize:"14px",lineHeight:"14px",color:"white"}}}))((function(e){var t=e.classes;return E.createElement($n,{containerClassName:t.container,labelClassName:t.label})})),tr=(0,N.Z)((function(){return{container:{pointerEvents:"auto",backgroundColor:"rgba(255, 255, 255, 0.15);",backdropFilter:"blur(4px)",borderRadius:"6px",display:"flex",flexGrow:1,alignItems:"center",justifyContent:"center",margin:"0 4px"},btn:{display:"flex",flexGrow:1,alignItems:"center",justifyContent:"center",borderRadius:"6px",maxWidth:"113px",height:S.A3.CLIENT_MOBILE_BOTTOM_CONTROLS_HEIGHT},fullWidthBtn:{maxWidth:"100%"}}}))((function(e){var t=e.onClick,n=e.iconColor,r=void 0===n?"white":n,i=e.icon,o=e.classes,a=e.maxWidth,l=void 0===a||a,c=I()(o.btn,!l&&o.fullWidthBtn);return E.createElement("div",{className:o.container},E.createElement(Q.zx,{size:"soloIcon",icon:i,iconColor:r,className:c,onClick:t}))})),nr=function(e){var t=e.videoEnabled,n=(0,r.bp)(),i=t?E.createElement(Q.hn,null):E.createElement(Q.GI,{lineColor:"rgba(225, 33, 71, 1)"});return E.createElement(tr,{icon:i,onClick:function(){return n.executeAction(yn,{video:!t})}})},rr=function(e){var t=e.audioEnabled,n=(0,r.bp)(),i=t?E.createElement(Q.Hs,{color:"white"}):E.createElement(Q.vY,{lineColor:"rgba(225, 33, 71, 1)"});return E.createElement(tr,{icon:i,onClick:function(){return n.executeAction(yn,{audio:!t})}})},ir=function(){var e=(0,r.bp)(),t=(0,E.useState)(!1),n=ee()(t,2),i=n[0],o=n[1];return E.createElement(tr,{icon:E.createElement(Q.LX,null),onClick:function(){i||e.executeAction(Se.V2,{dialogId:Gn.Js,withCloseIcon:!0,message:e.getText("AGENT_CLIENT_HANGUP_TITLE"),cancelButtonTitle:e.getText("CALL_SESSION_CLIENT_HANGUP_ABORT_BTN_LABEL"),buttonTitle:e.getText("AGENT_CLIENT_HANGUP_CONFIRM_BTN_LABEL"),callback:function(t){t&&(e.executeAction(jn),o(!0))}})},maxWidth:!1})};function or(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ar(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?or(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):or(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var lr=function(e){var t=e.showingVideoOverlay,n=e.pdaOpen,i=e.newMessages,o=e.isChatVisible,a=e.classes,l=e.onClick,c=(0,r.bp)(),s=I()(a.container,o&&!n&&a.chatVisible,n&&a.pdaContainer,t&&(0,q.isMobileDevice)()&&a.videoOverlayContainer),u=n||o?"rgba(42, 42, 42, 1)":"rgba(250, 250, 250, 1)",d=I()(a.notificationNumber,i>9&&a.numberSizeSmall,i>99&&a.numberSizeSmallest);i>99&&(i="99");var p=E.createElement("span",{className:a.iconWrapper},E.createElement(Q.kB,{type:"callcontrol",color:u}),0!==i&&!o&&E.createElement(A.E.div,{initial:"scale",animate:i?"scale":"",variants:{scale:{scale:[1,1.7,1,1]}},className:a.notificationBadge},E.createElement(Q.xv,{className:d},i)));return E.createElement(ne,{testId:"chat-control-button",ariaLabel:c.getText("ACTION_BAR_BUTTON_ARIA_LABEL_CHAT"),className:s,icon:p,onClick:function(){l&&l(S.Js.CHAT)}})};lr=(0,w.A1)(lr,["ChatStore"],(function(e,t){return{newMessages:e.ChatStore.getNumberUnread(),isChatVisible:t.currentTool===S.Js.CHAT}}));var cr=(0,N.Z)((function(){return{container:ar(ar({height:36,width:36,margin:0,padding:0,border:"2px solid transparent",borderRadius:"100%",transition:"unset",backgroundColor:"rgba(42, 42, 42, 0.15)",backdropFilter:"blur(4px)"},(0,re.pv)()),{},{"&:hover":{backgroundColor:"rgba(42, 42, 42, 0.15)"}}),videoOverlayContainer:{backgroundColor:"rgba(255, 255, 255, 0.15)"},pdaContainer:{backdropFilter:"blur(54px)",backgroundColor:"rgba(246, 246, 246, 0.8)",border:"2px solid white","&:hover":{backgroundColor:"rgba(246, 246, 246, 0.8)"}},chatVisible:{backgroundColor:"rgba(255, 255, 255, 1)","&:hover":{backgroundColor:"rgba(255, 255, 255, 1)"}},iconWrapper:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center"},notificationBadge:{display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"100%",top:-12,right:-11,height:16,width:16,backgroundColor:"rgba(225, 33, 71, 1)",position:"absolute"},notificationNumber:{height:16,width:16,margin:0,position:"absolute",color:"white",fontSize:"11px",lineHeight:"16px"},numberSizeSmall:{fontSize:"9px"},numberSizeSmallest:{fontSize:"7px"}}}))(lr),sr=n(20061);function ur(e,t){e.dispatch(kn.RECEIVED_MEETING_DATA,t)}function dr(e,t){e.dispatch(kn.RECEIVED_CLIENT_METADATA,t)}function pr(e,t){e.externalInterfaceService.emit("viddget:minimize"),e.dispatchRemote(Ht.CLIENT_MINIMIZED)}function mr(e){e.externalInterfaceService.emit("viddget:restore_minimized"),e.dispatchRemote(Ht.CLIENT_RESTORED_MINIMIZED)}function fr(e){e.externalInterfaceService.emitToEmbedInstance("goto-chat")}var hr=(0,sr.Z)((function(){return{coBrowseButton:{color:"#FFF",paddingLeft:"8px"}}}))((function(e){var t=e.classes,n=(0,r.bp)();return E.createElement(ne,{className:t.container,ariaLabel:n.getText("CO_BROWSE_BUTTON_LABEL"),icon:E.createElement(Q.n9,{type:"callcontrol",color:"#FAFAFA"}),onClick:function(){n.executeAction(Z,{target:"co_browse_button"}),n.executeAction(pr)},textElement:E.createElement(Q.xv,{className:t.coBrowseButton,truncateAt:150},n.getText("CO_BROWSE_BUTTON_LABEL")),testId:"cobrowse-control-button"})}));function gr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gr(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Er=(0,N.Z)((function(){return{clientContainer:vr(vr({height:36,width:36,margin:"0 0 0 8px",border:"2px solid transparent",borderRadius:"100%",backgroundColor:"rgba(42, 42, 42, 0.15)",transition:"width 0.1s, border-radius 0.1s 0.1s",backdropFilter:"blur(4px)"},(0,re.pv)()),{},{"&:hover":{backgroundColor:"rgba(42, 42, 42, 0.15)"}}),icon:{"-webkit-transform":"rotate(180deg)","-moz-transform":"rotate(180deg)","-ms-transform":"rotate(180deg)","-o-transform":"rotate(180deg)",transform:"rotate(180deg)"},videoOverlayContainer:{backgroundColor:"rgba(255, 255, 255, 0.15)"}}}))((function(e){var t=e.classes,n=e.showingVideoOverlay,i=(0,r.bp)(),o=I()(t.clientContainer,(0,q.isMobileDevice)()&&n&&t.videoOverlayContainer);return E.createElement(ne,{onClick:function(){i.executeAction(z),i.executeAction(pr)},ariaLabel:i.getText("ACTION_BAR_BUTTON_ARIA_LABEL_MINIMIZE"),icon:E.createElement(Q.yZ,{className:t.icon,color:"rgba(250, 250, 250, 1)"}),className:o,testId:"minimize-control-button"})})),Sr=(0,w.A1)((function(e){var t=e.isChatVisible,n=e.newMessages,i=e.onClick,o=e.classes,a=(0,r.bp)(),l=I()(!t&&n&&o.hasChanges);return E.createElement(ne,{testId:"chat-control-button",ariaLabel:a.getText("ACTION_BAR_BUTTON_ARIA_LABEL_CHAT"),className:l,icon:E.createElement(Q.kB,{type:"callcontrol",color:"rgba(250, 250, 250, 1)"}),onClick:function(){i&&i(S.Js.CHAT)},count:!t&&n,badgeTextColor:"rgba(250, 250, 250, 1)",active:t})}),["ChatStore"],(function(e,t){return{newMessages:e.ChatStore.getNumberUnread(),isChatVisible:t.currentTool===S.Js.CHAT}})),Tr=(0,N.Z)((function(){return{hasChanges:{position:"relative","&::after":{position:"absolute",top:"5px",transform:"translateX(calc(50% + 2px))",width:"6px",height:"6px",background:"#E12147",borderRadius:"10px",content:'""'}}}}))(Sr),br=(0,w.A1)((function(e){var t=e.virtualTryOnEnabled,n=e.productHydrationEnabled,i=e.coBrowsingEnabled,o=e.cartIntegrationEnabled,a=e.pdaOpen,l=e.videoEnabled,c=e.audioEnabled,s=e.clientIsMobile,u=e.callStatus,d=e.displayState,p=e.showMicInputCallout,m=e.showCamInputCallout,f=e.hasAudioPermission,h=e.hasCameraPermission,g=e.showOverlay,v=e.compareIsOpen,T=e.tryingOnProduct,b=e.classes,_=e.currentTool,y=(0,r.bp)(),C=u===S.kp.RUNNING||u===S.kp.PAUSED,x=function(e){var t=_!==e;return y.executeAction(Z,{target:"tool_toggle",data:{activate:t,tool:e}}),t?y.executeAction(R,e):y.executeAction(k)},O=u===S.kp.CONNECTING||u===S.kp.RUNNING||u===S.kp.PAUSED||u===S.kp.RECONNECTING||u===S.kp.FORWARDING,N=u===S.kp.RUNNING&&u!==S.kp.PAUSED;if(!O)return null;var w=d===S.LT.SCREENSHARE,L=I()(b.mobileContainer,a&&u!==S.kp.PAUSED&&b.mobileContainerPdaOpen),D=[{item:E.createElement(er,{key:"call-duration"}),position:1,show:C},{item:E.createElement(hr,{key:"co-browse"}),position:2,show:C&&i}],P=[{item:E.createElement(Nn,{key:"mic",displayState:d,audioEnabled:c,showMicInputCallout:p&&!w,hasAudioPermission:f}),position:2,show:N},{item:E.createElement(wn,{key:"cam",displayState:d,videoEnabled:l,showCamInputCallout:m&&!w,hasCameraPermission:h}),position:3,show:N},{item:E.createElement(Fn,{key:"hangup"}),position:4,show:!0}],M=[{item:E.createElement(Xn,{key:"vto",onClick:x,currentTool:_}),position:1,show:t&&C},{item:E.createElement(Ee,{key:"cart",currentTool:_,onClick:x}),position:2,show:N&&(o||i)},{item:E.createElement(Tr,{key:"chat",currentTool:_,onClick:x}),position:3,show:C},{item:E.createElement(be,{key:"settings",displayState:d,currentTool:_,onClick:x}),position:4,show:N&&!s}],B=[{item:E.createElement(Qn,{key:"close-pda"}),position:1,show:C&&a},{item:E.createElement(Yn,{pdaOpen:a,showingVideoOverlay:g,key:"current-products"}),position:2,show:C&&n&&!v}],j=[{item:E.createElement(cr,{showingVideoOverlay:g,currentTool:_,onClick:x,pdaOpen:a,key:"chat"}),position:1,show:C},{item:E.createElement(Ee,{showingVideoOverlay:g,currentTool:_,onClick:x,pdaOpen:a,key:"cart"}),position:2,show:N&&(o||i)},{item:E.createElement(Er,{showingVideoOverlay:g,key:"minimize"}),position:3,show:C&&i}],U=[{item:E.createElement(ir,{key:"hangup"}),position:1,show:O&&!a},{item:E.createElement(rr,{key:"mobile-mic",audioEnabled:c}),position:2,show:N},{item:E.createElement(nr,{key:"mobile-cam",videoEnabled:l}),position:3,show:N}],G=0;v&&(G+=S.q0.HEADER_HEIGHT),T&&(G+=S.q0.HEADER_HEIGHT);var F={initial:{display:"none",bottom:-S.A3.CLIENT_MOBILE_BOTTOM_CONTROLS_HEIGHT},show:{display:"",bottom:re.ZP.smallSpace+G,transition:{duration:Gn.iG,ease:"easeInOut"}},hide:{bottom:-S.A3.CLIENT_MOBILE_BOTTOM_CONTROLS_HEIGHT,transition:{duration:Gn.iG,ease:"easeInOut"},transitionEnd:{display:"none"}}},W=u===S.kp.PAUSED||u===S.kp.RECONNECTING;return s?E.createElement("nav",{className:L},E.createElement("div",{className:b.topMobileWrapper},E.createElement("div",{className:b.topLeftMobileWrapper},K(B)),E.createElement("div",{className:b.topRightMobileWrapper},K(j))),E.createElement(A.E.div,{className:b.bottomMobileWrapper,initial:"initial",animate:(g||W)&&C?"show":"hide",variants:F},(!a||W)&&K(U))):E.createElement("nav",{className:b.container},E.createElement("div",{className:b.leftWrapper},K(D)),E.createElement("div",{className:b.middleWrapper},K(P)),E.createElement("div",{className:b.rightWrapper},K(M)))}),["ProductStore","CallSessionStore","ClientCallControlStore","SystemDialogStore","ViewportStore","CompareStore.visibilityChange","MediaStreamStore","ToolStore","VirtualTryOnStore"],(function(e){var t=e.ClientCallControlStore.getActiveMediaCallouts(),n=t.mic,r=t.cam,i=e.ToolStore.getCurrentTool(),o=e.SystemDialogStore.getDialogs().length,a=!!e.ProductStore.focusedExternalId,l=e.ClientCallControlStore.getDisplayState(),c=!e.CallSessionStore.getClientInputHasBeenEnabled()&&e.CallSessionStore.initialMode!==S.LS.TEXT_CHAT&&i!==S.Js.CHAT&&!o,s=c&&n,u=c&&r&&!n,d=e.MediaStreamStore.getLocalMediaStream();return{virtualTryOnEnabled:sn().get(e.CallSessionStore.getMerchantIntegration(),"virtualTryOn.enabled",!1),productHydrationEnabled:sn().get(e.CallSessionStore.getMerchantIntegration(),"productHydration.enabled",!1),coBrowsingEnabled:sn().get(e.CallSessionStore.getMerchantIntegration(),"coBrowsing.enabled",!1),cartIntegrationEnabled:sn().get(e.CallSessionStore.getMerchantIntegration(),"cartIntegration.enabled",!1),pdaOpen:a,compareIsOpen:e.CompareStore.visible,tryingOnProduct:e.VirtualTryOnStore.isVTOActive,callStatus:e.CallSessionStore.getStatus(),clientIsMobile:(0,q.isMobileDevice)(),videoEnabled:Ve(d),audioEnabled:ze(d),displayState:l,showOverlay:!a&&e.ClientCallControlStore.getCallInformationDisplayStatus(),showMicInputCallout:s,showCamInputCallout:u,hasCameraPermission:e.MediaStreamStore.hasCameraPermission,hasAudioPermission:e.MediaStreamStore.hasAudioPermission,currentTool:i}})),_r=(0,N.Z)((function(e){return{container:{display:"flex",justifyContent:"center",alignItems:"center",bottom:0,left:0,right:0,width:"100%",height:S.A3.MENU_HEIGHT,backgroundColor:e.palette.primary.main,position:"absolute",zIndex:4,direction:"ltr"},leftWrapper:{display:"flex",justifyContent:"flex-start",flex:1,marginLeft:22},middleWrapper:{display:"flex",justifyContent:"center",flex:1},rightWrapper:{display:"flex",justifyContent:"flex-end",flex:1,marginRight:22},mobileContainer:{display:"flex",justifyContent:"center",alignItems:"center",zIndex:4,pointerEvents:"none",backgroundColor:"transparent",width:"100%",height:"100%",position:"absolute"},mobileContainerPdaOpen:{height:"50px"},topMobileWrapper:{display:"flex",position:"absolute",width:"100%",top:re.ZP.smallSpace},topLeftMobileWrapper:{display:"flex",justifyContent:"flex-start",flex:1,marginLeft:re.ZP.smallSpace},topRightMobileWrapper:{display:"flex",justifyContent:"flex-end",flex:1,marginRight:re.ZP.smallSpace},bottomMobileWrapper:{position:"absolute",bottom:re.ZP.smallSpace,padding:"0 ".concat(re.ZP.smallSpace/2,"px"),width:"100%",display:"flex",justifyContent:"center",flexDirection:"row"}}}))(br),yr=function(e){var t,n=e.callStatus,i=(0,r.bp)(),o=(0,In.Z)(),a={color:(0,cn.get)(o,"popup.textColor",o.palette.text.main)};return n===S.kp.STARTING&&(t=E.createElement("div",{className:"overlay"},E.createElement("div",{className:"holder"},E.createElement(Q.aN,{position:"relative"}),E.createElement("div",{className:"text-loading"},E.createElement(Q.Dx,{style:a},i.getText("CLIENT_CONNECTING_WITH_AGENT_TITLE")),E.createElement(Q.xv,{style:a,className:"mt"},i.getText("CLIENT_CONNECTING_WITH_AGENT")))))),t||null},Cr=(0,N.Z)({pill:{minHeight:"52px",borderRadius:"56px",backgroundColor:"rgba(0, 0, 0, 0.36)",backdropFilter:"blur(80px)",display:"flex",justifyContent:"center",alignItems:"center"},"@keyframes dots":{"0%, 20%":{color:"rgba(0,0,0,0)",textShadow:".25em 0 0 rgba(0,0,0,0), .5em 0 0 rgba(0,0,0,0)"},"40%":{color:"rgb(255, 255, 255)",textShadow:".25em 0 0 rgba(0,0,0,0), .5em 0 0 rgba(0,0,0,0)"},"60%":{textShadow:".25em 0 0 rgb(255, 255, 255), .5em 0 0 rgba(0,0,0,0)"},"80%, 100%":{textShadow:".25em 0 0 rgb(255, 255, 255), .5em 0 0 rgb(255, 255, 255)"}},text:{position:"relative",color:"rgb(255, 255, 255)",fontSize:"16px",letterSpacing:"0.03em",fontWeight:"500",textAlign:"center",padding:"10px 18px"},textMinimized:{fontSize:"14px"},loadingDots:{padding:"10px 22px","&::after":{lineHeight:"0px",fontSize:"1.6em",content:'"."',animation:"$dots 1s steps(5, end) infinite"}}})((function(e){var t=e.backgroundColor,n=e.color,r=e.text,i=e.minimized,o=e.indicateLoading,a=e.classes,l=I()(a.text,i&&a.textMinimized,o&&a.loadingDots);return E.createElement("div",{className:a.pill,style:{backgroundColor:t}},E.createElement("p",{className:l,style:{color:n}},r))})),xr=(n(26833),n(6479)),Or=n.n(xr),Ir=function(){return Nr()&&(0,q.isMobileDevice)()?window.innerHeight:window.innerWidth},Ar=function(){return Nr()&&(0,q.isMobileDevice)()?window.innerWidth:window.innerHeight},Nr=function(){var e,t;return!(null===(e=window.screen)||void 0===e||null===(t=e.orientation)||void 0===t||!t.angle)||!!window.orientation};function wr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wr(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var kr="plain",Lr="closable",Dr="collapsable",Pr="drawer",Mr={initial:{translateY:-20,opacity:0},open:{translateY:0,opacity:1},closed:{translateY:-20,opacity:0}},Br={initial:{translateY:Ar(),opacity:1},open:{translateY:0,opacity:1},closed:{translateY:Ar(),opacity:1}},jr={open:{height:"auto",transitionEnd:{overflow:"auto"}},collapsed:{height:0,overflow:"hidden"}},Ur=(0,sr.Z)((function(e){return{root:{zIndex:5,margin:"".concat(re.ZP.smallSpace,"px"),position:"absolute",display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",borderRadius:"8px",background:"#fff",outline:"1px solid rgba(0, 0, 0, 0.05)",boxShadow:"0px 14px 20px -5px rgba(0, 0, 0, 0.16)"},rootCollapsable:{bottom:0,margin:0,width:"100%",borderRadius:"8px 8px 0 0"},header:{maxHeight:S.q0.HEADER_HEIGHT,width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #F6F6F6",padding:"20px 16px 16px 16px"},mobileHeader:{borderBottom:"1px solid transparent",padding:"16px"},headerTitleText:{width:"100%",textAlign:null!=e&&e.rtl?"right":"left",fontWeight:"500",lineHeight:"16px",fontSize:"18px",letterSpacing:"-0.01em",color:"#171717",margin:0},mobileHeaderTitleText:{lineHeight:"20px",fontSize:"14px"},headerCloseButton:Rr(Rr({display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",padding:"7px",borderRadius:"100%",height:"24px",width:"24px",background:"white",border:"none"},(0,re.pv)()),!(0,q.isMobileDevice)()&&{"&:hover":{background:"rgba(0, 0, 0, 0.12)"}}),sheetContent:Rr({maxHeight:"100%",width:"100%"},(0,re.EZ)()),overlay:{height:"100%",width:"100%",backgroundColor:"rgba(0, 0, 0, 0.25)",position:"absolute",borderRadius:"8px",zIndex:1}}}))((function(e){var t=e.classes,n=e.type,i=void 0===n?kr:n,o=e.overrideClasses,a=e.onClose,l=e.onCollapse,c=e.title,s=e.headerItems,u=void 0===s?null:s,d=e.emptyHeader,p=void 0!==d&&d,m=e.nonCollapsable,f=void 0!==m&&m,h=e.children,g=e.style,v=void 0===g?{}:g,S=e.testId,T=e.overrideAnimationVariants,b=e.animationComplete,_=e.collapsed,y=e.showOverlay,C=(0,r.bp)(),x=(0,E.useState)(_),O=ee()(x,2),N=O[0],w=O[1];(0,E.useEffect)((function(){N&&i!==Dr&&w(!1),"boolean"==typeof _&&N!==_&&w(_)}),[i,N,_]);var R=I()(t.root,null==o?void 0:o.root,(i===Dr||i===Pr)&&t.rootCollapsable),k=function(e){e.stopPropagation(),f||(i===Lr&&"function"==typeof a?a():i===Dr?(w(!N),"function"==typeof l&&l(!N)):i===Pr&&"function"==typeof a&&a())},L=i===Dr||i===Pr?(null==T?void 0:T.collapse)||Br:(null==T?void 0:T.default)||Mr,D=i!==Dr&&i!==Pr||!N?"open":"collapsed",P="div";i===Dr&&(P=Q.L9);var M={closeIcon:{width:"14px",height:"14px"},arrow:{width:"24px",height:"24px"},arrowSvg:{viewBox:"0 0 24 24"},arrowPath:{strokeWidth:"2",d:"M6 15L12 9L18 15",stroke:"#171717"}},B=I()(t.header,(0,q.isMobileDevice)()&&t.mobileHeader),j=I()(t.headerTitleText,(0,q.isMobileDevice)()&&t.mobileHeaderTitleText);return E.createElement(A.E.div,{style:v,className:R,initial:"initial",animate:"open",exit:"closed",variants:L,transition:{duration:Gn.iG},onAnimationComplete:function(e){"function"==typeof b&&b(e)},"data-testid":S},E.createElement(P,{className:B,onClick:i===Dr?k:function(){}},!!c&&E.createElement(Q.xv,{className:j},c),u,i!==kr&&!p&&E.createElement("button",{className:t.headerCloseButton,onClick:k,"data-testid":i===Lr&&"close-button",title:C.getText(i===Lr?"SHEET_CLOSE":"SHEET_COLLAPSE")},(i===Lr||i===Pr)&&E.createElement(Q.aM,{type:"small",style:M.closeIcon,color:"#171717"}),i===Dr&&E.createElement(Q.EU,{direction:!N&&"up",style:M.arrow,svg:Rr(Rr({},M.arrow),M.arrowSvg),path:M.arrowPath}))),E.createElement(A.E.div,{className:t.sheetContent,"data-testid":"sheet-content",animate:D,variants:(null==T?void 0:T.content)||jr,transition:{duration:Gn.iG}},h),y&&E.createElement("div",{className:t.overlay}))})),Gr=Ur,Fr=n(53869),Wr=S.ir.TOP_LEFT,Hr=S.ir.BOTTOM_LEFT,Vr=(0,N.Z)((function(e){return{container:{zIndex:100,backgroundColor:e.palette.white.main,position:"absolute",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",borderRadius:4,padding:"8px 0",minWidth:222,boxShadow:"0px 2px 6px rgba(0, 0, 0, 0.04), 0px 0px 1px rgba(0, 0, 0, 0.04), 0px 16px 24px rgba(0, 0, 0, 0.06)"},wrapper:{width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",height:36,"&:hover":{backgroundColor:e.palette.gray[10]}},activeItem:{backgroundColor:e.palette.gray[10]},icon:{display:"flex",justifyContent:"center",alignItems:"center",minWidth:"20px",maxWidth:"20px",margin:"0 0 0 16px"},text:{userSelect:"none",fontSize:"14px",lineHeight:"18px",fontWeight:500,margin:"0 16px",whiteSpace:"nowrap",animation:"none"}}}))((function(e){var t=e.position,n=void 0===t?Wr:t,r=e.activeItem,i=e.options,o=void 0===i?[]:i,a=e.space,l=void 0===a?8:a,c=e.width,s=e.height,u=e.truncateAt,d=e.classes,p={container:{transform:function(){switch(n){case Wr:return"translate(calc(-100% + ".concat(c,"px), calc(-100% - ").concat(l,"px))");case Hr:return"translate(calc(-100% + ".concat(c,"px), ").concat(l+s,"px)")}}()}};return E.createElement("div",{className:d.container,style:p.container},o.map((function(e){var t=I()(d.wrapper,r===e.identifier&&d.activeItem);return E.createElement(Q.L9,{className:t,onClick:e.onClick,ariaLabel:e.text,key:e.identifier},e.icon&&E.createElement("span",{className:d.icon},e.icon),E.createElement(Q.xv,{truncateAt:u,className:d.text},e.text))})))})),zr=(0,sr.Z)((function(){return{container:{padding:0,display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",borderRadius:"100%",background:"transparent",border:"none"},iconWrapper:{display:"flex"},settingsDotIcon:{"& path":{fill:"#171717"}}}}))((function(e){var t,n=e.className,i=e.options,o=void 0===i?[]:i,a=e.classes,l=(0,r.bp)().executeAction,c=(0,E.useState)(!1),s=ee()(c,2),u=s[0],d=s[1],p=(0,E.useRef)();(0,E.useEffect)((function(){var e=function(e){p.current&&!p.current.contains(e.target)&&(d(!1),l(L,{show:!1}))};return document.addEventListener("mouseup",e),function(){return document.removeEventListener("mouseup",e)}}),[l]);var m=I()(a.container,n);return E.createElement("button",{className:m,onClick:function(){u?(d(!1),l(L,{show:!1})):(d(!0),l(L,{show:!0}))}},E.createElement("span",{ref:p,className:a.iconWrapper},E.createElement(Q.wA,{className:a.settingsDotIcon}),u&&!(null===(t=p.current)||void 0===t||!t.clientWidth)&&E.createElement(Vr,{width:p.current.clientWidth,height:p.current.clientHeight,options:o,position:S.ir.BOTTOM_LEFT,truncateAt:235})))}));function Zr(e,t){e.dispatchLocalAndRemote(S.B0.ADD,t)}function Yr(e,t){e.dispatchLocalAndRemote(S.B0.TRY_ON_REMOVE,t)}function Kr(e,t){if(!t)throw new Error("tryOn payload must include 'idList' or a valid 'id'");t.hasOwnProperty("idList")?e.dispatchLocalAndRemote(S.B0.TRY_ON,t):e.dispatchLocalAndRemote(S.B0.TRY_ON_APPEND,t)}function qr(e,t){e.dispatchLocalAndRemote(S.B0.PRODUCT_LOADED,t)}function Qr(e){e.dispatch(S.B0.SDK_LOADED)}function Xr(e,t){e.dispatch(S.B0.SET_FOCUS,t)}var Jr,$r=(0,sr.Z)((function(){return{btn:{marginRight:12}}}))((0,w.S1)((function(e){var t=e.classes,n=e.tryOnIds,i=(0,r.bp)(),o=i.getText,a=i.executeAction,l=[{identifier:"end-tryon",text:o("VIRTUAL_TRY_ON_END_TRY_ON"),onClick:function(){a(Yr),a(L,{show:!1})}},{identifier:"remove-all-tryon",text:o("VIRTUAL_TRY_ON_REMOVE_ALL_PRODUCTS"),onClick:function(){a(Yr,{hide:!0}),a(L,{show:!1})}}];return 0===n.length?null:E.createElement(zr,{options:l,className:t.btn})}),["VirtualTryOnStore"],(function(e){return{tryOnIds:e.VirtualTryOnStore.tryOnIds}}))),ei=function(e){var t;return null===(t=v()({},S.Js.VIRTUAL_TRY_ON,[{item:E.createElement($r,{key:"vto-more-actions"}),show:!1}])[e])||void 0===t?void 0:t.filter((function(e){return e.show})).map((function(e){return e.item}))},ti=function(e){return!!e&&Object.values(S.Js).some((function(t){return t===e}))},ni={open:{height:(0,q.isMobileDevice)()?"auto":"100%",width:"100%",transitionEnd:{overflow:"auto"}},collapsed:{height:0,overflow:"hidden",width:"100%"}},ri={initial:{translateX:S.BW.WIDTH,opacity:1},open:{translateX:0,opacity:1},closed:{translateX:S.BW.WIDTH,opacity:1}},ii=(0,sr.Z)((function(){return{root:{zIndex:5,margin:re.ZP.smallSpace,position:"absolute",display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",borderRadius:"8px",background:"#fff",outline:"1px solid rgba(0, 0, 0, 0.05)",boxShadow:"0px 14px 20px -5px rgba(0, 0, 0, 0.16)",width:S.BW.WIDTH,right:"0",top:"0",bottom:"".concat(S.A3.MENU_HEIGHT,"px")},mobileWithCompare:{paddingBottom:"".concat(S.q0.HEADER_HEIGHT,"px")},tool:{padding:"".concat((0,q.isMobileDevice)()?0:16,"px"),width:"100%",position:"relative",height:"100%"}}}))((0,w.ZP)((function(e){var t,n=e.classes,i=e.tool,o=e.isCompareOpen,a=e.showToolOverlay,l=e.numberOfProductsTriedOn,c=(0,r.bp)(),s=c.toolService.getTool(i)||{},u=s.Component,d=s.name,p=(0,E.useState)(!1),m=ee()(p,2),f=m[0],h=m[1],g=n.tool,v=Or()(n,["tool"]),T=i===S.Js.VIRTUAL_TRY_ON&&a;return E.createElement(Fr.M,null,ti(i)&&E.createElement(Gr,{title:(t=c.getText(d),i===S.Js.VIRTUAL_TRY_ON&&l>0?"".concat(t," (").concat(l,")"):t),type:(0,q.isMobileDevice)()?i===S.Js.VIRTUAL_TRY_ON?Dr:Pr:Lr,onClose:function(){return c.executeAction(Z,{target:"tool_toggle",data:{activate:!1,tool:i}}),c.executeAction(k)},showOverlay:T,testId:"sidebar",overrideClasses:(0,q.isMobileDevice)()?o?{root:v.mobileWithCompare}:{}:v,overrideAnimationVariants:{content:ni,default:ri},animationComplete:function(e){h("open"===e)},headerItems:ei(i)},E.createElement("div",{className:g},E.createElement(u,{isOpen:f}))))}),["ToolStore","CompareStore","VirtualTryOnStore"],(function(e){return{numberOfProductsTriedOn:e.VirtualTryOnStore.tryOnIds.length,tool:e.ToolStore.getCurrentTool(),isCompareOpen:e.CompareStore.visible,showToolOverlay:e.ToolStore.hasToolOverlay()}})));Jr=n(98850).Z;var oi={sidebarOpen:{width:"calc(100% - ".concat(S.BW.WIDTH+S.BW.MARGIN,"px)")},sidebarClosed:{width:"100%"}},ai={duration:Gn.iG,type:"ease"},li=(0,w.ZP)((function(e){var t=e.classes,n=e.status,i=e.callStatusBackground,o=e.minimized,a=void 0!==o&&o,l=e.focusedProduct,c=e.isRemoteBusy,s=e.isSplitScreen,u=e.hasActiveTool,d=(0,r.bp)(),p=(0,E.useState)({}),m=ee()(p,2),f=m[0],h=m[1];(0,E.useEffect)((function(){var e={text:"",indicateLoading:!1,background:null,backgroundColor:"#2a2a2a",showResumeBtn:!1,hide:!1,alwaysShowCallInfo:!1};switch(n){case S.kp.STARTING:case S.kp.READY:e.text="CALL_SESSION_WAITING_FOR_CLIENT",e.indicateLoading=!0,e.alwaysShowCallInfo=!0,e.hide=!0;break;case S.kp.WAITING:e.text=S.kp.CONNECTING,e.indicateLoading=!0;break;case S.kp.CONNECTING:e.text=n,e.indicateLoading=!0;break;case S.kp.RECONNECTING:case S.kp.FORWARDING:e.text=n,e.indicateLoading=!0,e.background=i;break;case S.kp.DISCONNECTING:case S.kp.DISCONNECTED:e.text="CALL_SESSION_STATUS_DISCONNECTING",e.indicateLoading=!0;break;case S.kp.PAUSED:e.text="AGENT_CLIENT_PAUSED_MESSAGE",e.background=i,l&&!a&&(e.hide=!0),e.alwaysShowCallInfo=!0;break;default:e.hide=!0}h(e)}),[n,i,a,l,c,s]);var g=f.text,v=f.indicateLoading,T=f.background,b=f.backgroundColor,_=f.hide,y=f.showResumeBtn,C=f.alwaysShowCallInfo;if(_)return null;var x=I()(t.container,((0,q.isMobileDevice)()||a)&&t.fullSize);return E.createElement(A.E.div,{className:x,style:{backgroundColor:b},transition:ai,variants:oi,initial:!u||(0,q.isMobileDevice)()||a?"sidebarClosed":"sidebarOpen",animate:!u||(0,q.isMobileDevice)()||a?"sidebarClosed":"sidebarOpen"},E.createElement(Jr,{alwaysShow:C}),T&&E.createElement("img",{src:T,className:t.background,alt:""}),y?E.createElement("div",{className:t.resumeButton},E.createElement(void 0,{showLabel:!0})):E.createElement("div",{className:t.pillWrapper},E.createElement(Cr,{text:d.getText(g),minimized:a,indicateLoading:v})))}),["CallSessionStore","ProductStore","VideoContainerStore","ToolStore"],(function(e){return{callStatusBackground:e.CallSessionStore.getStreamCaptureImage(),focusedProduct:e.ProductStore.focusedExternalId,isRemoteBusy:e.CallSessionStore.isRemoteBusy,isSplitScreen:e.VideoContainerStore.getSplitScreen(),hasActiveTool:ti(e.ToolStore.getCurrentTool())}})),ci={container:{display:"flex",width:"100%",height:"calc(100% - ".concat(S.A3.MENU_HEIGHT,"px)"),position:"absolute",alignItems:"center",pointerEvents:"none",userSelect:"none",zIndex:2},fullSize:{height:"100%",width:"100%"},background:{position:"absolute",top:0,left:0,height:"100%",width:"100%",objectFit:"cover",filter:"blur(35px)"},pillWrapper:{zIndex:1,margin:"auto",display:"flex",justifyContent:"center",padding:"10px 16px"},resumeButton:{position:"relative",margin:"auto"}},si=(0,N.Z)(ci)(li),ui=n(45697),di=n.n(ui);var pi=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(){return o()(this,i),r.apply(this,arguments)}return l()(i,[{key:"render",value:function(){var e;return this.props.visible?(this.props.data.message&&(e=E.createElement("div",{className:"message"},this.props.data.message)),E.createElement("div",{className:"call-problem-indicator"},E.createElement("div",{className:"loader-holder"},E.createElement(Q.aN,{color:"white"})),e)):null}}]),i}(x);pi.propTypes={visible:di().bool};var mi=pi=(0,w.ZP)(pi,["CallSessionStore"],(function(e){return{visible:e.CallSessionStore.shouldShowProblemIndicator(),data:e.CallSessionStore.getProblemIndicator()}})),fi=n(38769),hi=n(74516),gi=n(81752),vi=n(40718),Ei=n(99918),Si=(0,N.Z)((function(e){return{container:{position:"relative",width:"130px",minHeight:"288px",display:"flex",flexDirection:"column",transition:"all .1s linear",cursor:"pointer",animation:"fadeIn 0.5s 1",boxSizing:"content-box",border:"1px solid transparent"},containerMinimized:{scrollSnapAlign:"start"},clickableContainer:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:1},imageWrapper:{position:"relative",display:"flex",justifyContent:"center",height:"220px",backgroundColor:"rgba(255, 255, 255, 1)","& span":{width:"100%"}},image:{width:"130px",height:"220px",objectFit:"cover",background:e.palette.white.main,position:"absolute"},largeCard:{width:"195px"},placeholderImageOverlay:{pointerEvents:"none",position:"absolute",top:0,bottom:0,left:0,right:0,background:"#000",opacity:.4},textWrapper:{padding:"4px 4px 12px",maxHeight:"68px"},title:{fontWeight:500,fontSize:"14px",lineHeight:"17px",color:e.palette.white.main,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",animation:"unset",transition:"unset",margin:"2px 0"},attributes:{color:e.palette.white.main,maxWidth:"100%",whiteSpace:"nowrap",textOverflow:"ellipsis",fontSize:"12px",lineHeight:"16px",fontWeight:400,overflow:"hidden",margin:"2px 0"},priceWrapper:{display:"flex",flexDirection:"row",flexWrap:"wrap"},currentPrice:{fontSize:"12px",lineHeight:"16px",fontWeight:400,margin:"0",color:e.palette.white.main},originalPrice:{fontSize:"12px",lineHeight:"16px",fontWeight:400,margin:"0 0 0 4px",color:"rgba(255, 255, 255, 0.7)",textDecoration:"line-through"},addToCartBtn:{zIndex:2,display:"none",position:"absolute",alignSelf:"flex-end",height:"32px",padding:"0 12px 2px",marginBottom:10,width:"auto",backgroundColor:"#2A2A2A",borderRadius:"6px",boxShadow:"0px 8px 16px rgba(0, 0, 0, 0.06), 0px 2px 6px rgba(0, 0, 0, 0.04), 0px 0px 1px rgba(0, 0, 0, 0.04)",border:"1px solid transparent",minWidth:88,animation:"unset",transition:"background-color 0.2s","& span":{fontSize:"12px",lineHeight:"24px",color:"#FFFFFF"},"&:disabled":{backgroundColor:"#747474"},"&:hover:not(:disabled)":{backgroundColor:"#343434"}},addToCartBtnShow:{display:"block"},dismissBtn:{zIndex:2,display:"block",top:"10px",left:"6px",backgroundColor:"rgba(52, 52, 52, 0.8)","&:hover":{backgroundColor:"rgba(52, 52, 52, 0.9);"},"& span":{color:"#fff"}},addVariantBtn:{zIndex:2,display:"block",bottom:"10px",left:"6px",marginBottom:0,backgroundColor:"rgba(52, 52, 52, 0.8)","&:hover":{backgroundColor:"rgba(52, 52, 52, 0.9);"},"& span":{color:"#fff"}},iconBar:{zIndex:2,height:"26px",display:"flex",justifyContent:"space-between",alignItems:"center",position:"absolute",top:"6px",left:"6px",right:"6px",pointerEvents:"none"},iconWrapper:{borderRadius:"100%",height:"26px",width:"26px",display:"flex",justifyContent:"center",alignItems:"center"},previewIconWrapper:{display:"none","-webkit-backdrop-filter":"blur(80px)",backdropFilter:"blur(80px)",backgroundColor:"rgba(0, 0, 0, 0.05)",pointerEvents:"auto","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.12)"}},displayFlex:{display:"flex"},previewIcon:{height:15},compareIconWrapper:{width:"20px",height:"20px"},saleBadge:{height:"16px",width:"32px",left:"9px",bottom:"54px",borderRadius:"2px",padding:"0px, 4px, 0px, 4px",textAlign:"center",position:"absolute",background:"rgba(225, 33, 71, 1)",color:"#fff",fontWeight:"500",fontSize:"9px",lineHeight:"16px"}}}))((function(e){var t,n,i=e.externalId,o=e.isUpdatingBasket,a=e.useLargeCard,l=(e.onOpenPreview,e.onAddToCart,e.onClick),c=e.className,s=e.classes,u=e.hideContextMenu,d=e.minimized,p=(e.checkingOut,e.onConfirmPlaceholder,e.onDismissPlaceholder,e.cartIntegrationEnabled,(0,r.bp)()),m=p.getStore("ProductStore").getProductByExternalId(i),f=(0,E.useState)(!1),h=ee()(f,2),g=h[0],v=h[1],T=(0,E.useState)(!1),b=ee()(T,2),_=(b[0],b[1]),y=(0,E.useState)(!1),C=ee()(y,2),x=C[0],O=C[1],A=(0,E.useState)(!1),N=ee()(A,2),w=N[0],R=N[1],k=(null==m?void 0:m.images)||[],L=(null==m?void 0:m.name)||(null==m?void 0:m.title),D=null==m||null===(t=m.price)||void 0===t?void 0:t.original,P=null==m||null===(n=m.price)||void 0===n?void 0:n.current,M=!!D&&D!==P,B=(0,gi.V4)(m),j=!p.getStore("ProductDrawerStore").isProductConfirmed(i);(0,E.useEffect)((function(){!o&&g&&(v(!1),_(!0),setTimeout((function(){_(!1)}),S.hj))}),[o]),(0,E.useEffect)((function(){}),[u]);var U=I()(s.container,a&&s.largeCard,c,"panel-card",d&&s.containerMinimized),G=(I()(s.iconWrapper,s.previewIconWrapper,"preview-icon",w&&s.displayFlex),I()(s.iconWrapper,s.compareIconWrapper,w&&s.displayFlex)),F=(I()(s.addToCartBtn,"add-to-cart-button",w&&s.addToCartBtnShow),I()(s.addToCartBtn,s.dismissBtn),I()(s.addToCartBtn,s.addVariantBtn),{loader:{height:"10px",width:"10px",borderColor:"#FFFFFF #FFFFFF transparent"},image:{objectFit:p.settings.get("styling.imageFit","cover"),width:a?"195px":"100%",maxHeight:"220px",borderRadius:"0"},saleTag:{left:a?"9px":"6px",bottom:a?"9px":"6px"}});return(0,Ei.Q)(m),E.createElement("div",{className:U,onBlur:function(e){e.currentTarget.contains(e.relatedTarget)||R(!1)},"data-testid":"product-card"},E.createElement(Q.L9,{onClick:function(){return l(i)},onFocus:function(){R(!0)},className:s.clickableContainer,"aria-labelledby":"".concat(i,"panelCard ").concat(i,"panelCardprice"),"data-testid":"product-card-clickable",onMouseEnter:function(){O(!0)},onMouseLeave:function(){O(!1),R(!1)},onContextMenu:function(e){}}),E.createElement("div",{className:s.imageWrapper},E.createElement(Q.S3,{src:(null==k?void 0:k.length)>1&&x?k[1]:null==k?void 0:k[0],size:S.Si.STAGE,alt:L,style:F.image,testId:"product-card-image"}),j&&E.createElement("div",{className:s.placeholderImageOverlay}),!j&&E.createElement("div",{className:s.iconBar},E.createElement("div",{className:G},!1),!1),!1,!1,!1,M&&E.createElement(vi.Z,{position:F.saleTag})),E.createElement("div",{className:s.textWrapper},E.createElement(Q.u,{text:L,width:250,useMousePosition:!0},E.createElement(Q.xv,{className:s.title,id:"".concat(i,"panelCard")},L)),!!B&&E.createElement(Q.u,{text:B,width:250,useMousePosition:!0},E.createElement(Q.xv,{className:s.attributes},B)),(null==m?void 0:m.price)&&E.createElement("div",{className:s.priceWrapper},E.createElement(Q.u,{text:p.getFormattedPrice(m),width:250,useMousePosition:!0},E.createElement(Q.xv,{className:s.currentPrice,id:"".concat(i,"panelCardprice")},p.getFormattedPrice(m))),M&&E.createElement(Q.u,{text:p.getFormattedPrice(m,{field:"original"}),styles:{textDecoration:"line-through"},width:250,useMousePosition:!0},E.createElement(Q.xv,{className:s.originalPrice},p.getFormattedPrice(m,{field:"original"}))))))})),Ti=function(e){var t=e.classes,n=e.minimized,i=e.onClickGrid,o=e.onClickList,a=e.isGridView,l=(0,r.bp)().getText,c=I()(t.container,!n&&t.open),s=I()(t.icon,a&&t.activeIcon),u=I()(t.icon,!a&&t.activeIcon),d=I()(t.overlay,"product-drawer-toggle-overlay",!a&&t.overlayList);return E.createElement("div",{className:c},E.createElement("div",{className:d}),E.createElement(Q.u,{text:l("AGENT_TOOL_CURRENT_PRODUCTS_GRID_VIEW_BUTTON"),placement:"top",delay:1},E.createElement(Q.L9,{tabIndex:n?-1:0,className:s,onClick:i,ariaLabel:l("AGENT_TOOL_CURRENT_PRODUCTS_GRID_VIEW_BUTTON"),"data-testid":"product-drawer-set-gridview"},E.createElement(Q.qh,null))),E.createElement(Q.u,{text:l("AGENT_TOOL_CURRENT_PRODUCTS_LIST_VIEW_BUTTON"),placement:"top",delay:1},E.createElement(Q.L9,{tabIndex:n?-1:0,className:u,onClick:o,ariaLabel:l("AGENT_TOOL_CURRENT_PRODUCTS_LIST_VIEW_BUTTON"),"data-testid":"product-drawer-set-listview"},E.createElement(Q.Gz,null))))};Ti.propTypes={classes:di().object.isRequired,minimized:di().bool.isRequired,onClickGrid:di().func.isRequired,onClickList:di().func.isRequired,isGridView:di().bool.isRequired};var bi=(0,N.Z)((function(e){return{container:{width:"78px",pointerEvents:"none",display:"flex",borderRadius:"6px",margin:10,opacity:0,transition:"all .15s",direction:null!=e&&e.rtl?"rtl":"ltr","&:hover":{backgroundColor:"rgba(246, 246, 246, 0.15)"},"&:hover > .product-drawer-toggle-overlay":{backgroundColor:"rgba(0, 0, 0, 0.25)"}},open:{pointerEvents:"auto",opacity:1},overlay:{position:"absolute",zIndex:2,pointerEvents:"none",height:40,width:39,transition:"all 0.15s",borderRadius:"6px"},overlayList:{transform:"translateX(100%)"},icon:{width:39,opacity:.4,display:"flex",alignItems:"center",borderRadius:"6px",zIndex:2,transition:"opacity .15s","&:hover":{opacity:1}},activeIcon:{opacity:1}}}))(Ti),_i=(0,N.Z)((function(e){return{container:{position:"relative",width:"100%",transition:"background-color 0.2s",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.36)"},containerClickable:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},toggleButton:{display:"inline-flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",margin:"10px 0 10px 10px",padding:"10px",height:"40px",borderRadius:"8px",transition:"background-color 0.2s",zIndex:1,"&:hover":{backgroundColor:"rgba(246, 246, 246, 0.15)"},"&:hover > .shortcut-wrapper":{"&.shortcut-wrapper":{borderColor:"rgba(250, 250, 250, 0.25)"}}},toggleText:{marginLeft:null!=e&&e.rtl?"unset":"14px",marginRight:null!=e&&e.rtl?"14px":"unset",textAlign:"left",fontWeight:"500",lineHeight:"18px",color:"#EFEFEF"},shortcutWrapper:{margin:"0 0 0 8px",backgroundColor:"rgba(27, 29, 31, 0.2)",border:"1px solid rgba(250, 250, 250, 0.1)",borderRadius:"4px",transition:"border-color 0.2s"},shortcutKey:{fontSize:"13px",lineHeight:"18px",fontWeight:"500",textAlign:"center",width:"18px",height:"18px",margin:"0",color:"#FAFAFA"}}}))((function(e){var t=e.toggleMinimized,n=e.minimized,i=e.classes,o=e.toggleGridView,a=e.isGridView,l=(0,r.bp)(),c={svg:{width:"14",height:"9",viewBox:"0 0 14 9"},path:{d:"M1 1L7 7L13 1",stroke:"#fff",strokeWidth:"2"}},s=function(){return t(!n)},u=I()(i.container),d=I()(i.toggleText),p=I()(i.shortcutWrapper,"shortcut-wrapper"),m=I()(i.shortcutKey);return E.createElement("div",{className:u},E.createElement(Q.L9,{className:i.containerClickable,onClick:s,tabIndex:-1,ariaLabel:l.getText("AGENT_TOOL_CURRENT_PRODUCTS_Z_BUTTON")}),E.createElement(Q.L9,{className:i.toggleButton,onClick:s,ariaLabel:l.getText("PRODUCT_LIST_HEADER_LABEL"),"data-testid":"toggle-products-drawer"},E.createElement(Q.EU,{direction:n?"up":"down",translateY:1,path:c.path,svg:c.svg,style:{height:"14px"}}),E.createElement(Q.xv,{className:d},l.getText("PRODUCT_LIST_HEADER_LABEL")),E.createElement(Q.u,{text:l.getText("AGENT_TOOL_CURRENT_PRODUCTS_Z_BUTTON"),placement:"top",width:250},E.createElement("div",{className:p},E.createElement(Q.xv,{className:m},"Z")))),E.createElement(bi,{onClickList:function(e){e.stopPropagation(),o(!1)},onClickGrid:function(e){e.stopPropagation(),o(!0)},isGridView:a,minimized:n}))})),yi=function(e){var t,n,i,o,a,l=e.externalId,c=e.onClick,s=e.classes,u=e.onClickAdd,d=(e.onOpenPreview,e.isUpdatingBasket),p=e.hideContextMenu,m=e.minimized,f=(e.checkingOut,e.onConfirmPlaceholder,e.onDismissPlaceholder,e.cartIntegrationEnabled),h=(0,r.bp)(),g=h.getStore("ProductStore").getProductByExternalId(l),v=(0,E.useState)(!1),T=ee()(v,2),b=T[0],_=T[1],y=(0,E.useState)(!1),C=ee()(y,2),x=C[0],O=C[1],A=(0,E.useState)(!1),N=ee()(A,2),w=N[0],R=N[1],k=(0,E.useRef)(),L=!(null==g||!g.price)&&h.getFormattedPrice(g),D=(null==g?void 0:g.thumbnail)||(null==g||null===(t=g.image)||void 0===t||null===(n=t.front)||void 0===n?void 0:n.url)||(null==g?void 0:g.imageUrl),P=(null==g?void 0:g.name)||(null==g?void 0:g.title),M=null==g||null===(i=g.price)||void 0===i?void 0:i.original,B=null==g||null===(o=g.price)||void 0===o?void 0:o.current,j=!!M&&M!==B,U=(0,gi.V4)(g),G=!h.getStore("ProductDrawerStore").isProductConfirmed(l);(0,E.useEffect)((function(){!d&&b&&(_(!1),O(!0),setTimeout((function(){O(!1)}),S.hj))}),[d]),(0,E.useEffect)((function(){}),[p]);var F=function(){R(!0)},W=I()(s.container,void 0===l&&a.show&&s.containerWithContextMenu,m&&s.containerMinimized),H=I()(s.price,s.originalPrice),V=(I()(s.iconWrapper,s.previewIconWrapper,w&&s.showPreviewIcon),I()(s.iconWrapper,s.dismissIconWrapper,w&&s.showDismissIcon),I()(s.iconWrapper,s.compareIconWrapper)),z=((0,Ei.Q)(g),{loader:{height:"10px",width:"10px",borderColor:"#fff #fff transparent"},imageStyle:{margin:0,backgroundColor:"#fff",borderRadius:"6px",width:"72px",height:"72px",boxShadow:"0px 14px 19px -5px rgba(0, 0, 0, 0.16)",opacity:G?.5:1},saleTag:{left:"4px",bottom:"4px"},iconColor:"rgba(121, 121, 121, 1)"});return E.createElement("div",{ref:k,className:W,"data-testid":"product-card","data-productid":null==g?void 0:g.id,onMouseLeave:function(e){var t=e.relatedTarget||e.toElement;(null==t||!t.nodeType||k.current&&!k.current.contains(t))&&R(!1)},onMouseOver:F},E.createElement(Q.L9,{onClick:function(){return c(l)},onFocus:F,className:s.containerClickable,onBlur:function(e){var t=e.relatedTarget||e.toElement;(null==t||!t.nodeType||k.current&&!k.current.contains(t))&&R(!1)},onContextMenu:function(e){},"data-testid":"product-card-listview-clickable","aria-labelledby":"".concat(l,"panelCard ").concat(l,"listCardprice")}),E.createElement("div",{className:s.leftContent},E.createElement(Q.S3,{src:D,size:S.Si.THUMBNAIL,style:z.imageStyle,ariaHidden:!0}),E.createElement("div",{className:s.iconBar},!1,E.createElement("div",{className:V},!1),!1),j&&E.createElement(vi.Z,{position:z.saleTag})),E.createElement("div",{className:s.info},E.createElement(Q.u,{text:P,width:250,useMousePosition:!0},E.createElement(Q.xv,{className:s.title,id:"".concat(l,"listCard")},P)),!!U&&E.createElement(Q.xv,{className:s.attributes},U),!(null==g||!g.price)&&E.createElement("div",{className:s.priceWrapper},E.createElement(Q.xv,{type:"secondary",className:s.price,id:"".concat(l,"listCardprice")},L),j&&E.createElement(Q.xv,{type:"secondary",className:H},h.getFormattedPrice(g,{field:"original"})))),(!!u&&f||G)&&(w||b||x)&&!1)};yi.propTypes={product:di().shape({price:di().shape({currency:di().string.isRequired,current:di().number,original:di().number})})};var Ci,xi=(0,N.Z)((function(e){return{container:{position:"relative",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",borderRadius:"0px",transition:"all .1s linear",cursor:"pointer",animation:"fadeIn 0.5s 1",width:"100%",height:"84px",padding:"6px 0px 6px 8px","&:hover":{background:"rgba(0, 0, 0, 0.4)"}},containerMinimized:{scrollSnapAlign:"start"},containerWithContextMenu:{background:"rgba(0, 0, 0, 0.4)"},containerClickable:{position:"absolute",top:4,left:4,width:"calc(100% - 8px)",height:"calc(100% - 8px)",zIndex:1},leftContent:{display:"flex",justifyContent:"center",alignItems:"center",position:"relative",width:"72px",height:"72px"},info:{display:"flex",alignItems:"flex-start",flexDirection:"column",justifyContent:"center",overflowX:"hidden",flex:1,height:"72px",margin:"0px 10px 0px 14px"},title:{maxWidth:"100%",textAlign:"left",whiteSpace:"nowrap",textOverflow:"ellipsis",fontSize:"14px",lineHeight:"17px",margin:"0 0 2px",fontWeight:500,overflow:"hidden",color:"#fff"},attributes:{maxWidth:"100%",whiteSpace:"nowrap",textOverflow:"ellipsis",fontSize:"12px",lineHeight:"16px",fontWeight:400,overflow:"hidden",margin:"0 0 1px",color:"#fff"},priceWrapper:{display:"flex",flexDirection:"row",flexWrap:"wrap"},price:{fontSize:"12px",lineHeight:"16px",margin:"0px",fontWeight:400,color:"#fff"},originalPrice:{marginLeft:"4px",color:"rgba(255, 255, 255, 0.7)",textDecoration:"line-through"},rightContent:{flexShrink:0,marginRight:"16px"},addButton:{display:"flex",position:"relative",alignItems:"center",boxSizing:"border-box",background:"rgba(255, 255, 255, 0.05)",color:"rgba(240, 240, 240, 1)",minWidth:"48px",maxWidth:"max-content",height:"32px",lineHeight:"24px",marginRight:"0",padding:"0",border:"1px solid transparent",borderRadius:e.shape.borderRadius,zIndex:1,"& span":{fontSize:"12px",lineHeight:"24px",padding:"4px 11px",whiteSpace:"nowrap",border:"none"},"&:hover":{background:"rgba(255, 255, 255, 0.12)"},"&:active:not(:disabled)":{background:"rgba(0, 124, 124, 0.12)",backdropFilter:"blur(80px)"}},iconBar:{zIndex:1,height:"26px",display:"flex",justifyContent:"space-between",alignItems:"center",position:"absolute",width:"68px",top:"2px",left:"2px",pointerEvents:"none"},iconWrapper:{borderRadius:"100%",height:"26px",width:"26px",display:"flex",justifyContent:"center",alignItems:"center"},previewIconWrapper:{display:"none","-webkit-backdrop-filter":"blur(80px)",backdropFilter:"blur(80px)",backgroundColor:"rgba(0, 0, 0, 0.05)","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.12)"}},previewIcon:{height:15},showPreviewIcon:{display:"flex",pointerEvents:"auto"},dismissIconWrapper:{display:"none",width:"20px",height:"20px",position:"absolute",top:"4px",left:"4px","-webkit-backdrop-filter":"blur(80px)",backdropFilter:"blur(80px)",backgroundColor:"rgba(52, 52, 52, 0.8)","&:hover":{backgroundColor:"rgba(52, 52, 52, 0.9)"}},dismissIcon:{height:15},showDismissIcon:{display:"flex",pointerEvents:"auto"},compareIconWrapper:{width:"20px",height:"20px"}}}))(yi),Oi=n(91390),Ii=function(e){var t=e.isUpdatingBasket,n=e.pdaOpen,i=e.products,o=e.enableKeyboardShortcut,a=e.classes,l=e.compareIsOpen,c=e.checkingOut,s=e.cartIntegrationEnabled,u=(0,r.bp)(),d=(0,E.useState)(!0),p=ee()(d,2),m=p[0],f=p[1],h=(0,E.useState)(!1),g=ee()(h,2),v=g[0],S=g[1],T=(0,E.useState)(!1),b=ee()(T,2),_=b[0],y=b[1],C=(0,E.useState)(!1),x=ee()(C,2),O=x[0],A=x[1],N=(0,E.useState)(!0),w=ee()(N,2),R=w[0],k=w[1],L=(0,fi.Z)(i),D=(0,E.useRef)(),P=(0,E.useRef)();(0,E.useEffect)((function(){var e=function(){"KeyZ"===event.code&&o&&(f((function(e){return u.trackingService.track("shortcut","keyz",{payload:{minimize:!e}}),!e})),y(!0))};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e),clearTimeout(void 0)}}),[o]),(0,E.useEffect)((function(){return L&&L.length<i.length&&m&&(f(!1),Ci=setTimeout((function(){v||f(!0)}),4e3)),function(){clearTimeout(Ci)}}),[i]);var M=function(e){u.executeAction(ln.P8,{externalId:e})},B=function(e){},j=function(e){},U=function(e){u.executeAction(Oi.eg,{externalId:e})},G=function(e){u.executeAction(Oi.bs,{externalId:e,confirmed:!0})},F=function(e){e.stopPropagation(),!_&&m&&f(!1)},W=function(e){e.stopPropagation(),_||m||(f(!0),S(!1))},H=function(){S(!0)};if(i.length<1)return null;var V=I()(a.container,m&&a.minimized,i&&2===i.length&&a.fitBorders,"current-products-container",l&&a.hidden),z=I()(a.productWrapper,!R&&a.productWrapperListView,i&&2===i.length&&a.fitBorders);return E.createElement("div",{className:V,onMouseLeave:W,onMouseOver:H,onFocus:H,onBlur:function(e){P.current&&!P.current.contains(e.relatedTarget)&&W(e)},ref:P,"data-testid":"products-drawer"},E.createElement(_i,{toggleMinimized:function(e){f(e),y(!e)},pdaOpen:n,minimized:m,hasScrolled:O,toggleGridView:k,isGridView:R}),E.createElement("div",{className:z,ref:D,onMouseEnter:F,onFocus:F,tabIndex:"-1",onScroll:function(){0===D.current.scrollTop||O?0===D.current.scrollTop&&O&&A(!1):A(!0)}},R?i.map((function(e){var n;return E.createElement(Si,{useLargeCard:i.length<3,key:e,externalId:e,checkingOut:c,isUpdatingBasket:t,onAddToCart:B,onOpenPreview:j,onConfirmPlaceholder:G,onDismissPlaceholder:U,onClick:M,hideContextMenu:"".concat(null==D||null===(n=D.current)||void 0===n?void 0:n.scrollTop,"_").concat(m),minimized:m,cartIntegrationEnabled:s})})).reverse():i.map((function(e){var n;return E.createElement(xi,{key:e,externalId:e,onClickAdd:B,onConfirmPlaceholder:G,onDismissPlaceholder:U,onClick:M,checkingOut:c,isUpdatingBasket:t,onOpenPreview:j,hideContextMenu:"".concat(null==D||null===(n=D.current)||void 0===n?void 0:n.scrollTop,"_").concat(m),minimized:m,cartIntegrationEnabled:s})})).reverse()))};Ii=(0,w.ZP)(Ii,["BasketStore","CompareStore","ProductStore","ProductDrawerStore","ToolStore","CallSessionStore"],(function(e){var t,n,r=e.BasketStore.getBasket(),i=e.ToolStore.getCurrentTool()!==S.Js.CHAT;return{isUpdatingBasket:r&&r.isLoading,pdaOpen:!!e.ProductStore.focusedExternalId,products:e.ProductDrawerStore.products,enableKeyboardShortcut:i,compareIsOpen:e.CompareStore.visible,checkingOut:e.BasketStore.checkingOut,cartIntegrationEnabled:null===(t=e.CallSessionStore.getMerchantIntegration())||void 0===t||null===(n=t.cartIntegration)||void 0===n?void 0:n.enabled}}));var Ai=(0,N.Z)((function(){return{container:{position:"absolute",zIndex:6,overflowX:"auto",maxWidth:"100%",width:"394px",height:"400px",maxHeight:"400px",bottom:S.A3.MENU_HEIGHT,display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",left:"48px",borderRadius:"10px 10px 0px 0px",transition:"all 0.5s","&::-webkit-scrollbar":{display:"none"},"-webkit-backdrop-filter":"saturate(90%) blur(12px)",backdropFilter:"saturate(90%) blur(12px)"},minimized:{height:"100px",maxHeight:"100px"},hidden:{height:0,maxHeight:0,overflow:"hidden"},productWrapper:{overflowX:"auto",maxWidth:"100%",maxHeight:"400px",height:"100%",width:"394px",display:"flex",flexWrap:"wrap",flexDirection:"row",justifyContent:"flex-start",backgroundColor:"rgba(0, 0, 0, 0.36)",transition:"background-color 0.2s","&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none",scrollSnapType:"y mandatory"},productWrapperListView:{overflowX:"hidden",overflowY:"scroll",height:"100%",maxHeight:"unset",flexDirection:"column",flexWrap:"nowrap",justifyContent:"flex-start",transition:"padding-top 0.2s",scrollSnapType:"y mandatory"},fitBorders:{width:"393px"}}}))(Ii),Ni=(0,N.Z)((function(){return{container:{position:"absolute",display:"none",opacity:0,pointerEvents:"none",bottom:"15px",right:"15px",justifyContent:"center",alignItems:"center",border:"none",padding:10,width:40,height:40,borderRadius:"100%",backgroundColor:"white","&:hover":{transition:"background-color 0.1s ease-in-out",backgroundColor:"#f2f2f2"}},mobileContainer:{width:65,height:65},show:{opacity:1,pointerEvents:"auto",display:"flex"}}}))((function(e){var t=e.isMinimized,n=e.isClientPointerPresent,i=e.classes,o=(0,r.bp)(),a=(0,E.useState)(!1),l=ee()(a,2),c=l[0],s=l[1],u=(0,q.isMobileDevice)(),d=I()(i.container,u&&i.mobileContainer,!u&&n&&t&&i.show,u&&t&&i.show,"floating-hangup-button");return E.createElement(Q.zx,{tabIndex:t?0:-1,"aria-hidden":!t,ariaLabel:o.getText("ACTION_BAR_BUTTON_ARIA_LABEL_LEAVE_CALL"),className:d,icon:E.createElement(Q.LX,{style:u&&{height:30,width:30}}),onClick:function(){c||o.executeAction(Se.V2,{dialogId:Gn.Js,withCloseIcon:!1,message:o.getText("AGENT_CLIENT_HANGUP_TITLE"),cancelButtonTitle:o.getText("GENERAL_BUTTON_CANCEL"),buttonTitle:o.getText("GENERAL_BUTTON_OK"),callback:function(e){e&&(o.executeAction(jn),s(!0))}})}})}));function wi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ri(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wi(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ki=function(e){var t=e.open,n=e.products,i=e.pdaOpen,o=e.classes,a=(0,r.bp)(),l=(0,E.useState)(!0),c=ee()(l,2),s=c[0],u=c[1],d=a.getText,p=a.executeAction,m=function(){p(Hn)},f=function(e){p(ln.P8,{externalId:e}),m()},h={initital:{display:"none",translateY:Ar()},open:{display:"",translateY:0},closed:{translateY:Ar(),transitionEnd:{display:"none"}}},g=I()(o.container,i&&o.darkerBackground);return E.createElement(A.E.div,{className:g,initial:"initital",animate:t?"open":"closed",variants:h,transition:{duration:2*Gn.iG}},E.createElement("div",{className:o.header},E.createElement(Q.zx,{onClick:m,className:o.closeButton},E.createElement(Q.aM,{type:"close",color:"white"}),E.createElement(Q.xv,{className:o.closeText},d("CLIENT_PRODUCT_LIST_BUTTON_LABEL")," (".concat(n.length||0,")"))),E.createElement("div",{className:o.gridSwitch},E.createElement(Q.L9,{className:o.gridSwitchIcon,onClick:function(){!s&&u(!0)},ariaLabel:d("AGENT_TOOL_CURRENT_PRODUCTS_GRID_VIEW_BUTTON")},E.createElement(Q.qh,{opacity:s?1:.4})),E.createElement(Q.L9,{className:o.gridSwitchIcon,onClick:function(){s&&u(!1)},ariaLabel:d("AGENT_TOOL_CURRENT_PRODUCTS_LIST_VIEW_BUTTON")},E.createElement(Q.Gz,{opacity:s?.4:1})))),E.createElement("div",{className:o.list},s?E.createElement("div",{className:o.productsGridWrapper},n.map((function(e){return E.createElement("div",{key:e},E.createElement(Si,{useLargeCard:n&&n.length<3,className:o.panelCard,externalId:e,onClick:f}))})).reverse()):E.createElement("div",{className:o.productsListWrapper},n.map((function(e){return E.createElement(xi,{key:e,externalId:e,onClick:f})})).reverse())))};ki=(0,w.ZP)(ki,["ActivePanelStore","ProductDrawerStore","ProductStore"],(function(e){var t;return{pdaOpen:!!e.ProductStore.focusedExternalId,open:(null===(t=e.ActivePanelStore.getAllProductsView())||void 0===t?void 0:t.open)||!1,products:e.ProductDrawerStore.products}}));var Li=(0,N.Z)((function(){return{container:{height:"100%",width:"100%",position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.9)",transition:"background-color 0.2s","@supports ((-webkit-backdrop-filter: none) or (backdrop-filter: none))":{"-webkit-backdrop-filter":"contrast(90%) blur(36px)",backdropFilter:"contrast(90%) blur(36px)",backgroundColor:"rgba(0, 0, 0, 0.36)"},zIndex:7},darkerBackground:{backgroundColor:"rgba(0, 0, 0, 0.95)","@supports ((-webkit-backdrop-filter: none) or (backdrop-filter: none))":{backgroundColor:"rgba(0, 0, 0, 0.5)"}},header:{zIndex:8,width:"100%",top:0,display:"flex",justifyContent:"space-between",height:60,alignItems:"flex-end"},closeButton:Ri(Ri({display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",height:36,width:"auto",margin:"0 12px 12px",border:"none",borderRadius:"100%",backgroundColor:"transparent"},(0,re.pv)()),{},{padding:6,"&:hover":{backgroundColor:"transparent"},"& svg":{height:"16px",width:"16px",margin:6}}),closeText:{color:"white",margin:"0 0 0 8px"},gridSwitch:{display:"flex",borderRadius:"6px",margin:"10px"},gridSwitchIcon:Ri({display:"flex",alignItems:"center",borderRadius:"6px"},(0,re.pv)()),list:{height:"100%",paddingBottom:60},productsGridWrapper:{display:"grid",gridTemplateColumns:"calc(50% - 1px) calc(50%)",gridGap:"1px",padding:"1px",height:"100%",overflowY:"auto"},productsListWrapper:{display:"flex",flexDirection:"column",height:"100%",overflowY:"auto"},panelCard:{width:"100%",border:"none",marginBottom:16}}}))(ki),Di=(n(70189),n(88921),n(96248),n(13599),n(11477),n(64362),n(15389),n(90401),n(45164),n(91238),n(54837),n(87485),n(56767),n(76651),n(61437),n(35285),n(39865),n(319)),Pi=n.n(Di),Mi=function(e){var t=e.label,n=e.style,r=void 0===n?{}:n,i=e.classes;return E.createElement(Q.xv,{type:"h3",style:r,className:i.label},t)};Mi.propTypes={classes:di().object,label:di().string};var Bi=(0,sr.Z)((function(){return{label:{textAlign:"center",lineHeight:"24px",margin:0,color:"#171717"}}}))(Mi),ji=(0,N.Z)((function(){return{container:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"8px 0",width:"100%",minWidth:"311px",borderBottom:"1px solid #F2F2F2","&:last-child":{border:"1px solid transparent",paddingBottom:"16px"}},leftContent:{display:"flex",justifyContent:"center",alignItems:"center",position:"relative",width:"72px",height:"72px",borderRadius:"4px"},info:{display:"flex",alignItems:"flex-start",flexDirection:"column",margin:"0 10px 0 14px",overflowX:"hidden",flex:1},title:{maxWidth:"100%",textAlign:"left",whiteSpace:"nowrap",textOverflow:"ellipsis",fontSize:"14px",lineHeight:"16px",margin:"0 0 2px",fontWeight:500,overflow:"hidden"},attributes:{maxWidth:"100%",whiteSpace:"nowrap",textOverflow:"ellipsis",fontSize:"12px",lineHeight:"16px",fontWeight:400,overflow:"hidden",margin:"0 0 2px"},price:{fontSize:"12px",lineHeight:"16px",margin:"0px",fontWeight:400}}}))((function(e){var t,n,i=e.classes,o=e.externalId,a=(0,r.bp)(),l=a.getStore("ProductStore").getProductByExternalId(o),c=a.getStore("CompareStore").isProductInCompare(o),s=(null==l?void 0:l.price)&&a.getFormattedPrice(l),u=(null==l?void 0:l.thumbnail)||(null==l||null===(t=l.image)||void 0===t||null===(n=t.front)||void 0===n?void 0:n.url)||(null==l?void 0:l.imageUrl),d=(null==l?void 0:l.name)||(null==l?void 0:l.title),p=(null==l?void 0:l.sku)||(null==l?void 0:l.id),m=(0,gi.V4)(l);return E.createElement("div",{className:i.container,key:p,"data-testid":"compare-products-selector-item","data-productid":l.externalId},E.createElement("div",{className:i.leftContent},E.createElement(Q.S3,{src:u,size:S.Si.THUMBNAIL,ariaHidden:!0,style:{borderRadius:"4px",width:"72px",height:"72px"}})),E.createElement("div",{className:i.info},E.createElement(Q.u,{text:d,placement:"top",width:250},E.createElement(Q.xv,{className:i.title},d)),!!m&&E.createElement(Q.xv,{className:i.attributes},m),s&&E.createElement(Q.xv,{className:i.price},s)),E.createElement(Q.rs,{"data-testid":"compare-products-selector-item-switch",item:o,checked:c,ariaLabel:l.name,onChange:function(e,t){e&&(t?a.executeAction(se,{externalId:e}):t||a.executeAction(ue,{externalId:e}))}}))}));function Ui(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ui(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ui(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fi=(0,N.Z)((function(){return{container:Gi({padding:"0 16px",height:"276px",overflowY:"overlay"},(0,re.EZ)())}}))((function(e){var t=e.onClose,n=e.products,i=e.classes,o=(0,r.bp)(),a=n.map((function(e){return E.createElement(ji,{externalId:e,key:e})}));return E.createElement(Gr,{title:o.getText("COMPARE_ADD_PRODUCTS_TOOL_TITLE"),type:Lr,onClose:t,style:{marginLeft:0,marginTop:4},testId:"compare-products-selector"},E.createElement("div",{className:i.container},a))})),Wi=((0,sr.Z)((function(){return{addProductsButton:{display:"flex",position:"relative",alignItems:"center",boxSizing:"border-box",background:"rgba(0, 0, 0, 0.05)",color:"#6D696A",minWidth:"48px",maxWidth:"max-content",height:"32px",lineHeight:"24px",marginRight:"16px",padding:"0",border:"none",borderRadius:"6px","& span":{fontSize:"12px",fontWeight:500,lineHeight:"24px",padding:"4px 12px",whiteSpace:"nowrap"},"&:disabled":{background:"transparent",color:"#6D696A",opacity:.4},"&:hover:not(:disabled)":{background:"rgba(0, 0, 0, 0.12)"}}}}))((function(e){var t=e.classes,n=e.disabled,i=void 0!==n&&n,o=e.products,a=(0,r.bp)(),l=(0,E.useContext)(to),c=l.dialogOpen,s=l.updateDialogOpen,u=(0,E.useState)(!1),d=ee()(u,2),p=d[0],m=d[1],f=function(){s(p?null:ro),m(!p)};return(0,E.useEffect)((function(){m(c===ro)}),[c]),E.createElement("div",null,E.createElement(Q.zx,{disabled:i,className:t.addProductsButton,onClick:f,"data-testid":"compare-products-selector-button"},a.getText("COMPARE_ADD_PRODUCT_BTN")),E.createElement(Fr.M,null,p&&E.createElement(Fi,{products:o,onClose:f})))})),(0,N.Z)((function(){return{container:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"8px 0",width:"100%",minWidth:"311px",height:"52px",borderBottom:"1px solid #F2F2F2","&:last-child":{border:"1px solid transparent",paddingBottom:"16px"}},label:{maxWidth:"100%",textAlign:"left",whiteSpace:"nowrap",textOverflow:"ellipsis",fontSize:"12px",lineHeight:"17px",fontWeight:400,margin:0,overflow:"hidden"}}}))((function(e){var t=e.classes,n=e.attribute,i=n.name,o=n.visible,a=(0,r.bp)();return E.createElement("div",{className:t.container,"data-testid":"compare-attributes-selector-item","data-attributeid":i},E.createElement("div",{className:t.label},E.createElement(Q.u,{text:i,placement:"top",width:250},E.createElement(Q.xv,{className:t.name},i))),E.createElement(Q.rs,{"data-testid":"compare-attributes-selector-item-switch",item:n,checked:o,ariaLabel:i,onChange:function(e){var t=e.name;t&&a.executeAction(de,{attributes:[t]})}}))})));function Hi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hi(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var zi=(0,N.Z)((function(){return{container:Vi({padding:"0 16px",height:"259px",overflowY:"overlay"},(0,re.EZ)())}}))((0,w.ZP)((function(e){var t=e.classes,n=e.onClose,i=e.comparableAttributes,o=(0,r.bp)(),a=i.map((function(e){return e?E.createElement(Wi,{attribute:e,key:e.name}):null}));return a.length?E.createElement(Gr,{title:o.getText("AGENT_SELECT_ATTRIBUTE_MODAL_TITLE"),type:Lr,onClose:n,style:{marginLeft:0,marginTop:4},testId:"compare-attributes-selector"},E.createElement("div",{className:t.container},a)):null}),["CompareStore"],(function(e){return{comparableAttributes:e.CompareStore.getComparableAttributes()}}))),Zi=((0,sr.Z)((function(){return{attributeSelectButton:{width:"24px",height:"24px",marginRight:"16px",marginTop:"3px",borderRadius:"50%","&:disabled":{border:"none"},"&:not(:disabled):hover":{background:"rgba(0, 0, 0, 0.12)"}},attributeSelectButtonCardOpen:{background:"rgba(0, 0, 0, 0.12)"}}}))((function(e){var t=e.classes,n=e.disabled,r=void 0!==n&&n,i=(0,E.useContext)(to),o=i.dialogOpen,a=i.updateDialogOpen,l=(0,E.useState)(!1),c=ee()(l,2),s=c[0],u=c[1],d=function(){a(s?null:no),u(!s)};(0,E.useEffect)((function(){u(!r&&o===no)}),[o,r]);var p=I()(t.attributeSelectButton,s&&t.attributeSelectButtonCardOpen);return E.createElement("div",null,E.createElement(Q.zx,{disabled:r,type:"icon",icon:"settings",size:"soloIcon","data-testid":"compare-attributes-selector-button",onClick:d,className:p}),E.createElement(Fr.M,null,s&&E.createElement(zi,{onClose:d})))})),n(51532),n(10072),n(99137),n(71957),n(96306),n(103),n(74592),n(58276),n(35082),n(12813),n(18222),n(38563),n(50336),n(7512),(0,N.Z)((function(){return{root:{height:"48px",borderTop:"1px solid #EDEDED",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:"0px 16px",background:"#fff",overflow:"hidden"},dotContainer:{display:"flex"},dot:{width:"6px",height:"6px",margin:"4px",background:"rgba(0, 0, 0, 0.2)",borderRadius:"100px"},dotSelected:{width:"12px",background:"#2A2A2A"}}}))((function(e){var t=e.classes,n=e.selected,r=void 0===n?void 0:n,i=e.length,o=void 0===i?3:i,a=e.onChange,l=e.className,c=(0,E.useState)(0),s=ee()(c,2),u=s[0],d=s[1];(0,E.useEffect)((function(){"function"==typeof a&&u!==r&&a(u)}),[u]),(0,E.useEffect)((function(){u>=o&&d(o-1)}),[o]),(0,E.useEffect)((function(){void 0!==r&&(r<0&&(r=0),r>o-1&&(r=o-1),r!==u&&d(r))}),[r]);for(var p=I()(t.root,l),m=[],f=0;f<o;f++){var h=I()(t.dot,u===f&&t.dotSelected);m.push(E.createElement("div",{key:"dot-".concat(f),className:h}))}return E.createElement("div",{className:p},E.createElement(Q.zx,{icon:"arrowStemRight",size:"soloIcon",iconColor:"#2A2A2A",onClick:function(){u>0&&d(u-1)},disabled:0===u}),E.createElement("div",{className:t.dotContainer},m),E.createElement(Q.zx,{icon:"arrowStemLeft",size:"soloIcon",iconColor:"#2A2A2A",onClick:function(){u<o&&d(u+1)},disabled:u===o-1}))})));function Yi(){var e=(0,E.useState)({width:Ir(),height:Ar()}),t=ee()(e,2),n=t[0],r=t[1];return(0,E.useEffect)((function(){function e(){r({width:Ir(),height:Ar()})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),n}function Ki(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ki(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ki(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qi(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Xi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xi(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function Xi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ji=187,$i="placeholder",eo=(0,N.Z)((function(){return{root:{minWidth:"".concat(375,"px"),maxWidth:"".concat(563,"px"),overflow:"hidden"},onlyTwoColumns:{maxWidth:"".concat(375,"px")},twoColumnsFullWidth:qi({minWidth:"100vw",maxWidth:"100vw"},(0,q.isMobileDevice)()&&{"@media (orientation: landscape)":{minWidth:"100vh",maxWidth:"100vh"}}),scrollContainer:{overflowX:"auto",overflowY:"hidden",scrollSnapType:"x mandatory",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},verticalScrollContainer:qi(qi({maxHeight:"calc(100vh - 16px - 50px - 48px - 2px - 16px - 50px)"},(0,q.isMobileDevice)()&&{"@media (orientation: landscape)":{maxHeight:"calc(100vw - 16px - 50px - 48px - 2px - 16px - 50px - 45px)"}}),{},{overflowY:"auto",overflowX:"hidden",scrollSnapType:"x mandatory",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),verticalScrollContainerFullWidth:{maxHeight:"calc(100vh - 60px - 45px - 57px - 24px)","@media (orientation: landscape)":{maxHeight:"calc(100vw - 60px - 45px - 57px - 24px)"}},verticalScrollContainerFullWidthPagination:{maxHeight:"calc(100vh - 60px - 45px - 57px - 48px)","@media (orientation: landscape)":{maxHeight:"calc(100vw - 60px - 45px - 57px - 48px)"}},headColumn:{padding:0,borderLeft:"1px solid #EDEDED","&:first-child":{border:"none"}},topImageContainer:{width:"".concat(Ji,"px"),height:"".concat(Ji,"px"),display:"flex",justifyContent:"space-around",alignItems:"center"},topImageContainerHalfWindow:{width:"auto",height:"".concat(Ji,"px")},gridRow:{"&:nth-child(odd)":{background:"rgba(0, 0, 0, 0.02)"}},gridItem:{padding:"16px 4px 14px 12px",maxWidth:"".concat(Ji,"px"),borderLeft:"1px solid #EDEDED","&:first-child":{border:"none"},scrollSnapAlign:"start",verticalAlign:"top"},gridItemHalfWindow:qi({minWidth:"50vw",maxWidth:"50vw"},(0,q.isMobileDevice)()&&{"@media (orientation: landscape)":{minWidth:"50vh",maxWidth:"50vh"}}),attributeTitleText:{fontSize:"14px",fontWeight:"500",lineHeight:"17px",textOverflow:"ellipsis",overflow:"hidden",margin:0,marginBottom:"9px",letterSpacing:0},attributeValueText:{fontSize:"15px",lineHeight:"18px",letterSpacing:"0.02em",margin:0},emptyAttributeValue:{color:"rgb(116, 116, 116)"},verticalPagination:{borderRadius:"0px 0px 8px 8px"},bottomNoPagination:{height:"24px",borderTop:"1px solid #EDEDED"}}}))((0,w.ZP)((function(e){var t=e.classes,n=e.products,i=e.attributes,o=e.isFullWidth,a=void 0!==o&&o,l=(e.cartIntegrationEnabled,(0,r.bp)()),c=(0,E.useState)(0),s=ee()(c,2),u=s[0],d=s[1],p=Yi().width,m=a||p<561?2:3,f=a?p/2:Ji,h=new Map,g=(0,E.useRef)(),v=n.length>m;(0,E.useEffect)((function(){}),[n]);var T,b=Qi(n);try{for(b.s();!(T=b.n()).done;){var _,y=T.value,C=l.getStore("ProductStore").getProductByExternalId(y).attributes,x=Qi(void 0===C?[]:C);try{var O=function(){var e=_.value;if(!e.public||!e.showInComparison||i.some((function(t){return t.name===e.name&&!t.visible})))return"continue";h.has(e.id)||h.set(e.id,{id:e.id,name:e.name,values:new Map}),h.get(e.id).values.set(y,e.value)};for(x.s();!(_=x.n()).done;)O()}catch(e){x.e(e)}finally{x.f()}}}catch(e){b.e(e)}finally{b.f()}1===n.length&&(n=[].concat(Pi()(n),[$i]));var A=I()(t.root,2===m&&t.onlyTwoColumns,a&&t.twoColumnsFullWidth),N=I()(t.gridItem,a&&t.gridItemHalfWindow),w=I()(t.topImageContainer,a&&t.topImageContainerHalfWindow),R=I()(t.scrollContainer),k=I()(t.verticalScrollContainer,a&&t.verticalScrollContainerFullWidth,a&&v&&t.verticalScrollContainerFullWidthPagination),L=(0,E.useRef)(),D=n.some((function(e){if(e===$i)return!1;var t=l.getStore("ProductStore").getProductByExternalId(e);return null!==(null==t?void 0:t.price)}));return E.createElement("div",{className:A,"data-testid":"compare-products-grid"},E.createElement("div",{className:k},E.createElement("div",{ref:L,className:R,onScroll:function(){if(L.current){var e=Math.floor(Math.round(L.current.scrollLeft)/f);e!==u&&d(e)}}},E.createElement("table",null,E.createElement("thead",null,E.createElement("tr",null,n.map((function(e){return E.createElement("th",{key:"header_".concat(e),className:t.headColumn,"data-testid":e!==$i&&"compare-product-column","data-productid":e},E.createElement("div",{className:w},e!==$i&&function(e){var t,n,r=l.getStore("ProductStore").getProductByExternalId(e);return E.createElement(Q.S3,{src:(null===(t=r.image)||void 0===t||null===(n=t.front)||void 0===n?void 0:n.url)||r.imageUrl,size:S.Si.STAGE,ariaHidden:!0,style:{height:"".concat(Ji,"px"),width:a?"50vw":"".concat(Ji,"px"),borderRadius:0},testId:"compare-product-image"})}(e)))})))),E.createElement("tbody",null,E.createElement("tr",{key:"name",className:t.gridRow,"data-attributeid":"name"},n.map((function(e){if(e===$i)return E.createElement("td",{key:"td_attr_".concat($i),className:N});var n=l.getStore("ProductStore").getProductByExternalId(e);return E.createElement("td",{key:"td_attr_".concat(e),className:N,"data-testid":"compare-attribute-column"},E.createElement(Q.xv,{className:t.attributeTitleText},l.getText("COMPARE_NAME_ATTRIBUTE_LABEL")),E.createElement(Q.xv,{className:t.attributeValueText,"data-testid":"compare-attribute-value"},null==n?void 0:n.name))}))),Array.from(h.values()).map((function(e){return E.createElement("tr",{key:"tr_attr_".concat(e.id),className:t.gridRow,"data-attributeid":e.name},n.map((function(n){return n===$i?E.createElement("td",{key:"td_attr_".concat($i),className:N}):E.createElement("td",{key:"td_attr_".concat(e.id,"_").concat(n),className:N,"data-testid":"compare-attribute-column"},E.createElement(Q.xv,{className:t.attributeTitleText},e.name),E.createElement(Q.xv,{className:t.attributeValueText,"data-testid":"compare-attribute-value"},function(e,n){var r=e.values.has(n)?e.values.get(n):"";return""===r&&(r=E.createElement("span",{className:t.emptyAttributeValue},"")),r}(e,n)))})))})),D&&E.createElement("tr",{key:"price",className:t.gridRow,"data-attributeid":"price"},n.map((function(e){var n;if(e===$i)return E.createElement("td",{key:"td_attr_".concat($i),className:N});var r=l.getStore("ProductStore").getProductByExternalId(e);return E.createElement("td",{key:"td_attr_".concat(e),className:N,"data-testid":"compare-attribute-column"},E.createElement(Q.xv,{className:t.attributeTitleText},l.getText("ITEM_PRICE")),E.createElement(Q.xv,{className:t.attributeValueText,"data-testid":"compare-attribute-value"},(null==r||null===(n=r.price)||void 0===n?void 0:n.current)&&l.getFormattedPrice(r)))}))))))),v&&E.createElement(Zi,{selected:u,length:n.length-m+1,onChange:function(e){if(L.current){var t="scrollBehavior"in document.documentElement.style;t||(L.current.style.scrollSnapType="none"),L.current.scrollTo({left:e*f,behavior:"smooth"}),t||(g.current&&window.clearTimeout(g.current),g.current=window.setTimeout((function(){L.current.style.scrollSnapType="",g.current=null}),468))}},className:!a&&t.verticalPagination})||E.createElement("div",{className:t.bottomNoPagination}))}),["CallSessionStore"],(function(e){var t,n;return{cartIntegrationEnabled:null===(t=e.CallSessionStore.getMerchantIntegration())||void 0===t||null===(n=t.cartIntegration)||void 0===n?void 0:n.enabled}}))),to=E.createContext(),no="attribute-selector",ro="product-selector",io=(0,N.Z)((function(){return{emptyWrapper:{flexGrow:1,display:"flex",justifyContent:"space-around",flexDirection:"column",alignItems:"center",width:"100%",minHeight:"260px",minWidth:"375px"},bottomNoPagination:{height:"24px",borderTop:"1px solid #EDEDED"}}}))((0,w.ZP)((function(e){var t=e.classes,n=e.products,i=e.attributes,o=(e.availableProducts,e.isCollapsed),a=(0,r.bp)(),l=(0,E.useState)(null),c=ee()(l,2),s=c[0],u=c[1],d=(0,q.isMobileDevice)()?Dr:kr,p=n.length>0?a.getText("COMPARE_LABEL_WITH_NUMBER",n.length):a.getText("COMPARE_LABEL");return E.createElement(to.Provider,{value:{dialogOpen:s,updateDialogOpen:function(e){return u(e)}}},E.createElement(Gr,{title:p,type:d,headerItems:[],onClose:function(){a.executeAction(ie)},onCollapse:function(e){a.executeAction(oe,{collapsed:e})},testId:"compare",collapsed:o},0===n.length&&E.createElement(E.Fragment,null,E.createElement("div",{className:t.emptyWrapper},E.createElement(Bi,{label:a.getText("COMPARE_EMPTY_LABEL")})),E.createElement("div",{className:t.bottomNoPagination}))||E.createElement(eo,{products:n,attributes:i,isFullWidth:(0,q.isMobileDevice)()})))}),["CompareStore","ProductDrawerStore","BasketStore"],(function(e){return{availableProducts:Pi()(new Set(e.ProductDrawerStore.confirmedProducts.concat(e.CompareStore.products).concat(e.BasketStore.products))),products:e.CompareStore.getCompare().rows,attributes:e.CompareStore.getComparableAttributes(),isCollapsed:e.CompareStore.collapsed}}))),oo=n(1166),ao=n(67154),lo=n.n(ao);function co(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function so(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?co(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):co(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var uo={showHeader:!1,headerText:"",showRightSideButton:!1,rightSideButtonIcon:"close-sharp",showBackButton:!1,showBackLabel:!1,goBackCallback:null,rightButtonClickCallback:null,fadedBackButton:!1,transparentBackgroundHeader:!1},po=(0,E.createContext)(uo);po.displayName="HeaderContext";var mo=function(){return(0,E.useContext)(po)},fo=function(e){return function(t){return E.createElement(po.Consumer,null,(function(n){return E.createElement(e,lo()({},t,{header:n}))}))}},ho=function(e,t){return so(so({},e),t)},go=function(e){var t=(0,E.useReducer)(ho,uo),n=ee()(t,2),r=n[0],i=n[1];return E.createElement(po.Provider,{value:so(so({},r),{},{setHeaderValues:i,fadeInBackButton:function(e){var t=e.showBackLabel;r.showBackButton||(i({showBackButton:!0,fadedBackButton:!0,showBackLabel:t}),setTimeout((function(){i({fadedBackButton:!1})}),50))}})},e.children)},vo=n(43805),Eo=n(37618);var So=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(){return o()(this,i),r.apply(this,arguments)}return l()(i,[{key:"render",value:function(){var e=this.props.container||"span";return E.createElement(e,{className:this.props.className,dangerouslySetInnerHTML:{__html:this.context.getText(this.props.text,this.props.args)}})}}]),i}(x);So.propTypes={container:di().any,className:di().string,text:di().string,args:di().any};var To=So,bo=(0,w.ZP)((function(e){var t=e.merchantBaseUrl,n=e.classes,i=(0,r.bp)();return(0,E.useEffect)((function(){i.externalInterfaceService.emit(Pt)}),[]),E.createElement("div",{className:n.wrapper},E.createElement("h1",{className:n.title},i.getText("SAFARI_MEDIA_GUIDE_SCREEN_TITLE")),E.createElement("ol",{className:n.steps},E.createElement("li",null,i.getText("IOS_SAFARI_MEDIA_GUIDE_SCREEN_STEP_ONE")),E.createElement("div",{className:n.stepOne},E.createElement("span",{className:n.char},i.getText("IOS_SAFARI_MEDIA_GUIDE_SCREEN_CHAR"),E.createElement("span",null,i.getText("IOS_SAFARI_MEDIA_GUIDE_SCREEN_CHAR")),E.createElement("div",{className:n.charOver})),E.createElement("span",{className:n.address},E.createElement("div",null,E.createElement(Q.mB,null)),E.createElement("p",null,t?new URL(t).hostname:i.getText("IOS_SAFARI_MEDIA_GUIDE_SCREEN_DEFAULT"))),E.createElement("div",{className:n.arrow},E.createElement(Eo.Z,null))),E.createElement("li",null,E.createElement(To,{className:n.text,text:i.getText("IOS_SAFARI_MEDIA_GUIDE_SCREEN_STEP_TWO")})),E.createElement("li",null,E.createElement(To,{className:n.text,text:i.getText("IOS_SAFARI_MEDIA_GUIDE_SCREEN_STEP_THREE")})),E.createElement("li",null,i.getText("IOS_SAFARI_MEDIA_GUIDE_SCREEN_STEP_FOUR"))))}),["CallSessionStore"],(function(e){var t,n=e.CallSessionStore.getMerchantIntegration();return{merchantBaseUrl:null==n||null===(t=n.merchant)||void 0===t?void 0:t.baseUrl}})),_o=(0,N.Z)((function(e){var t,n;return{wrapper:{height:"100%",display:"flex",flexDirection:"column",paddingTop:40},title:{fontSize:28,fontWeight:"400",lineHeight:"120%",marginBottom:32},steps:{paddingLeft:5,listStylePosition:"inside",overflowY:"auto","& li":{fontSize:16,fontWeight:"400",lineHeight:"24px",minHeight:56}},stepOne:{width:"95%",height:40,display:"flex",justifyContent:"space-between",alignItems:"center",boxShadow:"0px 0px 3px rgba(0, 0, 0, 0.25)",borderRadius:8,marginBottom:32},text:{fontSize:16,fontWeight:"400",lineHeight:"120%"},char:{width:50,height:40,position:"relative",display:"flex",alignItems:"baseline",justifyContent:"center",paddingTop:6,"& span:first-child":{fontSize:16,fontWeight:"400"}},charOver:{border:"3px dashed ".concat((null==e||null===(t=e.colors)||void 0===t||null===(n=t.neutralColors)||void 0===n?void 0:n.medium)||"#2A2A2A"),borderRadius:"50%",width:55,height:55,position:"absolute",top:-7.8},arrow:{width:30,background:"transparent",display:"flex",alignItems:"center"},address:{display:"flex",fontSize:17,fontWeight:"400",lineHeight:"22px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",maxWidth:150,"& div":{marginRight:6,display:"flex",alignItems:"center",justifyContent:"center"},"& p":{fontSize:"3.5vw",fontWeight:"400",lineHeight:"22px"}}}}),{name:"iOSSafariMedia"})(bo),yo=(0,N.Z)((function(){return{wrapper:{height:"100%",display:"flex",flexDirection:"column",paddingTop:40},title:{fontSize:28,fontWeight:"400",lineHeight:"120%",marginBottom:32},text:{fontSize:16,fontWeight:"400",lineHeight:"120%"}}}),{name:"FireFoxMobileMedia"})((function(e){var t=e.classes,n=(0,r.bp)();return E.createElement("div",{className:t.wrapper},E.createElement("h1",{className:t.title},n.getText("FIREFOX_MOBILE_MEDIA_GUIDE_SCREEN_TITLE")),E.createElement(To,{className:t.text,text:n.getText("FIREFOX_MOBILE_MEDIA_GUIDE_SCREEN_TEXT")}))})),Co=(0,N.Z)((function(){return{wrapper:{height:"100%",display:"flex",flexDirection:"column",paddingTop:40},title:{fontSize:28,fontWeight:"400",lineHeight:"120%",marginBottom:32},text:{fontSize:16,fontWeight:"400",lineHeight:"120%"},steps:{paddingLeft:22,overflowY:"auto","& li":{fontSize:16,fontWeight:"400",lineHeight:"24px",marginBottom:24}}}}),{name:"SafariMedia"})((function(e){var t=e.classes,n=(0,r.bp)();return E.createElement("div",{className:t.wrapper},E.createElement("h1",{className:t.title},n.getText("SAFARI_MEDIA_GUIDE_SCREEN_TITLE")),E.createElement("ol",{className:t.steps},E.createElement("li",null,E.createElement(To,{className:t.text,text:n.getText("SAFARI_MEDIA_GUIDE_SCREEN_STEP_ONE")})),E.createElement("li",null,E.createElement(To,{className:t.text,text:n.getText("SAFARI_MEDIA_GUIDE_SCREEN_STEP_TWO")})),E.createElement("li",null,E.createElement(To,{className:t.text,text:n.getText("SAFARI_MEDIA_GUIDE_SCREEN_STEP_THREE")})),E.createElement("li",null,E.createElement(To,{className:t.text,text:n.getText("SAFARI_MEDIA_GUIDE_SCREEN_STEP_FOUR")})),E.createElement("li",null,n.getText("SAFARI_MEDIA_GUIDE_SCREEN_STEP_FIVE"))))})),xo=(0,N.Z)((function(){return{wrapper:{height:"100%",display:"flex",flexDirection:"column",paddingTop:40},title:{fontSize:24,fontWeight:"400",lineHeight:"120%",marginBottom:24},text:{fontSize:16,fontWeight:"400",lineHeight:"120%"}}}),{name:"IOSChromeMedia"})((function(e){var t=e.classes,n=(0,r.bp)();return E.createElement("div",{className:t.wrapper},E.createElement("h2",{className:t.title},n.getText("IOS_CHROME_MEDIA_GUIDE_SCREEN_TITLE")),E.createElement(To,{className:t.text,text:n.getText("IOS_CHROME_MEDIA_GUIDE_SCREEN_TEXT")}))})),Oo=(0,N.Z)((function(){return{wrapper:{height:"100%",display:"flex",flexDirection:"column",paddingTop:40},title:{fontSize:28,fontWeight:"400",lineHeight:"120%",marginBottom:32},steps:{paddingLeft:20,overflowY:"auto","& li":{fontSize:16,fontWeight:"400",lineHeight:"24px",marginBottom:24}},text:{fontSize:16,fontWeight:"400",lineHeight:"120%"},arrow:{width:30,background:"transparent",display:"flex",alignItems:"center"},icon:{paddingLeft:10}}}),{name:"ChromeAndroidMedia"})((function(e){var t=e.classes,n=(0,r.bp)();return E.createElement("div",{className:t.wrapper},E.createElement("h1",{className:t.title},n.getText("CHROME_ANDROID_MEDIA_GUIDE_SCREEN_TITLE")),E.createElement("ol",{className:t.steps},E.createElement("li",null,E.createElement(To,{className:t.text,text:n.getText("CHROME_ANDROID_MEDIA_GUIDE_SCREEN_STEP_ONE")})),E.createElement("li",null,E.createElement(To,{className:t.text,text:n.getText("CHROME_ANDROID_MEDIA_GUIDE_SCREEN_STEP_TWO")}),E.createElement(Q.Lw,{className:t.icon}),E.createElement(To,{className:t.text,text:n.getText("CHROME_ANDROID_MEDIA_GUIDE_SCREEN_STEP_TWO_P2")})),E.createElement("li",null,E.createElement(To,{className:t.text,text:n.getText("CHROME_ANDROID_MEDIA_GUIDE_SCREEN_STEP_THREE")})),E.createElement("li",null,E.createElement(To,{className:t.text,text:n.getText("CHROME_ANDROID_MEDIA_GUIDE_SCREEN_STEP_FOUR")})),E.createElement("li",null,n.getText("CHROME_ANDROID_MEDIA_GUIDE_SCREEN_STEP_FIVE"),E.createElement("ul",null,E.createElement("li",null,E.createElement(To,{className:t.text,text:n.getText("CHROME_ANDROID_MEDIA_GUIDE_SCREEN_STEP_FIVE_P2")}))))))})),Io=function(e){return E.createElement("svg",lo()({width:302,height:37,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),E.createElement("path",{d:"M0 0h283c10.02 0 18.143 8.123 18.143 18.143 0 10.02-8.123 18.143-18.143 18.143H0V0Z",fill:"#F1F3F4"}),E.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M160.407 22.31c.272.238.588.357.95.357h8.143v-4.524c0-.75.608-1.357 1.357-1.357h7.238v-4.51l-3.619 3.167v-4.255c0-.317-.136-.594-.407-.832a1.397 1.397 0 0 0-.95-.356h-11.762c-.362 0-.678.119-.95.356-.271.238-.407.515-.407.832v10.291c0 .317.136.594.407.831Z",fill:"#616161"}),E.createElement("g",{clipPath:"url(#a)"},E.createElement("rect",{x:170.857,y:18.143,width:8.143,height:8.143,rx:1.357,fill:"#CA5040"}),E.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m174.857 22.863 1.8 1.8.719-.72-1.799-1.8 1.799-1.8-.719-.719-1.8 1.8-1.799-1.8-.72.72 1.799 1.8-1.799 1.798.72.72 1.799-1.8Z",fill:"#fff"})),E.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M203.705 18.431c.437.41.98.614 1.628.614.157 0 .308-.012.453-.036v-.866c0-.75.607-1.357 1.357-1.357h.475v-4.807c0-.554-.223-1.022-.667-1.405-.445-.383-.984-.574-1.618-.574-.633 0-1.172.191-1.617.574-.445.383-.667.851-.667 1.405v4.968c0 .58.218 1.075.656 1.484Zm2.081 2.756v3.855h-1.131V22.35c-1.599-.145-2.941-.732-4.026-1.762-1.086-1.029-1.629-2.242-1.629-3.641h1.357c0 1.2.486 2.21 1.459 3.028.973.818 2.145 1.227 3.517 1.227.154 0 .304-.005.453-.015Z",fill:"#616161"}),E.createElement("g",{clipPath:"url(#b)"},E.createElement("rect",{x:207.143,y:18.143,width:8.143,height:8.143,rx:1.357,fill:"#CA5040"}),E.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m211.143 22.863 1.799 1.8.72-.72-1.799-1.8 1.799-1.8-.72-.719-1.799 1.8-1.799-1.8-.72.72 1.799 1.8-1.799 1.798.72.72 1.799-1.8Z",fill:"#fff"})),E.createElement("path",{d:"M236.431 26.286c-.306 0-.573-.111-.802-.333a1.05 1.05 0 0 1-.343-.778v-9.42c0-.296.114-.555.343-.777.229-.222.496-.333.802-.333h3.225v1.11h-3.225v9.42h9.924v-9.42h-3.264v-1.11h3.264c.305 0 .572.111.801.333.229.222.344.481.344.777v9.42c0 .296-.115.555-.344.778a1.115 1.115 0 0 1-.801.333h-9.924Zm4.37-5.682v-8.457l-1.679 1.628-.821-.796L241.374 10l3.072 2.98-.82.795-1.68-1.628v8.457h-1.145ZM272.859 23.607l3.462-2.014 3.463 2.036-.926-3.815 3.043-2.571-4.014-.343-1.566-3.6-1.565 3.579-4.014.342 3.043 2.572-.926 3.814Zm-1.985 2.679 1.434-6.022-4.808-4.05 6.351-.535 2.47-5.679 2.47 5.679 6.352.535-4.808 4.05 1.434 6.022-5.448-3.193-5.447 3.193Z",fill:"#616161"}),E.createElement("rect",{x:150.5,y:2.5,width:74,height:31,rx:1.5,stroke:"#0FBB0C"}),E.createElement("defs",null,E.createElement("clipPath",{id:"a"},E.createElement("rect",{x:170.857,y:18.143,width:8.143,height:8.143,rx:1.357,fill:"#fff"})),E.createElement("clipPath",{id:"b"},E.createElement("rect",{x:207.143,y:18.143,width:8.143,height:8.143,rx:1.357,fill:"#fff"}))))},Ao=(0,N.Z)((function(){return{wrapper:{height:"100%",display:"flex",flexDirection:"column",paddingTop:8},title:{fontSize:18,fontWeight:"600",lineHeight:"20px",marginBottom:8},titleH2:{fontSize:14,fontWeight:"600",lineHeight:"20px",marginBottom:12,marginTop:22},text:{fontSize:14,fontWeight:"400",lineHeight:"20px"},steps:{overflowY:"auto",listStylePosition:"inside","& li":{fontSize:14,fontWeight:"400",lineHeight:"20px",marginBottom:12,"& svg":{marginTop:4}}}}}),{name:"ChromeDesktopMedia"})((function(e){var t=e.classes,n=(0,r.bp)();return E.createElement("div",{className:t.wrapper},E.createElement("h1",{className:t.title},n.getText("CHROME_DESKTOP_MEDIA_GUIDE_SCREEN_TITLE")),E.createElement(To,{className:t.text,text:"CHROME_DESKTOP_MEDIA_GUIDE_SCREEN_TEXT"}),E.createElement("h2",{className:t.titleH2},n.getText("CHROME_DESKTOP_MEDIA_GUIDE_SCREEN_TITLE_2")),E.createElement("ol",{className:t.steps},E.createElement("li",null,E.createElement(To,{className:t.text,text:n.getText("CHROME_DESKTOP_MEDIA_GUIDE_SCREEN_STEP_ONE_V2")}),E.createElement(Io,null)),E.createElement("li",null,E.createElement(To,{className:t.text,text:n.getText("CHROME_DESKTOP_MEDIA_GUIDE_SCREEN_STEP_TWO_V2")})),E.createElement("li",null,E.createElement(To,{className:t.text,text:n.getText("CHROME_DESKTOP_MEDIA_GUIDE_SCREEN_STEP_THREE_V2")}))))})),No=(0,N.Z)((function(){return{wrapper:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",paddingTop:40},title:{fontSize:28,fontWeight:"400",lineHeight:"120%",marginBottom:32},text:{fontSize:16,fontWeight:"400",lineHeight:"120%",textAlign:"center"}}}),{name:"DefaultMedia"})((function(e){var t=e.classes,n=(0,r.bp)();return E.createElement("div",{className:t.wrapper},E.createElement("h1",{className:t.title},n.getText("DEFAULT_MEDIA_GUIDE_SCREEN_TITLE")),E.createElement(To,{className:t.text,text:n.getText("DEFAULT_MEDIA_GUIDE_SCREEN_TEXT")}))}));function wo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ro(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wo(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ko,Lo=(0,N.Z)((function(){return{wrapper:{padding:"16px 24px",height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center",backgroundColor:"white"}}}),{name:"MediaGuideScreen"})((function(e){var t=e.withHeader,n=void 0===t||t,i=e.backToPreboarding,o=void 0!==i&&i,a=e.classes,l=(0,r.bp)(),c=mo(),s=c.setHeaderValues,u=(0,vo.Wz)(),d=(0,q.getBrowserDescription)(),p=l.settings.get("client.mediaPermissionPreboarding.enabled",!1);return(0,E.useEffect)((function(){if(n)return s(Ro(Ro({},c),{},{showBackButton:!0,showRightSideButton:!1,headerText:"",goBackCallback:function(){var e=_.merge({},u,{sessionId:u.sessionId,clientInfo:{browser:d}}),t={clientId:u.clientId,clientData:_.omit(e,"queue")},n=p&&2===u.group?{screen:"start"}:o?"select-option":u.clientId?{screen:"enter-from-connect-link",props:{enterQueueData:t}}:{screen:"queue"};l.executeAction(Rn,n)}})),function(){return s(uo)}}),[]),E.createElement("div",{className:a.wrapper,style:{paddingTop:n?16:0}},function(){var e=(0,q.isSafari)()&&(0,q.isIOS)(),t=(0,q.isSafari)()&&!e,n=(0,q.isChrome)()&&(0,q.isIOS)(),r=(0,q.isAndroid)()&&(0,q.isChrome)(),i=(0,q.isFirefox)()&&(0,q.isMobileDevice)(),o=(0,q.isChrome)()&&!(0,q.isMobileDevice)();switch(!0){case e:return E.createElement(_o,null);case t:return E.createElement(Co,null);case n:return E.createElement(xo,null);case r:return E.createElement(Oo,null);case i:return E.createElement(yo,null);case o:return E.createElement(Ao,null);default:return E.createElement(No,null)}}())})),Do=n(40924),Po=(0,N.Z)((function(){return{mediaGuide:{position:"absolute",right:"50%",bottom:(0,q.isMobileDevice)()?61:53,width:(0,q.isMobileDevice)()?"100%":375,height:445,backgroundColor:"white",borderRadius:8,zIndex:100,display:"flex",transition:"0.15s easeInOut","@media (max-width:755px) and (min-width:376px)":{right:"unset",left:0},"@media (max-width:375px)":{right:0,width:"100vw"}},close:{position:"absolute",right:21,top:21,cursor:"pointer",zIndex:110}}}))((function(e){var t=e.classes,n=(0,r.bp)();return E.createElement("div",{className:t.mediaGuide},E.createElement("div",{onClick:function(){n.executeAction(Jt)},className:t.close},E.createElement(Do.Z,{fontSize:"24px"})),E.createElement(Lo,{withHeader:!1}))})),Mo=(0,w.A1)((function(e){var t=e.isSplitScreen,n=e.localVideoEnabled,i=e.localMediaStream,o=e.hasMultipleCameras,a=e.videoInputDevices,l=e.classes,c=e.pdaOpen,s=(0,r.bp)();(0,E.useEffect)((function(){t&&!n&&s.executeAction(Vt,{splitScreen:!1})}),[n,t]);var u=I()("audio-visual-controls-mobile",l.container,c&&l.hidden),d=I()(l.audioVisualControls,l.expandButton,!t&&l.expandButtonSmallVideo),p=I()(l.audioVisualControls,l.rotateButton,!t&&l.rotateButtonSmallVideo);return n?E.createElement("div",{className:u},E.createElement(Q.zx,{size:"soloIcon",icon:t?"minimizeVideo":"expandVideo",iconColor:"#fff",className:d,onClick:function(e){e.stopPropagation(),s.executeAction(Vt)}}),o&&E.createElement(Q.zx,{size:"soloIcon",icon:E.createElement(Q.M6,null),className:p,onClick:function(e){var t;e.stopPropagation();var n=je(i),r=null===(t=a.find((function(e){return e.deviceId!==n})))||void 0===t?void 0:t.deviceId,o=function(e){var t,n;if(e){var r=e.getVideoTracks()||[];if(0!==r.length)return null===(t=r[0])||void 0===t||null===(n=t.getSettings())||void 0===n?void 0:n.facingMode}}(i);if(r&&o){var l=o===S._X.FRONT;s.executeAction(gn,{facingMode:l?S._X.BACK:S._X.FRONT,microphone:Ue(i),video:!0})}}})):null}),["MediaStreamStore","VideoContainerStore","ClientCallControlStore","ProductStore"],(function(e){var t=e.MediaStreamStore.getLocalMediaStream(),n=e.MediaStreamStore.getMediaDevices("videoinput");return{pdaOpen:!!e.ProductStore.focusedExternalId||!!e.ProductStore.nativeProductUrl,isSplitScreen:e.VideoContainerStore.getSplitScreen(),localVideoEnabled:Ve(t),hasMultipleCameras:n.length>1,localMediaStream:t,videoInputDevices:n,isDisplayingCallInformation:e.ClientCallControlStore.getCallInformationDisplayStatus()}})),Bo=(0,N.Z)((function(){return{container:{position:"absolute",zIndex:"3",background:"none",width:"100%",height:"100%"},hidden:{display:"none"},audioVisualControls:{position:"absolute",zIndex:"3",width:"46px",height:"40px",color:"#fff",cursor:"pointer",borderRadius:10,backgroundColor:"rgba(42, 42, 42, 0.15)","&:hover":{backgroundColor:"rgba(42, 42, 42, 0.15)"}},expandButton:{right:"5px",top:"5px"},expandButtonSmallVideo:{right:"0px",top:"0px",backgroundColor:"transparent","&:hover":{backgroundColor:"transparent"}},rotateButton:{right:"5px",top:"51px"},rotateButtonSmallVideo:{right:"0px",top:"unset",bottom:"0px",backgroundColor:"transparent","&:hover":{backgroundColor:"transparent"}}}}))(Mo),jo=n(84602),Uo=(0,w.A1)((function(e){var t=e.isSplitScreen,n=(e.micOn,e.cameraOn,e.classes),i=e.pdaOpen,o=e.isFullScreen,a=e.isNativeSDK,l=e.isDragging,c=e.callIsRunning,s=(0,r.bp)(),u=(0,E.useState)(!0),d=ee()(u,2),p=d[0],m=d[1],f=(0,jo.Z)();(0,E.useEffect)((function(){return ko=setTimeout((function(){f()&&m(!1)}),2e3),function(){return clearTimeout(ko)}}),[f]),(0,E.useEffect)((function(){if(o)return ko=setTimeout((function(){m(!1)}),2e3),function(){return clearTimeout(ko)}}),[o]);var h=I()("audio-visual-controls",n.hoverContainer,p&&n.isHovered,l&&n.hidden);return E.createElement("div",{className:h,role:"tabpanel",onClick:function(){a&&m(!p)},onMouseEnter:function(){a||m(!0)},onMouseLeave:function(){a||m(!1)}},!(0,q.isTabletDevice)()&&!i&&!a&&c&&E.createElement(Q.zx,{size:"soloIcon",icon:t?"minimizeVideo":"expandVideo",iconColor:"#fff",className:I()(n.audioVisualControls,n.expandButton),onClick:function(e){e.stopPropagation(),s.executeAction(Vt),s.executeAction(Z,{target:"toggle_split_screen"})},title:s.getText(t?"AUDIO_VISUAL_CONTROLS_MINIMIZE":"AUDIO_VISUAL_CONTROLS_EXPAND")}),o&&E.createElement(Q.zx,{size:"soloIcon",icon:"expandVideo",iconColor:"#fff",className:I()(n.audioVisualControls,n.expandButton),onClick:function(){s.executeAction(Z,{target:"co_browse_minimized_view_close"}),s.executeAction(ln.f2,{url:null})}}),!1,!1,!1)}),["MediaStreamStore","ProductStore","VideoContainerStore","CallSessionStore.change:status"],(function(e){var t,n=e.MediaStreamStore.getLocalMediaStream(),r=e.CallSessionStore.getStatus();return{micOn:ze(n),cameraOn:Ve(n),pdaOpen:!!e.ProductStore.focusedExternalId||!!e.ProductStore.nativeProductUrl,isFullScreen:!!e.ProductStore.nativeProductUrl,isSplitScreen:e.VideoContainerStore.getSplitScreen(),isNativeSDK:null===(t=e.NativeSDKStore)||void 0===t?void 0:t.isNativeSDK,callIsRunning:r===S.kp.RUNNING}})),Go=(0,N.Z)((function(){return{hoverContainer:{position:"absolute",zIndex:"3",background:"none",width:"100%",height:"100%",transition:"opacity 0.3s",opacity:(0,q.isTabletDevice)()?1:0,"&:focus-within, &:hover":{opacity:1}},isHovered:{transition:"opacity 0.3s",opacity:1},hidden:{display:"none"},audioVisualControls:{position:"absolute",zIndex:"3",background:"rgba(0, 0, 0, 0.4)",backdropFilter:"blur(80px)",borderRadius:"10px",width:"56px",height:"36px",color:"rgb(239,239,239)","&:hover":{background:"rgba(0, 0, 0, 0.4)"}},audioVisualControlsOff:{background:"rgba(225, 33, 71, 0.87)","&:hover":{background:"rgba(225, 33, 71, 0.97)"}},expandButton:{right:"10px",top:"10px"},cameraButton:{left:"10px",bottom:"10px"},micButton:{left:"10px",top:"10px"}}}))(Uo),Fo=n(97042);function Wo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ho(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wo(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vo=S.ou.BOTTOM_RIGHT,zo=S.ou.BOTTOM_LEFT,Zo=S.ou.TOP_RIGHT,Yo=S.ou.TOP_LEFT,Ko={transition:{duration:0}},qo=(0,E.forwardRef)((function(e,t){var n=e.boundries,i=void 0===n?{top:0,right:0,bottom:0,left:0}:n,o=e.isRemoteVideo,a=e.isScreenShare,l=e.isPDA,c=e.activeScreenShare,s=e.siblingSize,u=void 0===s?{}:s,d=e.size,p=e.splitScreen,m=void 0!==p&&p,f=e.pdaOpen,h=void 0!==f&&f,g=e.hasActiveTool,v=e.enableDrag,T=void 0===v||v,b=e.zIndex,_=void 0===b?0:b,y=e.isMobile,C=e.onFloatingPositionChange,x=e.onDrag,O=e.children,I=e.hidden,N=void 0!==I&&I,w=e.interactable,R=void 0===w||w,k=Or()(e,["boundries","isRemoteVideo","isScreenShare","isPDA","activeScreenShare","siblingSize","size","splitScreen","pdaOpen","hasActiveTool","enableDrag","zIndex","isMobile","onFloatingPositionChange","onDrag","children","hidden","interactable"]),L=(0,r.bp)(),D=(0,Fo._)(),P=Yi(),M=P.height,B=void 0===M?0:M,j=P.width,U=void 0===j?0:j,G=(0,E.useState)(Vo),F=ee()(G,2),W=F[0],H=F[1],V=(0,E.useRef)(),z=(0,E.useState)(!1),Z=ee()(z,2),Y=Z[0],K=Z[1],q=(0,E.useState)(T),Q=ee()(q,2),X=Q[0],J=Q[1];(0,E.useEffect)((function(){J(T)}),[T]);var $=d?d.width>d.height?16/9:3/4:1,te={height:Math.round((B-S.A3.MENU_HEIGHT)*$),width:Math.round(m&&!h?U:U/2),x:0,y:0,transition:{duration:0}},ne={height:d.height,width:d.width,x:Math.round(U-d.width-i.right),y:Math.round(B-d.height-i.bottom),transition:{duration:0}},ie=(0,E.useCallback)((function(){var e=g&&!y?U-S.BW.WIDTH:U,t=i.right+(g&&!y?re.ZP.smallSpace:0);D.start({height:d.height,width:d.width,x:Math.round(e-d.width-t),y:Math.round(B-d.height-i.bottom)})}),[g,i,D,y,B,U,d]),oe=(0,E.useCallback)((function(){D.start({height:d.height,width:d.width,x:i.left,y:Math.round(B-d.height-i.bottom)})}),[i,D,B,d]),ae=(0,E.useCallback)((function(){var e=g&&!y?U-S.BW.WIDTH:U,t=i.right+(g&&!y?re.ZP.smallSpace:0);D.start({height:d.height,width:d.width,x:Math.round(e-d.width-t),y:i.top})}),[g,i,D,y,U,d]),le=(0,E.useCallback)((function(){D.start({height:d.height,width:d.width,x:i.left,y:i.top})}),[i,D,d]),ce=(0,E.useCallback)((function(){if(y)D.start({height:B,width:U,x:0,y:0});else if(g){var e=B-S.A3.MENU_HEIGHT-re.ZP.smallSpace-u.height-i.top-i.bottom,t=e*$-i.right-i.left,n=U-S.BW.WIDTH-1.5*re.ZP.space,r=n>t?t:n,o=r/$<e?r/$:e,a=(n-r)/2+re.ZP.smallSpace,l=(B-S.A3.MENU_HEIGHT-r/$-u.height+i.top-i.bottom)/2;D.start({height:Math.round(o),width:Math.round(r),x:Math.round(a),y:Math.round(l)})}else{var c=B-S.A3.MENU_HEIGHT-i.bottom-i.top,s=c*$-i.right-i.left,d=U-i.right-i.left-re.ZP.smallSpace-u.width,p=d>s?s:d,m=p/$<c?p/$:c,f=(d-p)/2+re.ZP.smallSpace,h=(B-S.A3.MENU_HEIGHT+i.top-p/$)/2;D.start({height:Math.round(m),width:Math.round(p),x:Math.round(f),y:Math.round(h)})}}),[g,$,u,i,D,y,B,U]),se=(0,E.useCallback)((function(){if(y)D.start(Ho({height:B/2,width:U,x:0,y:o?0:B/2},Ko));else{var e=B-S.A3.MENU_HEIGHT-re.ZP.space,t=e*$,n=g?(U-S.BW.WIDTH-2*re.ZP.space)/2:(U-1.5*re.ZP.space)/2,r=n>t?t:n,i=r/$<e?r/$:e,a=o?n-r+re.ZP.smallSpace:n+re.ZP.space,l=(B-S.A3.MENU_HEIGHT-r/$)/2;D.start({height:Math.round(i),width:Math.round(r),x:Math.round(a),y:Math.round(l)})}}),[$,g,o,D,y,B,U]),ue=(0,E.useCallback)((function(){if(y)D.start(Ho({height:B,width:U,x:0,y:0},Ko));else{var e=B-S.A3.MENU_HEIGHT-re.ZP.space-0,t=e*$,n=g?U-S.BW.WIDTH-re.ZP.space-re.ZP.smallSpace:U-re.ZP.space,r=d&&n>t?t:n,i=d&&r/$<e?r/$:e,o=(n-r)/2+re.ZP.smallSpace,a=d?(B-S.A3.MENU_HEIGHT-r/$)/2:re.ZP.smallSpace+0;D.start({height:Math.round(i),width:Math.round(r),x:Math.round(o),y:Math.round(a)})}}),[c,$,g,D,y,B,U,d,l]),de=(0,E.useCallback)((function(){var e=B-S.A3.MENU_HEIGHT-re.ZP.space;if(g){var t=(U-S.BW.WIDTH)/2,n=t-d.width-re.ZP.smallSpace/2,r=t+re.ZP.smallSpace/2,i=o?r:n,a=B-S.A3.MENU_HEIGHT-d.height-re.ZP.smallSpace;D.start({height:d.height,width:d.width,x:Math.round(i),y:Math.round(a)})}else{var l=U-re.ZP.smallSpace-d.width,c=o?e/2-(d.height-re.ZP.smallSpace/2):e/2+1.5*re.ZP.smallSpace;o?(d.height,S.KT.HEIGHT,re.ZP.space):(S.KT.HEIGHT,re.ZP.space),D.start({height:d.height,width:d.width,x:Math.round(l),y:Math.round(c)})}}),[o,g,D,B,U,d]),pe=(0,E.useCallback)((function(){if(!Y)switch(W){case Vo:return ie();case zo:return oe();case Zo:return ae();case Yo:return le()}}),[ie,oe,ae,le,W,Y]);(0,E.useEffect)((function(){switch(!0){case a:return ce();case c&&!y&&!h&&!l:return de();case m&&!h&&!c&&!l:return se();case o:return ue();case!o&&!l:return pe()}}),[ce,de,se,ue,pe,c,a,o,g,$,m,y,h,l]),(0,E.useEffect)((function(){clearTimeout(V.current);var e=function(e){"function"==typeof x&&x(e)};return Y?e(Y):V.current=setTimeout((function(){return e(Y)}),150),function(){return clearTimeout(V.current)}}),[Y,x]),(0,E.useEffect)((function(){C&&C(W)}),[W,C]);var me={type:"ease",duration:Gn.iG},fe=(0,E.useCallback)((function(e,t){var n=e.clientX,r=e.clientY,i=g&&!y?U-S.BW.WIDTH:U;H(r>B/2?n>i/2?Vo:zo:n>i/2?Zo:Yo),K(!1),L.executeAction(zt,{isDragging:!1})}),[g,y,B,U,L]),he={position:"absolute",pointerEvents:R?"auto":"none",display:N?"none":"flex",zIndex:_};return E.createElement(A.E.div,lo()({ref:t,style:he,drag:X,initial:o?te:ne,animate:D,transition:me,onDragStart:function(){K(!0),L.executeAction(zt)},onDragEnd:fe,dragMomentum:!1,dragElastic:1,dragConstraints:{top:0,right:0,bottom:0,left:0}},k),O)})),Qo=qo;var Xo=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(){return o()(this,i),r.apply(this,arguments)}return l()(i,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return E.Children.only(this.props.children)}}]),i}(E.Component),Jo=Xo,$o=n(79641),ea=n(30777),ta=(0,sr.Z)((function(){return{container:{pointerEvents:"none",backgroundColor:"transparent",display:"flex",height:"100%",width:"100%",position:"absolute",alignItems:"center",justifyContent:"center"},background:{backgroundColor:"#343434"},hide:{opacity:0,display:"none"},inactiveMic:{position:"absolute",height:"32px",width:"32px",top:"12px",left:"12px",backgroundColor:"rgba(0, 0, 0, 0.3)",borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center","& svg":{height:"24px",width:"24px"}},inactiveCam:{height:"60px",width:"60px",background:"rgba(0, 0, 0, 0.3)",borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center","& svg":{height:"32px",width:"32px"}}}}))((function(e){var t=e.hasEnabledMic,n=e.hasEnabledCam,r=e.micIconClassNames,i=e.hideIcons,o=e.classes,a=I()("inactive-icons",o.container,!n&&o.background),l=I()("mic-inactive-icon-holder",o.inactiveMic,r),c=I()(o.inactiveCam);return E.createElement("div",{className:a},!i&&!n&&E.createElement("div",{className:c},E.createElement($o.Z,{lineColor:"#E12147"})),!i&&!t&&E.createElement("div",{className:l},E.createElement(ea.Z,{lineColor:"#E12147"})))}));var na=function(e){d()(a,e);var t,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h()(n);if(r){var i=h()(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return m()(this,e)});function a(e,t){var n;return o()(this,a),n=i.call(this,e,t),v()(s()(n),"_muteTrackHandler",(function(){var e=n.props.stream;e&&(e.getVideoTracks().forEach((function(e){e.removeEventListener("mute",n._muteTrackHandler),e.removeEventListener("unmute",n._muteTrackHandler)})),n._attachMediaStream())})),v()(s()(n),"_resizeHandler",(function(){Ve(n.props.stream)&&n.state.aspectRatio!==n.aspectRatio&&(n.setState({aspectRatio:n.aspectRatio}),"function"==typeof n.props.onVideoAspectRatioChange&&n.props.onVideoAspectRatioChange(n.aspectRatio))})),n.videoHolder=E.createRef(),n.state={aspectRatio:n.aspectRatio,flipped:e.flipped},n}return l()(a,[{key:"videoNode",get:function(){var e,t;return null===(e=this.videoHolder)||void 0===e||null===(t=e.current)||void 0===t?void 0:t.querySelector("video.video-".concat(S.lo.CAMERA))}},{key:"aspectRatio",get:function(){var e=this.videoNode;return e&&Ve(this.props.stream)?e.videoWidth/e.videoHeight:0}},{key:"useVrStream",get:function(){var e=this.context.settings.get("agent.virtualBackground.enabled",!0);return this.props.hasOwnProperty("vrStream")&&e}},{key:"videoHolderResoltion",get:function(){var e=this.getVideoNodeType(S.lo.CAMERA);return e&&Ve(this.props.stream)?e.clientHeight*e.clientWidth:0}},{key:"getVideoNodeType",value:function(e){var t=this.videoHolder.current;return null==t?void 0:t.querySelector('[data-video-type="'.concat(e,'"]'))}},{key:"componentDidMount",value:function(){this.initializeVideoNode(S.lo.CAMERA).addEventListener("resize",this._resizeHandler),this._attachMediaStream(),this._startVRStream()}},{key:"componentWillUnmount",value:function(){var e;null===(e=this.videoNode)||void 0===e||e.removeEventListener("resize",this._resizeHandler),this.props.stream&&this.props.stream.getAudioTracks().forEach((function(e){e.removeEventListener("unmute",rt)}))}},{key:"componentDidUpdate",value:function(e){this._calculateStreamHash(e.stream)!==this._calculateStreamHash(this.props.stream)&&(e.stream&&this.videoNode?this._startUpdatedStream():this._attachMediaStream()),this._calculateStreamHash(e.vrStream)!==this._calculateStreamHash(this.props.vrStream)&&(this._startVRStream(),e.vrStream&&!this.props.vrStream&&this.setState({streamPlaying:this._calculateStreamHash(this.props.stream)}))}},{key:"render",value:function(){var e=this.props,t=e.micIconClassNames,n=e.children,r=e.stream,i=e.className,o=e.contain,a=e.blur,l=e.vrStream,c=e.hideIcons,s=e.style,u=this.state.flipped,d=I()("video",i,{"android-fix-add-border-radius":(0,q.androidChromeNewerOrEqualTo)("61"),"virtual-background":l&&this.state.streamPlaying===this._calculateStreamHash(l),"blur-large-video":!!a&&this.videoHolderResoltion>S.T5,"blur-small-video":!!a&&this.videoHolderResoltion<=S.T5,flipped:u,contain:o}),p=Ve(r),m=ze(r);return E.createElement("div",{className:d,style:s},E.createElement(Jo,null,E.createElement("div",{ref:this.videoHolder,className:"video-holder"})),E.createElement(ta,{hasEnabledMic:m,hasEnabledCam:p,micIconClassNames:t,hideIcons:c}),n)}},{key:"_calculateStreamHash",value:function(e){if(e){var t="";return(e.getVideoTracks()||[]).forEach((function(e,n){t+=":v".concat(n,",").concat(e.id)})),t}}},{key:"initializeVideoNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S.lo.CAMERA,t=this.videoHolder.current,n=document.createElement("video");if(t)return t.appendChild(n),(0,q.isIOS)()&&n.setAttribute("playsinline","playsinline"),n.setAttribute("data-video-type",e),n.classList.add("video-".concat(e)),n.setAttribute("autoplay",""),n.setAttribute("muted",""),n.muted=!0,n.style.display="",this.props.videoAlignment&&(n.style["object-fit"]=this.props.videoAlignment),n}},{key:"_startVRStream",value:function(){var e=this;if(this.useVrStream&&this.props.vrStream){var t=this.getVideoNodeType(S.lo.VIRTUAL_BACKGROUND);t||(t=this.initializeVideoNode(S.lo.VIRTUAL_BACKGROUND)),this._attachMediaStreamToNode(t,this.props.vrStream).then((function(){e.setState({streamPlaying:e._calculateStreamHash(e.props.vrStream)})})).catch((function(e){console.log("Failed to start vr video",e)}))}}},{key:"_startUpdatedStream",value:function(){var e,t=this,n=this.getVideoNodeType("".concat(S.lo.CAMERA,"-new"));n||(n=this.initializeVideoNode("".concat(S.lo.CAMERA,"-new"))),null===(e=this._attachMediaStreamToNode(n,this.props.stream))||void 0===e||e.then((function(){if(t.videoNode!==n){t.videoNode.remove(),n.setAttribute("data-video-type",S.lo.CAMERA),n.classList.remove("video-".concat(S.lo.CAMERA,"-new")),n.classList.add("video-".concat(S.lo.CAMERA));var e={flipped:t.props.flipped};t.props.vrStream&&t.state.streamPlaying===t._calculateStreamHash(t.props.vrStream)||(e.streamPlaying=t._calculateStreamHash(t.props.stream)),t.setState(e)}})).catch((function(e){console.log("Failed to start updated video",e)}))}},{key:"_attachMediaStreamToNode",value:function(e,t){if(t&&e)return function(e,t){"srcObject"in e?e.srcObject=t:e.src=URL.createObjectURL(t)}(e,new MediaStream(t.getVideoTracks())),e.setAttribute("data-stream-id","".concat(t.id).concat(this.props.type||"")),(0,q.isIOS)()?this._waitForPlaying(e):e.play()}},{key:"_attachMediaStream",value:(t=xe()(ye().mark((function e(){var t,n,r,i,o=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.videoNode){e.next=2;break}return e.abrupt("return");case 2:if(t=this.props,n=t.stream,r=t.onStreamPlaying,n){e.next=5;break}return e.abrupt("return");case 5:if(i=this._attachMediaStreamToNode(this.videoNode,n),e.prev=6,!i){e.next=13;break}return n.getVideoTracks().forEach((function(e){e.addEventListener("unmute",o._muteTrackHandler),e.addEventListener("mute",o._muteTrackHandler)})),e.next=11,i;case 11:n.getVideoTracks().forEach((function(e){e.removeEventListener("mute",o._muteTrackHandler),e.removeEventListener("unmute",o._muteTrackHandler)})),(0,q.isIOS)()&&n.getAudioTracks().forEach((function(e){e.removeEventListener("unmute",rt),e.addEventListener("unmute",rt)}));case 13:return e.next=15,this._waitForPlaying(this.videoNode);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(6),console.log("Failed to start video",e.t0);case 20:"function"==typeof r&&r(n);case 21:case"end":return e.stop()}}),e,this,[[6,17]])}))),function(){return t.apply(this,arguments)})},{key:"_waitForPlaying",value:function(e){return new Promise((function(t,n){e.readyState>=2&&t(),e.oncanplay=function(){t()},e.onerror=function(){return n(new Error("Failed to start video"))}}))}}]),a}(x);na.propTypes={className:di().string,flipped:di().bool,onStreamPlaying:di().func,stream:di().any,vrStream:di().any,videoAlignment:di().string};var ra=na=(0,w.ZP)(na,["MediaStreamStore"],(function(e,t){var n=t.stream;return{flipped:e.MediaStreamStore.localCameraStreams.some((function(e){return e===n}))}})),ia=((0,sr.Z)((function(){return{container:{marginTop:"12px",marginBottom:"24px",display:"inline-flex",flexDirection:"row",alignItems:"center","&:hover > .pda-compare-icon-wrapper-in-compare":{"&.pda-compare-icon-wrapper-in-compare":{transition:"unset",backgroundColor:"rgba(225, 33, 71, 0.05)"}},"&:hover > .pda-compare-icon-wrapper":{"&.pda-compare-icon-wrapper":{backgroundColor:"rgba(0, 0, 0, 0.05)"}},"&:hover > .pda-compare-text-in-compare":{"&.pda-compare-text-in-compare":{transition:"unset",textDecorationColor:"rgba(114, 114, 114, 1)"}},"&:hover > .pda-compare-text":{"&.pda-compare-text":{textDecorationColor:"rgba(114, 114, 114, 1)"}}},disabled:{opacity:.5,cursor:"not-allowed"},iconWrapper:{display:"flex",justifyContent:"center",alignItems:"center",height:32,width:32,borderRadius:"100%",marginRight:"4px",transition:"background-color 0.2s"},iconWrapperInCompare:{transition:"unset",backgroundColor:"rgba(0, 0, 0, 0.05)"},text:{fontWeight:500,fontSize:"14px",lineHeight:"24px",color:"rgba(114, 114, 114, 1)",marginRight:"5px",textDecoration:"underline",textUnderlineOffset:"5px",textDecorationColor:"transparent",transition:"text-decoration-color 0.2s"}}}))((function(e){var t=e.onClick,n=e.inCompare,i=e.disabled,o=e.classes,a=(0,r.bp)().getText,l=I()(o.container,i&&o.disabled,"pda-compare-button-container"),c=I()(o.iconWrapper,n&&o.iconWrapperInCompare,"pda-compare-icon-wrapper",n&&"pda-compare-icon-wrapper-in-compare"),s=I()(o.text,"pda-compare-text",n&&"pda-compare-text-in-compare"),u=a(n?"AGENT_PDA_REMOVE_ITEM_FROM_COMPARE":"AGENT_PDA_ADD_ITEM_TO_COMPARE");return E.createElement(Q.L9,{className:l,onClick:function(){t&&t()},disabled:i,ariaLabel:u},E.createElement("span",{className:c},n?E.createElement(Q.V_,{color:"#727272"}):E.createElement(Q.J_,{color:"#6D696A"})),E.createElement(Q.xv,{className:s},u))})),n(63407),(0,N.Z)({selectContainer:{background:"transparent",display:"flex",minWidth:"50%",flexGrow:1,"&:last-child":{marginBottom:8}},selectVariantTitle:{fontSize:"10px",lineHeight:"12px",marginBottom:"12px",marginTop:"16px"}})((function(e){var t=e.classes,n=e.vertical,i=e.handleOnChange,o=e.selectVariantValues,a=e.selectContainerClass,l=e.variantContainerClass,c=e.testId,s=e.attributesWithVariants,u=e.withTitle,d=(0,r.bp)().getText;return E.createElement("div",{className:l,"data-testid":c},u&&s.length>0&&E.createElement(Q.Dx,{type:"h3",key:"title",className:t.selectVariantTitle},d("AGENT_TOOL_SELECT_VARIANT_TITLE")),s.map((function(e){var r=e.attribute,l=e.options;return E.createElement("div",{className:t.selectContainer,key:r.id},E.createElement(Q.A1,{vertical:n,className:a,label:r.name,key:r.id,elementId:"".concat(r.id," pda"),selectedValue:o[r.id],testId:"variant-select-".concat(r.name.toLowerCase()),onChange:function(e){return i(e,r)},list:l,keyValue:"value",keyLabel:"label"}))})))})),(0,N.Z)({nonConfigAttrs:{fontSize:"12px",lineHeight:"24px",fontWeight:"400",margin:"4px 2px","&:last-child":{marginBottom:"15px"}}})((function(e){var t=e.attributes,n=e.classes;return E.createElement(E.Fragment,null,t.map((function(e){return E.createElement(Q.xv,{className:n.nonConfigAttrs,key:"".concat(e.id)},e.name,": ",e.value)})))}))),oa=(n(73210),(0,N.Z)({container:{textAlign:"left",animation:"fadeIn 0.5s 1",margin:"8px 0 0"},bulletsContainer:{padding:"8px 0 20px"},bullets:{fontSize:"14px",margin:"6px 0 6px 18px",lineHeight:"17px"},description:{whiteSpace:"pre-line",animation:"fadeIn 0.5s 1",lineHeight:"26px",fontSize:"14px"}})((function(e){var t,n=e.externalId,i=e.classes,o=(0,r.bp)(),a=o.getStore("ProductStore").getProductByExternalId(n);return E.createElement("div",{className:i.container},function(){var e,t,n=null===(e=a.infobox)||void 0===e||null===(t=e.items)||void 0===t?void 0:t.find((function(e){return"Bullet List"===e.listtype}));if(void 0!==n){var r=n.item_list.map((function(e){return E.createElement("li",{className:i.bullets,key:e},e)}));return E.createElement("div",{className:i.bulletsContainer},E.createElement("ul",null,r))}}(),E.createElement("div",{className:i.description},(null==a||null===(t=a.infoText)||void 0===t?void 0:t.trim())||o.getText("AGENT_TOOL_PANEL_INFO_NO_INFO")))}))),aa=(n(43290),function(e){var t=e.fill,n=void 0===t?1:t,r="#F2A03A",i="#C4C4C4",o=Math.floor(1e16*Math.random()),a="star".concat(o),l=100*n;return E.createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},E.createElement("defs",null,E.createElement("linearGradient",{id:a},E.createElement("stop",{offset:"0%",stopColor:r}),E.createElement("stop",{offset:"".concat(l,"%"),stopColor:r}),E.createElement("stop",{offset:"".concat(l,"%"),stopColor:i}),E.createElement("stop",{offset:"100%",stopColor:i}))),E.createElement("path",{fill:"url(#".concat(a,")"),d:"M6 0.5L7.34708 4.6459H11.7063L8.17963 7.2082L9.52671 11.3541L6 8.7918L2.47329 11.3541L3.82037 7.2082L0.293661 4.6459H4.65292L6 0.5Z"}))}),la=function(e){var t=e.value,n=void 0===t?0:t,r=e.maxValue,i=void 0===r?5:r,o=e.numberOfReviews,a=n;return E.createElement("div",{style:{display:"flex"}},Pi()(Array(i)).map((function(e,t){var n;return a>1?a-=n=1:a<=1&&a>0?(n=a,a=0):n=0,E.createElement(aa,{fill:n,key:t})})),!isNaN(o)&&E.createElement("div",{style:{fontSize:"11px",lineHeight:"110%",paddingLeft:"4px"}}," (".concat(o,")")))},ca=(0,sr.Z)({container:{padding:"12px 0"},name:{display:"flex",marginRight:"24px",fontWeight:400,fontSize:"12px",lineHeight:"20px"},value:{fontWeight:500,fontSize:"12px",lineHeight:"20px"}})((function(e){var t=e.variations,n=e.classes;return 0===t.length?null:E.createElement("table",{className:n.container},E.createElement("tbody",null,t.map((function(e){var t=e.attribute;return E.createElement("tr",{key:t.id},E.createElement("td",{className:n.name},t.name),E.createElement("td",{className:n.value},t.value))}))))}));function sa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ua=(0,N.Z)({ratingsContainer:{margin:"16px 0 24px"}})((function(e){var t=e.classes,n=e.externalId,i=(e.onChange,e.vertical,e.testId,e.showAddToCardButton),o=(e.variantContainerClass,e.selectContainerClass,e.withTitle,(0,r.bp)()),a=o.getStore("ProductStore").getProductByExternalId(n),l=o.activeProductService,c=l.getVariantContext,s=l.isAttributeValueValidVariantConfiguration,u=c(a,a.selectedVariant),d=u.variantAttributes,p=a.attributes.map((function(e){return e.id})),m=[],f=[];if(!a)return null;var h={};(a.attributes||[]).map((function(e){e.isConfigurable&&(h[e.id]=e.value)}));var g=function(e,t,n,r){var i,o=[],l=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return sa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sa(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}(e.values);try{var c=function(){var l=i.value,c=s(u,e.id,l.value,t,n),d=a.variants.filter((function(e){return e.inStock&&function(e){var i=!0;if(1===n.length)i=!!e.attributes.find((function(e){return e.id===n[0]&&e.value===l.value}));else for(var o=function(o){var a,c;o<r&&t[n[o]]!==(null===(a=e.attributes.find((function(e){return e.id===n[o]})))||void 0===a?void 0:a.value)&&(i=!1),o===r&&l.value!==(null===(c=e.attributes.find((function(e){return e.id===n[o]})))||void 0===c?void 0:c.value)&&(i=!1)},a=0;a<r+1;a++)o(a);return i}(e)}));o.push({inStock:d.length>0||!c,label:l.label,value:l.value,disabled:!c})};for(l.s();!(i=l.n()).done;)c()}catch(e){l.e(e)}finally{l.f()}return o};return a.attributes.forEach((function(e,t){var n=d.get(e.id);if(n){var r=g(n,h,p,t);m.push({attribute:e,options:r})}else f.push(e)})),E.createElement(E.Fragment,null,E.createElement(ca,{variations:m}),i&&!1,E.createElement(oa,{externalId:a.externalId}),(null==a?void 0:a.rating)&&E.createElement("div",{className:t.ratingsContainer},E.createElement(la,{value:a.rating.rating,maxValue:a.rating.maxValue,numberOfReviews:a.rating.numberOfRatings})),f.length>0&&E.createElement(Q.UQ,null,E.createElement(Q.Qd,{defaultOpen:f.length<5,title:o.getText("PRODUCT_INFO_ACCORDION_TITLE"),headerStyle:{fontSize:14},contentStyle:{width:"100%"}},E.createElement(ia,{attributes:f}))))})),da=n(49540);function pa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ma(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pa(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fa,ha,ga={type:"spring",stiffness:500,damping:35},va={container:{display:"flex",justifyContent:"center",marginBottom:"36px",marginTop:10,borderRadius:"5px"},wrapper:{height:76,borderRadius:"5px",overflow:"hidden",display:"flex",alignItems:"center",position:"relative",cursor:"pointer",padding:4,maxWidth:528,overflowX:"auto","&::-webkit-scrollbar":{display:"none"},"-ms-overflow-style":"none",scrollbarWidth:"none"},image:{minWidth:48,width:48,height:72,opacity:.5},imageSelected:{opacity:1,transition:"all 0.2s linear"},outline:{position:"absolute",height:76,width:48,top:0,bottom:0,border:"".concat(2,"px solid black"),borderRadius:"4px"}},Ea=(0,N.Z)(va)((function(e){var t=e.classes,n=e.images,i=e.currentImageIndex,o=e.handleClickThumbnail,a=(0,r.bp)().getText,l=(0,E.useRef)();(0,E.useEffect)((function(){if(n.length>11){var e,t,r=i-5;null==l||null===(e=l.current)||void 0===e||null===(t=e.scrollTo)||void 0===t||t.call(e,{behavior:"smooth",left:48*r,top:0})}}),[n,i]);var c={thumbnailImg:{width:48,objectFit:"cover",borderRadius:0},thumbnailFirstImg:{borderRadius:"4px 0 0 4px"},thumbnailLastImg:{borderRadius:"0 4px 4px 0"}};return E.createElement("div",{className:t.container},E.createElement(da.s,null,E.createElement("div",{className:t.wrapper,ref:l},n.map((function(e,r){return E.createElement(Q.L9,{key:r,className:I()(t.image,i===r&&t.imageSelected),onClick:function(){return o(r)},ariaLabel:a("IMAGE_CAROUSEL_THUMBNAIL_BUTTON",r+1)},E.createElement(Q.S3,{size:S.Si.THUMBNAIL,src:e,style:ma(ma(ma({},c.thumbnailImg),0===r&&c.thumbnailFirstImg),r===n.length-1&&c.thumbnailLastImg)}),i===r&&E.createElement(A.E.div,{layoutId:"outline",initial:!1,transition:ga,className:t.outline}))})))))}));function Sa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ta(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sa(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}fa=n(1166).Z,ha=n(51731).Z;var ba=["CompareStore","ProductDrawerStore","ProductStore","CallSessionStore"];ba.push("ClientCallControlStore");var _a,ya,Ca,xa=(0,w.A1)((function(e){var t,n,i,o,a,l=e.externalId,c=e.classes,s=e.numberOfProducts,u=(e.inCompare,e.remoteFocusedProduct,e.callStatus),d=e.agentIsScreenSharing,p=e.cartIntegrationEnabled,m=(0,r.bp)(),f=m.getStore("ProductStore").getProductByExternalId(l),h=(0,E.useState)(0),g=ee()(h,2),v=g[0],T=g[1],b=(0,E.useState)(f),_=ee()(b,2),y=_[0],C=_[1],x=(null==f?void 0:f.images)||[null==f||null===(t=f.image)||void 0===t||null===(n=t.front)||void 0===n?void 0:n.thumbnailUrl],O=(0,E.useRef)(),A=(0,E.useRef)(null),N=(m.settings.get("agent.compare.enabled",!0),Yi().width);(0,E.useEffect)((function(){f&&(C(f),(null==A?void 0:A.current)&&A.current.scrollTo({top:0,behavior:"smooth"}))}),[f]);var w=(0,E.useCallback)((function(e){T(e)}),[]);if(!f)return null;var R=I()(c.productDisplayArea,(0,q.isMobileDevice)()&&c.clientMobile);return E.createElement("div",{className:R,ref:A,"data-testid":"pda"},!(0,q.isMobileDevice)()&&d&&E.createElement(ha,null),u===S.kp.PAUSED&&E.createElement("div",{className:c.pausedTextContainer},E.createElement(Cr,{text:m.getText("AGENT_CLIENT_PAUSED_MESSAGE"),backgroundColor:"rgb(225, 33, 71)",color:"#fff"})),E.createElement("div",{className:c.wrapper},E.createElement("div",{className:c.mainAreaContainer},!(0,q.isMobileDevice)()&&E.createElement("div",{className:c.closeButtonWrapper},E.createElement(Qn,null)),E.createElement("div",{className:c.imageContainer},E.createElement(Q.Li,{ref:O,images:x,size:N>600?S.Si.STAGE:320,showPaginationControls:!(0,q.isMobileDevice)(),paginationControlClassName:c.paginationControlBtn,showPaginationDots:(0,q.isMobileDevice)(),onIndexChange:w,isLoading:y!==f}),(null==x?void 0:x.length)>1&&!(0,q.isMobileDevice)()&&E.createElement(Ea,{images:x,currentImageIndex:v,handleClickThumbnail:function(e){O.current.slideToIndex(e)}})),E.createElement("div",{className:c.productInfoContainer},E.createElement("div",{className:c.productInfoWrapper},f.brandName&&E.createElement(Q.Dx,{className:c.brandName},f.brandName),E.createElement(Q.Dx,{type:"h2",className:c.itemName},f.name),f.price&&E.createElement("div",{className:c.priceContainer},E.createElement(Q.Dx,{className:c.price},m.getFormattedPrice(f)),!(null===(i=f.price)||void 0===i||!i.original)&&(null===(o=f.price)||void 0===o?void 0:o.original)!==(null===(a=f.price)||void 0===a?void 0:a.current)&&E.createElement(Q.xv,{className:c.originalPrice},m.getFormattedPrice(f,{field:"original"}))),f.subtitle&&E.createElement(Q.xv,{className:c.subtitle},f.subtitle),!1,E.createElement(ua,{testId:"pda-dropdown-container",externalId:l,onChange:function(e,t,n){var r=m.activeProductService,i=r.getVariantContext;(0,r.getVariantMatchingAttributeValues)(i(f,f.selectedVariant),n,f.attributes.map((function(e){return e.id}))),t.id},variantContainerClass:c.variantContainer,selectContainerClass:c.selectContainerClass,showAddToCardButton:p}),!1,!1),(0,q.isMobileDevice)()&&s>1&&E.createElement("div",{className:c.activePanelsContainer},E.createElement(Q.xv,{className:c.allProductsText,type:"h4"},m.getText("PRODUCT_DISPLAY_AREA_PRODUCT_LIST_TITLE")),E.createElement(fa,null))))))}),ba,(function(e,t){var n,r;return{agentIsScreenSharing:e.ClientCallControlStore.getDisplayState()===S.LT.SCREENSHARE,inCompare:e.CompareStore.isProductInCompare(t.externalId),numberOfProducts:e.ProductDrawerStore.products.length,remoteFocusedProduct:e.ProductStore.remoteFocusedExternalId,callStatus:e.CallSessionStore.getStatus(),cartIntegrationEnabled:null===(n=e.CallSessionStore.getMerchantIntegration())||void 0===n||null===(r=n.cartIntegration)||void 0===r?void 0:r.enabled}})),Oa=(0,N.Z)((function(e){var t;return{productDisplayArea:Ta(Ta({position:"relative",display:"flex",flexDirection:"column",alignItems:"center",height:"100%",overflowX:"hidden",background:"#FFFFFF",boxShadow:(null==e||null===(t=e.boxShadow)||void 0===t?void 0:t.initial)||"none",width:"100%",maxWidth:"100%",borderRadius:(0,q.isMobileDevice)()?0:"8px"},(0,re.EZ)()),{},{"@media (max-width:900px) and (orientation:portrait), (max-height:900px) and (orientation:landscape)":{margin:"auto"}}),clientMobile:{height:"100%",background:"#fff"},mainAreaContainer:{padding:"40px 21px 115px",overflowY:"auto",display:"flex",flexDirection:"row",overflowX:"hidden",justifyContent:"space-around",maxWidth:"100%",width:"100%",flexWrap:"wrap","@media (max-width:900px) and (orientation: portrait), (max-height:900px) and (orientation:landscape)":{padding:(0,q.isMobileDevice)()?"64px 0 ".concat(S.q0.HEADER_HEIGHT,"px"):"40px 21px 115px"}},wrapper:{width:"100%",maxWidth:"1440px"},imageContainer:{maxWidth:"100%",userSelect:"none"},paginationControlBtn:{margin:0},productInfoContainer:{padding:"56px 15px 0",maxWidth:"480px","@media (max-width:900px) and (orientation: portrait), (max-height:900px) and (orientation: landscape)":{padding:"0px 16px"},"@media (max-width:500px) and (orientation: portrait) and (pointer:coarse), (max-height:500px) and (orientation: landscape) and (pointer:coarse)":{margin:"auto",width:"100%",maxWidth:"100%",padding:"0"}},productInfoWrapper:{marginTop:"20px",width:"432px","@media (max-width:500px) and (orientation: portrait), (max-height:500px) and (orientation: landscape)":{width:"100%",padding:"0 24px 24px"}},brandName:{fontSize:"14px",fontWeiht:500,lineHeight:"16px",marginBottom:"8px"},itemName:{marginBottom:"8px",lineHeight:"20px"},priceContainer:{display:"flex",flexDirection:"row",alignItems:"flex-start"},price:{fontSize:"24px",marginBottom:"12px",lineHeight:"29px"},originalPrice:{fontSize:"15px",textDecorationLine:"line-through",color:"rgba(0,0,0,0.5)",margin:"0px 8px",lineHeight:"30px",marginBottom:"12px"},subtitle:{fontSize:"14px",lineHeight:"26px",margin:0,marginTop:"-4px",marginBottom:"12px"},selectContainer:{background:"transparent",display:"flex",minWidth:"50%",flexGrow:1},selectContainerClass:{margin:"0 16px 18px 0"},variantContainer:{display:"flex",flexDirection:"row",flexWrap:"wrap",alignContent:"start",flexGrow:1,width:"448px"},attribute:{fontSize:"12px",lineHeight:"24px",fontWeight:"500",marginBottom:"8px","&:last-child":{marginBottom:"20px"}},removeButtonContainer:{margin:"18px 0",width:"100%"},removeButton:{borderRadius:"6px",border:"1px solid rgba(0, 0, 0, 0.05)","& span":{fontSize:"14px"},"&:hover":{"& span":{color:"#2A2A2A"},borderColor:"rgba(225, 33, 71, 0.1)",backgroundColor:"#E121470D"},"&:active":{backgroundColor:"rgba(225, 33, 71, 0.1)",border:"1px solid transparent"}},activePanelsContainer:{background:"#F6F6F6",width:"100%",paddingBottom:"35px"},allProductsText:{padding:"35px 0px 16px 12px"},closeButtonWrapper:{position:"fixed",top:"16px",right:"16px"},relatedProductContainer:{marginTop:"15px",paddingBottom:"50px"},relatedProductWrapper:{borderRadius:"6px",overflow:"hidden"},pausedTextContainer:{position:"fixed",height:"100%",width:"100%",display:"flex",justifyContent:"space-around",alignItems:"center",zIndex:"2",pointerEvents:"none"}}}))(xa);function Ia(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}ya=n(79069).Z,Ca=n(1409).Z,_a=n(98850).Z;var Aa,Na=S.ou.BOTTOM_RIGHT,wa=S.ou.BOTTOM_LEFT,Ra=S.ou.TOP_RIGHT,ka=S.ou.TOP_LEFT,La={LANDSCAPE:{height:207,width:368},PORTRAIT:{height:192,width:144},PORTRAIT_ON_DESKTOP:{height:248,width:186}},Da={VIDEO_DESKTOP:{top:re.ZP.space,right:re.ZP.space,left:re.ZP.space,bottom:re.ZP.space+S.A3.MENU_HEIGHT},VIDEO_MOBILE:{top:S.A3.CLIENT_MOBILE_TOP_CONTROLS_HEIGHT+re.ZP.space,right:re.ZP.smallSpace,bottom:re.ZP.smallSpace,left:re.ZP.smallSpace},SCREENSHARE:{top:0,right:re.ZP.smallSpace,left:re.ZP.smallSpace,bottom:re.ZP.smallSpace}},Pa=(0,sr.Z)((function(){return{container:{display:"flex",opacity:1,visibility:"visible",width:"100%",height:"100%",position:"relative",direction:"ltr"},hide:{display:"none"},hidden:{opacity:0,visibility:"hidden"},remoteInactiveMicIcon:{top:"52px",left:"8px",right:"unset"},mobileInactiveMicIcon:{top:"8px",left:"8px",right:"unset"}}}))((0,w.S1)((function(e){var t=e.agentIsMobile,n=e.agentIsScreenSharing,i=e.classes,o=e.callStatus,a=e.compareIsOpen,l=e.clientIsMobile,c=e.remoteStream,s=e.localStream,u=e.screenShareStream,d=e.localVideoEnabled,p=e.remoteVideoEnabled,m=e.splitScreen,f=e.hasActiveTool,h=e.isDisplayingCallInformation,g=e.productsAdded,T=e.tryingOnProduct,b=e.isMinimized,_=e.blurClient,y=e.focusedProduct,C=(e.coBrowsingEnabled,e.nativeProductUrl),x=(0,r.bp)(),O=x.executeAction,A=x.settings,N=x.fullscreen,w=(0,E.useState)(La.LANDSCAPE),R=ee()(w,2),k=R[0],L=R[1],D=(0,E.useState)(Da.VIDEO_DESKTOP),P=ee()(D,2),M=P[0],B=P[1],j=(0,E.useState)(!1),U=ee()(j,2),G=U[0],F=U[1],W=(0,E.useState)(),H=ee()(W,2),V=H[0],z=H[1],Z=(0,E.useRef)(),Y=(0,q.isMobileDevice)(),K=(A.get("agent.surfBehind.type"),!!y||!!C);(0,E.useEffect)((function(){switch(!0){case l&&!0:return L(La.PORTRAIT);case l&&!1:case t&&!l:return L(La.PORTRAIT_ON_DESKTOP);case!l:return L(La.LANDSCAPE)}}),[t,l,K]),(0,E.useEffect)((function(){if(l){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ia(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ia(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Da.VIDEO_MOBILE);if(K)return B(e);if(h&&(e.bottom=e.bottom+S.A3.CLIENT_MOBILE_BOTTOM_CONTROLS_HEIGHT+re.ZP.smallSpace),a||T){if(e.bottom=e.bottom+S.q0.HEADER_HEIGHT*(a&&T?2:1),!h&&T)switch(V){case Na:case Ra:e.right=e.right-k.width+re.ZP.space;break;case wa:case ka:e.left=e.left-k.width+re.ZP.space}}else g&&(e.bottom=e.bottom+S._l.HEIGHT+re.ZP.smallSpace);return B(e)}}),[l,h,K,g,a,T,V,k.width,n]);var X,J=function(){o===S.kp.RUNNING&&O(an.zm,!h)},$=function(){J()},te=function(e){c===e&&O(_n,{stream:e})},ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(0,E.useRef)(null),i=(0,E.useCallback)((function(i){r.current?(clearTimeout(r.current),r.current=null,e&&e(i)):r.current=setTimeout((function(){n.onSingleTap&&n.onSingleTap(i),r.current=null}),t)}),[e,t,n]);return e?{onClick:i}:{}}((function(){return N.toggle(Z.current)}),250,{onSingleTap:J}),ie=b||o===S.kp.CONNECTING||o===S.kp.STARTING,oe=I()("animated-video",i.container,ie&&i.hidden),ae=I()("static-animated-video",!Y&&"static-with-border-radius",n&&Y&&i.hide),le=K&&!p&&!d&&i.hide,ce=I()("floating-animated-video",m&&!K&&!n&&"split-screen",d&&p&&(K||n&&Y)&&"double-video",(l||t)&&"stack-floating-videos",le),se=I()("remote-floating",Y&&(!K&&!n||!p)&&i.hide,!Y&&(!K||K&&!p)&&i.hide),ue=I()("local-video",(n&&Y||K)&&!d&&i.hide),de=(p||d)&&!n&&!K&&!T&&!G&&Y,pe=!T&&!n&&!Y,me=T&&!K&&!n,fe=me?c:s,he=me?s:c;return X=K?E.createElement(Oa,{externalId:y}):E.createElement(Q.L9,{onClick:$,className:ae},E.createElement(ra,{micIconClassNames:Y&&i.remoteInactiveMicIcon,stream:he,blur:_,onStreamPlaying:te},!1)),E.createElement("div",{className:oe},!n&&Y&&E.createElement(_a,null),n&&E.createElement(E.Fragment,null,!1,Y&&E.createElement(ya,{visible:h||K}),E.createElement(Qo,lo()({ref:Z,size:t?La.PORTRAIT:La.LANDSCAPE,siblingSize:k,boundries:Da.SCREENSHARE,enableDrag:!1,hasActiveTool:f,hidden:n&&K,pdaOpen:K,isMobile:Y,isScreenShare:!0},ne),E.createElement(ra,{stream:u,className:"animated-screen-share"},Ca&&(0,q.isMobileDevice)()&&E.createElement(Ca,null)))),E.createElement(Qo,{size:!1,enableDrag:!1,hasActiveTool:f,isRemoteVideo:!0,isMobile:Y,pdaOpen:K,splitScreen:m,activeScreenShare:n,hidden:!K,isPDA:!0},X),E.createElement(Qo,{size:k,enableDrag:!1,hasActiveTool:f,isRemoteVideo:!0,isMobile:Y,pdaOpen:K,splitScreen:m,hidden:K||n&&Y,activeScreenShare:n},E.createElement(Q.L9,{onClick:$,className:ae},E.createElement(ra,{micIconClassNames:Y&&i.remoteInactiveMicIcon,stream:he,blur:!1,onStreamPlaying:te},!n&&!Y&&E.createElement(_a,null),!1))),E.createElement(Qo,{hidden:!!le,size:k,boundries:M,enableDrag:!m||n&&Y||K,hasActiveTool:f,isMobile:Y,onFloatingPositionChange:function(e){z(e)},onDrag:function(e){F(e)},splitScreen:m,pdaOpen:K,zIndex:!m&&3,interactable:!K||p||d,activeScreenShare:n},E.createElement(Q.L9,{onClick:function(){if(!G){if(K)return O(ln.P8,null);if(Y)return J()}},className:ce},pe&&E.createElement(Go,{isDragging:G}),!!c&&E.createElement(ra,{className:se,micIconClassNames:Y&&i.mobileInactiveMicIcon,stream:c,blur:_,onStreamPlaying:te}),E.createElement(ra,{className:ue,micIconClassNames:Y&&i.mobileInactiveMicIcon,stream:fe,flipped:!0},de&&E.createElement(Bo,null)))))}),["CallSessionStore","CompareStore","MediaStreamStore","ProductStore","ProductDrawerStore","VideoContainerStore","ToolStore","ViewportStore","VirtualTryOnStore","ClientCallControlStore"],(function(e){var t,n,r,i=e.ViewportStore.getClientViewportFrame().clientIsMobile,o=e.ViewportStore.getClientViewportMode()===S.DI.FLOATING,a=e.MediaStreamStore.getRemoteMediaStream(S.lo.SCREENSHARE),l=(e.MediaStreamStore.getLocalMediaStream(S.lo.SCREENSHARE),a);return{focusedProduct:e.ProductStore.focusedExternalId,nativeProductUrl:e.ProductStore.nativeProductUrl,clientIsMobile:i,isMinimized:o,agentIsMobile:(null===(t=e.CallSessionStore.getAgentPlatform())||void 0===t?void 0:t.device)===q.DeviceType.MOBILE,callStatus:e.CallSessionStore.getStatus(),compareIsOpen:e.CompareStore.visible,screenShareStream:l,agentIsScreenSharing:e.ClientCallControlStore.getDisplayState()===S.LT.SCREENSHARE,isDisplayingCallInformation:e.ClientCallControlStore.getCallInformationDisplayStatus(),productsAdded:e.ProductDrawerStore.products.length>0,tryingOnProduct:e.VirtualTryOnStore.isVTOActive,hasActiveTool:ti(e.ToolStore.getCurrentTool()),remoteVideoEnabled:Ve(e.MediaStreamStore.getRemoteMediaStream()),localVideoEnabled:Ve(e.MediaStreamStore.getLocalMediaStream()),remoteStream:e.MediaStreamStore.getRemoteMediaStream(),localStream:e.MediaStreamStore.activeLocalCameraStream,splitScreen:e.VideoContainerStore.getSplitScreen(),blurClient:e.VideoContainerStore.getBlurClient(),coBrowsingEnabled:!(null===(n=e.CallSessionStore.getMerchantIntegration())||void 0===n||null===(r=n.coBrowsing)||void 0===r||!r.enabled)}}))),Ma=(0,w.A1)((function(e){var t=e.micOn,n=e.cameraOn,i=e.newMessages,o=e.classes,a=e.numberOfBasketItems,l=e.isChatVisible,c=(0,r.bp)(),s=(0,E.useState)(!0),u=ee()(s,2),d=u[0],p=u[1];(0,E.useEffect)((function(){return p(!0),Aa=setTimeout((function(){p(!1)}),2e3),function(){return clearTimeout(Aa)}}),[i,a]);var m=I()(o.notificationNumber,i>9&&o.numberSizeSmall,i>99&&o.numberSizeSmallest);i>99&&(i="99");var f=E.createElement("span",{className:o.iconWrapper},E.createElement(Q.kB,{type:"callcontrol",color:"#fff"}),0!==i&&!l&&E.createElement(A.E.div,{initial:"scale",animate:i?"scale":"",variants:{scale:{scale:[1,1.7,1,1]}},className:o.notificationBadge},E.createElement(Q.xv,{className:m},i))),h=I()(o.hoverContainer,d&&o.isHovered);return E.createElement("div",{className:h,role:"tabpanel"},E.createElement(Q.zx,{size:"soloIcon",icon:"expandVideo",iconColor:"#fff",className:I()(o.minimizedControls,o.expandButton),onClick:function(){c.executeAction(mr)}}),E.createElement(Q.zx,{size:"soloIcon",icon:f,iconColor:"#fff",className:I()(o.minimizedControls,o.chatButton),onClick:function(){c.executeAction(R,"chat"),c.executeAction(mr)}}),E.createElement(Q.zx,{size:"soloIcon",icon:E.createElement(Q.w7,{color:"#fff"}),iconColor:"#fff",className:I()(o.minimizedControls,o.cartButton),onClick:function(){c.executeAction(R,"cart"),c.executeAction(mr)}},a>0&&a),E.createElement(Q.zx,{size:"soloIcon",icon:t?"micActive":"micInActive",iconColor:"#fff",className:I()(o.minimizedControls,o.micButton,!t&&o.minimizedControlsOff),onClick:function(e){return e.stopPropagation(),c.executeAction(yn,{audio:!t})}}),E.createElement(Q.zx,{size:"soloIcon",icon:n?"cameraActive":"cameraInActive",iconColor:"#fff",className:I()(o.minimizedControls,o.cameraButton,!n&&o.minimizedControlsOff),onClick:function(e){return e.stopPropagation(),c.executeAction(yn,{video:!n})}}))}),["MediaStreamStore","ChatStore","BasketStore","ToolStore"],(function(e){var t=e.MediaStreamStore.getLocalMediaStream();return{micOn:ze(t),cameraOn:Ve(t),newMessages:e.ChatStore.getNumberUnread(),isChatVisible:e.ToolStore.getCurrentTool()===S.Js.CHAT,numberOfBasketItems:e.BasketStore.numberOfBasketItems}})),Ba=(0,N.Z)((function(){return{hoverContainer:{position:"absolute",zIndex:"3",background:"none",width:"100%",height:"100%",transition:"opacity 0.3s",opacity:(0,q.isTabletDevice)()?1:0,"&:hover":{opacity:1},"&:focus-within":{opacity:1}},isHovered:{transition:"opacity 0.3s",opacity:1},minimizedControls:{position:"absolute",zIndex:"3",background:"rgba(0, 0, 0, 0.4)",backdropFilter:"blur(80px)",borderRadius:"10px",width:"56px",height:"36px",color:"rgb(239,239,239)","&:hover":{background:"rgba(0, 0, 0, 0.4)"}},minimizedControlsOff:{background:"rgba(225, 33, 71, 0.87)","&:hover":{background:"rgba(225, 33, 71, 0.97)"}},expandButton:{left:"10px",top:"10px"},chatButton:{right:"10px",bottom:"10px"},cartButton:{right:"10px",top:"10px",padding:"0px"},cameraButton:{left:"10px",bottom:"10px"},micButton:{left:"10px",bottom:"54px"},iconWrapper:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center"},notificationBadge:{display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"100%",top:-16,right:-22,height:16,width:16,backgroundColor:"rgba(225, 33, 71, 1)",position:"absolute"},notificationNumber:{height:16,width:16,margin:0,position:"absolute",color:"white",fontSize:"11px",lineHeight:"16px"},numberSizeSmall:{fontSize:"9px"},numberSizeSmallest:{fontSize:"7px"},basketOpen:{backgroundColor:"rgba(255, 255, 255, 1)","&:hover":{backgroundColor:"rgba(255, 255, 255, 1)"}}}}))(Ma),ja=(0,w.S1)((function(e){var t=e.remoteMediaStream,n=e.remoteVideoEnabled,i=e.callStatus,o=e.isMinimized,a=e.localMediaStream,l=e.localVideoEnabled,c=e.agentIsMobile,s=(0,r.bp)(),u=(0,q.isMobileDevice)(),d=i===S.kp.PAUSED?null:a,p=I()("agent-audio-disabled-default"),m=I()("client-audio-disabled-pda"),f=I()("minimized-cobrowsing-video-container",u&&"client-mobile");return o?E.createElement("div",{className:f,style:{flexDirection:u?"column":"row"}},E.createElement(si,{status:i,minimized:!0}),E.createElement("div",{className:"video-wrapper",style:function(){var e=n,t=l,r={};switch(!0){case u:r.width=e?"100%":0,r.height=e?t?"50%":"100%":0,e||(r.display="none");break;case c:r.width=e?"100%":t?0:"100%",r.height=e?"100%":t?0:"100%",!e&&t&&(r.display="none");break;case!0:r.width=e?t?"50%":"100%":t?0:"50%",r.height=e?"100%":t?0:"100%",!e&&t&&(r.display="none")}return r}()},E.createElement(ra,{stream:t,onStreamPlaying:function(e){e===t&&s.executeAction(_n,{stream:e})},micIconClassNames:p})),E.createElement("div",{className:"video-wrapper",style:function(){var e=l,t=n,r={};switch(!0){case u:r.width=e?"100%":0,r.height=e?t?"50%":"100%":0,e||(r.display="none");break;case c:r.width=e?"100%":t?0:"100%",r.height=e?"100%":t?0:"100%",!e&&t&&(r.display="none");break;case!0:r.width=e?t?"50%":"100%":t?0:"50%",r.height=e?"100%":t?0:"100%",!e&&t&&(r.display="none")}return r}()},E.createElement(ra,{stream:d,micIconClassNames:m})),E.createElement(Ba,null)):null}),["ViewportStore","CallSessionStore","MediaStreamStore","ClientCallControlStore"],(function(e){var t;return{isMinimized:e.ViewportStore.getClientViewportMode()===S.DI.FLOATING,remoteMediaStream:e.MediaStreamStore.getRemoteMediaStream(),remoteVideoEnabled:Ve(e.MediaStreamStore.getRemoteMediaStream()),localMediaStream:e.MediaStreamStore.activeLocalCameraStream,localVideoEnabled:Ve(e.MediaStreamStore.getLocalMediaStream()),callStatus:e.CallSessionStore.getStatus(),agentIsMobile:(null===(t=e.CallSessionStore.getAgentPlatform())||void 0===t?void 0:t.device)===q.DeviceType.MOBILE}})),Ua=ja,Ga=(0,w.S1)((function(e){var t=e.remoteMediaStream,n=e.isMinimized,i=e.callStatus,o=(0,r.bp)(),a=I()("agent-audio-disabled-default"),l=i===S.kp.RECONNECTING||i===S.kp.FORWARDING||i===S.kp.PAUSED||i===S.kp.DISCONNECTING;if(!n)return null;var c="minimized-video-container";return l&&(c+=" showing-status-overlay"),E.createElement("div",{className:c},E.createElement(si,{status:i,minimized:!0}),E.createElement(ra,{stream:t,onStreamPlaying:function(e){e===t&&o.executeAction(_n,{stream:e})},micIconClassNames:a}))}),["ViewportStore","CallSessionStore","MediaStreamStore","ClientCallControlStore"],(function(e){return{isMinimized:e.ViewportStore.getClientViewportMode()===S.DI.FLOATING,remoteMediaStream:e.MediaStreamStore.getRemoteMediaStream(),remoteVideoEnabled:Ve(e.MediaStreamStore.getRemoteMediaStream()),callStatus:e.CallSessionStore.getStatus(),isDisplayingCallInformation:e.ClientCallControlStore.getCallInformationDisplayStatus()}})),Fa=n(99439),Wa=(0,N.Z)((function(){var e=(0,q.isMobileDevice)();return{container:{overflow:"hidden",display:"flex",alignSelf:"flex-end"},notification:{backgroundColor:"rgba(0, 0, 0, 0.78)",color:"#fff",borderRadius:4,padding:e?8:12,marginBottom:8,cursor:"pointer",position:"relative",fontSize:12,lineHeight:"16px",border:"solid 1px #2A2A2A",maxWidth:window.innerWidth>428?316:window.innerWidth-32},topContent:{marginBottom:8,alignSelf:"center",display:"flex"},leftRightContainer:{display:"flex"},leftContent:{display:"inline-flex"},rightContent:{paddingLeft:e?4:8,alignSelf:"center",flexGrow:1,overflow:"hidden"},bottomContent:{marginTop:8,alignSelf:"center"}}}))((function(e){var t=e.classes,n=e.id,i=e.topContent,o=e.leftContent,a=e.rightContent,l=e.bottomContent,c=e.onClick,s=e.shouldHide,u=void 0!==s&&s,d=e.isAlone,p=e.dataTestId,m=(0,r.bp)(),f=(0,E.useState)("visible"),h=ee()(f,2),g=h[0],v=h[1];return(0,E.useEffect)((function(){if(!u){var e=window.setTimeout((function(){v("hide")}),6500);return function(){window.clearTimeout(e)}}v("hide")}),[m,u]),E.createElement(A.E.li,{className:t.container,"data-notification-id":n,"data-testid":p,transition:{duration:.5,type:"tween"},initial:{opacity:0,height:d?"auto":0},variants:{visible:{opacity:1,height:"auto",transition:{opacity:{duration:.4,delay:.05},height:{duration:.35}}},hide:{opacity:0,height:0,transition:{opacity:{duration:.15,delay:0},height:{delay:.15,duration:.25}}}},animate:g,onAnimationComplete:function(e){"hide"===e&&m.executeAction(Fa.pw,{id:n,force:!0})},onClick:function(){v("hide"),"function"==typeof c&&c()}},E.createElement("div",{className:t.notification},!!i&&E.createElement("div",{className:t.topContent},i),E.createElement("div",{className:t.leftRightContainer},!!o&&E.createElement("div",{className:t.leftContent},o),!!a&&E.createElement("div",{className:t.rightContent},a)),!!l&&E.createElement("div",{className:t.bottomContent},l)))})),Ha=function(e){var t,n,i=e.notification,o=Or()(e,["notification"]),a=(0,r.bp)(),l=(0,q.isMobileDevice)()?{width:"20x",height:"20px"}:{},c=E.createElement(Q.kB,{type:"callcontrol",color:"rgba(250, 250, 250, 1)",style:l}),s=(null===(t=window.CSS)||void 0===t?void 0:t.supports("display","-webkit-box"))&&!(0,q.isMobileDevice)()?{overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"}:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},u=E.createElement("div",{style:s},null===(n=i.data)||void 0===n?void 0:n.message);return E.createElement(Wa,lo()({id:i.id,leftContent:c,rightContent:u,onClick:function(){a.executeAction(R,S.Js.CHAT)}},o))},Va=n.p+"static/assets/images/missing_product_image.0b94dd089098ce2956690c55e5b2fc64.png",za=function(e){var t,n,i,o=e.notification,a=Or()(e,["notification"]),l=(0,r.bp)(),c=l.getStore("ProductStore").getProductByExternalId(o.data.externalId),s=(0,q.isMobileDevice)();if(null!==c.price&&!s)try{i=l.getFormattedPrice(c)}catch(e){console.warn("Failed to format price",e.message)}var u=s?"20px":"24px",d={maxHeight:u,borderRadius:"4px",backgroundColor:"#fff",width:u,height:u},p=l.getText(null==c?void 0:c.name),m=s?null:E.createElement("div",{style:{width:"292px"}},l.getText("PRODUCT_ADDED_TO_CART")),f=s?E.createElement(Q.w7,{type:"callcontrol",color:"rgba(250, 250, 250, 1)",style:{width:"20x",height:"20px"}}):E.createElement("div",{style:{display:"flex",width:u,height:u,justifyContent:"center"}},E.createElement(Q.S3,{style:d,size:S.Si.THUMBNAIL,src:(null==c||null===(t=c.image)||void 0===t||null===(n=t.front)||void 0===n?void 0:n.thumbnailUrl)||Va,altName:p})),h=E.createElement("div",{style:{display:"flex",justifyContent:"space-between",minWidth:0,flexGrow:1}},E.createElement("div",{style:{fontWeight:500,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}},p),!!i&&E.createElement("div",{style:{marginLeft:4,flexShrink:0}},i),s&&E.createElement("div",{style:{marginLeft:4,flexShrink:0}},l.getText("PRODUCT_ADDED_TO_CART").toLocaleLowerCase()));return E.createElement(Wa,lo()({id:o.id,topContent:m,leftContent:f,rightContent:h,onClick:function(){l.executeAction(R,S.Js.CART)},dataTestId:"add-to-cart-notification"},a))},Za=(0,q.isMobileDevice)()?12:20,Ya={sidebarOpen:{right:"".concat(Za+S.BW.WIDTH+S.BW.MARGIN,"px")},sidebarClosed:{right:"".concat(Za,"px")}},Ka={duration:Gn.iG,type:"ease"},qa=(0,w.ZP)((function(e){var t=e.classes,n=e.notifications,r=e.hasActiveTool,i=e.viewportIsMinimized,o=e.compareIsOpen,a=(0,q.isMobileDevice)()?r||o?1:2:3,l=!!r&&!(0,q.isMobileDevice)()&&!i;return E.createElement(Fr.M,null,E.createElement(A.E.ul,{className:t.container,transition:Ka,variants:Ya,initial:l?"sidebarOpen":"sidebarClosed",animate:l?"sidebarOpen":"sidebarClosed"},n.map((function(e,t){var r=e.id,i=e.type,o=i===S.Kr.CHAT?Ha:i===S.Kr.ADD_TO_CART?za:void 0;return o?E.createElement(o,{key:"notification_".concat(r),notification:e,shouldHide:!!e.removedAt||t>=a,isAlone:1===n.length}):null}))))}),["NotificationStore","ToolStore","ViewportStore","CompareStore"],(function(e){return{notifications:e.NotificationStore.notifications,viewportIsMinimized:e.ViewportStore.getClientViewportMode()===S.DI.FLOATING,hasActiveTool:ti(e.ToolStore.getCurrentTool()),compareIsOpen:e.CompareStore.visible&&!e.CompareStore.collapsed}})),Qa=(0,N.Z)((function(){return{container:{position:"absolute",right:Za,top:(0,q.isMobileDevice)()?60:20,display:"flex",flexDirection:"column",listStyle:"none",justifyContent:"flex-start",alignItems:"flex-start",zIndex:100}}}))(qa);var Xa=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this,e)).state={orientation:"",isAndroid:null},t._handleOrientation=t._handleOrientation.bind(s()(t)),t.videoWrapper=E.createRef(),t}return l()(i,[{key:"componentDidMount",value:function(){var e=navigator.userAgent||navigator.vendor||window.opera,t=/android/i.test(e);this.setState({isAndroid:t}),t&&(window.screen.orientation.addEventListener("change",this._handleOrientation),this._handleOrientation()),document.body.style["overflow-y"]="hidden"}},{key:"componentWillUnmount",value:function(){var e;this.state.isAndroid&&window.screen.orientation.removeEventListener("change",this._handleOrientation),document.body.style["overflow-y"]="auto",null===(e=document.getElementById("focus-hug"))||void 0===e||e.remove()}},{key:"_handleOrientation",value:function(){window.screen.orientation.type!==this.state.orientation&&this.setState({orientation:window.screen.orientation.type})}},{key:"render",value:function(){var e=this.props,t=e.withVisibleChat,n=e.showCompareProducts,r=e.callStatus,i=e.isMinimized,o=e.isClientPointerPresent,a=e.coBrowsingEnabled,l=e.isShowingMediaGuide,c=e.pdaOpen,s=e.showVirtualTryOnSelector,u=e.isDisplayingCallInformation,d=I()("screen","client-screen",!!this.state.orientation&&this.state.orientation,this.state.isAndroid&&"is-android",t&&"with-visible-chat",(0,q.isMobileDevice)()&&"client-mobile",(0,q.isTabletDevice)()&&"client-tablet"),p=a?E.createElement(Ua,null):E.createElement(Ga,null),m=r===S.kp.RUNNING||r===S.kp.PAUSED||r===S.kp.FORWARDING;return E.createElement("div",{className:d},p,!i&&E.createElement(si,{status:r}),(l&&!(0,q.isMobileDevice)()||l&&u)&&E.createElement(Po,null),E.createElement(mi,null),E.createElement(ii,null),(0,q.isMobileDevice)()&&E.createElement(Li,null),(0,q.isMobileDevice)()&&m&&E.createElement(oo.Z,{isSticky:!0,hidden:c||n||s,isDisplayingCallInformation:u}),E.createElement(yr,{callStatus:r}),m&&!i&&!(0,q.isMobileDevice)()&&E.createElement(Ai,null),E.createElement(Fr.M,null,n&&E.createElement(io,null)),E.createElement(_r,null),E.createElement(Pa,null),!a&&E.createElement(Ni,{isMinimized:i,isClientPointerPresent:o}),E.createElement(Qa,null))}}]),i}(x),Ja=Xa=(0,w.ZP)(Xa,["CallSessionStore","ClientCallControlStore","MediaStreamStore","ViewportStore","ToolStore","ProductStore","ClientMeetingStore","CompareStore.visibilityChange","VirtualTryOnStore"],(function(e){var t,n;return{showCompareProducts:e.CompareStore.visible,showVirtualTryOnSelector:e.VirtualTryOnStore.isVTOActive,callSessionFontSize:e.CallSessionStore.getFontSize(),callStatus:e.CallSessionStore.getStatus(),remoteMediaStream:e.MediaStreamStore.getRemoteMediaStream(),localMediaStream:e.MediaStreamStore.getLocalMediaStream(),withVisibleChat:e.ToolStore.getCurrentTool()===S.Js.CHAT,isMinimized:e.ViewportStore.getClientViewportMode()===S.DI.FLOATING,isClientPointerPresent:e.ViewportStore.isClientPointerPresent(),coBrowsingEnabled:!(null===(t=e.CallSessionStore.getMerchantIntegration())||void 0===t||null===(n=t.coBrowsing)||void 0===n||!n.enabled),pdaOpen:!!e.ProductStore.focusedExternalId||!!e.ProductStore.nativeProductUrl,isDisplayingCallInformation:e.ClientCallControlStore.getCallInformationDisplayStatus(),isShowingMediaGuide:e.CallSessionStore.isShowingMediaGuide}})),$a=(n(27852),n(44586));function el(e,t){if(!t.hasOwnProperty("queueId"))throw new Error("registerClientForQueue payload must include 'queueId'.");return e.webrtcConnectivityService.startTest().then((function(){return!t.clientId||t.queueId&&!t.queueId.endsWith(t.clientId)?t.ticketId?e.queueService.enterQueueWithTicket(t.ticketId,t.queueId):e.queueService.enterQueue(t.queueId):e.callSessionService.callAgent({roomId:t.clientId}).then((function(){return{ticketId:t.queueId}}))}))}function tl(e,t){e.dispatch(S.gd.SELECT,t)}function nl(e,t){sl(e,"ClientMeetingStore");var n=(0,$a.Z)();cl(e,{ticketId:n}),e.getService("externalInterfaceService").emitToEmbedInstance("entered_waiting_room",{ticketId:n,connectLinkId:t.externalId||t.id}),e.getService("trackingService")._track({category:"pre_call",action:"entered_waiting_room",data:{ticketId:n,connectLinkId:t.id,externalBookingId:t.externalId}})}function rl(e,t){var n=[],r=t.queue,i=t.clientData,o=t.prioritized,a=t.clientId,l=t.ticketId;return String(null==i?void 0:i.userId).endsWith("_VOID")?(e.executeAction(Rn,{screen:"queue"}),Promise.resolve()):(n.push(e.queueService.connect(e.settings.get("queueServer"))),Promise.all(n).then((function(){if(r||(r=e.settings.get("client.defaultQueue")),r)return e.executeAction(el,{queueId:r,clientData:i,prioritized:o,clientId:a,ticketId:l}).then(function(){var n=xe()(ye().mark((function n(i){var o,l,c;return ye().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a&&i.queue&&(r=i.queue),n.next=3,e.queueService.getEstimatedWaitingTime(i.ticketId);case 3:o=n.sent,l=o.place,c=o.agents,e.externalInterfaceService.emit(wt,{queue:r,place:l,countAgents:c,ticketId:i.ticketId}),sl(e,"QueueStore"),e.getStore("CallSessionStore").getStatus()===S.kp.DISCONNECTED&&e.executeAction(Rn,{screen:"queue"}),e.settings.get("client.activateMicByDefault.enabled",!1)&&e.executeAction(yn,{audio:!0,preview:!0}),"function"==typeof(null==t?void 0:t.onSuccess)&&t.onSuccess();case 13:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),(function(){e.externalInterfaceService.emit(Nt,{queue:r}),"function"==typeof(null==t?void 0:t.onError)&&t.onError(),e.executeAction(Se.FI,{title:e.getText("GENERAL_CONNECTION_ERROR"),message:e.getText("QUEUE_UNABLE_TO_ENTER"),canBeClosed:"start"===e.getStore("ApplicationStore").getCurrentScreenName()})}));e.externalInterfaceService.emit(Nt,{queue:r}),e.executeAction(Se.FI,{title:e.getText("GENERAL_CONNECTION_INTERNAL_ERROR"),message:e.getText("QUEUE_INSUFFICENT_QUEUE_CONFIGURATION"),canBeClosed:!1})}),(function(){e.externalInterfaceService.emit("viddget:failed_to_connect_to_queue_server"),e.executeAction(Se.FI,{title:e.getText("GENERAL_CONNECTION_ERROR"),message:e.getText("QUEUE_UNABLE_TO_CONNECT_QUEUE_SERVER"),canBeClosed:!1})})))}function il(e,t){e.externalInterfaceService.emit("call_widget:left_queue",t),e.queueService.leaveQueue(),e.queueService.close()}function ol(e){e.queueService.pauseTicket()}function al(e){e.queueService.resumeTicket()}function ll(e,t){e.externalInterfaceService.emit("viddget:queue_place",t),e.dispatch(S.gd.PLACE,t),e.dispatch(S.gd.ESTIMATED_WAITING_TIME,t)}function cl(e,t){e.dispatch(S.gd.TICKET_ID,t)}function sl(e,t){e.getStore(t).startWaitingTime=new Date}var ul=(0,q.isMobileDevice)()?150:"70vw",dl=(0,q.isMobileDevice)()?"30vh":106,pl=(0,w.ZP)((function(e){var t=e.classes,n=e.stream,i=e.audioPermission,o=e.cameraPermission,a=e.showSettings,l=void 0!==a&&a,c=e.videoAlignment,s=e.onSettingsClick,u=void 0===s?function(){}:s,d=(0,r.bp)();return E.createElement("div",{className:t.videoSetup},E.createElement("div",{className:t.videoWrapper},E.createElement(ra,{stream:n,muted:!0,audioOnlyText:d.getText("GENERAL_SETTINGS_CAMERA_DEACTIVATED"),videoAlignment:c})),E.createElement("div",{className:t.actionBar},E.createElement(Nn,{failed:!i,audioEnabled:ze(n),onClick:function(){d.executeAction(yn,{audio:!Ue(n),preview:!0})},className:t.controlButton,scaleOnHover:!0,withBackground:!0}),E.createElement(wn,{failed:!o,videoEnabled:Ve(n),onClick:function(){d.executeAction(yn,{video:!je(n),preview:!0})},className:t.controlButton,scaleOnHover:!0,withBackground:!0}),l&&E.createElement(be,{onClick:u,className:t.controlButton,scaleOnHover:!0,withBackground:!0})))}),["MediaStreamStore"],(function(e){return{stream:e.MediaStreamStore.getLocalMediaStream(),cameraPermission:e.MediaStreamStore.hasCameraPermission,audioPermission:e.MediaStreamStore.hasAudioPermission}})),ml=(0,N.Z)((function(){return{videoSetup:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},videoWrapper:{marginTop:"12px",borderRadius:"10px",overflow:"hidden",position:"relative",width:ul,height:dl},actionBar:{marginTop:"16px",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},controlButton:{width:46,height:46,borderRadius:"100%",margin:"0 8px",filter:"drop-shadow(0px 2.9696px 8.16639px rgba(0, 0, 0, 0.15))"}}}))(pl),fl=n(43575),hl=(n(82472),n(92990),n(18927),n(33105),n(35035),n(74345),n(7174),n(32846),n(44731),n(77209),n(96319),n(58867),n(37789),n(33739),n(29368),n(14483),n(12056),n(30678),n(27462),n(33824),n(12974),n(15016),n(8850));var gl=function(e){var t;return t=function(t){d()(a,t);var n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h()(n);if(r){var i=h()(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return m()(this,e)});function a(){var e;o()(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=i.call.apply(i,[this].concat(n)),v()(s()(e),"state",{level:0}),v()(s()(e),"_updateAudioLevelSource",(function(){e.audioLevelContextStream&&(e.audioLevelContextStream.disconnect(),e.audioLevelContextStream=null),e.props.stream&&(e.audioLevelContextStream=e.audioLevelContext.createMediaStreamSource(e.props.stream),e.audioLevelContextStream.connect(e.audioLevelAnalyser),e.audioLevelAnimationLoop.start())})),e}return l()(a,[{key:"componentDidMount",value:function(){var e=this,t=window.AudioContext||window.webkitAudioContext;this.audioLevelContext=this.props.audioContext||new t,this.audioLevelAnalyser=this.audioLevelContext.createAnalyser(),this.audioLevelAnalyser.fftSize=1024,this.audioLevelAnalyser.smoothingTimeConstant=.8,this.audioLevelAnimationLoop=new hl.Z(30,(function(){var t=e.audioLevelAnalyser.frequencyBinCount,n=new Uint8Array(t);e.audioLevelAnalyser.getByteFrequencyData(n);for(var r=0,i=0;i<t;i++)r+=n[i];r=Math.min(r/t,100),e.setState({level:r})})),this.props.stream&&this._updateAudioLevelSource()}},{key:"componentDidUpdate",value:function(e){this.props.stream!==e.stream&&this._updateAudioLevelSource()}},{key:"componentWillUnmount",value:function(){this.audioLevelContextStream&&(this.audioLevelContextStream.disconnect(),this.audioLevelContextStream=null),this.audioLevelAnimationLoop&&(this.audioLevelAnimationLoop.stop(),this.audioLevelAnimationLoop=null)}},{key:"render",value:function(){return E.createElement(e,lo()({},this.props,{level:this.state.level}))}}]),a}(E.Component),t};gl.propTypes={stream:di().object};var vl=gl,El=n(16494),Sl=n.n(El);var Tl=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(){return o()(this,i),r.apply(this,arguments)}return l()(i,[{key:"render",value:function(){var e=Math.round(6*Math.min(this.props.level/100));return E.createElement("span",{className:"bars-level-".concat(e," level")},E.createElement(Sl(),null))}}]),i}(E.Component),bl=vl(Tl);Tl.propTypes={level:di().number.isRequired,stream:di().object.isRequired};var _l=function(){},yl=((0,sr.Z)({container:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginTop:"16px"},infoWrapper:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},text:{fontSize:"12px",fontWeight:500,margin:"0 8px"}})((function(e){var t,n,i=e.disabled,o=e.classes,a=(0,r.bp)(),l=(0,E.useState)(!1),c=ee()(l,2),s=c[0],u=c[1],d=null===(t=a.virtualBackgroundService)||void 0===t||null===(n=t.isOn)||void 0===n?void 0:n.call(t);(0,E.useEffect)((function(){u(!1)}),[d]);var p=sn().debounce((function(){s||(u(!0),a.executeAction(_l))}),1e3,{leading:!0,trailing:!1});return E.createElement("div",{className:o.container},E.createElement("div",{className:o.infoWrapper},E.createElement(Q.uu,null),E.createElement(Q.xv,{className:o.text},a.getText("SETTINGS_BACKGROUND_EFFECT_LABEL"))),E.createElement(Q.rs,{checked:d,item:"vr-background",onChange:p,disabled:i,ariaLabel:a.getText("SETTINGS_BACKGROUND_EFFECT_LABEL")}))})),Ut),Cl=function(e){var t=e.audioOutputDevices,n=e.audioInputDevices,i=e.callStatus,o=e.previewStream,a=e.selectedAudioOutput,l=e.videoInputDevices,c=(0,r.bp)(),s=c.executeAction,u=c.getText,d=c.getService,p=(c.settings,(0,E.useState)(!1)),m=ee()(p,2),f=m[0],h=m[1],g=(0,E.useRef)(),v=(0,E.useRef)(),T=(0,E.useRef)(),b="sinkId"in HTMLMediaElement.prototype;(0,E.useEffect)((function(){s(Sn)}),[s]);var _=function(e,t){!function(e,t){var n=i!==S.kp.RUNNING,r={preview:n,microphone:Ue(o),video:je(o)},l=n?"pre_call":"call",c=d("trackingService");switch(e){case Gt:if(r.microphone===t)return null;r.microphone=t,c.track(l,"audio_input_change",{payload:{enabled:!!t}});break;case Ft:return a===t?null:(c.track(l,"audio_output_change",{payload:{enabled:!!t}}),s(xn,t));case Ut:if(r.video===t)return null;c.track(l,"video_input_change",{payload:{enabled:!!t}}),r.video=t;break;default:return null}s(gn,r)}(e,t),ze(o)||h(!1)},y=function(){return x(n)||!ze(o)},C=function(e){var t,n;if(!e)return null;var r=null==e||null===(t=e.current)||void 0===t||null===(n=t.getBoundingClientRect())||void 0===n?void 0:n.bottom;return r?Math.floor(window.innerHeight-r-8):null},x=function(e){return 0===e.length};return E.createElement("div",{className:"settings-container"},E.createElement("div",{className:"wrapper"},!!l&&E.createElement("div",{className:"section",ref:g},E.createElement(fl.Z,{label:u("SETTINGS_MODAL_CAMERA"),containerClassStyle:"dropdown",onChange:function(e){return _(yl,e)},list:[{deviceId:!1,label:u("CAMERA_DISABLED")}].concat(l.filter((function(e){return e.label}))),defaultValue:je(o)||!1,placeholder:u("SETTINGS_MODAL_NO_DEVICE_FOUND"),keyValue:"deviceId",keyLabel:"label",disabled:x(l),maxListHeight:C(g)}),!1),!!n&&E.createElement("div",{className:"section",ref:v},E.createElement(fl.Z,{label:u("SETTINGS_MODAL_MICROPHONE"),containerClassStyle:"dropdown",onChange:function(e){return _("audioinput",e)},list:[{deviceId:!1,label:u("MIC_DISABLED")}].concat(n.filter((function(e){return e.label}))),placeholder:u("SETTINGS_MODAL_NO_DEVICE_FOUND"),defaultValue:Ue(o)||!1,keyValue:"deviceId",keyLabel:"label",disabled:x(n),maxListHeight:C(v)}),n&&E.createElement(Q.zx,{icon:"micActive",type:"secondary",className:I()("test-input",y()&&"input-error"),onClick:function(){if(y())return null;h(!f)}},E.createElement("span",{className:"bar"},f&&ze(o)?E.createElement(bl,{stream:o}):E.createElement(Q.xv,null,u("SETTINGS_MODAL_TEST_LABEL"))))),!!t&&t.length>0&&E.createElement("div",{className:"section",ref:T},E.createElement(fl.Z,{label:u("SETTINGS_MODAL_AUDIO"),containerClassStyle:"dropdown",onChange:function(e){return _("audiooutput",e)},list:t.filter((function(e){return e.label})),placeholder:u("SETTINGS_MODAL_NO_DEVICE_FOUND"),defaultValue:a||"",keyValue:"deviceId",keyLabel:"label",disabled:x(t)||!b,maxListHeight:C(T)}))))},xl=(0,w.ZP)(Cl,["MediaStreamStore","CallSessionStore"],(function(e){return{previewStream:e.MediaStreamStore.getLocalMediaStream(),callStatus:e.CallSessionStore.getStatus(),audioOutputDevices:e.MediaStreamStore.getMediaDevices("audiooutput"),selectedAudioOutput:e.MediaStreamStore.audioOutputMediaDeviceId,audioInputDevices:e.MediaStreamStore.getMediaDevices("audioinput"),videoInputDevices:e.MediaStreamStore.getMediaDevices("videoinput")}}));function Ol(e,t){if(!t.hasOwnProperty("type"))throw new Error("updateClientViewportModeAction payload must include 'type'");var n={type:t.type};e.getStore("ViewportStore").isClientInsideOverlay()&&(n.clientIsInsideOverlay=!0),e.dispatchLocalAndRemote(S.KR.CLIENT_VIEWPORT_MODE,n)}function Il(e){return Ol(e,{type:S.DI.FLOATING})}function Al(e){return Ol(e,{type:S.DI.NORMAL})}function Nl(e){return Ol(e,{type:S.DI.FLOATING_LEFT_MINIMIZED})}function wl(e){return Ol(e,{type:S.DI.CENTER_MODAL})}function Rl(e,t){if(!t.hasOwnProperty("present"))throw new Error("updateClientPointerAction payload must include 'present'");e.dispatch(S.KR.CLIENT_POINTER_MODE,t)}function kl(e){return Rl(e,{present:!0})}function Ll(e){return Rl(e,{present:!1})}function Dl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dl(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Cl.propTypes={audioOutputDevices:di().array,videoInputDevices:di().array,audioInputDevices:di().array,selectedAudioOutput:di().string,previewStream:di().object},n(26699),n(82772),n(40561),n(32023);var Ml=function(e){var t,n,r,i,o,a,l,c,s,u;return{wrapper:{padding:"16px 24px",backgroundColor:e.popup.backgroundColor,height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center"},estimatedWaitingValue:{fontSize:"40px",lineHeight:"46px",fontWeight:700,color:e.popup.textColor,textTransform:e.popup.typography.queueTimeLeftTextTransform,margin:8},estimatedWaitingText:{fontSize:"18px",lineHeight:"20px",fontWeight:400,color:e.popup.textColor,margin:0},waitingMessage:{fontSize:14,fontWeight:400,color:e.popup.textColor,opacity:.6,margin:0,marginTop:12},noEstimatedWaitingTime:{marginTop:"8px",color:e.popup.textColor,fontWeight:700,margin:0,textAlign:"center"},settingsButton:{padding:"7px 18px",border:"1px solid ".concat(e.popup.settingsButton.borderColor),borderRadius:"4px",backgroundColor:e.popup.settingsButton.main,color:e.popup.settingsButton.contrastText,"&:hover":{backgroundColor:e.popup.settingsButton.hoverBackground,color:e.popup.settingsButton.contrastText},marginTop:"24px"},marginRight:{marginRight:"12px"},leaveQueueButton:{backgroundColor:(null==e||null===(t=e.waitingScreen)||void 0===t||null===(n=t.leaveButton)||void 0===n?void 0:n.backgroundColor)||"transparent",border:0,color:(null==e||null===(r=e.waitingScreen)||void 0===r||null===(i=r.leaveButton)||void 0===i?void 0:i.textColor)||e.popup.leaveQueueButton.text,textTransform:e.popup.typography.queueLeaveTextTransform,marginTop:12,padding:"7px 18px",width:"auto","&:hover":{backgroundColor:(null==e||null===(o=e.waitingScreen)||void 0===o||null===(a=o.leaveButton)||void 0===a||null===(l=a.hover)||void 0===l?void 0:l.backgroundColor)||"transparent",color:(null==e||null===(c=e.waitingScreen)||void 0===c||null===(s=c.leaveButton)||void 0===s||null===(u=s.hover)||void 0===u?void 0:u.textColor)||e.popup.leaveQueueButton.text,border:0}},leaveDialog:{backgroundColor:e.popup.backgroundColor,display:"flex",height:"100%",padding:"26px",flexDirection:"column",justifyContent:"center"},leaveDialogTitle:{marginBottom:45,fontSize:20},leaveDialogConfirmButton:{marginTop:12,height:56},leaveDialogCancelButton:{marginTop:12},infoContainer:{display:"flex",flexDirection:"column",height:84,justifyContent:"center",textAlign:"center",marginBottom:"16px"},minimizedContainer:{display:"flex",alignItems:"center",justifyContent:"space-around",backgroundColor:e.popup.minimizedQueue.backgroundColor,padding:16,cursor:"pointer"},statusIndicator:{backgroundColor:e.popup.minimizedQueue.statusColor,height:12,width:12,margin:5,borderRadius:"50%",boxShadow:"0 0 0 0 rgba(".concat(e.popup.minimizedQueue.statusOutlineRGB,", 1)"),animation:"$pulse",animationDuration:"1.3s",animationIterationCount:"infinite",animationTimingFunction:"cubic-bezier(1,.01,.75,.87)"},"@keyframes pulse":{"100%":{boxShadow:"0 0 0 5px rgba(".concat(e.popup.minimizedQueue.statusOutlineRGB,", 0)")}},minimizedTimeText:{fontSize:16,fontWeight:500,lineHeight:"20px",color:e.popup.minimizedQueue.contrastText},videoBox:{flexDirection:"column",justifyContent:"center",alignItems:"center"},"@media screen and (max-width: 429px)":{estimatedWaitingValue:{fontSize:"56px"}},"@media screen and (max-width: 320px)":{estimatedWaitingValue:{fontSize:"40px"},estimatedWaitingText:{fontSize:"14px"}}}},Bl=function(e){var t=e.classes,n=e.onConfirmClick,i=e.onCancelClick,o=(0,r.bp)();return E.createElement("div",{className:t.leaveDialog},E.createElement("div",null,E.createElement(Q.xv,{type:"h2",className:t.leaveDialogTitle},o.getText("CLIENT_LEAVE_QUEUE_WARNING_TITLE"))),E.createElement("div",null,E.createElement(Q.zx,{type:"popupPrimary",className:t.leaveDialogConfirmButton,onClick:n,"data-testid":"confirm-leave-button"},o.getText("CLIENT_LEAVE_QUEUE")),E.createElement(Q.zx,{type:"popupSecondary",className:t.leaveDialogCancelButton,onClick:i},o.getText("GENERAL_BUTTON_CANCEL"))))},jl=(0,N.Z)(Ml,{withTheme:!0})((function(e){var t=e.classes,n=e.theme,i=e.onMaximizeClick,o=e.currentEstimatedWaitingTime,a=e.showEstimatedWaitingTime,l=(0,r.bp)();return E.createElement("div",{className:t.minimizedContainer,onClick:i,onKeyPress:i,role:"button",tabIndex:"0"},E.createElement("div",{className:t.statusIndicator}),E.createElement(Q.xv,{className:t.minimizedTimeText},a?l.getText("CLIENT_QUEUE_ESTIMATED_WAITING_TIME",Math.ceil(o/60)):l.getText("CLIENT_QUEUE_PLACE_NO_AGENTS_STATUS")),E.createElement(Q.EU,{svg:{width:"24",height:"24",viewBox:"0 0 24 24"},path:{strokeWidth:"2",d:"M6 9L12 15L18 9",stroke:n.popup.minimizedQueue.contrastText},direction:"up"}))})),Ul=(0,w.ZP)((function(e){var t=e.classes,n=e.agentCount,i=e.selectedQueueId,o=e.estimatedWaitingTime,a=e.nextEstimatedWaitingTime,l=e.theme,c=(0,r.bp)(),s=mo(),u=s.setHeaderValues,d=s.showBackButton,p=(0,E.useState)(o),m=ee()(p,2),f=m[0],h=m[1],g=(0,E.useState)(!1),v=ee()(g,2),S=v[0],T=v[1],b=(0,E.useState)(!1),_=ee()(b,2),y=_[0],C=_[1],x=(0,E.useState)(!1),O=ee()(x,2),I=O[0],A=O[1],N=c.settings.get("client.surfWhileInQueue.enabled",!0),w=(0,vo.Wz)(),R=w.clientId,k=w.mock,L=function(){u({showHeader:S}),T(!S)},D=function(){k||(u({showHeader:y}),C(!y))},P=function(){k||(I?(c.executeAction(F),c.executeAction(wl)):(c.executeAction(G),c.executeAction(Nl)),u({showHeader:I}),A(!I))};(0,E.useEffect)((function(){return u({showHeader:!0,headerText:d?c.getText("CLIENT_CHECK_AUDIO_VIDEO"):c.getText("CLIENT_DROP_IN"),showRightSideButton:!d,rightSideButtonIcon:N?"arrowDown":"close-small",showBackButton:d,rightButtonClickCallback:N?P:D}),function(){return u(uo)}}),[d]),(0,E.useEffect)((function(){var e=o;if(a&&!isNaN(a)){var t=setInterval((function(){e=Math.max(e-5,+a),h(e)}),5e3);return function(){return clearInterval(t)}}h(e)}),[o]),(0,E.useEffect)((function(){var e=function(){(0,q.isIOS)()&&("hidden"===document.visibilityState?c.executeAction(ol):"visible"===document.visibilityState&&c.executeAction(al))};return document.addEventListener("visibilitychange",e),c.externalInterfaceService.emit("call_widget:add_class",{class:"transition"}),function(){c.externalInterfaceService.emit("call_widget:remove_class",{class:"transition"}),document.removeEventListener("visibilitychange",e)}}),[]);var M=o>=0&&null!=o&&!isNaN(f)&&f>0;return I?E.createElement(jl,{onMaximizeClick:P,currentEstimatedWaitingTime:f,showEstimatedWaitingTime:M}):y?E.createElement(Bl,{classes:t,onConfirmClick:function(){c.executeAction(Rn,{screen:"start"}),c.externalInterfaceService.emit(jt)},onCancelClick:D}):S?E.createElement(Bl,{classes:t,onConfirmClick:function(){k||(c.executeAction(il,{selectedQueueId:i,agentCount:n}),c.executeAction(On),c.executeAction(Rn,{screen:R?"enter-from-connect-link":"start"}))},onCancelClick:L}):E.createElement("div",{className:t.wrapper},d?E.createElement(xl,null):E.createElement(E.Fragment,null,E.createElement("div",{className:t.infoContainer},M?E.createElement(E.Fragment,null,E.createElement(Q.xv,{className:t.estimatedWaitingValue},c.getText("CLIENT_QUEUE_ESTIMATED_WAITING_TIME",Math.ceil(f/60))),E.createElement(Q.xv,{className:t.estimatedWaitingText},c.getText("CLIENT_QUEUE_ESTIMATED_WAITING_TIME_TEXT")),E.createElement(Q.xv,{className:t.waitingMessage},c.getText("CLIENT_QUEUE_WAITING_MESSAGE"))):E.createElement(E.Fragment,null,E.createElement(Q.xv,{className:t.noEstimatedWaitingTime},0===n?E.createElement(To,{text:c.getText("CLIENT_QUEUE_PLACE_NO_AGENTS")}):c.getText("CLIENT_QUEUE_NO_ESTIMATED_WAITING_TIME")),E.createElement(Q.aN,{loading:!0,color:l.popup.textColor,type:"dots",style:{marginTop:"8px"}}))),E.createElement("div",{className:t.videoBox},E.createElement(ml,{videoAlignment:"cover"}),E.createElement(Q.zx,{className:t.settingsButton,onClick:function(){c.executeAction(W),u(Pl(Pl({},s),{},{showBackButton:!0}))},type:"secondary",icon:"checkMark",iconColor:l.popup.settingsButton.iconColor},c.getText("CLIENT_CHECK_AUDIO_VIDEO"))),E.createElement(Q.zx,{className:t.leaveQueueButton,onClick:L,"data-testid":"leave-queue-button"},c.getText("CLIENT_LEAVE_QUEUE"))))}),["QueueStore","MediaStreamStore"],(function(e){return{agentCount:e.QueueStore.getNumberOfAvailableAgents(),selectedQueueId:e.QueueStore.getSelectedQueue(),estimatedWaitingTime:e.QueueStore.getEstimatedWaitingTime(),nextEstimatedWaitingTime:e.QueueStore.getNextEstimatedWaitingTime()}})),Gl=(0,N.Z)(Ml,{withTheme:!0})(Ul),Fl=(0,N.Z)((function(e){return{minimizedContainer:{display:"flex",alignItems:"center",justifyContent:"space-around",backgroundColor:e.popup.minimizedQueue.backgroundColor,padding:16,cursor:"pointer"},statusIndicator:{backgroundColor:e.popup.minimizedQueue.statusColor,height:12,width:12,margin:5,borderRadius:"50%",boxShadow:"0 0 0 0 rgba(".concat(e.popup.minimizedQueue.statusOutlineRGB,", 1)"),animation:"$pulse",animationDuration:"1.3s",animationIterationCount:"infinite",animationTimingFunction:"cubic-bezier(1,.01,.75,.87)"},"@keyframes pulse":{"100%":{boxShadow:"0 0 0 5px rgba(".concat(e.popup.minimizedQueue.statusOutlineRGB,", 0)")}},minimizedTimeText:{fontSize:16,fontWeight:500,lineHeight:"20px",color:e.popup.minimizedQueue.contrastText}}}),{name:"QueueTicket"})((function(e){var t=e.classes,n=e.onMaximizeClick,i=e.estimatedWaitingTime,o=e.nextEstimatedWaitingTime,a=(0,r.bp)(),l=(0,In.Z)(),c=(0,E.useState)(i),s=ee()(c,2),u=s[0],d=s[1],p=i>=0&&null!=i,m=!isNaN(u)&&u>0,f=p&&m;return(0,E.useEffect)((function(){var e=i;if(o&&!isNaN(o)){var t=setInterval((function(){e=Math.max(e-5,+o),d(e)}),5e3);return function(){return clearInterval(t)}}d(e)}),[i]),E.createElement("div",{className:t.minimizedContainer,onClick:n,onKeyPress:n,role:"button",tabIndex:"0"},E.createElement("div",{className:t.statusIndicator}),E.createElement(Q.xv,{className:t.minimizedTimeText},f?a.getText("CLIENT_QUEUE_ESTIMATED_WAITING_TIME",Math.ceil(u/60)):a.getText("CLIENT_QUEUE_PLACE_NO_AGENTS_STATUS")),E.createElement(Q.EU,{svg:{width:"24",height:"24",viewBox:"0 0 24 24"},path:{strokeWidth:"2",d:"M6 9L12 15L18 9",stroke:l.popup.minimizedQueue.contrastText},direction:"up"}))})),Wl=(0,q.isMobileDevice)()?150:"100%",Hl=(0,q.isMobileDevice)()?"30vh":160,Vl=(0,w.ZP)((function(e){var t=e.classes,n=e.stream,i=e.audioPermission,o=e.cameraPermission,a=e.showSettings,l=void 0!==a&&a,c=e.withLoader,s=void 0!==c&&c,u=e.hideIcons,d=void 0!==u&&u,p=e.loadingText,m=e.videoAlignment,f=e.enableInStart,h=(0,r.bp)(),g=(0,E.useState)(!s),v=ee()(g,2),S=v[0],T=v[1];return(0,E.useEffect)((function(){f&&h.executeAction(yn,{video:"both"===f,audio:!!f,preview:!0})}),[f]),(0,E.useEffect)((function(){setTimeout((function(){T(!0)}),1500)}),[s]),E.createElement("div",{className:t.videoSetup},S&&E.createElement("div",{className:t.videoWrapper},E.createElement(ra,{flipped:!0,stream:n,muted:!0,audioOnlyText:h.getText("GENERAL_SETTINGS_CAMERA_DEACTIVATED"),videoAlignment:m,hideIcons:d}),l&&E.createElement("div",{className:t.actionBar},E.createElement(Nn,{failed:!i,audioEnabled:ze(n),onClick:function(){h.executeAction(yn,{audio:!Ue(n),preview:!0})},className:t.controlButton,scaleOnHover:!0,withBackground:!0}),E.createElement(wn,{failed:!o,videoEnabled:Ve(n),onClick:function(){h.executeAction(yn,{video:!je(n),preview:!0})},className:t.controlButton,scaleOnHover:!0,withBackground:!0}))),!S&&E.createElement("div",{className:t.loaderBox},E.createElement(Q.xv,null,p),E.createElement(Q.aN,{position:"relative",type:"small"})))}),["MediaStreamStore"],(function(e){return{stream:e.MediaStreamStore.getLocalMediaStream(),cameraPermission:e.MediaStreamStore.hasCameraPermission,audioPermission:e.MediaStreamStore.hasAudioPermission}})),zl=(0,N.Z)((function(){return{videoSetup:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%"},videoWrapper:{borderRadius:"10px",overflow:"hidden",position:"relative",width:Wl,height:Hl},actionBar:{position:"absolute",bottom:12,left:(0,q.isMobileDevice)()?"10%":"30%",zIndex:100,display:"flex",alignItems:"center",justifyContent:"center"},controlButton:{width:46,height:46,borderRadius:"100%",margin:"0 8px",filter:"drop-shadow(0px 2.9696px 8.16639px rgba(0, 0, 0, 0.15))"},loaderBox:{display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center",height:80}}}))(Vl),Zl=(0,N.Z)((function(e){return{leaveDialog:{position:"absolute",zIndex:100001,backgroundColor:"rgba(0, 0, 0, 0.5)",width:"100%",height:"100%",left:0,top:0,display:"flex",justifyContent:"center",alignItems:"center",transition:"linear 1s"},leaveDialogContent:{backgroundColor:e.popup.backgroundColor,display:"flex",height:"50%",width:"calc(100% - 32px)",margin:"auto",padding:"26px",flexDirection:"column",justifyContent:"center"},leaveDialogTitle:{marginBottom:45,fontSize:20,textAlign:"center"},leaveDialogConfirmButton:{marginTop:12,height:56},leaveDialogCancelButton:{marginTop:12}}}),{name:"LeaveDialog"})((function(e){var t=e.classes,n=e.onConfirmClick,i=e.onCancelClick,o=(0,r.bp)();return E.createElement("div",{className:t.leaveDialog},E.createElement("div",{className:t.leaveDialogContent},E.createElement("div",null,E.createElement(Q.xv,{type:"h2",className:t.leaveDialogTitle},o.getText("CLIENT_LEAVE_QUEUE_WARNING_TITLE"))),E.createElement("div",null,E.createElement(Q.zx,{type:"popupPrimary",className:t.leaveDialogConfirmButton,onClick:n,"data-testid":"confirm-leave-button"},o.getText("CLIENT_LEAVE_QUEUE")),E.createElement(Q.zx,{type:"popupSecondary",className:t.leaveDialogCancelButton,onClick:i},o.getText("GENERAL_BUTTON_CANCEL")))))}));function Yl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yl(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ql=function(e){return{queue:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",backgroundColor:"white",padding:16,paddingTop:8},stats:{display:"flex",justifyContent:"space-evenly",alignItems:"center",height:88,width:"100%",borderBottom:" 1px solid #E0E0E0","& div":{display:"flex",flexDirection:"column",alignItems:"center"}},stat:{minWidth:"28%"},statEstimate:{minWidth:"38%"},statTitle:{fontSize:10,fontWeight:600,color:"rgba(38, 38, 45, 0.8);",textTransform:"uppercase",textAlign:"center"},statText:{fontSize:24,fontWeight:700,color:e.popup.textColor,display:"flex",alignItems:"center"},actions:{width:96,display:"flex",alignItems:"center",justifyContent:"space-between",margin:"0 auto 16px auto"},actionsIcon:{height:40,width:40,display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #E0E0E0",borderRadius:48},videoBox:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},videoBoxText:{fontSize:14,fontWeight:400,lineHeight:"20px",textAlign:"center",marginBottom:24},noEstimatedWaitingTime:{marginTop:"8px",color:e.popup.textColor,fontWeight:700,margin:0,textAlign:"center"},settings:{height:"100%",display:"flex",padding:"16px 24px",alignItems:"center",flexDirection:"column",justifyContent:"space-around",backgroundColor:"#fff"},statusIndicator:{backgroundColor:e.popup.minimizedQueue.statusColor,height:12,width:12,margin:5,marginTop:8,borderRadius:"50%",boxShadow:"0 0 0 0 rgba(".concat(e.popup.minimizedQueue.statusOutlineRGB,", 1)"),animation:"$pulse",animationDuration:"3s",animationIterationCount:"infinite",animationTimingFunction:"cubic-bezier(1,.01,.75,.87)"},"@keyframes pulse":{"100%":{boxShadow:"0 0 0 5px rgba(".concat(e.popup.minimizedQueue.statusOutlineRGB,", 0)")}},settingsButton:{position:"relative"},callSettingIcon:{marginRight:null!=e&&e.rtl?0:8,marginLeft:null!=e&&e.rtl?8:0,minWidth:16},loader:{marginTop:15,marginBottom:10,display:"flex",flexDirection:"row"}}},Ql=(0,w.ZP)((function(e){var t=e.estimatedWaitingTime,n=e.selectedQueueId,i=e.agentCount,o=e.nextEstimatedWaitingTime,a=e.place,l=e.classes,c=(0,r.bp)(),s=(0,vo.Wz)(),u=s.clientId,d=s.mock,p=mo(),m=p.setHeaderValues,f=p.showBackButton,h=(0,In.Z)(),g=(0,E.useState)(!1),v=ee()(g,2),S=v[0],T=v[1],b=(0,E.useState)(!1),_=ee()(b,2),y=_[0],C=_[1],x=(0,E.useState)(t),O=ee()(x,2),I=O[0],A=O[1],N=c.settings.get("client.surfWhileInQueue.enabled",!0),w=c.settings.get("client.waitingData.place",!0),R=c.settings.get("client.waitingData.availableAgents",!1),k=c.settings.get("client.waitingData.estimatedWaitingTime",!0),L=t>=0&&null!=t,D=!isNaN(I)&&I>0,P=L&&D,M=!(w||R||k);(0,E.useEffect)((function(){var e=t;if(o&&!isNaN(o)){var n=setInterval((function(){e=Math.max(e-5,+o),A(e)}),5e3);return function(){return clearInterval(n)}}A(e)}),[t]),(0,E.useEffect)((function(){return m({showHeader:!0,headerText:f?c.getText("CLIENT_CHECK_AUDIO_VIDEO"):c.getText("CLIENT_DROP_IN"),showRightSideButton:!f,rightSideButtonIcon:N?"arrowDown":"close-small",showBackButton:f,rightButtonClickCallback:N?B:U}),function(){return m(uo)}}),[f]);var B=function(){d||(S?(c.executeAction(F),c.executeAction(wl)):(c.executeAction(G),c.executeAction(Nl)),m({showHeader:S}),T(!S))},j=function(){c.executeAction(W),m(Kl(Kl({},p),{},{showBackButton:!0}))},U=function(){y?c.executeAction(Z,{target:"leave_queue_dialog_cancel"}):c.executeAction(Z,{target:"leave_queue_dialog_open"}),C(!y)},H=function(){d||(c.executeAction(Z,{target:"leave_queue_dialog_confirm"}),c.executeAction(il,{selectedQueueId:n,agentCount:i}),c.executeAction(On),c.executeAction(Rn,{screen:u?"enter-from-connect-link":"start"}))};return function(){switch(!0){case S:return E.createElement(Fl,{estimatedWaitingTime:t,nextEstimatedWaitingTime:o,onMaximizeClick:B});case f:return E.createElement("div",{className:l.settings},E.createElement(xl,null));default:return E.createElement("div",{className:l.queue},y&&E.createElement(Zl,{onConfirmClick:H,onCancelClick:U}),E.createElement("div",{className:l.stats},M&&E.createElement("div",{className:l.stat},E.createElement("span",{className:l.statTitle},0===i?E.createElement(To,{text:c.getText("CLIENT_QUEUE_PLACE_NO_AGENTS")}):c.getText("CLIENT_QUEUE_NO_ESTIMATED_WAITING_TIME_V2")),E.createElement(Q.aN,{loading:!0,color:h.popup.textColor,type:"dots",style:null===(e=ql(h))||void 0===e?void 0:e.loader})),w&&a>0&&E.createElement("div",{className:l.stat},E.createElement("span",{className:l.statTitle},c.getText("CLIENT_QUEUE_PLACE_IN_QUEUE")),E.createElement(Q.xv,{className:l.statText},a)),k&&E.createElement("div",{className:l.statEstimate},E.createElement("span",{className:l.statTitle},0===i?E.createElement(To,{text:c.getText("CLIENT_QUEUE_PLACE_NO_AGENTS")}):c.getText("CLIENT_QUEUE_NO_ESTIMATED_WAITING_TIME_V2")),P?E.createElement(Q.xv,{className:l.statText},E.createElement("span",{className:l.statusIndicator}),c.getText("CLIENT_QUEUE_ESTIMATED_WAITING_TIME",Math.ceil(I/60))):E.createElement(Q.aN,{loading:!0,color:h.popup.textColor,type:"dots",style:null===(n=ql(h))||void 0===n?void 0:n.loader})),R&&i>0&&E.createElement("div",{className:l.stat},E.createElement("span",{className:l.statTitle},c.getText("CLIENT_QUEUE_AVAILABLE_AGENT")),E.createElement(Q.xv,{className:l.statText},i))),E.createElement("div",{className:l.videoBox},E.createElement(To,{className:l.videoBoxText,text:(r=w&&1===a,c.getText(r?"CLIENT_QUEUE_PLACE_MESSAGE_FIRST":"CLIENT_QUEUE_PLACE_MESSAGE"))}),E.createElement(zl,{videoAlignment:"cover",showSettings:!0,hideIcons:!0})),E.createElement("div",{className:l.actions},E.createElement(Q.L9,{className:l.actionsIcon,onClick:j},E.createElement(Q.ew,null)),E.createElement(Q.L9,{className:l.actionsIcon,onClick:U},E.createElement(Q.LX,null))))}var e,n,r}()}),["QueueStore","MediaStreamStore"],(function(e){return{agentCount:e.QueueStore.getNumberOfAvailableAgents(),selectedQueueId:e.QueueStore.getSelectedQueue(),place:e.QueueStore.getCurrentPlace(),estimatedWaitingTime:e.QueueStore.getEstimatedWaitingTime(),nextEstimatedWaitingTime:e.QueueStore.getNextEstimatedWaitingTime()}})),Xl=(0,N.Z)(ql,{name:"QueueScreenV2"})(Ql),Jl=(n(23157),n(64305)),$l=n(44444).getPlatformMetadata,ec=function(){var e=$l(),t=e.browser.name;return void 0!==e.browser.version&&(t+=" ".concat(e.browser.version)),void 0!==e.os.name&&(t+=", ".concat(e.os.name),void 0!==e.os.version&&(t+=" ".concat(e.os.version))),t},tc=(0,vo.Wz)(),nc=tc.isOpen,rc=tc.clientId,ic=tc.orgId,oc=tc.sessionId,ac=tc.userId,lc=tc.mock,cc="".concat(Jl.Z.assetsBaseUrl,"/"),sc=null,uc=(0,w.ZP)((function(e){var t=e.classes,n=e.queueId,i=(0,r.bp)(),o=mo(),a=o.setHeaderValues,l=o.fadeInBackButton,c=(0,E.useState)(),s=ee()(c,2),u=s[0],d=s[1],p=(0,E.useState)(nc),m=ee()(p,2),f=m[0],h=m[1],g=!1!==i.settings.get("agent.queues.enabled"),v=(0,E.useState)(!1),S=ee()(v,2),T=S[0],b=S[1],_=(0,E.useState)(!1),y=ee()(_,2),C=y[0],x=y[1],O=i.settings.get("client.termsCheckbox.enabled"),A=(0,E.useState)(!1),N=ee()(A,2),w=N[0],R=N[1],k=(0,E.useState)(!1),L=ee()(k,2),M=L[0],B=L[1],j=(0,E.useState)(!1),U=ee()(j,2),G=U[0],F=U[1],W=(0,E.useRef)(),H=(0,E.useRef)(),V=(0,E.useRef)(),z=i.settings.get("client.bookNowButton.enabled"),Y=z&&"iframe"===i.settings.get("client.bookNowButton.type")&&!!i.settings.get("client.bookNowButton.url"),K=function(){return fetch("".concat(Jl.Z.clientAPIBaseUrl,"/o/").concat(ic,"/settings/calls/is-open"),{cache:"default"}).then((function(e){return e.json()})).then((function(e){var t=new Date(e.nextCloseTime),n=new Date(e.nextOpenTime),r=e.isOpen?t>Date.now():n<=Date.now();h(r),r?(clearTimeout(sc),sc=setTimeout((function(){h(!1)}),t-Date.now())):(clearTimeout(sc),sc=setTimeout((function(){h(!0)}),n-Date.now()))})).catch((function(e){return console.error(e)}))};(0,E.useEffect)((function(){i.executeAction(D)}),[]),(0,E.useEffect)((function(){K();var e=setInterval(xe()(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:K();case 1:case"end":return e.stop()}}),e)}))),6e4);return function(){clearTimeout(sc),clearInterval(e)}}),[]),(0,E.useEffect)((function(){return a({showHeader:!0,showRightSideButton:!0,showBackButton:G&&!w,showBackLabel:G&&!w,transparentBackgroundHeader:!G}),fetch("".concat(Jl.Z.clientAPIBaseUrl,"/o/").concat(ic,"/queues/").concat(n,"/estimated-waiting-time"),{method:"GET",mode:"cors"}).then((function(e){return e.json()})).then((function(e){d(Math.ceil(e.estimatedWaitingTime/60))})).catch((function(e){console.error("Could not fetch queue waiting time",e.message)})),function(){return a(uo)}}),[n,G]);var q=function(){F(!1),R(!0),V.current.src+=""};(0,E.useEffect)((function(){if(Y){if(!G){H.current.style.display="flex";var e=setTimeout((function(){W.current.style.display="none"}),300);return function(){return clearTimeout(e)}}if(!w){a({goBackCallback:q}),l({showBackLabel:!0}),W.current.style.display="block";var t=setTimeout((function(){V.current.contentWindow.focus(),B(!1),H.current.style.display="none"}),300);return function(){return clearTimeout(t)}}B(!0)}}),[G,w]);var X=!!u&&"  ".concat(i.getText("CLIENT_QUEUE_ESTIMATED_WAITING_TIME",u)),J=!f&&"  ".concat(i.getText("IS_CLOSED_LABEL")),$=I()(t.actionArea,O&&t.checkboxPadding);return E.createElement("div",{className:t.slidingWrapper,style:{marginLeft:G&&!w?"-100%":0}},E.createElement("div",{ref:H,className:t.wrapper},E.createElement("div",{className:t.greeting},E.createElement(Q.xv,{className:t.greetingTitle,"data-testid":"client-greeting-text"},i.getText(f?"POPUP_GREETING_TITLE":"CLIENT_CLOSED_TITLE")),E.createElement(Q.xv,{className:t.greetingText},i.getText(f?"POPUP_GREETING_TEXT":"CLIENT_CLOSED_HOURS_MESSAGE"))),E.createElement("div",{className:$},g&&E.createElement(E.Fragment,null,O?E.createElement(Q.xv,{className:t.termsCheckbox},E.createElement(Q.XZ,{disabled:T,className:t.checkbox,onChange:function(e){x(e.target.checked)},checked:C,"data-testid":"client-enter-chat-consent"}),E.createElement(To,{text:"POPUP_TERMS_MESSAGE",args:i.getText("CLIENT_DROP_IN")})):null,E.createElement(Q.zx,{className:t.primaryButton,contentClassName:t.primaryContentStyle,disabled:!f||T||!n||O&&!C,loading:T||!n,type:"popupPrimary",onClick:function(){if(!lc){i.executeAction(Z,{target:"enter_drop_in"}),b(!0);var e={queue:n,clientData:{clientId:rc,sessionId:oc,userId:ac,clientInfo:{browser:ec()}},onError:function(){return b(!1)}};i.executeAction(rl,e)}},"data-testid":"client-enter-chat"},i.getText("CLIENT_DROP_IN"),J||X)),z&&E.createElement(Q.zx,{loading:M,className:g?t.secondaryButton:t.primaryButton,contentClassName:t.primaryContentStyle,type:g?"popupSecondary":"popupPrimary",onClick:function(){var e=i.settings.get("client.bookNowButton");i.executeAction(P,e),"iframe"===e.type?F(!0):"redirect"===e.type?window.top.location=e.url:"tab"===e.type&&window.open(e.url,"_blank")},"data-testid":"client-book-meeting"},i.getText("CLIENT_QUEUE_PLACE_NO_AGENTS_BOOK")),g&&!O&&E.createElement(Q.xv,{className:t.terms},E.createElement(To,{text:"POPUP_TERMS_CLICK_AND_ACCEPT_MESSAGE",args:i.getText("CLIENT_DROP_IN")})))),Y&&E.createElement("div",{ref:W,className:t.bookScreen},E.createElement("iframe",{ref:V,title:i.getText("CLIENT_QUEUE_PLACE_NO_AGENTS_BOOK"),frameBorder:"0",loading:"lazy",onLoad:function(){R(!1)},height:"100%",width:"100%",src:i.settings.get("client.bookNowButton.url")})))}),["QueueStore"],(function(e){return{queueId:e.QueueStore.getSelectedQueue()}})),dc=(0,N.Z)((function(e){var t,n,r,i,o,a,l,c,s,u,d,p,m,f,h,g,v,E,S,T,b,_,y,C,x,O,I,A,N,w,R,k,L,D,P,M,B,j,U,G,F,W,H,V,z,Z,Y,K,q,Q,X,J,$,ee,te,ne,re,ie,oe,ae,le,ce,se,ue,de,pe,me,fe,he,ge,ve,Ee,Se,Te,be,_e,ye,Ce,xe,Oe,Ie,Ae,Ne,we,Re,ke,Le,De,Pe,Me,Be,je,Ue,Ge,Fe,We,He,Ve,ze,Ze,Ye,Ke,qe,Qe,Xe,Je,$e,et,tt,nt,rt,it,ot,at,lt,ct,st,ut,dt,pt,mt,ft,ht,gt,vt;return{slidingWrapper:{display:"grid",gridTemplateColumns:"100% 100%",width:"100%",height:"100%",transition:"margin-left .2s",backgroundColor:e.popup.header.backgroundColor,background:!(null==e||null===(t=e.popup)||void 0===t||null===(n=t.header)||void 0===n||!n.backgroundImage)&&"url(".concat(e.popup.header.backgroundImage.startsWith("http")?"":cc).concat(e.popup.header.backgroundImage,")"),backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"top left"},wrapper:{alignSelf:"stretch",justifySelf:"stretch",gridColumn:"1/1",display:"flex",flexDirection:"column",marginTop:e.popup.borderRadius},greeting:{color:e.popup.header.text,flex:1,paddingLeft:"24px",paddingRight:"24px",paddingBottom:"24px",display:"flex",flexDirection:"column",justifyContent:"flex-end"},greetingTitle:{color:(null==e||null===(r=e.popup)||void 0===r||null===(i=r.header)||void 0===i||null===(o=i.title)||void 0===o?void 0:o.color)||e.popup.header.text,textTransform:(null==e||null===(a=e.popup)||void 0===a||null===(l=a.header)||void 0===l||null===(c=l.title)||void 0===c?void 0:c.textTransform)||e.popup.typography.greetingTitleTextTransform,fontSize:(null==e||null===(s=e.popup)||void 0===s||null===(u=s.header)||void 0===u||null===(d=u.title)||void 0===d?void 0:d.fontSize)||e.popup.typography.greetingTitle.fontSize,lineHeight:e.popup.typography.greetingTitle.lineHeight,fontWeight:(null==e||null===(p=e.popup)||void 0===p||null===(m=p.header)||void 0===m||null===(f=m.title)||void 0===f?void 0:f.fontWeight)||e.popup.typography.greetingTitle.weight,margin:0},greetingText:{color:(null==e||null===(h=e.popup)||void 0===h||null===(g=h.header)||void 0===g||null===(v=g.bodyText)||void 0===v?void 0:v.color)||e.popup.header.text,fontSize:(null==e||null===(E=e.popup)||void 0===E||null===(S=E.header)||void 0===S||null===(T=S.bodyText)||void 0===T?void 0:T.fontSize)||"16px",fontWeight:(null==e||null===(b=e.popup)||void 0===b||null===(_=b.header)||void 0===_||null===(y=_.bodyText)||void 0===y?void 0:y.fontWeight)||400,margin:0,marginTop:"18px"},actionArea:{padding:"24px",backgroundColor:e.popup.backgroundColor,color:e.popup.textColor},checkboxPadding:{paddingTop:"12px"},terms:{fontSize:(null==e||null===(C=e.popup)||void 0===C||null===(x=C.terms)||void 0===x?void 0:x.fontSize)||"11px",fontWeight:(null==e||null===(O=e.popup)||void 0===O||null===(I=O.terms)||void 0===I?void 0:I.fontWeight)||400,lineHeight:"17px",color:(null==e||null===(A=e.popup)||void 0===A||null===(N=A.terms)||void 0===N?void 0:N.textColor)||e.popup.textColor,display:"flex"},termsCheckbox:{fontSize:(null==e||null===(w=e.popup)||void 0===w||null===(R=w.terms)||void 0===R?void 0:R.fontSize)||"11px",fontWeight:(null==e||null===(k=e.popup)||void 0===k||null===(L=k.terms)||void 0===L?void 0:L.fontWeight)||400,lineHeight:"17px",color:(null==e||null===(D=e.popup)||void 0===D||null===(P=D.terms)||void 0===P?void 0:P.textColor)||e.popup.textColor,display:"flex",marginBottom:"17px"},checkbox:{marginTop:"10px",marginRight:"7px"},primaryButton:{marginBottom:e.spacing(1),height:56,color:null==e||null===(M=e.popup)||void 0===M||null===(B=M.primary)||void 0===B?void 0:B.color,backgroundColor:null==e||null===(j=e.popup)||void 0===j||null===(U=j.primary)||void 0===U?void 0:U.backgroundColor,borderWidth:null==e||null===(G=e.popup)||void 0===G||null===(F=G.primary)||void 0===F?void 0:F.borderWidth,borderColor:null==e||null===(W=e.popup)||void 0===W||null===(H=W.primary)||void 0===H?void 0:H.borderColor,borderRadius:null==e||null===(V=e.popup)||void 0===V||null===(z=V.primary)||void 0===z?void 0:z.borderRadius,borderStyle:"solid","&:hover":{backgroundColor:null==e||null===(Z=e.popup)||void 0===Z||null===(Y=Z.primary)||void 0===Y||null===(K=Y.hover)||void 0===K?void 0:K.backgroundColor,color:null==e||null===(q=e.popup)||void 0===q||null===(Q=q.primary)||void 0===Q||null===(X=Q.hover)||void 0===X?void 0:X.color,borderWidth:null==e||null===(J=e.popup)||void 0===J||null===($=J.primary)||void 0===$||null===(ee=$.hover)||void 0===ee?void 0:ee.borderWidth,borderColor:null==e||null===(te=e.popup)||void 0===te||null===(ne=te.primary)||void 0===ne||null===(re=ne.hover)||void 0===re?void 0:re.borderColor},"&:disabled":{color:"".concat((null==e||null===(ie=e.general)||void 0===ie||null===(oe=ie.buttons)||void 0===oe||null===(ae=oe.disabled)||void 0===ae?void 0:ae.color)||e.palette.gray[80],"!important"),backgroundColor:"".concat((null==e||null===(le=e.general)||void 0===le||null===(ce=le.buttons)||void 0===ce||null===(se=ce.disabled)||void 0===se?void 0:se.backgroundColor)||e.palette.gray[60],"!important"),borderWidth:"".concat((null==e||null===(ue=e.general)||void 0===ue||null===(de=ue.buttons)||void 0===de||null===(pe=de.disabled)||void 0===pe?void 0:pe.borderWidth)||"1px","!important"),borderStyle:"solid !important",borderColor:"".concat((null==e||null===(me=e.general)||void 0===me||null===(fe=me.buttons)||void 0===fe||null===(he=fe.disabled)||void 0===he?void 0:he.borderColor)||e.palette.gray[60],"!important"),"&:hover":{color:"".concat((null==e||null===(ge=e.general)||void 0===ge||null===(ve=ge.buttons)||void 0===ve||null===(Ee=ve.disabled)||void 0===Ee?void 0:Ee.color)||e.palette.gray[80],"!important"),backgroundColor:"".concat((null==e||null===(Se=e.general)||void 0===Se||null===(Te=Se.buttons)||void 0===Te||null===(be=Te.disabled)||void 0===be?void 0:be.backgroundColor)||e.palette.gray[60],"!important"),borderWidth:"".concat((null==e||null===(_e=e.general)||void 0===_e||null===(ye=_e.buttons)||void 0===ye||null===(Ce=ye.disabled)||void 0===Ce?void 0:Ce.borderWidth)||"1px","!important"),borderStyle:"solid !important",borderColor:"".concat((null==e||null===(xe=e.general)||void 0===xe||null===(Oe=xe.buttons)||void 0===Oe||null===(Ie=Oe.disabled)||void 0===Ie?void 0:Ie.borderColor)||e.palette.gray[60],"!important")}}},primaryContentStyle:{textTransform:null==e||null===(Ae=e.popup.primary)||void 0===Ae?void 0:Ae.textTransform,letterSpacing:null==e||null===(Ne=e.popup.primary)||void 0===Ne?void 0:Ne.letterSpacing,fontFamily:null==e||null===(we=e.popup)||void 0===we||null===(Re=we.primary)||void 0===Re?void 0:Re.fontFamily,fontSize:null==e||null===(ke=e.popup)||void 0===ke||null===(Le=ke.primary)||void 0===Le?void 0:Le.fontSize,fontWeight:null==e||null===(De=e.popup)||void 0===De||null===(Pe=De.primary)||void 0===Pe?void 0:Pe.fontWeight,fontStyle:null==e||null===(Me=e.popup)||void 0===Me||null===(Be=Me.primary)||void 0===Be?void 0:Be.fontStyle},secondaryButton:{marginBottom:e.spacing(1),height:56,color:null==e||null===(je=e.popup)||void 0===je||null===(Ue=je.secondary)||void 0===Ue?void 0:Ue.color,backgroundColor:null==e||null===(Ge=e.popup)||void 0===Ge||null===(Fe=Ge.secondary)||void 0===Fe?void 0:Fe.backgroundColor,borderWidth:null==e||null===(We=e.popup)||void 0===We||null===(He=We.secondary)||void 0===He?void 0:He.borderWidth,borderColor:null==e||null===(Ve=e.popup)||void 0===Ve||null===(ze=Ve.secondary)||void 0===ze?void 0:ze.borderColor,borderRadius:null==e||null===(Ze=e.popup)||void 0===Ze||null===(Ye=Ze.secondary)||void 0===Ye?void 0:Ye.borderRadius,borderStyle:"solid","&:hover":{backgroundColor:null==e||null===(Ke=e.popup)||void 0===Ke||null===(qe=Ke.secondary)||void 0===qe||null===(Qe=qe.hover)||void 0===Qe?void 0:Qe.backgroundColor,color:null==e||null===(Xe=e.popup)||void 0===Xe||null===(Je=Xe.secondary)||void 0===Je||null===($e=Je.hover)||void 0===$e?void 0:$e.color,borderWidth:null==e||null===(et=e.popup)||void 0===et||null===(tt=et.secondary)||void 0===tt||null===(nt=tt.hover)||void 0===nt?void 0:nt.borderWidth,borderColor:null==e||null===(rt=e.popup)||void 0===rt||null===(it=rt.secondary)||void 0===it||null===(ot=it.hover)||void 0===ot?void 0:ot.borderColor}},secondaryContentStyle:{textTransform:null==e||null===(at=e.popup)||void 0===at||null===(lt=at.secondary)||void 0===lt?void 0:lt.textTransform,letterSpacing:null==e||null===(ct=e.popup)||void 0===ct||null===(st=ct.secondary)||void 0===st?void 0:st.letterSpacing,fontFamily:null==e||null===(ut=e.popup)||void 0===ut||null===(dt=ut.secondary)||void 0===dt?void 0:dt.fontFamily,fontSize:null==e||null===(pt=e.popup)||void 0===pt||null===(mt=pt.secondary)||void 0===mt?void 0:mt.fontSize,fontWeight:null==e||null===(ft=e.popup)||void 0===ft||null===(ht=ft.secondary)||void 0===ht?void 0:ht.fontWeight,fontStyle:null==e||null===(gt=e.popup)||void 0===gt||null===(vt=gt.secondary)||void 0===vt?void 0:vt.fontStyle},bookScreen:{alignSelf:"stretch",justifySelf:"stretch",gridColumn:"2/2",position:"relative",display:"none"},"@media screen and (max-device-width: 429px)":{greetingTitle:{fontSize:e.popup.typography.greetingTitle.mobile.fontSize,lineHeight:e.popup.typography.greetingTitle.mobile.lineHeight,fontWeight:e.popup.typography.greetingTitle.mobile.weight}},"@media screen and (max-device-width: 320px)":{greetingTitle:{fontSize:"40px"},greetingText:{fontSize:"14px"}}}}),{withTheme:!0})(uc),pc=(0,q.isMobileDevice)(),mc=pc?"128px":"141px",fc=pc?"256px":"320px",hc=pc?"304px":"368px",gc=pc?"81px":"88px",vc=pc?"168px":"200px";function Ec(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ec(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ec(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Tc={container:{display:"flex",flexDirection:"column",justifyContent:"space-between"},video:{position:"absolute",objectFit:"cover",zIndex:1,borderRadius:8,width:"100%",height:"100%"},videoContainer:{position:"relative"},videoOverlayContent:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-end"},videoInfoContainer:{zIndex:3,background:"linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.3) 40.62%, rgba(0, 0, 0, 0.85) 100%)",backdropFilter:blur("1px"),borderRadius:8},minimizeButton:{position:"absolute",right:8,top:4,zIndex:2},infoHeadline:{margin:0,color:"white",fontWeight:600,lineHeight:"16px"},infoText:{fontSize:14,margin:"6px 0 12px",color:"white",lineHeight:"16px",fontWeight:500},startButton:{backgroundColor:"#69A334",color:"white",border:"1px solid transparent",borderRadius:200,height:36,padding:0,cursor:"pointer",width:"100%"},closeButton:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",padding:12,gap:8,color:"white",border:"1px solid transparent",width:40,height:40,backgroundColor:"#737373",backdropFilter:blur(2),borderRadius:200,order:0,flexGrow:0,flex:"none",marginTop:8},closeButtonContainer:{display:"flex"}},bc=function(e){var t=e.onOpenVideoChat,n=(0,r.bp)(),i=(0,vo.Wz)().mock,o=(0,E.useRef)(),a=(0,In.Z)(),l=(0,E.useState)(!1),c=ee()(l,2),s=c[0],u=c[1],d=(0,E.useState)(!1),p=ee()(d,2),m=p[0],f=p[1];(0,E.useEffect)((function(){var e,t;s?(e=hc,t=vc):(e=mc,t=gc);var r="right"===a.initiation.position?"bottom_right":"bottom_left",i={width:t,height:e};n.externalInterfaceService.emit("initiation:layout",{dimensions:i,position:r,isMaximized:s})}),[s,a]),(0,E.useEffect)((function(){o.current&&n.externalInterfaceService.emit("initiation:rendered")}),[o]);var h=function(){return!s&&u(!0)},g="right"===a.initiation.position?{left:"auto",right:0}:{left:0,right:"auto"},v=function(e){var t,n,r,i,o,a,l,c,s,u,d,p,m,f,h,g,v,E,S,T,b,_,y,C,x,O,I,A,N,w,R,k,L,D,P,M,B,j,U,G,F,W,H,V,z,Z,Y,K,q,Q,X,J,$,ee,te,ne,re,ie,oe,ae,le,ce,se,ue,de,pe,me,fe,he,ge,ve,Ee,Se,Te,be,_e,ye,Ce,xe,Oe,Ie,Ae,Ne,we,Re,ke,Le,De,Pe,Me,Be,je,Ue,Ge,Fe,We,He,Ve,ze,Ze,Ye,Ke,qe,Qe,Xe,Je,$e,et,tt,nt,rt,it,ot,at,lt;return{title:{color:(null==e||null===(t=e.overlayWidget)||void 0===t||null===(n=t.widget)||void 0===n||null===(r=n.title)||void 0===r?void 0:r.color)||"#FFF",fontFamily:(null==e||null===(i=e.overlayWidget)||void 0===i||null===(o=i.widget)||void 0===o||null===(a=o.title)||void 0===a?void 0:a.fontFamily)||"Inter",fontSize:(null==e||null===(l=e.overlayWidget)||void 0===l||null===(c=l.widget)||void 0===c||null===(s=c.title)||void 0===s?void 0:s.fontSize)||"14px",fontStyle:(null==e||null===(u=e.overlayWidget)||void 0===u||null===(d=u.widget)||void 0===d||null===(p=d.title)||void 0===p?void 0:p.fontStyle)||"normal",fontWeight:(null==e||null===(m=e.overlayWidget)||void 0===m||null===(f=m.widget)||void 0===f||null===(h=f.title)||void 0===h?void 0:h.fontWeight)||"600",letterSpacing:(null==e||null===(g=e.overlayWidget)||void 0===g||null===(v=g.widget)||void 0===v||null===(E=v.title)||void 0===E?void 0:E.letterSpacing)||"0px",textTransform:(null==e||null===(S=e.overlayWidget)||void 0===S||null===(T=S.widget)||void 0===T||null===(b=T.title)||void 0===b?void 0:b.textTransform)||"none"},text:{color:(null==e||null===(_=e.overlayWidget)||void 0===_||null===(y=_.widget)||void 0===y||null===(C=y.text)||void 0===C?void 0:C.color)||"#FFF",fontFamily:(null==e||null===(x=e.overlayWidget)||void 0===x||null===(O=x.widget)||void 0===O||null===(I=O.text)||void 0===I?void 0:I.fontFamily)||"Inter",fontSize:(null==e||null===(A=e.overlayWidget)||void 0===A||null===(N=A.widget)||void 0===N||null===(w=N.text)||void 0===w?void 0:w.fontSize)||"14px",fontStyle:(null==e||null===(R=e.overlayWidget)||void 0===R||null===(k=R.widget)||void 0===k||null===(L=k.text)||void 0===L?void 0:L.fontStyle)||"normal",fontWeight:(null==e||null===(D=e.overlayWidget)||void 0===D||null===(P=D.widget)||void 0===P||null===(M=P.text)||void 0===M?void 0:M.fontWeight)||"500",letterSpacing:(null==e||null===(B=e.overlayWidget)||void 0===B||null===(j=B.widget)||void 0===j||null===(U=j.text)||void 0===U?void 0:U.letterSpacing)||"0px",textTransform:(null==e||null===(G=e.overlayWidget)||void 0===G||null===(F=G.widget)||void 0===F||null===(W=F.text)||void 0===W?void 0:W.textTransform)||"none"},hover:{backgroundColor:(null==e||null===(H=e.overlayWidget)||void 0===H||null===(V=H.widget)||void 0===V||null===(z=V.hover)||void 0===z?void 0:z.backgroundColor)||"#69a334",borderColor:(null==e||null===(Z=e.overlayWidget)||void 0===Z||null===(Y=Z.widget)||void 0===Y||null===(K=Y.hover)||void 0===K?void 0:K.borderColor)||"transparent",borderRadius:(null==e||null===(q=e.overlayWidget)||void 0===q||null===(Q=q.widget)||void 0===Q||null===(X=Q.hover)||void 0===X?void 0:X.borderRadius)||"32px",borderWidth:(null==e||null===(J=e.overlayWidget)||void 0===J||null===($=J.widget)||void 0===$||null===(ee=$.hover)||void 0===ee?void 0:ee.borderWidth)||"0px",color:(null==e||null===(te=e.overlayWidget)||void 0===te||null===(ne=te.widget)||void 0===ne||null===(re=ne.hover)||void 0===re?void 0:re.color)||"#FFF",fontFamily:(null==e||null===(ie=e.overlayWidget)||void 0===ie||null===(oe=ie.widget)||void 0===oe||null===(ae=oe.hover)||void 0===ae?void 0:ae.fontFamily)||"Inter",fontSize:(null==e||null===(le=e.overlayWidget)||void 0===le||null===(ce=le.widget)||void 0===ce||null===(se=ce.hover)||void 0===se?void 0:se.fontSize)||"13px",fontStyle:(null==e||null===(ue=e.overlayWidget)||void 0===ue||null===(de=ue.widget)||void 0===de||null===(pe=de.hover)||void 0===pe?void 0:pe.fontStyle)||"normal",fontWeight:(null==e||null===(me=e.overlayWidget)||void 0===me||null===(fe=me.widget)||void 0===fe||null===(he=fe.hover)||void 0===he?void 0:he.fontWeight)||"600",letterSpacing:(null==e||null===(ge=e.overlayWidget)||void 0===ge||null===(ve=ge.widget)||void 0===ve||null===(Ee=ve.hover)||void 0===Ee?void 0:Ee.letterSpacing)||"0px",textTransform:(null==e||null===(Se=e.overlayWidget)||void 0===Se||null===(Te=Se.widget)||void 0===Te||null===(be=Te.hover)||void 0===be?void 0:be.textTransform)||"uppercase"},button:{backgroundColor:(null==e||null===(_e=e.overlayWidget)||void 0===_e||null===(ye=_e.widget)||void 0===ye||null===(Ce=ye.button)||void 0===Ce?void 0:Ce.backgroundColor)||"#69a334",borderColor:(null==e||null===(xe=e.overlayWidget)||void 0===xe||null===(Oe=xe.widget)||void 0===Oe||null===(Ie=Oe.button)||void 0===Ie?void 0:Ie.borderColor)||"transparent",borderRadius:(null==e||null===(Ae=e.overlayWidget)||void 0===Ae||null===(Ne=Ae.widget)||void 0===Ne||null===(we=Ne.button)||void 0===we?void 0:we.borderRadius)||"32px",borderWidth:(null==e||null===(Re=e.overlayWidget)||void 0===Re||null===(ke=Re.widget)||void 0===ke||null===(Le=ke.button)||void 0===Le?void 0:Le.borderWidth)||"0px",color:(null==e||null===(De=e.overlayWidget)||void 0===De||null===(Pe=De.widget)||void 0===Pe||null===(Me=Pe.button)||void 0===Me?void 0:Me.color)||"#FFF",fontFamily:(null==e||null===(Be=e.overlayWidget)||void 0===Be||null===(je=Be.widget)||void 0===je||null===(Ue=je.button)||void 0===Ue?void 0:Ue.fontFamily)||"Inter",fontSize:(null==e||null===(Ge=e.overlayWidget)||void 0===Ge||null===(Fe=Ge.widget)||void 0===Fe||null===(We=Fe.button)||void 0===We?void 0:We.fontSize)||"13px",fontStyle:(null==e||null===(He=e.overlayWidget)||void 0===He||null===(Ve=He.widget)||void 0===Ve||null===(ze=Ve.button)||void 0===ze?void 0:ze.fontStyle)||"normal",fontWeight:(null==e||null===(Ze=e.overlayWidget)||void 0===Ze||null===(Ye=Ze.widget)||void 0===Ye||null===(Ke=Ye.button)||void 0===Ke?void 0:Ke.fontWeight)||"600",letterSpacing:(null==e||null===(qe=e.overlayWidget)||void 0===qe||null===(Qe=qe.widget)||void 0===Qe||null===(Xe=Qe.button)||void 0===Xe?void 0:Xe.letterSpacing)||"0px",textTransform:(null==e||null===(Je=e.overlayWidget)||void 0===Je||null===($e=Je.widget)||void 0===$e||null===(et=$e.button)||void 0===et?void 0:et.textTransform)||"uppercase"},videoIconColor:(null==e||null===(tt=e.overlayWidget)||void 0===tt||null===(nt=tt.widget)||void 0===nt?void 0:nt.videoIconColor)||"#FFF",minimizeIconColor:(null==e||null===(rt=e.overlayWidget)||void 0===rt||null===(it=rt.widget)||void 0===it?void 0:it.minimizeIconColor)||"#FFF",videoSource:(null==e||null===(ot=e.overlayWidget)||void 0===ot||null===(at=ot.widgetVideo)||void 0===at||null===(lt=at.data)||void 0===lt?void 0:lt.selectedVideoUrl)||"https://one-to-one.bambuser.com/videos/video1.mp4"}}(a),S=m?v.hover:v.button,T=n.getService("languageService").isRtlLanguage()?"right"===a.initiation.position?"flex-start":"flex-end":"right"===a.initiation.position&&"flex-end";return E.createElement("div",{ref:o,style:Sc(Sc(Sc({},Tc.container),g),{},{height:s?hc:mc,width:s?vc:gc,cursor:!s&&"pointer"}),role:"button",tabIndex:0,onKeyPress:function(e){return"Enter"===e.key?h():e.preventDefault()},onClick:h},E.createElement("div",{style:Sc(Sc({},Tc.videoContainer),{},{height:s?fc:mc})},s&&E.createElement("div",{style:Tc.minimizeButton},E.createElement(Q.zx,{type:"large",icon:"arrowDown",iconColor:null==v?void 0:v.minimizeIconColor,size:"soloIcon",onClick:function(){return s&&u(!1)}})),E.createElement("div",{style:Tc.videoOverlayContent},E.createElement("video",{autoPlay:!0,muted:!0,loop:!0,playsInline:!0,style:Tc.video,src:v.videoSource,type:"video/mp4"}),E.createElement("div",{style:Sc(Sc({},Tc.videoInfoContainer),{},{padding:s?"12px 12px":"0 8px 12px"})},E.createElement(Q.hn,{height:s?30:24,width:s?30:24,color:null==v?void 0:v.videoIconColor}),E.createElement(Q.xv,{style:Sc(Sc({},Tc.infoHeadline),v.title)},n.getText("INITIATION_VARIANT_VIDEO_TITLE")),s&&E.createElement(E.Fragment,null,E.createElement(Q.xv,{style:Sc(Sc({},Tc.infoText),v.text)},n.getText("INITIATION_VARIANT_VIDEO_DESCRIPTION")),E.createElement("button",{style:Sc(Sc({},Tc.startButton),S),onClick:function(){n.executeAction(j),t(),u(!1)},onMouseEnter:function(){return f(!0)},onMouseLeave:function(){return f(!1)}},n.getText("INITIATION_VARIANT_VIDEO_START")))))),s&&E.createElement("div",{style:Sc(Sc({},Tc.closeButtonContainer),{},{justifyContent:T})},E.createElement(Q.u,{text:n.getText("INITIATION_VARIANT_VIDEO_CLOSE"),placement:a.initiation.position,width:250,disabled:""===n.getText("INITIATION_VARIANT_VIDEO_CLOSE")},E.createElement(Q.zx,{style:Tc.closeButton,type:"large",icon:"close",iconColor:"white",size:"soloIcon",onClick:function(){i||(n.externalInterfaceService.emit("initiation:close"),n.executeAction(B),u(!1))}}))))},_c=function(e){var t=e.size,n=void 0===t?"s":t,r=e.color,i=void 0===r?"white":r;return E.createElement("svg",{width:"s"===n?"20":"30",height:"s"===n?"13":"20",viewBox:"0 0 20 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},E.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 0.204834C0.447715 0.204834 0 0.652549 0 1.20483L0 11.2048C0 11.7571 0.447716 12.2048 1 12.2048H14.126C14.6783 12.2048 15.126 11.7571 15.126 11.2048V8.80294L19.6639 11.401L19.6639 1.00874L15.126 3.60685V1.20483C15.126 0.652549 14.6783 0.204834 14.126 0.204834H1Z",fill:i}))},yc=function(e){return E.createElement("svg",{width:"12",height:"2",viewBox:"0 0 12 2",fill:"none",xmlns:"http://www.w3.org/2000/svg"},E.createElement("path",{d:"M0 1H12",stroke:e.color,strokeWidth:"2"}))},Cc=function(e){var t,n,i,o,a=(0,E.useRef)(),l=(0,E.useState)(e.initialMode),c=ee()(l,2),s=c[0],u=c[1],d=(0,r.bp)(),p=(0,In.Z)();(0,E.useEffect)((function(){a.current&&d.externalInterfaceService.emit("initiation:rendered")}),[a]);var m=function(t){switch(t){case"openPopup":d.executeAction(M),e.onOpenVideoChat(),u("minimized");break;case"closePopup":d.executeAction(B),u("minimized");break;case"openDock":d.executeAction(j),e.onOpenVideoChat()}},f=function(){var e=a.current,t={width:"".concat(e.offsetWidth,"px"),height:"".concat(e.offsetHeight,"px")},n="right"===p.initiation.position?"bottom_right":"bottom_left";"minimized"===s&&(n="right"===p.initiation.position?"docked_right":"docked_left",t={width:t.height,height:t.width}),d.externalInterfaceService.emit("initiation:layout",{dimensions:t,position:n})};(0,E.useEffect)(f,[s,p,a]),"undefined"!=typeof ResizeObserver&&(0,E.useEffect)((function(){var e=new ResizeObserver(f);return e.observe(a.current),function(){return e.unobserve(a.current)}}),[s,p]);var h="initiation-a__dock__cta ".concat("right"===p.initiation.position?"initiation-a__dock__cta__right":"initiation-a__dock__cta__left");return E.createElement("div",{className:"initiation-a","data-testid":"initiation-side-dock"},"open"===s?E.createElement("div",{className:"initiation-a__popup",ref:a},E.createElement("div",{className:"initiation-a__popup__wrapper"},E.createElement("div",{className:"initiation-a__popup__wrapper__content"},E.createElement("button",{className:"initiation-a__popup__wrapper__content__close",onClick:function(){return m("closePopup")}},E.createElement(yc,{color:(null==p||null===(t=p.overlayWidget)||void 0===t||null===(n=t.sideDock)||void 0===n||null===(i=n.popup)||void 0===i?void 0:i.textColor)||p.initiation.sideDock.textColor})),E.createElement(Q.xv,{type:"h2",className:"initiation-a__popup__wrapper__content__primary-text"},d.getText("INITIATION_VARIANT_DOCK_TITLE")),E.createElement(Q.xv,{type:"secondary",className:"initiation-a__popup__wrapper__content__secondary-text"},d.getText("INITIATION_VARIANT_DOCK_TEXT")),E.createElement(Q.zx,{type:"popupPrimary",onClick:function(){return m("openPopup")},"data-testid":"initiation-side-dock-cta-open"},d.getText("INITIATION_VARIANT_DOCK_CTA"))))):E.createElement("div",{className:"initiation-a__dock",ref:a},E.createElement("button",{className:h,onClick:function(){return m("openDock")},"data-testid":"initiation-side-dock-cta-minimized"},E.createElement(_c,{size:"m",color:(null==p||null===(o=p.overlayWidget)||void 0===o?void 0:o.sideDock.cameraColor)||p.initiation.sideDock.textColor}),d.getText("INITIATION_VARIANT_DOCK_DOCKED_TEXT"))))},xc=function(e){var t,n,i,o,a,l,c,s=(0,r.bp)(),u=(0,E.useRef)(),d=(0,E.useRef)(),p=(0,In.Z)(),m=(0,E.useState)(e.initialMode),f=ee()(m,2),h=f[0],g=f[1],v=function(t){switch(t){case"startVideoWidget":s.executeAction(j),e.onOpenVideoChat(),g("minimized");break;case"startVideoPopup":s.executeAction(M),e.onOpenVideoChat(),g("minimized");break;case"closePopup":s.executeAction(B),g("minimized")}};(0,E.useEffect)((function(){var e,t,n=u.current,r=d.current;n?(e="".concat(n.offsetHeight+r.offsetHeight+30,"px"),t="".concat(n.offsetWidth+2,"px")):(e="".concat(r.offsetHeight,"px"),t="".concat(r.offsetWidth,"px"));var i={width:t,height:e},o="right"===p.initiation.position?"bottom_right":"bottom_left";"minimized"===h&&(i={width:i.width,height:i.width}),s.externalInterfaceService.emit("initiation:layout",{dimensions:i,position:o})}),[h,p]),(0,E.useEffect)((function(){d.current&&s.externalInterfaceService.emit("initiation:rendered")}),[d]);var S=(window.theme||{}).avatar;if(S&&!S.startsWith("http")){var T=Jl.Z.assetsBaseUrl;S="".concat(T,"/").concat(S)}S=(null==p||null===(t=p.overlayWidget)||void 0===t||null===(n=t.avatar)||void 0===n?void 0:n.avatarImg)||S;var b="right"===p.initiation.position?{left:"auto",right:0}:{left:0,right:"auto"};return E.createElement("div",{className:"initiation-b","data-testid":"initiation-avatar"},"open"===h&&E.createElement("div",{className:"initiation-b__popup",ref:u},E.createElement("div",{className:"initiation-b__popup__wrapper"},E.createElement("div",{className:"initiation-b__popup__wrapper__content"},E.createElement("button",{className:"initiation-b__popup__wrapper__content__close",onClick:function(){return v("closePopup")}},E.createElement(yc,{color:(null==p||null===(i=p.overlayWidget)||void 0===i||null===(o=i.avatar)||void 0===o||null===(a=o.popup)||void 0===a?void 0:a.textColor)||p.initiation.avatar.textColor})),E.createElement(Q.xv,{type:"h2",className:"initiation-b__popup__wrapper__content__primary-text"},s.getText("INITIATION_VARIANT_AVATAR_TEXT")),E.createElement(Q.zx,{type:"popupPrimary",onClick:function(){return v("startVideoPopup")},"data-testid":"initiation-avatar-cta-open"},s.getText("INITIATION_VARIANT_AVATAR_CTA"))))),E.createElement("div",{className:"initiation-b__avatar",ref:d,style:b},E.createElement("button",{className:"initiation-b__avatar__cta",onClick:function(){return v("startVideoWidget")},"data-testid":"initiation-avatar-cta-minimized"},S&&E.createElement("img",{className:"initiation-b__avatar__cta__img",src:S,alt:s.getText("COMPANY_AVATAR_ALT_TEXT")}),!S&&E.createElement("div",{className:"initiation-b__avatar__cta__cam"},E.createElement(_c,{size:"m",color:(null==p||null===(l=p.overlayWidget)||void 0===l||null===(c=l.avatar)||void 0===c?void 0:c.cameraColor)||p.initiation.avatar.cameraColor})),E.createElement("div",{className:"initiation-b__avatar__cta__status"}))))},Oc=function(e){var t=e.variant,n=e.firstTime,i=e.initialMode,o=(0,r.bp)(),a=(0,E.useCallback)((function(){o.externalInterfaceService.emit("initiation:start")}),[]);(0,E.useEffect)((function(){n&&o.executeAction(U,{variant:t})}),[]);var l="open"===i&&n?"open":"minimized";switch(t){case"Side dock":return E.createElement(Cc,{onOpenVideoChat:a,initialMode:l});case"Avatar":return E.createElement(xc,{onOpenVideoChat:a,initialMode:l});case"Video":return E.createElement(bc,{onOpenVideoChat:a,initialMode:l});default:return null}};var Ic=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(){return o()(this,i),r.apply(this,arguments)}return l()(i,[{key:"render",value:function(){return E.createElement("div",{className:"screen loading-screen"},E.createElement("div",{className:"loading-holder"},E.createElement("div",{className:"loader-holder"},E.createElement(Q.aN,{position:"relative"})),E.createElement("div",{className:"text-holder"},this.props.text)))}}]),i}(x),Ac=Ic=(0,w.ZP)(Ic,["LoadingScreenStore"],(function(e){return{text:e.LoadingScreenStore.getText()}}));var Nc=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(){return o()(this,i),r.apply(this,arguments)}return l()(i,[{key:"render",value:function(){var e=this,t=this.props.dialogs.map((function(t){return e.context.systemDialogService.renderDialog(t)}));return E.createElement("div",{className:"system-dialogs"},t)}}]),i}(x);Nc.UnwrappedComponent=Nc,Nc.propTypes={dialogs:di().array.isRequired};var wc=Nc=(0,w.ZP)(Nc,["SystemDialogStore"],(function(e){return{dialogs:e.SystemDialogStore.getDialogs()}})),Rc=n(94363),kc=n.n(Rc);var Lc=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(){var e;o()(this,i);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return e=r.call.apply(r,[this].concat(n)),v()(s()(e),"textKey",window.isSecureContext?(0,q.isIOS)()?"CLIENT_UNSUPPORTED_BROWSER_MESSAGE_IOS":"CLIENT_UNSUPPORTED_BROWSER_MESSAGE":"CLIENT_UNSUPPORTED_PROTOCOL_MESSAGE"),e}return l()(i,[{key:"componentDidMount",value:function(){this.props.header.setHeaderValues({showHeader:!0,headerText:"",showRightSideButton:!0,showBackButton:!1})}},{key:"componentWillUnmount",value:function(){this.props.header.setHeaderValues(uo)}},{key:"render",value:function(){return E.createElement("div",{className:"screen unsupported-client-browser-screen"},E.createElement("div",{className:"holder"},E.createElement("div",{className:"no-agent-logo-wrapper"},E.createElement(kc(),null)),E.createElement("div",{className:"content"},E.createElement("span",null,this.context.getText(this.textKey)))))}}]),i}(x),Dc=fo(Lc),Pc=n(26212),Mc=n.n(Pc),Bc=n(63932),jc=n.n(Bc);var Uc=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(){return o()(this,i),r.apply(this,arguments)}return l()(i,[{key:"componentDidMount",value:function(){this.props.header.setHeaderValues({showHeader:!0,headerText:"",showRightSideButton:!0,showBackButton:!1})}},{key:"componentWillUnmount",value:function(){this.props.header.setHeaderValues(uo)}},{key:"render",value:function(){var e="",t="";return"missing"==this.props.type?(t=E.createElement(Mc(),null),e=E.createElement(To,{text:"CLIENT_ID_MISSING_MESSAGE"})):"not-activated"==this.props.type?(t=E.createElement(jc(),null),e=E.createElement(To,{text:"CLIENT_LINK_NOT_ACTIVATED_MESSAGE",args:this.props.validFrom})):(t=E.createElement(Mc(),null),e=E.createElement(To,{text:"CLIENT_LINK_EXPIRED_MESSAGE",args:this.props.validTo})),E.createElement("div",{className:"screen invalid-client-screen"},E.createElement("div",{className:"holder"},E.createElement("div",{className:"no-agent-logo-wrapper"},t),E.createElement("div",{className:"content"},e)))}}]),i}(x),Gc=fo(Uc),Fc=n(30381),Wc=n.n(Fc),Hc=function(e){var t=e.isQueue,n=e.meetingStartTime,i=e.classes,o=(0,r.bp)(),a=(0,E.useState)(""),l=ee()(a,2),c=l[0],s=l[1];(0,E.useEffect)((function(){u(n)}),[c]);var u=function e(t){var n=function(e){var t=Wc()(),n=Wc()().add(1,"days"),r=Wc()(e),i=r.isSame(t,"day"),o=r.isSame(n,"day"),a=r.isAfter(n,"day"),l=r.isBefore(t,"day");return{isToday:i,isTomorrow:o,isFuture:a,isPast:l,msToNextDay:l?-1:n.startOf("day").diff(t)}}(t),r=n.isToday,i=n.isTomorrow,a=n.isFuture,l=n.isPast,c=n.msToNextDay,u=o.settings.get("language.locale"),d={hour:"2-digit",minute:"2-digit"},p={month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",weekday:"short"};r?(s("".concat(o.getText("CLIENT_MEETING_TODAY")," ").concat(t.toLocaleTimeString(u,d))),setTimeout((function(){return e(t)}),c)):i?(s("".concat(o.getText("CLIENT_MEETING_TOMORROW")," ").concat(t.toLocaleTimeString(u,d))),setTimeout((function(){return e(t)}),c)):a?(s(t.toLocaleDateString(u,p)),setTimeout((function(){return e(t)}),c)):l&&s(t.toLocaleDateString(u,p))};return E.createElement(Q.xv,{className:i.meetingDate},t?o.getText("CLIENT_DROP_IN"):c)};Hc.propTypes={classes:di().object,isQueue:di().bool,meetingStartTime:di().instanceOf(Date)};var Vc=(0,N.Z)((function(e){return{meetingDate:{fontSize:"24px",lineHeight:"24px",letterSpacing:"-1.8px",fontWeight:500,textAlign:"center",textTransform:e.popup.typography.meetingDateTextTransform,margin:0,marginBottom:"6px"}}}))(Hc),zc=function(e){var t=e.classes,n=e.displayName,i=e.jobTitle,o=e.imageUrl,a=e.agentStatus,l=(0,r.bp)(),c="";return n&&(c=n.split(" ").map((function(e){return e.charAt(0)})).join("").toUpperCase()),E.createElement(E.Fragment,null,E.createElement(Q.xv,{className:t.bookedWithTitle},l.getText("CLIENT_BOOKED_WITH")),E.createElement("div",{className:t.wrapper},E.createElement("div",{className:t.imageWrapper},o?E.createElement("img",{className:t.image,src:o,alt:l.getText("AGENT_IMAGE_ALT_TEXT")}):E.createElement("div",{className:t.image},c),E.createElement("div",{className:I()(t.statusIndicator,"available"===a&&t.agentStatusAvailable,"unavailable"===a&&t.agentStatusUnAvailable)})),E.createElement("div",{className:t.agentInfo},E.createElement(Q.xv,{className:t.agentName},n),i&&E.createElement(Q.xv,{className:t.agentTitle},i))))};zc.propTypes={classes:di().object,displayName:di().string.isRequired,jobTitle:di().string,imageUrl:di().string,agentStatus:di().oneOf(["available","unavailable"])};var Zc=(0,N.Z)((function(e){var t,n,r,i,o,a,l,c,s,u,d,p,m,f;return{wrapper:{display:"flex",textAlign:"initial",justifyContent:"center",width:"100%"},bookedWithTitle:{fontSize:"14px",lineHeight:"18px",textAlign:"center",margin:0,fontWeight:500,marginBottom:"16px",color:(null==e||null===(t=e.general)||void 0===t||null===(n=t.colors)||void 0===n||null===(r=n.neutralColors)||void 0===r?void 0:r.dark)||e.popup.textColor},imageWrapper:{position:"relative",height:"32px",width:"32px",minHeight:"32px",minWidth:"32px",marginRight:"10px"},image:{height:"100%",width:"100%",borderRadius:(null==e||null===(i=e.waitingScreen)||void 0===i||null===(o=i.profile)||void 0===o?void 0:o.borderRadius)||e.popup.profilePictureRadius,border:"1px solid ".concat((null==e||null===(a=e.waitingScreen)||void 0===a||null===(l=a.profile)||void 0===l?void 0:l.borderColor)||"transparent"),backgroundColor:(null==e||null===(c=e.waitingScreen)||void 0===c||null===(s=c.profile)||void 0===s?void 0:s.backgroundColor)||e.popup.header.backgroundColor,fontSize:"16px",color:(null==e||null===(u=e.waitingScreen)||void 0===u||null===(d=u.profile)||void 0===d?void 0:d.textColor)||e.popup.header.text,display:"flex",justifyContent:"center",alignItems:"center"},agentInfo:{display:"flex",flexDirection:"column"},agentName:{margin:0,lineHeight:"18px",fontWeight:500,textTransform:e.popup.typography.agentNameTextTransform},agentTitle:{margin:0,fontSize:12,lineHeight:"16px",fontWeight:500,color:(null==e||null===(p=e.general)||void 0===p||null===(m=p.colors)||void 0===m||null===(f=m.neutralColors)||void 0===f?void 0:f.dark)||e.popup.textColor},statusIndicator:{height:"10px",width:"10px",borderRadius:"50%",border:"2px solid ".concat(e.popup.backgroundColor),position:"absolute",right:"-2px",bottom:"-2px",backgroundColor:e.palette.gray[20]},agentStatusAvailable:{backgroundColor:e.palette.green.main},agentStatusUnAvailable:{backgroundColor:e.palette.red.main}}}),{withTheme:!0})(zc),Yc=n(50118);function Kc(e,t){return qc.apply(this,arguments)}function qc(){return(qc=xe()(ye().mark((function e(t,n){var r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=n&&n.id){e.next=2;break}throw new Error("enterMeeting payload must include 'id'.");case 2:return r=n.id,e.prev=3,e.next=6,t.webrtcConnectivityService.startTest();case 6:return e.next=8,t.callSessionService.callAgent({roomId:r});case 8:e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(3),"function"==typeof n.onError&&n.onError(e.t0),(0,un.ZR)(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}function Qc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qc(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Jc=(0,w.ZP)((function(e){var t=e.classes,n=e.enterQueueData,i=e.callSessionStatus,o=(0,r.bp)(),a=mo(),l=a.setHeaderValues,c=a.showBackButton,s=(0,E.useState)(null),u=ee()(s,2),d=u[0],p=u[1],m=(0,E.useState)(null),f=ee()(m,2),h=f[0],g=f[1],v=(0,E.useState)(!1),T=ee()(v,2),b=T[0],_=T[1],y=(0,E.useState)(!1),C=ee()(y,2),x=C[0],O=C[1],A=(0,E.useState)(!1),N=ee()(A,2),w=N[0],R=N[1],k=d&&!!d.queue,L=!k,D=(0,E.useState)(!1),P=ee()(D,2),M=P[0],B=P[1],j=(0,vo.Wz)().clientId,U=o.settings.get("merchant.id"),G=o.settings.get("client.termsCheckbox.enabled"),F="mock"===j,W=function(){o.externalInterfaceService.emit(Dt),o.executeAction(Se.FI,{title:o.getText("GENERAL_CONNECTION_ERROR"),message:o.getText("CLIENT_MEETING_JOIN_ERROR"),canBeClosed:!1})},H=function(e){p(e),o.executeAction(ur,e);var t=e.firstName,n=e.lastName,r=e.email;if(t||n||r){var i=Xc(Xc(Xc({},!!t&&{firstName:t}),!!n&&{lastName:n}),!!r&&{email:r});o.executeAction(dr,i)}},V=function(e){var t=Yc.ZP.firestore().collection("connect-links").doc(e).onSnapshot((function(t){var n=t.data();if(n.validFrom&&n.validTo){var r=Xc(Xc({},n),{},{id:e,validFrom:n.validFrom.toDate(),validTo:n.validTo.toDate()});H(r),r&&!r.queue&&r.externalResourceId&&fetch("".concat(Jl.Z.clientAPIBaseUrl,"/connect-links/").concat(e,"/agent")).then((function(e){return e.json()})).then((function(e){g(e)})).catch((function(){console.warn("Could not fetch agent data for connect link ".concat(e))}))}}),W);return function(){t()}};(0,E.useEffect)((function(){return l({showHeader:!0,headerText:c?o.getText("CLIENT_CHECK_AUDIO_VIDEO"):(null==d?void 0:d.title)||o.getText("CLIENT_DEFAULT_MEETING_NAME"),showRightSideButton:!c,showBackButton:c}),function(){return l(uo)}}),[d,c]),(0,E.useEffect)((function(){var e=function(){};if(j.startsWith("ext:")){var t=j.substr(4);fetch("".concat(Jl.Z.clientAPIBaseUrl,"/connect-links/?externalId=").concat(t,"&orgId=").concat(U)).then((function(e){return e.json()})).then((function(n){var r=ee()(n,1)[0],i=Xc(Xc({},r),{},{externalId:t,validFrom:new Date(r.validFrom),validTo:new Date(r.validTo)});H(i),Z(r.id),e=V(r.id)})).catch(W)}else"mock"===j?(H({validFrom:new Date,validTo:new Date}),g({displayName:"Agent name",jobTitle:"Job title",avatar:null}),_(!0)):(Z(j),e=V(j));return e}),[]),(0,E.useEffect)((function(){var e,t=z(31e3);return _(t.available),t.timeLeftMs>0&&(e=setTimeout((function(){_(!1)}),t.timeLeftMs)),function(){clearTimeout(e)}}),[d]),(0,E.useEffect)((function(){if(d){o.externalInterfaceService.emit(Dt);var e=d.id,t=d.externalId;L&&e&&o.executeAction(nl,{id:e,externalId:t})}}),[null==d?void 0:d.id]);var z=function(e){if(sn().get(d,"agent.available")){var t=(new Date).getTime()-d.agent.lastSeen.toDate().getTime();if(t<=e)return{available:d.agent.available,timeLeftMs:e-t}}return{available:!1,timeLeftMs:0}},Z=function(){var e=xe()(ye().mark((function e(t){var n,r=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:1,e.prev=1,e.next=4,fetch("".concat(Jl.Z.clientAPIBaseUrl,"/connect-links/").concat(t,"/set-waiting-time"),{method:"PUT"});case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0),n<10?setTimeout(xe()(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(t,n+1);case 2:case"end":return e.stop()}}),e)}))),5e3):Zt.Tb(new Error("Failed to setWaitingTime trial: ".concat(n,", full error: ").concat(e.t0)));case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),Y=k||b||F,K=o.getText("CLIENT_INVITATION_ENTER_MEETING_NOW"),q=I()(K.length>=25&&t.joinButtonLongText);return E.createElement("div",{className:t.wrapper},c&&E.createElement("div",{className:t.settings},E.createElement(xl,null)),d&&!c&&E.createElement(E.Fragment,null,E.createElement(Vc,{meetingStartTime:d.validFrom,isQueue:k}),L&&h&&E.createElement(E.Fragment,null,E.createElement(Zc,{displayName:null==h?void 0:h.displayName,jobTitle:null==h?void 0:h.jobTitle,imageUrl:null==h?void 0:h.avatar,agentStatus:Y?"available":"unavailable"}),E.createElement("hr",{className:t.divider})),E.createElement(ml,{showSettings:!0,onSettingsClick:function(){return l(Xc(Xc({},a),{},{showBackButton:!0}))},videoAlignment:"cover"}),Y?E.createElement(E.Fragment,null,G&&E.createElement(Q.xv,{className:t.termsCheckbox},E.createElement(Q.XZ,{disabled:x,className:t.checkbox,onChange:function(e){B(e.target.checked)},checked:M,"data-testid":"client-enter-meeting-button-consent"}),E.createElement(To,{text:"POPUP_TERMS_MESSAGE",args:o.getText("CLIENT_INVITATION_ENTER_MEETING_NOW")})),E.createElement(Q.zx,{disabled:x||G&&!M,className:t.joinButton,contentClassName:q,type:"popupPrimary",onClick:function(){if(!F){O(!0),R(!1);var e=setTimeout((function(){i===S.kp.DISCONNECTED&&(O(!1),R(!0))}),1e4);L?o.executeAction(Kc,{id:d.id,onError:function(){clearTimeout(e),o.executeAction(Se.FI,{title:o.getText("GENERAL_CONNECTION_ERROR"),message:o.getText("CLIENT_MEETING_JOIN_ERROR"),callback:function(){O(!1)}})}}):o.executeAction(rl,Xc(Xc({},n),{},{queue:d.queue,isMeeting:L,clientId:d.id,onError:function(){clearTimeout(e),O(!1)}}))}},"data-testid":"client-enter-meeting-button",loading:x},K),w&&E.createElement(Q.xv,{type:"secondary",className:t.alignedText},o.getText("CLIENT_MEETING_JOIN_ERROR")),!G&&E.createElement(Q.xv,{className:t.terms},E.createElement(To,{text:"POPUP_TERMS_CLICK_AND_ACCEPT_MESSAGE",args:o.getText("CLIENT_INVITATION_ENTER_MEETING_NOW")}))):E.createElement(E.Fragment,null,E.createElement("hr",{className:t.divider}),E.createElement(Q.xv,{className:t.waitingText},o.getText("CLIENT_MEETING_STATUS_CONNECTING")))))}),["CallSessionStore","MediaStreamStore"],(function(e){return{stream:e.MediaStreamStore.getLocalMediaStream(),callSessionStatus:e.CallSessionStore.getStatus()}})),$c=(0,N.Z)((function(e){return{wrapper:{padding:"24px",width:"100%",height:"100%",backgroundColor:e.popup.backgroundColor,color:e.popup.textColor,textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between"},meetingTitle:{fontSize:"12px",fontStyle:"normal",fontWeight:400,lineHeight:"24px",textAlign:"center",textTransform:"uppercase",color:e.popup.textColor,opacity:.5,margin:0,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},alignedText:{textAlign:"center",color:e.popup.textColor},divider:{width:"100%",borderTop:"1px solid ".concat(e.popup.textColor),opacity:.1,marginTop:"16px"},waitingText:{fontSize:"12px",fontWeight:400,lineHeight:"16px",color:e.popup.textColor,opacity:.5,margin:0,marginTop:46,marginBottom:20},terms:{fontSize:"11px",fontWeight:400,lineHeight:"17px",color:e.popup.textColor,display:"flex"},termsCheckbox:{fontSize:"11px",fontWeight:400,lineHeight:"17px",color:e.popup.textColor,display:"flex",textAlign:"left"},joinButton:{margin:"18px 0 12px",height:56,display:"flex",alignItems:"center",justifyContent:"center"},joinButtonLongText:{fontSize:"15px"},joinButtonCheckbox:{height:56},settings:{height:"100%",width:"100%",display:"flex",flexDirection:"column",alignItems:"baseline"},checkbox:{marginTop:"10px",marginRight:"7px"}}}))(Jc),es=n(71792);function ts(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ns(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ts(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ts(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rs={display:"inline-block",userSelect:"none",flexShrink:0},is=function(e){var t=e.color,n=void 0===t?"black":t,r=e.style,i=void 0===r?{}:r;return E.createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:ns(ns({},rs),i),alt:"","aria-hidden":"true"},E.createElement("path",{d:"M5.00002 8.19996L8.20003 0.999927C8.83655 0.999927 9.44701 1.25278 9.8971 1.70287C10.3472 2.15296 10.6 2.76342 10.6 3.39994L10.6 6.59995C11.428 6.59995 17 6.59982 17 6.59982C17 6.59982 16.7676 8.17928 16.7281 8.43996C16.2905 11.2936 15.4001 16.9999 15.4001 16.9999C15.4001 16.9999 8.46661 17 5.00002 17M5.00002 8.19996L5.00002 17M5.00002 8.19996C3.66669 8.19996 1 8.19996 1 8.19996L1 16.9999C1 16.9999 3.93696 17 5.00002 17",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))};function os(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function as(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?os(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):os(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ls={display:"inline-block",userSelect:"none",flexShrink:0},cs=function(e){var t=e.color,n=void 0===t?"black":t,r=e.style,i=void 0===r?{}:r;return E.createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:as(as({},ls),i),alt:"","aria-hidden":"true"},E.createElement("path",{d:"M13 9.80004L9.79997 17.0001C9.16345 17.0001 8.55299 16.7472 8.10291 16.2971C7.65282 15.847 7.39996 15.2366 7.39996 14.6001V11.4C6.57197 11.4 1 11.4002 1 11.4002C1 11.4002 1.23236 9.82072 1.27193 9.56004C1.70949 6.70638 2.59991 1.00014 2.59991 1.00014C2.59991 1.00014 9.53339 1 13 1M13 9.80004V1M13 9.80004C14.3333 9.80004 17 9.80004 17 9.80004V1.00014C17 1.00014 14.063 1 13 1",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))},ss=(0,N.Z)((function(e){var t,n,r,i,o,a;return{thumbsBox:{display:"flex",justifyContent:"center",width:"100%",paddingTop:36},thumbsItem:{width:100,cursor:"pointer",height:64,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-evenly",backgroundColor:"rgba(248,248,248,0.12)",borderRadius:8,marginRight:8},hoverBox:{backgroundColor:"blurred"===(null==e||null===(t=e.thankYouScreen)||void 0===t||null===(n=t.background)||void 0===n?void 0:n.backgroundType)||e.popup.thankYou.blurred?"rgba(248,248,248,0.32)":"rgba(38, 38, 45, 0.56)"},badSelected:{backgroundColor:e.palette.red.main},goodSelected:{backgroundColor:e.palette.green.main},thumbsItemText:{margin:0,color:"blurred"===(null==e||null===(r=e.thankYouScreen)||void 0===r||null===(i=r.background)||void 0===i?void 0:i.backgroundType)||e.popup.thankYou.blurred?e.palette.white.main:(null==e||null===(o=e.thankYouScreen)||void 0===o||null===(a=o.text)||void 0===a?void 0:a.textColor)||e.palette.white.main}}}),{withTheme:!0})((function(e){var t,n,i,o,a,l,c=e.classes,s=e.theme,u=e.onAnswerClick,d=(0,r.bp)(),p=(0,E.useState)(""),m=ee()(p,2),f=m[0],h=m[1],g=(0,E.useState)(!1),v=ee()(g,2),S=v[0],T=v[1],b=(0,E.useState)(!1),_=ee()(b,2),y=_[0],C=_[1],x=function(e){""===f&&(h(e),d.executeAction(H,{type:"thumbsUpOrDown",selectedAnswer:e}),setTimeout((function(){u()}),1e3))},O=I()(c.thumbsItem,y?c.hoverBox:{},1===f?c.badSelected:{}),A=I()(c.thumbsItem,S?c.hoverBox:{},2===f?c.goodSelected:{}),N=function(e,t){"up"===t?T(e):C(e)},w="blurred"===(null==s||null===(t=s.thankYouScreen)||void 0===t||null===(n=t.background)||void 0===n?void 0:n.backgroundType)||s.popup.thankYou.blurred;return E.createElement("div",null,E.createElement("div",{className:c.thumbsBox},E.createElement("div",{className:A,onClick:function(){return x(2)},onMouseEnter:function(){return N(!0,"up")},onMouseLeave:function(){return N(!1,"up")},role:"button",tabIndex:"0","aria-label":d.getText("CALL_FEEDBACK_ANSWER_THUMBS_UP")},E.createElement(is,{color:w?s.palette.white.main:(null==s||null===(i=s.thankYouScreen)||void 0===i||null===(o=i.text)||void 0===o?void 0:o.textColor)||s.palette.white.main}),E.createElement(Q.xv,{className:c.thumbsItemText},d.getText("CALL_FEEDBACK_ANSWER_THUMBS_UP"))),E.createElement("div",{className:O,onClick:function(){return x(1)},onMouseEnter:function(){return N(!0,"down")},onMouseLeave:function(){return N(!1,"down")},role:"button",tabIndex:"1","aria-label":d.getText("CALL_FEEDBACK_ANSWER_THUMBS_DOWN")},E.createElement(cs,{color:w?s.palette.white.main:(null==s||null===(a=s.thankYouScreen)||void 0===a||null===(l=a.text)||void 0===l?void 0:l.textColor)||s.palette.white.main}),E.createElement(Q.xv,{className:c.thumbsItemText},d.getText("CALL_FEEDBACK_ANSWER_THUMBS_DOWN")))))})),us=(0,N.Z)((function(e){var t,n,r,i,o,a,l,c,s,u,d,p,m,f,h,g,v,E,S,T,b,_,y,C;return{list:{listStyleType:"none",display:"flex",width:"100%",height:"44px",justifyContent:"space-between"},score:{color:"blurred"===(null==e||null===(t=e.thankYouScreen)||void 0===t||null===(n=t.background)||void 0===n?void 0:n.backgroundType)||e.popup.thankYou.blurred?e.palette.white.main:(null==e||null===(r=e.thankYouScreen)||void 0===r||null===(i=r.text)||void 0===i?void 0:i.textColor)||e.palette.white.main,border:"1px solid ".concat("blurred"===(null==e||null===(o=e.thankYouScreen)||void 0===o||null===(a=o.background)||void 0===a?void 0:a.backgroundType)||e.popup.thankYou.blurred?e.palette.white.main:(null==e||null===(l=e.thankYouScreen)||void 0===l||null===(c=l.text)||void 0===c?void 0:c.textColor)||e.palette.white.main),width:"10%",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer","&:first-child":{borderRadius:"5px 0 0 5px"},"&:last-child":{borderRadius:"0 5px 5px 0"},"&:hover":{backgroundColor:"blurred"===(null==e||null===(s=e.thankYouScreen)||void 0===s||null===(u=s.background)||void 0===u?void 0:u.backgroundType)||e.popup.thankYou.blurred?e.palette.white.main:(null==e||null===(d=e.thankYouScreen)||void 0===d||null===(p=d.text)||void 0===p?void 0:p.textColor)||e.palette.white.main,color:"blurred"===(null==e||null===(m=e.thankYouScreen)||void 0===m||null===(f=m.background)||void 0===f?void 0:f.backgroundType)||e.popup.thankYou.blurred?e.palette.black.main:null==e||null===(h=e.thankYouScreen)||void 0===h||null===(g=h.background)||void 0===g?void 0:g.backgroundColor}},active:{backgroundColor:"blurred"===(null==e||null===(v=e.thankYouScreen)||void 0===v||null===(E=v.background)||void 0===E?void 0:E.backgroundType)||e.popup.thankYou.blurred?e.palette.white.main:(null==e||null===(S=e.thankYouScreen)||void 0===S||null===(T=S.text)||void 0===T?void 0:T.textColor)||e.palette.white.main,color:"blurred"===(null==e||null===(b=e.thankYouScreen)||void 0===b||null===(_=b.background)||void 0===_?void 0:_.backgroundType)||e.popup.thankYou.blurred?e.palette.black.main:null==e||null===(y=e.thankYouScreen)||void 0===y||null===(C=y.background)||void 0===C?void 0:C.backgroundColor}}}),{withTheme:!0})((function(e){var t=e.classes,n=e.selectedNPSNumber,r=e.score;return E.createElement("ul",{className:t.list},Pi()(Array(11)).map((function(e,i){return E.createElement("li",{className:I()(t.score,i===r?t.active:{}),onClick:function(){n(i)},key:i},i)})))})),ds=(0,N.Z)((function(e){var t,n,r,i,o,a,l,c,s,u,d,p,m,f,h,g;return{NPS:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center"},NPSBody:{marginBottom:20},title:{color:(null==e||null===(t=e.thankYouScreen)||void 0===t||null===(n=t.text)||void 0===n?void 0:n.textColor)||e.popup.thankYou.textColor},hints:{display:"flex",justifyContent:"center",margin:"10px auto 20px auto"},hint:{color:(null==e||null===(r=e.thankYouScreen)||void 0===r||null===(i=r.text)||void 0===i?void 0:i.textColor)||e.popup.thankYou.textColor,marginRight:10},submitFeedback:{width:150,height:40,fontSize:12,padding:0,color:(null==e||null===(o=e.thankYouScreen)||void 0===o||null===(a=o.submitButton)||void 0===a?void 0:a.textColor)||e.popup.thankYou.textColor,backgroundColor:(null==e||null===(l=e.thankYouScreen)||void 0===l||null===(c=l.submitButton)||void 0===c?void 0:c.backgroundColor)||e.popup.thankYou.feedbackButton.main,"& span":{height:40},borderRadius:null==e||null===(s=e.thankYouScreen)||void 0===s||null===(u=s.submitButton)||void 0===u?void 0:u.borderRadius,"&:hover":{backgroundColor:null==e||null===(d=e.thankYouScreen)||void 0===d||null===(p=d.submitButton)||void 0===p||null===(m=p.hover)||void 0===m?void 0:m.backgroundColor,color:null==e||null===(f=e.thankYouScreen)||void 0===f||null===(h=f.submitButton)||void 0===h||null===(g=h.hover)||void 0===g?void 0:g.textColor}}}}),{withTheme:!0})((function(e){var t=e.classes,n=e.onAnswerClick,i=(0,r.bp)(),o=(0,E.useState)(null),a=ee()(o,2),l=a[0],c=a[1],s=(0,E.useState)(!1),u=ee()(s,2),d=u[0],p=u[1];return E.createElement("div",{className:t.NPS},E.createElement("div",{className:t.NPSBody},E.createElement(Q.xv,{type:"body",className:t.title},i.getText("CALL_FEEDBACK_NPS_QUESTION")),E.createElement("div",{className:t.hints},E.createElement(Q.xv,{type:"secondary",className:t.hint},i.getText("CALL_FEEDBACK_NPS_HINT_MIN")),E.createElement(Q.xv,{type:"secondary",className:t.hint},i.getText("CALL_FEEDBACK_NPS_HINT_MAX"))),E.createElement(us,{selectedNPSNumber:c,score:l})),null!==l&&E.createElement(Q.zx,{className:t.submitFeedback,type:"popupPrimary",onClick:function(){null!==l&&(p(!0),i.executeAction(H,{type:"nps",selectedAnswer:l}),n())},disabled:d},i.getText("CALL_FEEDBACK_NPS_SUBMIT_BUTTON")))})),ps=(0,N.Z)((function(e){var t,n,r,i;return{title:{color:(null==e||null===(t=e.thankYouScreen)||void 0===t||null===(n=t.text)||void 0===n?void 0:n.textColor)||e.popup.thankYou.textColor},thankYouSubmit:{color:(null==e||null===(r=e.thankYouScreen)||void 0===r||null===(i=r.text)||void 0===i?void 0:i.textColor)||e.popup.thankYou.textColor}}}),{withTheme:!0})((function(e){var t=e.classes,n=(0,r.bp)(),i=(0,E.useState)(!1),o=ee()(i,2),a=o[0],l=o[1],c=n.settings.get("client.callFeedback.type"),s=n.settings.get("client.callFeedbackFreeText.enabled",!0),u=function(){s?n.executeAction(Rn,{screen:"text-feedback"}):l(!0)};return a?E.createElement(Q.xv,{className:t.thankYouSubmit},n.getText("THANKYOU_AFTER_FEEDBACK")):function(){switch(c){case"thumbsUpDown":default:return E.createElement(E.Fragment,null,E.createElement(Q.Dx,{type:"h3",className:t.title},n.getText("CALL_FEEDBACK_QUESTION_TITLE")),E.createElement(ss,{onAnswerClick:u}));case"NPS":return E.createElement(ds,{onAnswerClick:u})}}()})),ms=n.p+"static/assets/images/thank_you_bg.6acf63dc8b949925fdb2ea94c4f54caf.png",fs=(0,N.Z)((function(e){var t,n,r,i,o,a,l,c;return{content:{backgroundSize:"cover",color:(null==e||null===(t=e.thankYouScreen)||void 0===t||null===(n=t.text)||void 0===n?void 0:n.textColor)||e.popup.thankYou.textColor,padding:16,textAlign:"center",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},contentWithBackgroundImage:{background:"unset"},blurredBackground:{background:"unset"},solidBackground:{background:(null==e||null===(r=e.thankYouScreen)||void 0===r||null===(i=r.background)||void 0===i?void 0:i.backgroundColor)||e.popup.thankYou.backgroundColor},backgroundFilter:{position:"absolute",top:"0px",left:"0px",height:"100%",width:"100%",background:"rgba(0,0,0,0.4)","-webkit-backdrop-filter":"saturate(180%) blur(100px)",backdropFilter:"saturate(180%) blur(100px)"},textFilter:{position:"absolute",top:"0px",left:"0px",height:"100%",width:"100%",background:"rgba(0,0,0,0.4)"},backgroundImage:{left:0,top:0,position:"absolute",width:"100%",height:"100%",objectFit:"cover"},blurredImage:{filter:"blur(40px)",transform:"scale(1.4)"},thankYou:{height:"50%",zIndex:1,display:"flex",flexDirection:"column",justifyContent:"flex-end",paddingBottom:30},thankYouTitle:{fontSize:24,color:(null==e||null===(o=e.thankYouScreen)||void 0===o||null===(a=o.text)||void 0===a?void 0:a.textColor)||e.popup.thankYou.textColor,marginBottom:8},description:{fontSize:14,color:(null==e||null===(l=e.thankYouScreen)||void 0===l||null===(c=l.text)||void 0===c?void 0:c.textColor)||e.popup.thankYou.textColor,marginTop:0,marginBottom:32},feedback:{height:"50%",zIndex:1,display:"flex",flexDirection:"column",justifyContent:"center"},centerThankYou:{justifyContent:"center"}}}))((function(e){var t,n,i,o,a,l=e.classes,c=(0,r.bp)(),s=(0,In.Z)(),u=c.getStore("CallSessionStore").getStreamCaptureImage()||ms,d=mo().setHeaderValues,p=null===(t=c.settings.get("client.callFeedback.enabled"))||void 0===t||t;(0,E.useEffect)((function(){return c.externalInterfaceService.emit("viddget:thankyoupage_loaded",{withPoll:!1}),function(){return d(uo)}}),[]);var m=(null==s||null===(n=s.thankYouScreen)||void 0===n||null===(i=n.background)||void 0===i?void 0:i.backgroundType)||"blurred",f={blurred:l.blurredBackground,image:l.contentWithBackgroundImage,solid:l.solidBackground}[m],h=I()(l.content,f||{});return E.createElement("div",{className:h},u&&"blurred"===m&&E.createElement(E.Fragment,null,E.createElement("img",{className:I()(l.backgroundImage,l.blurredImage),src:u,alt:""}),E.createElement("div",{className:l.backgroundFilter})),(null==s||null===(o=s.thankYouScreen)||void 0===o||null===(a=o.background)||void 0===a?void 0:a.backgroundImage)&&"image"===m&&E.createElement(E.Fragment,null,E.createElement("img",{className:l.backgroundImage,src:s.thankYouScreen.background.backgroundImage,alt:""}),E.createElement("div",{className:l.textFilter})),E.createElement("div",{className:I()(l.thankYou,p?{}:l.centerThankYou)},E.createElement(Q.Dx,{type:"h2",className:l.thankYouTitle},c.getText("THANKYOU_TITLE")),E.createElement(Q.xv,{className:l.description},c.getText("THANKYOU_DESCRIPTION")),E.createElement(Q.zx,{type:"popupPrimary",onClick:function(){(0,vo.Wz)().mock||c.externalInterfaceService.emit(jt)}},c.getText("THANKYOU_BUTTON"))),p&&E.createElement("div",{className:l.feedback},E.createElement(ps,null)))})),hs=n(79827);function gs(){var e=window,t=document,n=t.documentElement,r=t.body,i=0,o=null,a=0;n.addEventListener("keydown",(function(e){var t=e.which;(9===t||t>36&&t<41)&&(a=Date.now())}),!1),n.addEventListener("focus",(function(s){if(Date.now()-a<42){var u=s.target;"focus-hug"!==u.id&&function(a){l||((l=t.createElement("focus-hug")).id="focus-hug",r.appendChild(l));var s,u,d,p,m,f,h=(d=(s=a).getBoundingClientRect(),p={top:e.pageYOffset||n.scrollTop||0,left:e.pageXOffset||n.scrollLeft||0},m=n.clientTop||r.clientTop,f=n.clientLeft||r.clientLeft,{left:(u={top:d.top+p.top-m||0,left:d.left+p.left-f||0}).left- -1,top:u.top- -1,width:Math.max(12,s.offsetWidth)+-2,height:Math.max(8,s.offsetHeight)+-2});l.style.left="".concat(h.left,"px"),l.style.top="".concat(h.top,"px"),l.style.width="".concat(h.width,"px"),l.style.height="".concat(h.height,"px"),c(),a.classList.add("focus-hug_target"),l.classList.add("focus-hug_visible"),o=a,requestAnimationFrame((function(){l.classList.add("focus-hug_hiding"),i=setTimeout(c,100)}))}(u)}}),!0),n.addEventListener("blur",(function(){c()}),!0);var l=null;function c(){i&&(clearTimeout(i),i=0,l.classList.remove("focus-hug_visible"),l.classList.remove("focus-hug_hiding"),o.classList.remove("focus-hug_target"),o=null)}var s=t.createElement("style");s.textContent="#focus-hug {    position: absolute;    margin: 0;    background: transparent;    visibility: hidden;    pointer-events: none;    box-shadow: 0 0 2px 3px #78aeda, 0 0 2px #78aeda inset; border-radius: 2px;    -webkit-transform: scale(1.4);    transform: scale(1.4);    opacity: 1;    }    #focus-hug.focus-hug_visible {        transition-property: -webkit-transform;        transition-property: transform;        transition-timing-function: ease-in;        transition-duration: .1s;        visibility: visible;        z-index: 9999;    }    #focus-hug.focus-hug_hiding {        -webkit-transform: scale(1) !important;        transform: scale(1) !important;    }    .focus-hug_target {        outline: none !important;    }    /* http://stackoverflow.com/questions/71074/how-to-remove-firefoxs-dotted-outline-on-buttons-as-well-as-links/199319 */    .focus-hug_target::-moz-focus-inner {        border: 0 !important;    }    /* Replace it with @supports rule when browsers catch up */    @media screen and (-webkit-min-device-pixel-ratio: 0) {        #focus-hug {            box-shadow: none;            outline: 5px auto -webkit-focus-ring-color;            outline-offset: 0;        }    }    ",r.appendChild(s)}function vs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Es(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vs(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ss={borderTopLeftRadius:0,borderTopRightRadius:0},Ts=(0,N.Z)((function(e){var t,n,r,i,o,a,l,c,s;return{container:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},header:{width:"100%",height:"".concat(+e.popup.borderRadius.split("px")[0]+58,"px"),marginBottom:"-".concat(e.popup.borderRadius),display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 16px ".concat(e.popup.borderRadius," 16px"),backgroundColor:e.popup.header.backgroundColor},headerBackgroundTransparent:{position:"absolute",zIndex:1e5,backgroundColor:"transparent",display:"flex",flexDirection:"row-reverse"},headerText:{fontSize:"16px",fontWeight:400,color:(null==e||null===(t=e.popup)||void 0===t||null===(n=t.header)||void 0===n||null===(r=n.title)||void 0===r?void 0:r.color)||e.popup.header.text,lineHeight:"40px",textTransform:(null==e||null===(i=e.popup)||void 0===i||null===(o=i.header)||void 0===o||null===(a=o.title)||void 0===a?void 0:a.textTransform)||e.popup.header.textTransform,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",margin:0},headerTextCenter:{textAlign:"center"},headerTextWithBackButton:{width:"calc(100% - 39px)",textAlign:"left"},backText:{fontSize:"14px",fontWeight:400,color:(null==e||null===(l=e.popup)||void 0===l||null===(c=l.header)||void 0===c||null===(s=c.title)||void 0===s?void 0:s.color)||e.popup.header.text,marginLeft:-e.spacing(.5)},content:{height:"100%",overflow:"hidden"},contentBorder:{borderTopRightRadius:e.popup.borderRadius,borderTopLeftRadius:e.popup.borderRadius},backButton:{transition:"opacity .1s",width:"fit-content",padding:0},closeButton:{display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e5}}}),{withTheme:!0})((function(e){var t,n,i,o,a=e.classes,l=e.children,c=e.theme,s=mo(),u=s.headerText,d=s.showRightSideButton,p=s.rightSideButtonIcon,m=s.showBackButton,f=s.showBackLabel,h=s.goBackCallback,g=s.rightButtonClickCallback,v=s.fadedBackButton,S=s.showHeader,T=s.setHeaderValues,b=s.transparentBackgroundHeader,_=(0,r.bp)(),y=S?{}:Ss,C=I()(a.headerText,m&&a.headerTextWithBackButton);return E.createElement("div",{className:a.container},S&&E.createElement("div",{className:I()(a.header,b&&a.headerBackgroundTransparent)},!!m&&E.createElement(Q.zx,{style:{opacity:v?0:1},className:a.backButton,icon:null!=c&&c.rtl?"arrowRight":"arrowLeft",iconColor:(null==c||null===(t=c.popup)||void 0===t||null===(n=t.header)||void 0===n?void 0:n.iconColor)||c.popup.header.text,size:"soloIcon","aria-label":_.getText("NAVIGATE_BACK"),onClick:function(){_.executeAction(Z,{target:"widget_popup_header_back"}),"function"==typeof h&&h(),T(Es(Es({},s),{},{showBackButton:!m,goBackCallback:null}))},type:"sizeOnlyIcon"},f&&E.createElement(Q.xv,{className:a.backText},_.getText("NAVIGATE_BACK"))),!!u&&E.createElement(Q.xv,{className:C},u),!!d&&E.createElement(Q.zx,{className:a.closeButton,type:"large",icon:p,iconColor:(null==c||null===(i=c.popup)||void 0===i||null===(o=i.header)||void 0===o?void 0:o.iconColor)||c.popup.header.text,size:"soloIcon",onClick:function(){_.executeAction(Z,{target:"widget_popup_header_close"}),"function"==typeof g?g():_.externalInterfaceService.emit(jt)}})),E.createElement("div",{className:I()(a.content,!b&&a.contentBorder),style:y},l))})),bs=(0,N.Z)((function(e){var t,n,r,i,o,a,l,c,s,u,d,p,m,f,h,g,v,E,S,T,b,_,y,C;return{content:{backgroundSize:"cover",color:(null==e||null===(t=e.thankYouScreen)||void 0===t||null===(n=t.text)||void 0===n?void 0:n.textColor)||e.popup.thankYou.textColor,padding:16,textAlign:"center",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},contentWithBackgroundImage:{background:"unset"},blurredBackground:{background:"unset"},solidBackground:{background:(null==e||null===(r=e.thankYouScreen)||void 0===r||null===(i=r.background)||void 0===i?void 0:i.backgroundColor)||e.popup.thankYou.backgroundColor},backgroundFilter:{position:"absolute",top:"0px",left:"0px",height:"100%",width:"100%",background:"rgba(0,0,0,0.4)","-webkit-backdrop-filter":"saturate(180%) blur(100px)",backdropFilter:"saturate(180%) blur(100px)"},textFilter:{position:"absolute",top:"0px",left:"0px",height:"100%",width:"100%",background:"rgba(0,0,0,0.4)"},backgroundImage:{left:0,top:0,position:"absolute",width:"100%",height:"100%",objectFit:"cover"},blurredImage:{filter:"blur(40px)",transform:"scale(1.4)"},thankYou:{height:"85%",display:"flex",flexDirection:"column",justifyContent:"center",paddingBottom:30,zIndex:1},thankYouTitle:{width:"100%",fontSize:24,color:(null==e||null===(o=e.thankYouScreen)||void 0===o||null===(a=o.text)||void 0===a?void 0:a.textColor)||e.popup.thankYou.textColor,marginBottom:8},description:{width:"100%",fontSize:14,color:(null==e||null===(l=e.thankYouScreen)||void 0===l||null===(c=l.text)||void 0===c?void 0:c.textColor)||e.popup.thankYou.textColor,marginTop:0,marginBottom:32},textarea:{fontSize:16,fontFamily:"inherit",maxHeight:"350px"},gdpr:{fontStyle:"italic",textAlign:"left",color:(null==e||null===(s=e.thankYouScreen)||void 0===s||null===(u=s.text)||void 0===u?void 0:u.textColor)||e.popup.thankYou.textColor,fontSize:11,marginTop:-16,marginBottom:16,lineHeight:"12px"},feedback:{width:"100%",height:"40%",display:"flex",flexDirection:"column",justifyContent:"center"},thankYouSubmit:{color:(null==e||null===(d=e.thankYouScreen)||void 0===d||null===(p=d.text)||void 0===p?void 0:p.textColor)||e.popup.thankYou.textColor},submitFreeTextFeedbackBox:{width:"100%",textAlign:"right",height:40},submitFreeTextFeedback:{width:77,height:40,marginRight:0,padding:0,color:(null==e||null===(m=e.thankYouScreen)||void 0===m||null===(f=m.submitButton)||void 0===f?void 0:f.textColor)||e.popup.thankYou.textColor,backgroundColor:(null==e||null===(h=e.thankYouScreen)||void 0===h||null===(g=h.submitButton)||void 0===g?void 0:g.backgroundColor)||e.popup.thankYou.feedbackButton.main,borderRadius:null==e||null===(v=e.thankYouScreen)||void 0===v||null===(E=v.submitButton)||void 0===E?void 0:E.borderRadius,"&:hover":{backgroundColor:null==e||null===(S=e.thankYouScreen)||void 0===S||null===(T=S.submitButton)||void 0===T||null===(b=T.hover)||void 0===b?void 0:b.backgroundColor,color:null==e||null===(_=e.thankYouScreen)||void 0===_||null===(y=_.submitButton)||void 0===y||null===(C=y.hover)||void 0===C?void 0:C.textColor}}}}))((function(e){var t,n,i,o,a,l,c=e.classes,s=(0,r.bp)(),u=(0,E.useState)(""),d=ee()(u,2),p=d[0],m=d[1],f=(0,E.useState)(!1),h=ee()(f,2),g=h[0],v=h[1],S=s.getStore("CallSessionStore").getStreamCaptureImage()||ms,T=(null===(t=theme)||void 0===t||null===(n=t.thankYouScreen)||void 0===n||null===(i=n.background)||void 0===i?void 0:i.backgroundType)||"blurred",b={blurred:c.blurredBackground,image:c.contentWithBackgroundImage,solid:c.solidBackground}[T],_=I()(c.content,b||{});return E.createElement("div",{className:_},S&&"blurred"===T&&E.createElement(E.Fragment,null,E.createElement("img",{className:I()(c.backgroundImage,c.blurredImage),src:S,alt:""}),E.createElement("div",{className:c.backgroundFilter})),(null===(o=theme)||void 0===o||null===(a=o.thankYouScreen)||void 0===a||null===(l=a.background)||void 0===l?void 0:l.backgroundImage)&&"image"===T&&E.createElement(E.Fragment,null,E.createElement("img",{className:c.backgroundImage,src:theme.thankYouScreen.background.backgroundImage,alt:""}),E.createElement("div",{className:c.textFilter})),E.createElement("div",{className:c.thankYou},E.createElement(Q.Dx,{type:"h2",className:c.thankYouTitle},s.getText("THANK_YOU_TITLE_FREE_TEXT_FEEDBACK")),g?E.createElement(Q.xv,{className:c.thankYouSubmit},s.getText("THANKYOU_AFTER_FEEDBACK")):E.createElement(E.Fragment,null,E.createElement(Q.xv,{className:c.description},s.getText("THANK_YOU_DESCRIPTION_FREE_TEXT_FEEDBACK")),E.createElement(Q.gx,{className:c.textarea,type:"text",placeholder:s.getText("FREE_TEXT_FEEDBACK_HINT"),rows:"4",onChange:function(e){return m(e.target.value)},maxlength:500}),E.createElement(Q.xv,{className:c.gdpr},s.getText("FREE_TEXT_FEEDBACK_GDPR")),E.createElement("div",{className:c.submitFreeTextFeedbackBox},p&&E.createElement(Q.zx,{className:c.submitFreeTextFeedback,type:"popupPrimary",onClick:function(){v(!0),s.executeAction(H,{type:"text",selectedAnswer:p})},disabled:g},s.getText("FREE_TEXT_FEEDBACK_SUBMIT"))))),E.createElement(Q.zx,{type:"popupPrimary",onClick:function(){(0,vo.Wz)().mock||s.externalInterfaceService.emit(jt)}},g?s.getText("THANKYOU_BUTTON"):s.getText("FREE_TEXT_FEEDBACK_BUTTON")))}));function _s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ys(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_s(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Cs={container:{display:"flex",flexDirection:"column"},scrollContainer:{overflow:"auto",overflowX:"hidden",height:(0,q.isMobileDevice)()?"calc(100vh - 180.5px)":420,border:0,borderRadius:8},termsContent:{margin:"16px 16px 0",padding:16,border:0,borderRadius:8,backgroundColor:"#F6F6F6",minHeight:380,fontSize:13},buttonContainer:{display:"flex",justifyContent:"space-between"},scrollDownButton:{position:"absolute",bottom:80,left:"calc(50% - 52px/2 + 0.5px)",height:40,width:40,borderRadius:200,backgroundColor:"white",border:0,boxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 1px 2px rgba(0, 0, 0, 0.2)"},termsButtonAccept:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",padding:"8px 16px",gap:"10px",minWidth:"140px",height:"44px",backgroundColor:"#69A334",borderRadius:"32px",border:0,color:"#FFF",margin:16,cursor:"pointer"},termsButtonDecline:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",padding:"8px 16px",margin:16,gap:"10px",minWidth:"140px",height:"44px",background:"#FFF",borderRadius:"32px",border:0,cursor:"pointer"}},xs=function(e){var t=e.setShowTermsDrawer,n=(0,E.useRef)(),i=(0,E.useRef)(),o=(0,r.bp)(),a=(0,E.useState)(!1),l=ee()(a,2),c=l[0],s=l[1];return(0,E.useEffect)((function(){var e,t;if((null==n||null===(e=n.current)||void 0===e?void 0:e.clientHeight)>=(null==n||null===(t=n.current)||void 0===t?void 0:t.scrollHeight))return s(!0)}),[]),E.createElement(Gr,{title:o.getText("TERMS_AND_CONDITIONS_TITLE")||"Terms & Conditions",type:"collapsable",nonCollapsable:!0,emptyHeader:!0,useFullHeaderButton:!1},E.createElement("div",{style:Cs.generalContainer},E.createElement("div",{onScroll:function(e){return!c&&s(e.target.scrollHeight-Math.round(e.target.scrollTop)<=e.target.clientHeight)},ref:n,style:Cs.scrollContainer},E.createElement("div",{style:Cs.termsContent},E.createElement(To,{text:"TERMS_AND_CONDITIONS_TEXT"}),E.createElement("div",{ref:i}))),!c&&E.createElement(Q.zx,{type:"icon",icon:E.createElement(Q.P2,{color:"#006CFF"}),style:Cs.scrollDownButton,onClick:function(){return null==i?void 0:i.current.scrollIntoView({behavior:"smooth"})}}),E.createElement("div",{style:Cs.buttonContainer},E.createElement(Q.zx,{style:Cs.termsButtonDecline,onClick:function(){t(!1),o.externalInterfaceService.emit(jt)}},o.getText("TERMS_AND_CONDITIONS_DECLINE")||"Decline"),E.createElement(Q.zx,{style:ys(ys({},Cs.termsButtonAccept),{},{backgroundColor:c?"#69A334":"#B2B1B1"}),onClick:function(){t(!1)},disabled:!c},o.getText("TERMS_AND_CONDITIONS_ACCEPT")||"Accept"))))},Os=(0,vo.Wz)(),Is=Os.isOpen,As=Os.clientId,Ns=Os.sessionId,ws=Os.userId,Rs=Os.mock,ks=Os.group,Ls=null,Ds=(0,w.ZP)((function(e){var t=e.classes,n=e.queueId,i=(0,r.bp)(),o=mo(),a=o.setHeaderValues,l=o.fadeInBackButton,c=(0,E.useState)(),s=ee()(c,2),u=s[0],d=s[1],p=(0,E.useState)(Is),m=ee()(p,2),f=m[0],h=m[1],g=(0,E.useState)(!1),v=ee()(g,2),S=v[0],T=v[1],b=(0,E.useState)(!1),_=ee()(b,2),y=_[0],C=_[1],x=i.settings.get("merchant.id"),O=i.settings.get("client.mediaPermissionPreboarding.enabled",!1),I=i.settings.get("shopperInformationForm.enabled",!1)&&i.settings.get("shopperInformationForm.preCall",!1),A=i.settings.get("client.dropIn.enabled",!0),N=i.settings.get("client.termsCheckbox.enabled"),w=i.settings.get("client.bookNowButton.enabled"),R=w&&"iframe"===i.settings.get("client.bookNowButton.type")&&!!i.settings.get("client.bookNowButton.url"),k=i.settings.get("client.termsAndConditionsDrawer.enabled",!1),L=(0,E.useState)(k),M=ee()(L,2),B=M[0],j=M[1],U=(0,E.useState)(!1),G=ee()(U,2),F=G[0],W=G[1],H=(0,E.useState)(!1),V=ee()(H,2),z=V[0],Y=V[1],K=(0,E.useState)(!1),q=ee()(K,2),X=q[0],J=q[1],$=(0,E.useRef)(),te=(0,E.useRef)(),ne=(0,E.useRef)(),re=function(){return fetch("".concat(Jl.Z.clientAPIBaseUrl,"/o/").concat(x,"/settings/calls/is-open"),{cache:"default"}).then((function(e){return e.json()})).then((function(e){var t=new Date(e.nextCloseTime),n=new Date(e.nextOpenTime),r=e.isOpen?t>Date.now():n<=Date.now();h(r),r?(clearTimeout(Ls),Ls=setTimeout((function(){h(!1)}),t-Date.now())):(clearTimeout(Ls),Ls=setTimeout((function(){h(!0)}),n-Date.now()))})).catch((function(e){return console.error(e)}))};(0,E.useEffect)((function(){i.executeAction(D)}),[]),(0,E.useEffect)((function(){re();var e=setInterval(xe()(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:re();case 1:case"end":return e.stop()}}),e)}))),6e4);return function(){clearTimeout(Ls),clearInterval(e)}}),[]),(0,E.useEffect)((function(){return a({showHeader:!0,rightSideButtonIcon:"close-sharp",showRightSideButton:!0,showBackButton:X&&!F,showBackLabel:X&&!F,transparentBackgroundHeader:!X}),fetch("".concat(Jl.Z.clientAPIBaseUrl,"/o/").concat(x,"/queues/").concat(n,"/estimated-waiting-time"),{method:"GET",mode:"cors"}).then((function(e){return e.json()})).then((function(e){d(Math.ceil(e.estimatedWaitingTime/60))})).catch((function(e){console.error("Could not fetch queue waiting time",e.message)})),function(){return a(uo)}}),[n,X]);var ie=function(){J(!1),W(!0),ne.current.src+=""};(0,E.useEffect)((function(){if(R){if(!X){te.current.style.display="flex";var e=setTimeout((function(){$.current.style.display="none"}),300);return function(){return clearTimeout(e)}}if(!F){a({goBackCallback:ie}),l({showBackLabel:!0}),$.current.style.display="block";var t=setTimeout((function(){ne.current.contentWindow.focus(),Y(!1),te.current.style.display="none"}),300);return function(){return clearTimeout(t)}}Y(!0)}}),[X,F]);var oe=!!u&&"  ".concat(i.getText("CLIENT_QUEUE_ESTIMATED_WAITING_TIME",u)),ae=!f&&"  ".concat(i.getText("IS_CLOSED_LABEL"));return E.createElement("div",{className:t.slidingWrapper,style:{marginLeft:X&&!F?"-100%":0}},E.createElement("div",{ref:te,className:t.wrapper},E.createElement("div",{className:t.greeting},E.createElement(Q.xv,{className:t.greetingTitle,"data-testid":"client-greeting-text"},i.getText(f?"POPUP_GREETING_TITLE":"CLIENT_CLOSED_TITLE"))),E.createElement("div",{className:t.actionArea},N&&E.createElement(Q.xv,{className:t.termsCheckbox},E.createElement(Q.XZ,{checked:y,className:t.checkbox,disabled:S,onChange:function(e){C(e.target.checked)},"data-testid":"client-enter-chat-consent"}),E.createElement(To,{text:"POPUP_TERMS_MESSAGE",className:"terms-and-conditions"})),A&&E.createElement("div",{className:t.infoCard,style:{marginBottom:(w?"16px":!N&&"0px")||N&&!w&&"0px"}},E.createElement("div",{className:t.infoContainer},E.createElement(Q.hn,{height:24,width:24,color:"black"}),E.createElement(Q.xv,{className:t.infoTitle},i.getText("INITIATION_VARIANT_DOCK_DOCKED_TEXT"))),E.createElement(Q.xv,{className:t.infoText},i.getText(f?"POPUP_GREETING_TEXT":"CLIENT_CLOSED_HOURS_MESSAGE")),E.createElement(Q.zx,{className:t.primaryButton,contentClassName:t.primaryContentStyle,disabled:!f||S||!n||N&&!y||B,loading:S||!n,type:"popupPrimary",onClick:function(){if(!Rs){var e=function(){T(!0);var e={queue:n,clientData:{clientId:As,sessionId:Ns,userId:ws,clientInfo:{browser:ec()}},onError:function(){return T(!1)}};i.executeAction(rl,e)};if(i.executeAction(Z,{target:"enter_drop_in"}),O)switch(ks){case 0:e();break;case 1:default:i.executeAction(Rn,{screen:"select-option"});break;case 2:i.executeAction(Rn,{screen:"permissions-preboarding",props:{mediaType:"both"}})}else I?i.executeAction(Rn,{screen:"shopper-information-form"}):e()}},"data-testid":"client-enter-chat"},i.getText("CLIENT_DROP_IN"),ae||oe)),w&&E.createElement("div",{className:t.infoCard,style:{marginBottom:N&&"0px"}},E.createElement("div",{className:t.infoContainer},E.createElement(Q.Qu,{sharp:!0,color:"black"}),E.createElement(Q.xv,{className:t.infoTitle},i.getText("CLIENT_DEFAULT_MEETING_NAME"))),E.createElement(Q.xv,{className:t.infoText},i.getText("CLIENT_QUEUE_AGENTS_BUSY_BOOKING_POSSIBLE")),E.createElement(Q.zx,{disabled:N&&!y||B,loading:z,className:A?t.secondaryButton:t.primaryButton,contentClassName:t.primaryContentStyle,type:A?"popupSecondary":"popupPrimary",onClick:function(){var e=i.settings.get("client.bookNowButton");i.executeAction(P,e),"iframe"===e.type?(J(!0),a({transparentBackgroundHeader:!1})):"redirect"===e.type?window.top.location=e.url:"tab"===e.type&&window.open(e.url,"_blank")},"data-testid":"client-book-meeting"},i.getText("CLIENT_QUEUE_PLACE_NO_AGENTS_BOOK"))),A&&!N&&E.createElement(Q.xv,{className:t.terms},E.createElement(To,{className:"terms-and-conditions",text:"POPUP_TERMS_CLICK_AND_ACCEPT_MESSAGE",args:i.getText("CLIENT_DROP_IN")})))),R&&E.createElement("div",{ref:$,className:t.bookScreen},E.createElement("iframe",{ref:ne,title:i.getText("CLIENT_QUEUE_PLACE_NO_AGENTS_BOOK"),frameBorder:"0",loading:"lazy",onLoad:function(){W(!1)},height:"100%",width:"100%",src:i.settings.get("client.bookNowButton.url")})),B&&E.createElement(xs,{setShowTermsDrawer:j}))}),["QueueStore"],(function(e){return{queueId:e.QueueStore.getSelectedQueue()}})),Ps=(0,N.Z)((function(e){var t,n,r,i,o,a,l,c,s,u,d,p,m,f,h,g,v,E,S,T,b,_,y,C,x,O,I,A,N,w,R,k,L,D,P,M,B,j,U,G,F,W,H,V,z,Z,Y,K,q,Q,X,J,$,ee,te,ne,re,ie,oe,ae,le,ce,se,ue,de,pe,me,fe,he,ge,ve,Ee,Se,Te,be,_e,ye,Ce,xe,Oe,Ie,Ae,Ne,we,Re,ke,Le,De,Pe,Me,Be,je,Ue,Ge,Fe,We,He,Ve,ze,Ze,Ye,Ke,qe,Qe,Xe,Je,$e,et,tt,nt,rt,it,ot,at,lt,ct,st,ut,dt,pt,mt,ft,ht,gt,vt,Et,St,Tt,bt;return{slidingWrapper:{display:"grid",gridTemplateColumns:"100% 100%",width:"100%",height:"100%",transition:"margin-left .2s",backgroundColor:e.popup.header.backgroundColor},wrapper:{borderRadius:"28px",alignSelf:"stretch",justifySelf:"stretch",gridColumn:"1/1",display:"flex",flexDirection:"column",marginTop:e.popup.borderRadius},greeting:{color:e.popup.header.text,flex:1,paddingLeft:"16px",paddingRight:"16px",paddingBottom:null!=e&&e.rtl?16:0,display:"flex",flexDirection:"column",justifyContent:"flex-end"},infoTitle:{color:"#171717",fontSize:"16px",fontWeight:600,margin:0,marginLeft:"8px"},infoText:{color:"#171717",fontSize:"14px",fontWeight:400,margin:0,marginTop:"16px",marginBottom:"16px",textAlign:null!=e&&e.rtl?"right":"left",lineHeight:"20px"},infoCard:{display:"flex",flexDirection:"column",alignItems:"flex-start",padding:"24px",margin:0,width:"100%",background:"white",boxShadow:"0px 4px 10px 2px rgba(0, 0, 0, 0.15)",borderRadius:"8px",marginBottom:16},infoContainer:{display:"flex","& p":{marginRight:null!=e&&e.rtl?10:0}},greetingTitle:{color:(null==e||null===(t=e.popup)||void 0===t||null===(n=t.header)||void 0===n||null===(r=n.title)||void 0===r?void 0:r.color)||"#FFF",textTransform:(null==e||null===(i=e.popup)||void 0===i||null===(o=i.header)||void 0===o||null===(a=o.title)||void 0===a?void 0:a.textTransform)||"normal",fontSize:(null==e||null===(l=e.popup)||void 0===l||null===(c=l.header)||void 0===c||null===(s=c.title)||void 0===s?void 0:s.fontSize)||"28px",lineHeight:e.popup.typography.greetingTitle.lineHeight||"46px",fontWeight:(null==e||null===(u=e.popup)||void 0===u||null===(d=u.header)||void 0===d||null===(p=d.title)||void 0===p?void 0:p.fontWeight)||"500",margin:0},greetingText:{color:(null==e||null===(m=e.popup)||void 0===m||null===(f=m.header)||void 0===f||null===(h=f.bodyText)||void 0===h?void 0:h.color)||e.popup.header.text,fontSize:(null==e||null===(g=e.popup)||void 0===g||null===(v=g.header)||void 0===v||null===(E=v.bodyText)||void 0===E?void 0:E.fontSize)||"16px",fontWeight:(null==e||null===(S=e.popup)||void 0===S||null===(T=S.header)||void 0===T||null===(b=T.bodyText)||void 0===b?void 0:b.fontWeight)||400,margin:0,marginTop:"16px"},actionArea:{padding:"16px",backgroundColor:e.popup.backgroundColor,color:e.popup.textColor,maxHeight:"546px",overflowY:"auto"},terms:{fontSize:(null==e||null===(_=e.popup)||void 0===_||null===(y=_.terms)||void 0===y?void 0:y.fontSize)||"12px",fontWeight:(null==e||null===(C=e.popup)||void 0===C||null===(x=C.terms)||void 0===x?void 0:x.fontWeight)||500,lineHeight:"16px",color:(null==e||null===(O=e.popup)||void 0===O||null===(I=O.terms)||void 0===I?void 0:I.textColor)||"#737373",display:"flex",textAlign:"center",marginTop:16},termsCheckbox:{fontSize:(null==e||null===(A=e.popup)||void 0===A||null===(N=A.terms)||void 0===N?void 0:N.fontSize)||"11px",fontWeight:(null==e||null===(w=e.popup)||void 0===w||null===(R=w.terms)||void 0===R?void 0:R.fontWeight)||400,lineHeight:"14px",color:(null==e||null===(k=e.popup)||void 0===k||null===(L=k.terms)||void 0===L?void 0:L.textColor)||e.popup.textColor,display:"flex",marginBottom:"12px",alignItems:"center"},checkbox:{marginTop:"4px",marginRight:"7px"},primaryButton:{marginBottom:0,height:48,padding:0,color:null==e||null===(D=e.popup)||void 0===D||null===(P=D.primary)||void 0===P?void 0:P.color,backgroundColor:null==e||null===(M=e.popup)||void 0===M||null===(B=M.primary)||void 0===B?void 0:B.backgroundColor,borderWidth:null==e||null===(j=e.popup)||void 0===j||null===(U=j.primary)||void 0===U?void 0:U.borderWidth,borderColor:null==e||null===(G=e.popup)||void 0===G||null===(F=G.primary)||void 0===F?void 0:F.borderColor,borderRadius:null==e||null===(W=e.popup)||void 0===W||null===(H=W.primary)||void 0===H?void 0:H.borderRadius,borderStyle:"solid","&:hover":{backgroundColor:null==e||null===(V=e.popup)||void 0===V||null===(z=V.primary)||void 0===z||null===(Z=z.hover)||void 0===Z?void 0:Z.backgroundColor,color:null==e||null===(Y=e.popup)||void 0===Y||null===(K=Y.primary)||void 0===K||null===(q=K.hover)||void 0===q?void 0:q.color,borderWidth:null==e||null===(Q=e.popup)||void 0===Q||null===(X=Q.primary)||void 0===X||null===(J=X.hover)||void 0===J?void 0:J.borderWidth,borderColor:null==e||null===($=e.popup)||void 0===$||null===(ee=$.primary)||void 0===ee||null===(te=ee.hover)||void 0===te?void 0:te.borderColor},"&:disabled":{color:"".concat((null==e||null===(ne=e.general)||void 0===ne||null===(re=ne.buttons)||void 0===re||null===(ie=re.disabled)||void 0===ie?void 0:ie.color)||e.palette.gray[80],"!important"),backgroundColor:"".concat((null==e||null===(oe=e.general)||void 0===oe||null===(ae=oe.buttons)||void 0===ae||null===(le=ae.disabled)||void 0===le?void 0:le.backgroundColor)||e.palette.gray[60],"!important"),borderWidth:"".concat((null==e||null===(ce=e.general)||void 0===ce||null===(se=ce.buttons)||void 0===se||null===(ue=se.disabled)||void 0===ue?void 0:ue.borderWidth)||"1px","!important"),borderStyle:"solid !important",borderColor:"".concat((null==e||null===(de=e.general)||void 0===de||null===(pe=de.buttons)||void 0===pe||null===(me=pe.disabled)||void 0===me?void 0:me.borderColor)||e.palette.gray[60],"!important"),"&:hover":{color:"".concat((null==e||null===(fe=e.general)||void 0===fe||null===(he=fe.buttons)||void 0===he||null===(ge=he.disabled)||void 0===ge?void 0:ge.color)||e.palette.gray[80],"!important"),backgroundColor:"".concat((null==e||null===(ve=e.general)||void 0===ve||null===(Ee=ve.buttons)||void 0===Ee||null===(Se=Ee.disabled)||void 0===Se?void 0:Se.backgroundColor)||e.palette.gray[60],"!important"),borderWidth:"".concat((null==e||null===(Te=e.general)||void 0===Te||null===(be=Te.buttons)||void 0===be||null===(_e=be.disabled)||void 0===_e?void 0:_e.borderWidth)||"1px","!important"),borderStyle:"solid !important",borderColor:"".concat((null==e||null===(ye=e.general)||void 0===ye||null===(Ce=ye.buttons)||void 0===Ce||null===(xe=Ce.disabled)||void 0===xe?void 0:xe.borderColor)||e.palette.gray[60],"!important")}}},primaryContentStyle:{textTransform:null==e||null===(Oe=e.popup.primary)||void 0===Oe?void 0:Oe.textTransform,letterSpacing:null==e||null===(Ie=e.popup.primary)||void 0===Ie?void 0:Ie.letterSpacing,fontFamily:null==e||null===(Ae=e.popup)||void 0===Ae||null===(Ne=Ae.primary)||void 0===Ne?void 0:Ne.fontFamily,fontSize:null==e||null===(we=e.popup)||void 0===we||null===(Re=we.primary)||void 0===Re?void 0:Re.fontSize,fontWeight:null==e||null===(ke=e.popup)||void 0===ke||null===(Le=ke.primary)||void 0===Le?void 0:Le.fontWeight,fontStyle:null==e||null===(De=e.popup)||void 0===De||null===(Pe=De.primary)||void 0===Pe?void 0:Pe.fontStyle},secondaryButton:{marginBottom:0,height:48,padding:0,color:null==e||null===(Me=e.popup)||void 0===Me||null===(Be=Me.secondary)||void 0===Be?void 0:Be.color,backgroundColor:null==e||null===(je=e.popup)||void 0===je||null===(Ue=je.secondary)||void 0===Ue?void 0:Ue.backgroundColor,borderWidth:null==e||null===(Ge=e.popup)||void 0===Ge||null===(Fe=Ge.secondary)||void 0===Fe?void 0:Fe.borderWidth,borderColor:null==e||null===(We=e.popup)||void 0===We||null===(He=We.secondary)||void 0===He?void 0:He.borderColor,borderRadius:null==e||null===(Ve=e.popup)||void 0===Ve||null===(ze=Ve.secondary)||void 0===ze?void 0:ze.borderRadius,borderStyle:"solid","&:hover":{backgroundColor:null==e||null===(Ze=e.popup)||void 0===Ze||null===(Ye=Ze.secondary)||void 0===Ye||null===(Ke=Ye.hover)||void 0===Ke?void 0:Ke.backgroundColor,color:null==e||null===(qe=e.popup)||void 0===qe||null===(Qe=qe.secondary)||void 0===Qe||null===(Xe=Qe.hover)||void 0===Xe?void 0:Xe.color,borderWidth:null==e||null===(Je=e.popup)||void 0===Je||null===($e=Je.secondary)||void 0===$e||null===(et=$e.hover)||void 0===et?void 0:et.borderWidth,borderColor:null==e||null===(tt=e.popup)||void 0===tt||null===(nt=tt.secondary)||void 0===nt||null===(rt=nt.hover)||void 0===rt?void 0:rt.borderColor}},secondaryContentStyle:{textTransform:null==e||null===(it=e.popup)||void 0===it||null===(ot=it.secondary)||void 0===ot?void 0:ot.textTransform,letterSpacing:null==e||null===(at=e.popup)||void 0===at||null===(lt=at.secondary)||void 0===lt?void 0:lt.letterSpacing,fontFamily:null==e||null===(ct=e.popup)||void 0===ct||null===(st=ct.secondary)||void 0===st?void 0:st.fontFamily,fontSize:null==e||null===(ut=e.popup)||void 0===ut||null===(dt=ut.secondary)||void 0===dt?void 0:dt.fontSize,fontWeight:null==e||null===(pt=e.popup)||void 0===pt||null===(mt=pt.secondary)||void 0===mt?void 0:mt.fontWeight,fontStyle:null==e||null===(ft=e.popup)||void 0===ft||null===(ht=ft.secondary)||void 0===ht?void 0:ht.fontStyle},bookScreen:{alignSelf:"stretch",justifySelf:"stretch",gridColumn:"2/2",position:"relative",display:"none"},"@media screen and (max-device-width: 429px)":{greetingTitle:{fontSize:(null==e||null===(gt=e.popup)||void 0===gt||null===(vt=gt.header)||void 0===vt||null===(Et=vt.title)||void 0===Et?void 0:Et.fontSize)||"28px",lineHeight:e.popup.typography.greetingTitle.mobile.lineHeight||"46px",fontWeight:(null==e||null===(St=e.popup)||void 0===St||null===(Tt=St.header)||void 0===Tt||null===(bt=Tt.title)||void 0===bt?void 0:bt.fontWeight)||700},actionArea:{maxHeight:"calc(100vh - 58px)"}},"@media screen and (max-device-width: 320px)":{greetingTitle:{fontSize:"28px"},greetingText:{fontSize:"14px"}}}}),{withTheme:!0})(Ds),Ms="#171717",Bs=(0,N.Z)((function(){return{card:{width:"100%",borderRadius:12,border:"1px solid #EFEFEF",boxShadow:"0px 8px 8px rgba(0, 0, 0, 0.02), 0px 4px 8px rgba(0, 0, 0, 0.02), 0px 2px 4px rgba(0, 0, 0, 0.03), 0px 0px 1px rgba(0, 0, 0, 0.04)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"0 16px",textAlign:"center"},cardSmall:{height:112},cardLarge:{height:148,marginBottom:16},cardTitle:{fontWeight:600,fontSize:18,lineHeight:"20px"},cardText:{fontWeight:400,lineHeight:"20px",margin:0,textAlign:"center"},cardIcons:{marginBottom:12,width:60,display:"flex",alignItems:"center",justifyContent:"space-between"}}}),{name:"MediaTypeCard"})((function(e){var t=e.mediaType,n=void 0===t?"both":t,i=e.isSmallCard,o=void 0!==i&&i,a=e.clickable,l=void 0===a||a,c=e.classes,s=(0,r.bp)(),u=function(){l?(s.executeAction(Z,{target:"select_call_options",data:{mediaType:n}}),s.executeAction(Rn,{screen:"permissions-preboarding",props:{mediaType:n}})):s.executeAction(Z,{target:"select_call_options_card",data:{mediaType:n}})},d=I()(c.card,o?c.cardSmall:c.cardLarge);return"both"===n?E.createElement(Q.L9,{className:d,onClick:u,cursorPointer:l},E.createElement("div",{className:c.cardIcons},E.createElement(Q.hn,{color:Ms}),E.createElement(Q.Hs,{color:Ms})),E.createElement(Q.xv,{className:c.cardTitle},s.getText("PERMISSION_PREBOARDING_BOTH_TITLE")),E.createElement(Q.xv,{className:c.cardText},s.getText("PERMISSION_PREBOARDING_BOTH_TEXT"))):E.createElement(Q.L9,{className:d,onClick:u,cursorPointer:l},E.createElement("div",{className:c.cardIcons},E.createElement(Q.GI,{color:Ms,lineColor:"rgba(225, 33, 71, 1)"}),E.createElement(Q.Hs,{color:Ms})),E.createElement(Q.xv,{className:c.cardTitle},s.getText("PERMISSION_PREBOARDING_AUDIO_TITLE")),E.createElement(Q.xv,{className:c.cardText},s.getText("PERMISSION_PREBOARDING_AUDIO_TEXT")))})),js=(0,w.A1)((function(e){var t=e.merchantGoToChat,n=e.queueId,i=e.classes,o=(0,r.bp)(),a=mo().setHeaderValues,l=(0,vo.Wz)(),c=l.clientId,s=l.sessionId,u=l.userId,d=l.mock,p=(0,E.useState)(!1),m=ee()(p,2),f=m[0],h=m[1],g=o.settings.get("client.preferChatOption.enabled",!0);(0,E.useEffect)((function(){return a({showHeader:!0,showRightSideButton:!0,showBackButton:!f,headerText:o.getText("PERMISSIONS_PREBOARDING_HEADER"),goBackCallback:function(){return o.executeAction(Rn,{screen:"start"})}}),function(){return a(uo)}}),[f]);return E.createElement("div",{className:i.wrapper},E.createElement(Q.xv,{className:i.title},o.getText("PERMISSION_PREBOARDING_TITLE")),E.createElement(Bs,null),E.createElement(Bs,{mediaType:"audio"}),g&&E.createElement(Q.xv,{element:"a",className:i.link,onClick:function(){o.executeAction(Z,{target:"prefer_chat_option"}),t?o.executeAction(fr):o.executeAction(Se.V2,{dialogId:Gn.Gk,withCloseIcon:!0,title:o.getText("PERMISSIONS_PREBOARDING_CHAT_TITLE"),message:o.getText("PERMISSIONS_PREBOARDING_CHAT_TEXT"),buttonTitle:o.getText("PERMISSIONS_PREBOARDING_CHAT_ACTION_CHAT"),cancelButtonTitle:o.getText("PERMISSIONS_PREBOARDING_CHAT_ACTION_BACK"),shouldClose:!1,callback:function(e){return function(e){if(e)return function(){if(!d){h(!0),o.executeAction(Se.cd,{dialogId:Gn.Gk,state:{buttonLoading:!0}});var e={queue:n,clientData:{clientId:c,sessionId:s,userId:u,clientInfo:{browser:ec()}},closePreboardingChatDialog:!0,onError:function(){h(!1),o.executeAction(Se.cd,{dialogId:Gn.Gk,state:{buttonLoading:!1}})},onSuccess:function(){return o.executeAction(Se.Xd,{dialogId:Gn.Gk})}};return o.executeAction(rl,e),!1}}()}(e)}})}},o.getText("PERMISSION_PREBOARDING_CHAT_TEXT")))}),["QueueStore","CallSessionStore"],(function(e){var t,n=e.CallSessionStore.getMerchantIntegration();return{queueId:e.QueueStore.getSelectedQueue(),merchantGoToChat:null==n||null===(t=n.goToChat)||void 0===t?void 0:t.enabled}})),Us=(0,N.Z)((function(){return{wrapper:{height:"100%",width:"100%",overflowY:"auto",backgroundColor:"white",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:24,position:"relative"},title:{fontWeight:600,fontSize:26,lineHeight:"28px",textAlign:"center",padding:"0 42px",marginBottom:24},link:{textDecoration:"underline",fontWeight:600,fontSize:12,lineHeight:"28px",color:"#171717",cursor:"pointer"}}}),{name:"SelectOptionScreen"})(js),Gs=(0,w.A1)((function(e){var t,n,i=e.mediaType,o=e.merchantBaseUrl,a=e.audioPermission,l=e.classes,c=(0,r.bp)(),s=null!==(t=window.matchMedia("(prefers-color-scheme: dark)").matches)&&void 0!==t&&t;return E.createElement("div",{className:l.dialog},E.createElement("div",{className:l.dialogContent},E.createElement("div",{className:l.dialogHeader},E.createElement("div",{className:l.dialogHeaderLink},E.createElement("p",null,null!==(n=new URL(o).hostname)&&void 0!==n?n:c.getText("IOS_SAFARI_MEDIA_GUIDE_SCREEN_DEFAULT")),c.getText("PERMISSIONS_PREBOARDING_CHROME_DIALOG_WANT")),E.createElement(Q.aM,{type:"xs",color:s?"#9BA0A5":"#616161"})),E.createElement("div",{className:l.dialogMessages},"both"===i&&E.createElement("div",{className:l.dialogMessage},E.createElement(Q.hn,{outlined:!0,color:s?"#9BA0A5":"#616161"}),E.createElement(Q.xv,{className:l.dialogMessageText},c.getText("PERMISSIONS_PREBOARDING_CHROME_DIALOG_TEXT_CAM"))),!a&&E.createElement("div",{className:l.dialogMessage},E.createElement(Q.Hs,{outlined:!0,color:s?"#9BA0A5":"#616161"}),E.createElement(Q.xv,{className:l.dialogMessageText},c.getText("PERMISSIONS_PREBOARDING_CHROME_DIALOG_TEXT_MIC"))))),E.createElement("div",{className:l.dialogActions},E.createElement("div",{className:l.dialogActionAllow},E.createElement("span",null),E.createElement("p",null,c.getText("PERMISSIONS_PREBOARDING_CHROME_DIALOG_ALLOW"))),E.createElement("div",null,E.createElement("p",null,c.getText("PERMISSIONS_PREBOARDING_CHROME_DIALOG_BLOCK")))))}),["CallSessionStore","MediaStreamStore"],(function(e){var t,n=e.CallSessionStore.getMerchantIntegration();return{merchantBaseUrl:null==n||null===(t=n.merchant)||void 0===t?void 0:t.baseUrl,audioPermission:e.MediaStreamStore.hasAudioPermission}})),Fs=(0,N.Z)((function(){return{dialog:{width:"100%",height:110,display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",borderRadius:"4.56px",padding:13.68,fontFamily:"Helvetica","@media (prefers-color-scheme: light)":{backgroundColor:"#F5F5F5"},"@media (prefers-color-scheme: dark)":{backgroundColor:"#121212",color:"#FFFFFF"}},dialogContent:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between"},dialogHeader:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between","@media (prefers-color-scheme: dark)":{color:"#FFFFFF"}},dialogHeaderLink:{display:"flex",alignItems:"center",color:"#616161",fontSize:12,lineHeight:"14px",fontWeight:500,"@media (prefers-color-scheme: dark)":{color:"#FFFFFF"},"& p":{maxWidth:150,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",marginRight:4}},dialogMessages:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",marginTop:8},dialogMessage:{width:"100%",display:"flex",alignItems:"center","@media (prefers-color-scheme: dark)":{color:"#FFFFFF"}},dialogMessageText:{color:"#616161",fontSize:10,lineHeight:"14px",fontWeight:500,marginLeft:15,"@media (prefers-color-scheme: dark)":{color:"#FFFFFF"}},dialogActions:{width:"100%",display:"flex",flexDirection:"row-reverse",color:"#1E88E5",fontWeight:500,"@media (prefers-color-scheme: dark)":{color:"#8AB4F8"},"& div":{width:43,height:23,borderRadius:2.28,marginLeft:9,display:"flex",justifyContent:"center",alignItems:"center",border:"0.227966px solid #616161"}},dialogActionAllow:{position:"relative","& span":{width:51,height:30,position:"absolute",border:"2px solid #0FBB0C",borderRadius:4}}}}),{name:"ChromeDesktopMediaPermissionType"})(Gs),Ws=(0,w.A1)((function(e){var t=e.mediaType,n=e.merchantBaseUrl,i=e.classes,o=(0,r.bp)(),a=function(){var e;return null!==(e=new URL(n).hostname)&&void 0!==e?e:o.getText("IOS_SAFARI_MEDIA_GUIDE_SCREEN_DEFAULT")};return E.createElement("div",{className:i.dialog},E.createElement(Q.xv,{className:i.dialogMessage},function(){switch(t){case"both":return o.getText("PERMISSIONS_PREBOARDING_IOS_DIALOG_BOTH",a());case"cam":return o.getText("PERMISSIONS_PREBOARDING_IOS_DIALOG_CAM",a());case"mic":return o.getText("PERMISSIONS_PREBOARDING_IOS_DIALOG_MIC",a());default:return null}}()),E.createElement("div",{className:i.dialogActions},E.createElement("div",null,E.createElement("p",null,o.getText("PERMISSIONS_PREBOARDING_IOS_DIALOG_BLOCK"))),E.createElement("div",{className:i.dialogActionAllow},E.createElement("span",null),E.createElement("p",null,o.getText("PERMISSIONS_PREBOARDING_CHROME_DIALOG_ALLOW")))))}),["CallSessionStore"],(function(e){var t,n=e.CallSessionStore.getMerchantIntegration();return{merchantBaseUrl:null==n||null===(t=n.merchant)||void 0===t?void 0:t.baseUrl}})),Hs=(0,N.Z)((function(){return{dialog:{width:273,height:120,display:"flex",flexDirection:"column",justifyContent:"space-between",background:"rgba(242, 242, 242, 0.8)",backdropFilter:"blur(11px)",borderRadius:14},dialogMessage:{height:76,fontSize:17,lineHeight:"22px",fontWeight:600,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",margin:0,padding:"0 16px"},dialogActions:{height:44,width:"100%",display:"flex",borderTop:"1px solid #b2b2b5","& div":{width:"50%",display:"flex",alignItems:"center",justifyContent:"center","& p":{fontSize:17,lineHeight:"22px",fontWeight:600,color:"#007AFF"}}},dialogActionAllow:{borderLeft:"1px solid #b2b2b5",position:"relative","& span":{width:"calc(100% - 5px)",height:"calc(100% - 5px)",position:"absolute",border:"2px solid #0FBB0C",borderRadius:4}}}}),{name:"iOSMediaPermissionsDialog"})(Ws),Vs=(0,w.A1)((function(e){var t,n,i=e.merchantBaseUrl,o=e.mediaType,a=e.classes,l=(0,r.bp)(),c=null!==(t=null===(n=window.matchMedia("(prefers-color-scheme: dark)"))||void 0===n?void 0:n.matches)&&void 0!==t&&t,s=function(){var e;return null!==(e=new URL(i).hostname)&&void 0!==e?e:l.getText("DEFAULT_MERCHANT_URL")};return E.createElement("div",{className:a.dialog},E.createElement("div",{className:a.dialogMessages},function(){var e=c?"#8AB4F8":"#1E88E5";switch(o){case"both":case"cam":return E.createElement("div",{className:a.dialogMessage},E.createElement(Q.hn,{outlined:!0,color:e,className:a.dialogMessageIcon}),E.createElement(Q.xv,{className:a.dialogMessageText},l.getText("cam"===o?"PERMISSIONS_PREBOARDING_ANDROID_DIALOG_CAM":"PERMISSIONS_PREBOARDING_ANDROID_DIALOG_BOTH",s())));case"mic":return E.createElement("div",{className:a.dialogMessage},E.createElement(Q.Hs,{outlined:!0,color:e,className:a.dialogMessageIcon}),E.createElement(Q.xv,{className:a.dialogMessageText},l.getText("PERMISSIONS_PREBOARDING_ANDROID_DIALOG_AUDIO",s())));default:return null}}()),E.createElement("div",{className:a.dialogActions},E.createElement("div",{className:a.dialogActionAllow},E.createElement("span",null),E.createElement("p",null,l.getText("PERMISSIONS_PREBOARDING_CHROME_DIALOG_ALLOW"))),E.createElement("div",null,E.createElement("p",null,l.getText("PERMISSIONS_PREBOARDING_CHROME_DIALOG_BLOCK")))))}),["CallSessionStore"],(function(e){var t,n=e.CallSessionStore.getMerchantIntegration();return{merchantBaseUrl:null==n||null===(t=n.merchant)||void 0===t?void 0:t.baseUrl}})),zs=(0,N.Z)((function(){return{dialog:{width:240,height:120,display:"flex",flexDirection:"column",justifyContent:"space-between",background:"#F5F5F5",borderRadius:28,"@media (prefers-color-scheme: dark)":{backgroundColor:"#424242"}},dialogMessages:{margin:"16px 16px 0 16px"},dialogMessage:{fontSize:10,lineHeight:"15px",fontWeight:400,display:"flex",alignItems:"center",justifyContent:"center","& p":{"@media (prefers-color-scheme: dark)":{color:"#FFFFFF"}}},dialogMessageIcon:{width:30,marginRight:8},dialogActions:{height:48,width:"100%",display:"flex",flexDirection:"row-reverse",paddingRight:19,"& div":{width:52,height:32,display:"flex",alignItems:"center",justifyContent:"center","& p":{fontSize:14,lineHeight:"20px",fontWeight:500,color:"#1E88E5"}}},dialogActionAllow:{position:"relative","& span":{width:52,height:32,position:"absolute",border:"2px solid #0FBB0C",borderRadius:4}}}}),{name:"AndroidMediaPermissionsDialog"})(Vs),Zs=n.p+"static/assets/images/safari-icon.59a89613aeb41e2b0d30a46fb94f5e7b.png",Ys=(0,w.A1)((function(e){var t=e.merchantBaseUrl,n=e.mediaType,i=e.classes,o=(0,r.bp)(),a=function(){var e;return null!==(e=new URL(t).hostname)&&void 0!==e?e:o.getText("DEFAULT_MERCHANT_URL")};return E.createElement("div",{className:i.dialog},E.createElement("img",{src:Zs,width:"30px",height:"30px"}),E.createElement(Q.xv,{className:i.dialogTitle},"both"===n?o.getText("PERMISSIONS_PREBOARDING_SAFARI_DIALOG_TITLE_BOTH",a()):o.getText("PERMISSIONS_PREBOARDING_SAFARI_DIALOG_TITLE_MIC",a())),E.createElement(Q.xv,{className:i.dialogText},o.getText("PERMISSIONS_PREBOARDING_SAFARI_DIALOG_TEXT")),E.createElement("div",{className:i.actions},E.createElement("div",{className:i.action},E.createElement("span",null),o.getText("PERMISSIONS_PREBOARDING_SAFARI_DIALOG_ALLOW")),E.createElement("div",{className:i.action},o.getText("PERMISSIONS_PREBOARDING_SAFARI_DIALOG_NEVER")),E.createElement("div",{className:i.action},o.getText("PERMISSIONS_PREBOARDING_SAFARI_DIALOG_DENY"))))}),["CallSessionStore"],(function(e){var t,n=e.CallSessionStore.getMerchantIntegration();return{merchantBaseUrl:null==n||null===(t=n.merchant)||void 0===t?void 0:t.baseUrl}})),Ks=(0,N.Z)((function(){return{dialog:{width:199,height:207,display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",borderRadius:10,padding:"10px 12px 12px 12px","@media (prefers-color-scheme: light)":{backgroundColor:"#F5F5F5"},"@media (prefers-color-scheme: dark)":{backgroundColor:"#464646",color:"#FFFFFF"}},dialogTitle:{fontSize:11,lineHeight:"14px",fontWeight:700,textAlign:"center","@media (prefers-color-scheme: dark)":{color:"#FFFFFF"}},dialogText:{fontSize:10,lineHeight:"12px",fontWeight:500,textAlign:"center","@media (prefers-color-scheme: dark)":{color:"#FFFFFF"}},actions:{width:"100%"},action:{width:"100%",height:21,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#C5C5C6",color:"#373737",border:"0.5px solid rgba(0, 0, 0, 0.12)",borderRadius:6,boxShadow:"0px 0.5px 1px rgba(0, 0, 0, 0.1), inset 0px 0.5px 0.5px rgba(255, 255, 255, 0.5)","@media (prefers-color-scheme: dark)":{backgroundColor:"#6E6D70",color:"#FFFFFF",border:"0.5px solid rgba(0, 0, 0, 0.12)"},"&:first-of-type":{position:"relative",marginBottom:4,"& span":{width:"calc(100% + 5px)",height:27,position:"absolute",border:"2px solid #0FBB0C",borderRadius:4}},"&:nth-of-type(2)":{marginBottom:12}},icon:{width:30,height:30,backgroundImage:"url(".concat(Zs,")")}}}),{name:"SafariDesktopMediaPermissionType"})(Ys),qs=(0,w.A1)((function(e){var t=e.mediaType,n=e.audioPermission,i=e.classes,o=(0,r.bp)();return E.createElement("div",{className:i.wrapper,onClick:function(){o.executeAction(Z,{target:"browser_dialog"})}},E.createElement(Q.xv,{className:i.great},"both"===t?o.getText("PERMISSIONS_PREBOARDING_DIALOG_GREAT_BOTH"):o.getText("PERMISSIONS_PREBOARDING_DIALOG_GREAT_AUDIO")),function(){var e="audio"===t?"mic":"both"===t&&n?"cam":"both",r=(0,q.isChrome)()&&!(0,q.isMobileDevice)(),o=(0,q.isSafari)()&&!(0,q.isMobileDevice)();switch(!0){case r:return E.createElement(Fs,{mediaType:t});case(0,q.isIOS)():return E.createElement(Hs,{mediaType:e});case(0,q.isAndroid)():return E.createElement(zs,{mediaType:e});case o:return E.createElement(Ks,{mediaType:t});default:return E.createElement(To,{text:"PERMISSIONS_PREBOARDING_DIALOG_DEFAULT",className:i.text})}}())}),["MediaStreamStore"],(function(e){return{audioPermission:e.MediaStreamStore.hasAudioPermission}})),Qs=(0,N.Z)((function(){return{wrapper:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"0 16px",overflowY:"auto"},great:{textAlign:"center",fontWeight:400,marginBottom:12},text:{textAlign:"center",fontWeight:400,fontSize:14,marginBottom:12}}}),{name:"BrowserMediaPermissionsDialogs"})(qs),Xs=(0,w.A1)((function(e){var t=e.mediaType,n=e.queueId,i=e.audioPermission,o=e.cameraPermission,a=e.classes,l=(0,r.bp)(),c=(0,vo.Wz)(),s=c.clientId,u=c.sessionId,d=c.userId,p=c.mock,m=c.group,f=mo().setHeaderValues,h=l.getService("trackingService"),g=(0,E.useState)(!1),v=ee()(g,2),S=v[0],T=v[1],b=(0,E.useState)(!1),_=ee()(b,2),y=_[0],C=_[1],x="both"===t?!i||!("both"===t&&o):!i;(0,E.useEffect)((function(){return f({showHeader:!0,showRightSideButton:!0,showBackButton:!S,headerText:y?l.getText("CLIENT_CHECK_AUDIO_VIDEO"):l.getText("PERMISSIONS_PREBOARDING_HEADER"),goBackCallback:function(){y?C(!1):2===m?l.executeAction(Rn,"start"):l.executeAction(Rn,"select-option")}}),function(){return f(uo)}}),[S,y]);return y?E.createElement("div",{className:a.wrapper},E.createElement(xl,null)):E.createElement("div",{className:a.wrapper},E.createElement(Bs,{mediaType:t,isSmallCard:!0,clickable:!1}),!x&&E.createElement("div",{className:a.mediaPreview},E.createElement(zl,{videoAlignment:"cover",showSettings:!0,withLoader:!0,enableInStart:t,hideIcons:!0,loadingText:"both"===t?l.getText("MEDIA_PREVIEW_BOTH"):l.getText("MEDIA_PREVIEW_MIC")})),x&&E.createElement(Qs,{mediaType:t}),E.createElement("div",{className:a.actions},E.createElement(Q.zx,{type:"popupPrimary",onClick:x?function(){l.executeAction(Z,{target:"allow_permissions_button",data:{mediaType:t}}),l.executeAction(yn,{video:"both"===t,audio:!0,preview:!0,callback:function(e,t){t&&l.executeAction(Rn,{screen:"media-guide",props:{backToPreboarding:!0}})}})}:function(){if(!p){l.executeAction(Z,{target:"enter_queue_button"}),T(!0);var e={queue:n,clientData:{clientId:s,sessionId:u,userId:d,clientInfo:{browser:ec()}},onError:function(){return T(!1)}};l.executeAction(rl,e)}},loading:S},x?l.getText("PERMISSIONS_PREBOARDING_ALLOW"):l.getText("PERMISSIONS_PREBOARDING_ENTER_QUEUE")),!x&&E.createElement(Q.L9,{className:a.setting,onClick:function(){l.executeAction(W),C(!0)}},E.createElement(Q.ew,null)),x&&E.createElement(Q.xv,{elemnt:"a",className:a.link,onClick:function(){h.track("pre_call","show_why_dialog"),l.executeAction(Se.FI,{dialogId:Gn.N1,withCloseIcon:!0,title:l.getText("PERMISSIONS_PREBOARDING_WHY_TITLE"),messageHtml:l.getText("PERMISSIONS_PREBOARDING_WHY_TEXT"),buttonTitle:l.getText("PERMISSIONS_PREBOARDING_WHY_BUTTON")})}},l.getText("PERMISSIONS_PREBOARDING_WHY"))))}),["QueueStore","MediaStreamStore"],(function(e){return{queueId:e.QueueStore.getSelectedQueue(),cameraPermission:e.MediaStreamStore.hasCameraPermission,audioPermission:e.MediaStreamStore.hasAudioPermission}})),Js=(0,N.Z)((function(){return{wrapper:{backgroundColor:"white",height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",position:"relative",padding:24},actions:{width:"100%",height:88,display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center"},link:{textDecoration:"underline",fontWeight:600,fontSize:12,lineHeight:"28px",color:"#171717",cursor:"pointer"},mediaPreview:{width:"100%"},setting:{height:40,width:40,display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #E0E0E0",borderRadius:"50%",marginBottom:"-10px"}}}),{name:"PermissionsPreboardingScreen"})(Xs),$s=(0,N.Z)((function(e){var t,n;return{input:{fontSize:"12px",fontWeight:400,lineHeight:"16px"},textarea:{marginBottom:"16px","&:last-child":{marginBottom:"0px"},resize:"none",width:"100%",padding:"16px",border:"1px solid #999999",borderRadius:(null==e||null===(t=e.shape)||void 0===t||null===(n=t.input)||void 0===n?void 0:n.borderRadius)||0,font:"inherit",fontSize:"12px",fontWeight:400,lineHeight:"16px",color:"#171717","&::placeholder":{color:e.palette.gray[40]},"&:focus":{background:"#F7F7F7"},"&:hover":{border:"1px solid #121212"}}}}))((function(e){var t=e.inputs,n=void 0===t?[]:t,r=e.onUpdate,i=e.classes,o=function(e){"function"==typeof r&&r(e)},a=n.map((function(e){var t=void 0!==e.value?e.value:e.defaultValue||"";switch(e.type){case"text":case"email":case"tel":return E.createElement(Q.II,{key:e.key,name:e.key,className:i.input,type:e.type,placeholder:"".concat(e.name).concat(e.required?" *":""),ariaLabel:e.name,onChange:o,useLocalValue:!1,value:t});case"textarea":return E.createElement("textarea",{key:e.key,name:e.key,className:i.textarea,"aria-label":e.name,placeholder:"".concat(e.name).concat(e.required?" *":""),value:t,onChange:o})}}));return E.createElement("div",null,a)})),eu=(0,vo.Wz)(),tu=eu.clientId,nu=eu.sessionId,ru=eu.userId,iu=eu.mock,ou=(0,N.Z)({wrapper:{height:"100%",width:"100%",backgroundColor:"white",position:"relative",display:"flex",flexDirection:"column"},formWrapper:{overflowY:"auto",flex:"1",padding:16},mobileFormWrapper:{display:"flex",flexDirection:"column",justifyContent:"center"},title:{fontSize:"18px",fontWeight:600,lineHeight:"20px",letterSpacing:"-0.01em",color:"#171717",marginBottom:"8px"},paragraph:{margin:"0 0 16px 0",fontWeight:400,fontSize:12,lineHeight:"16px",color:"#171717"},footer:{flexShrink:0,padding:16,borderTop:"1px solid #EFEFEF","& > :first-child":{marginBottom:12},"& > :last-child":{marginBottom:0}}})((0,w.S1)((function(e){var t=e.clientData,n=e.queueId,i=e.classes,o=(0,r.bp)(),a=o.getText,l=o.executeAction,c=o.externalInterfaceService,s=o.settings,u=o.getStore,d=(0,E.useState)(s.get("shopperInformationForm.formInputs",[])),p=ee()(d,2),m=p[0],f=p[1],h=m.some((function(e){return!(null==e||!e.required)})),g=m.filter((function(e){return!(null==e||!e.type)})).map((function(e){return e.defaultValue=u("ClientStore").getStringValueFor(e.key),e})),v=mo().setHeaderValues,S=(0,E.useState)(!1),T=ee()(S,2),b=T[0],_=T[1];(0,E.useEffect)((function(){return c.emit(Pt),v({showHeader:!0,showRightSideButton:!0,showBackButton:!0,headerText:a("CLIENT_DROP_IN"),goBackCallback:function(){return l(Rn,{screen:"start"})}}),function(){return v(uo)}}),[]),(0,E.useEffect)((function(){m.some((function(e){return void 0!==e.value||void 0!==e}))||Object.keys(t||{}).length<1||f(g)}),[t,g,m]),(0,E.useEffect)((function(){v({showHeader:!0,showRightSideButton:!0,showBackButton:!b,headerText:a("CLIENT_DROP_IN")})}),[b]);var y=function(){if(!iu&&!b){_(!0);var e={queue:n,clientData:{clientId:tu,sessionId:nu,userId:ru,clientInfo:{browser:ec()}},onError:function(){return _(!1)}};l(rl,e)}},C=I()(i.formWrapper,(0,q.isMobileDevice)()&&i.mobileFormWrapper);return E.createElement("div",{className:i.wrapper},E.createElement("div",{className:C},E.createElement(Q.Dx,{type:"h4",className:i.title},a("SHOPPER_INPUT_FORM_TITLE")),E.createElement(Q.xv,{className:i.paragraph},a("SHOPPER_INPUT_FORM_INSTRUCTIONS")),E.createElement($s,{onUpdate:function(e){var t=m.slice();t.find((function(t){t.key===e.target.name&&(t.value=e.target.value)})),f(t)},inputs:g})),E.createElement("div",{className:i.footer},E.createElement(Q.zx,{type:"popupPrimary",disabled:!m.some((function(e){var t;return(null===(t=e.value)||void 0===t?void 0:t.length)>0||void 0===e.value&&!!e.defaultValue}))||b,onClick:function(){y()}},a("SHOPPER_INPUT_FORM_SAVE_BUTTON_LABEL")),!h&&E.createElement(Q.zx,{type:"popupSecondary",disabled:b,onClick:function(){return y}},a("SHOPPER_INPUT_FORM_SKIP_BUTTON_LABEL"))))}),["ClientStore.metadata:updated","QueueStore"],(function(e){return{clientData:e.ClientStore.getData(),queueId:e.QueueStore.getSelectedQueue()}})));var au=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(){var e;o()(this,i);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return e=r.call.apply(r,[this].concat(n)),v()(s()(e),"_onMinimizedPlayerDragStart",(function(t){if("mousedown"===t.type||"touchstart"===t.type&&(1===t.touches.length||!e.__currentMinimizedDragPos)){var n="touchstart"===t.type?t.touches[0].screenX:t.screenX,r="touchstart"===t.type?t.touches[0].screenY:t.screenY;e.__currentMinimizedDragPos={x:n,y:r}}})),v()(s()(e),"_onMinimizedPlayerDragMove",(function(t){if(e.__currentMinimizedDragPos){t.preventDefault();var n="touchmove"===t.type?t.touches[0].screenX:t.screenX,r="touchmove"===t.type?t.touches[0].screenY:t.screenY,i=n-e.__currentMinimizedDragPos.x,o=r-e.__currentMinimizedDragPos.y;e.__currentMinimizedDragPos.x=n,e.__currentMinimizedDragPos.y=r,e.context.externalInterfaceService.emit(Bt,{dx:i,dy:o})}})),v()(s()(e),"_onMinimizedPlayerDragEnd",(function(t){("mouseup"===t.type||"touchend"===t.type&&0===t.touches.length)&&(delete e.__currentMinimizedDragPos,document.removeEventListener("touchstart",e._onMinimizedPlayerDragStart),document.removeEventListener("touchmove",e._onMinimizedPlayerDragMove),document.removeEventListener("touchend",e._onMinimizedPlayerDragEnd),document.addEventListener("touchstart",e._onMinimizedPlayerDragStart),document.addEventListener("touchmove",e._onMinimizedPlayerDragMove,{passive:!1}),document.addEventListener("touchend",e._onMinimizedPlayerDragEnd))})),e}return l()(i,[{key:"componentDidMount",value:function(){this.destroyTabbingListener=(0,hs.t)(),gs()}},{key:"componentWillUnmount",value:function(){this.destroyTabbingListener()}},{key:"componentWillReceiveProps",value:function(e){e.viewport.mode!==this.props.viewport.mode&&(e.viewport.mode===S.DI.FLOATING?(document.addEventListener("mousedown",this._onMinimizedPlayerDragStart),document.addEventListener("mousemove",this._onMinimizedPlayerDragMove),document.addEventListener("mouseup",this._onMinimizedPlayerDragEnd),document.addEventListener("touchstart",this._onMinimizedPlayerDragStart),document.addEventListener("touchmove",this._onMinimizedPlayerDragMove,{passive:!1}),document.addEventListener("touchend",this._onMinimizedPlayerDragEnd)):this.props.viewport.mode===S.DI.FLOATING&&e.viewport.mode!==S.DI.FLOATING&&(document.removeEventListener("mousedown",this._onMinimizedPlayerDragStart),document.removeEventListener("mousemove",this._onMinimizedPlayerDragMove),document.removeEventListener("mouseup",this._onMinimizedPlayerDragEnd),document.removeEventListener("touchstart",this._onMinimizedPlayerDragStart),document.removeEventListener("touchmove",this._onMinimizedPlayerDragMove),document.removeEventListener("touchend",this._onMinimizedPlayerDragEnd)),this.context.externalInterfaceService.emit(Lt,e.viewport.mode))}},{key:"render",value:function(){var e=Ac,t=this.props.screen,n=this.context.settings.get("client.queueScreenV2.enabled",!0);switch(t){case"main":e=Ja;break;case"start":e=n?Ps:dc;break;case"shopper-information-form":e=ou;break;case"select-option":e=Us;break;case"permissions-preboarding":e=Js;break;case"queue":e=n?Xl:Gl;break;case"unsupported-browser":e=Dc;break;case"invalid-client":e=Gc;break;case"enter-from-connect-link":e=$c;break;case"thank-you":e=fs;break;case"text-feedback":e=bs;break;case"media-guide":e=Lo;break;case"initiation":e=Oc}var r="client-window current-screen-".concat(t);if(r+=" call-status-".concat(this.props.callStatus.replace("CALL_SESSION_STATUS_","").toLocaleLowerCase()),this.context.externalInterfaceService.enabled&&(r+=" external-interface"),this.props.viewport.mode===S.DI.MINIMAL&&(r+=" minimal"),this.props.viewport.mode===S.DI.FLOATING&&(r+=" floating-minimized"),this.props.viewport.additionalCssClasses.length>0&&(r+=" ".concat(this.props.viewport.additionalCssClasses.join(" "))),this.props.viewport.mobile&&(r+=" client-mobile"),this.props.mediaTransport&&(r+=" media-transport-".concat(this.props.mediaTransport)),"initiation"===t)return E.createElement(es.Z,null,E.createElement("div",{className:r},E.createElement(e,this.props.screenProps)));var i="main"===t&&this.props.callStatus!==S.kp.STARTING;return E.createElement(es.Z,{allowCustomerTheme:!i},E.createElement(go,null,E.createElement("div",{className:r},E.createElement(Ts,null,E.createElement(e,this.props.screenProps),E.createElement(wc,null)))))}}]),i}(x),lu=au=(0,w.ZP)(au,["ApplicationStore","CallSessionStore","ViewportStore"],(function(e){return{callStatus:e.CallSessionStore.getStatus(),screen:e.ApplicationStore.getCurrentScreenName(),screenProps:e.ApplicationStore.getCurrentScreenProps(),viewport:{additionalCssClasses:e.ViewportStore.additionalCssClasses,mode:e.ViewportStore.getClientViewportMode(),mobile:(0,q.isMobileDevice)()},mediaTransport:e.CallSessionStore.getMediaTransport()}})),cu=n(81772);var su=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this,e)).queues=[],t.selectedQueue=null,t.place=null,t.estimatedWaitingTime=null,t.nextEstimatedWaitingTime=null,t.numberOfAvailableAgents=null,t.hasRegisteredAgents=!1,t.newSessionDetected=!1,t.ticketId=null,t.startWaitingTime=null,t}return l()(i,[{key:"handleReceived",value:function(e){this.queues=e.queues,this.emitChange()}},{key:"handleSelected",value:function(e){this.selectedQueue=e,this.emitChange()}},{key:"handlePlace",value:function(e){var t=e.countAgents>0||e.countStatusListeners>0;this.place===e.place&&this.hasRegisteredAgents===t&&this.numberOfAvailableAgents===e.countAgents||(this.numberOfAvailableAgents=e.countAgents,this.place=e.place,this.hasRegisteredAgents=t,this.emitChange())}},{key:"handleTicketId",value:function(e){this.ticketId=e.ticketId,this.emitChange()}},{key:"handleEstimatedWaitingTime",value:function(e){this.estimatedWaitingTime=e.estimatedWaitingTime,this.nextEstimatedWaitingTime=e.nextEstimatedWaitingTime,this.emitChange()}},{key:"handleClosed",value:function(){this.hasRegisteredAgents=!1,this.place=0,this.emitChange()}},{key:"handleNewSessionDetected",value:function(){this.newSessionDetected=!0,this.emitChange()}},{key:"getQueues",value:function(){return this.queues}},{key:"getQueue",value:function(e){return this.queues.find((function(t){return t.id===e}))}},{key:"getDefaultQueue",value:function(){var e=this.queues.filter((function(e){return!0===e.default}));return e.length>0?e[0]:this.queues.length>0?this.queues[0]:void 0}},{key:"isWaitingInLine",value:function(){return null!==this.place}},{key:"getEstimatedWaitingTime",value:function(){return this.estimatedWaitingTime}},{key:"getNextEstimatedWaitingTime",value:function(){return this.nextEstimatedWaitingTime}},{key:"getTicketId",value:function(){return this.ticketId}},{key:"getCurrentPlace",value:function(){return this.place}},{key:"getNumberOfAvailableAgents",value:function(){return this.numberOfAvailableAgents}},{key:"getHasRegisteredAgents",value:function(){return this.hasRegisteredAgents}},{key:"getNewSessionDetected",value:function(){return this.newSessionDetected}},{key:"getSelectedQueue",value:function(){return this.selectedQueue}}]),i}(cu.Z);su.storeName="QueueStore",su.handlers=sn().invert({handleReceived:S.gd.RECEIVED,handleSelected:S.gd.SELECT,handlePlace:S.gd.PLACE,handleTicketId:S.gd.TICKET_ID,handleEstimatedWaitingTime:S.gd.ESTIMATED_WAITING_TIME,handleClosed:S.gd.CLOSED,handleNewSessionDetected:S.gd.NEW_SESSION_DETECTED});var uu=su,du=n(16525),pu=n.n(du),mu=n(86809),fu=n.n(mu),hu=n(17187);var gu=[S.zC.REQUEST_ACCEPTED,S.zC.REQUEST_TAKE_OVER,S.zC.TRANSFER_ABORT];gu=gu.concat([ft,Wt]);var vu=function(e){d()(c,e);var t,n,r,i,a=(r=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h()(r);if(i){var n=h()(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return m()(this,e)});function c(e,t,n){var r;return o()(this,c),(r=a.call(this)).options=e,r.context=t,r.settings=n,r.connected=!1,r.currentRoomId=null,r.disconnectedOnSocketTimeout=null,r.whiteListedParticipants=new Map,r}return l()(c,[{key:"whiteListParticipant",value:function(e){e&&this.whiteListedParticipants.set(e,{muted:!1})}},{key:"muteParticipant",value:function(e){e&&this.whiteListedParticipants.has(e)&&(this.whiteListedParticipants.get(e).muted=!0)}},{key:"unMuteParticipant",value:function(e){e&&this.whiteListedParticipants.has(e)&&(this.whiteListedParticipants.get(e).muted=!1)}},{key:"acceptMessage",value:function(e){if(!e)return!0;var t=e.senderSessionId,n=e.type;return!t||!!gu.some((function(e){return e===n}))||!!this.whiteListedParticipants.has(t)&&!this.whiteListedParticipants.get(t).muted}},{key:"sendHangupMessage",value:function(e){var t=this.settings.get("messageServer.url"),n=this.settings.get("messageServer.leavePath")||"/message-server/leave",r=this.context.getStore("ClientStore").getSessionId(),i=this.currentRoomId;this.currentRoomId=null,navigator.sendBeacon&&t?navigator.sendBeacon("".concat(t).concat(n),JSON.stringify({roomId:i,sessionId:r,type:pt,data:e})):console.error("Could not hangup properly")}},{key:"ensureConnection",value:(n=xe()(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.connected){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.connect(this.settings.get("messageServer"));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"connect",value:function(e){var t=this;this.connected=!1,this.currentRoomId=null,e.transports=["websocket"],e.reconnectionDelay=1e3,e.reconnectionDelayMax=1e3,this.socket=fu()(e.url,sn().omit(e,"url"));var n=!1;return new Promise((function(r,i){var o=setTimeout((function(){t.close(),i()}),1e4);t.socket.on("connect",(function(){clearTimeout(o),t.connected=!0,n?(t.disconnectedOnSocketTimeout&&(window.clearTimeout(t.disconnectedOnSocketTimeout),t.disconnectedOnSocketTimeout=null),t.emit("reconnected")):(window.addEventListener("unload",(function(){return t.sendHangupMessage({reason:Ot})})),t.socket.on(lt,(function(e){t.settings.get("debug.messageDelivery",!1)&&console.log("RECEIVED MESSAGE (websocket)",e),t.acceptMessage(e)&&(t.emit(lt,e),t.emit(e.type,e.data,e.senderSessionId))})),t.socket.on("disconnect",(function(n){t.connected=!1,"io client disconnect"!==n&&(t.disconnectedOnSocketTimeout||(t.disconnectedOnSocketTimeout=window.setTimeout((function(){t.disconnectedOnSocketTimeout=null,t.emit("disconnect",n)}),e.disconnectWaitTime||5e3)))})),r()),n=!0})),t.socket.on("error",(function(){return i()}))}))}},{key:"join",value:(t=xe()(ye().mark((function e(t){var n,r=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureConnection();case 2:return n=new Promise((function(e,n){r.socket.emit("join_room",{roomId:t},(function(i){i.success?(r.currentRoomId=t,e(i)):n()}))})),e.next=5,n;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"sendToRoom",value:function(e,t){var n={type:e,data:t,senderSessionId:this.context.getStore("ClientStore").getSessionId()},r=this.settings.get("debug.messageDelivery",!1);this.socket&&this.socket.connected?(r&&console.log("SEND MESSAGE (websocket)",n),this.socket.emit(lt,n)):r&&console.log("NO WHERE TO SEND MESSAGE :/",n)}},{key:"leaveRoom",value:function(){var e=this;return this.currentRoomId=null,new Promise((function(t){e.socket&&e.socket.connected?(e.leaveRoomResolver=t,e.socket.emit("leave_room",null,(function(){delete e.leaveRoomResolver,t()}))):t()}))}},{key:"close",value:function(){var e=this;return new Promise((function(t){e.whiteListedParticipants=new Map,e.currentRoomId=null,e.connected=!1,e.socket&&(e.leaveRoomResolver&&(e.leaveRoomResolver(),delete e.leaveRoomResolver),e.socket.disconnect()),e.disconnectedOnSocketTimeout&&(window.clearTimeout(e.disconnectedOnSocketTimeout),e.disconnectedOnSocketTimeout=null),t()}))}}]),c}(hu.EventEmitter);vu.serviceName="messageService",vu.inject=["settings"],vu.actionExports=["join"];var Eu=vu,Su=function(){function e(t,n,r,i,a,l){var c=this;o()(this,e),v()(this,"_callStatusChange",(function(e){[S.kp.STARTING,S.kp.DISCONNECTED,S.kp.FORWARDING].includes(e)&&c._onPrepareNewCallSession(),e!==S.kp.RUNNING||c._removeBufferItemsInterval||(c._removeBufferItemsInterval=window.setInterval(c._confirmLastReceivedMessage,c.removeBufferItemsIntervalTime))})),v()(this,"_onResendMessages",(function(e){console.log("Remote need resend of message sequence ".concat(e.id," -> ").concat(c.nextSendId-1)),c.logToSentry(new Error("Remote need resend of message sequence"),{fromMessageId:e.id}),c._sendMessages(e.id)})),v()(this,"_confirmLastReceivedMessage",(function(){c.lastHandledReceivedId<=0||c.messageService.sendToRoom(ut,{id:c.lastHandledReceivedId})})),v()(this,"_onDispatchConfirm",(function(e){if([S.kp.RUNNING,S.kp.PAUSED].includes(c.callSessionStore.getStatus())){for(var t=e.id,n=0,r=0;r<c.sendBuffer.length;r++){var i=c.sendBuffer[r].id;if(!(i<=t&&i<=c.lastSentId))break;n=r+1}if(n>0){var o=c.sendBuffer.splice(0,n);c.lastDeletedSendBufferIds=o.map((function(e){return e.id})),c.lastRemoteConfirmedId=t,c.lastRemoteConfirmedIdNextSendId=c.nextSendId,c.lastRemoteConfirmedTime=Date.now()}c.sendBuffer.length>0&&c._sendMessages(c.sendBuffer[0].id)}})),this.context=n,this.messageService=r,this.callSessionStore=i,this.dispatchStore=a,this.settings=l,this.lastSentId=0,this.nextSendId=1,this.lastHandledReceivedId=0,this.sendBuffer=[],this.recvBuffer=[],this.removeBufferItemsIntervalTime=5e3,this.messageService.on(st,this._onResendMessages),this.messageService.on(ut,this._onDispatchConfirm),this.callSessionStore.on("change:status",this._callStatusChange)}return l()(e,[{key:"_onPrepareNewCallSession",value:function(){this.lastSentId=0,this.nextSendId=1,this.lastHandledReceivedId=0,this.sendBuffer=[],this.recvBuffer=[],delete this.lastDeletedSendBufferIds,delete this.lastRemoteConfirmedId,delete this.lastRemoteConfirmedIdNextSendId,delete this.lastRemoteConfirmedTime,this.newCallSessionPreparedTime=Date.now(),this._removeBufferItemsInterval&&(window.clearInterval(this._removeBufferItemsInterval),delete this._removeBufferItemsInterval),this._flushSendBufferOnRunningCallStatusFn&&(this.callSessionStore.removeListener("change:status",this._flushSendBufferOnRunningCallStatusFn),delete this._flushSendBufferOnRunningCallStatusFn),this._resendTimeout&&(window.clearTimeout(this._resendTimeout),delete this._resendTimeout)}},{key:"logToSentry",value:function(e,t){var n,r,i,o;(t=t||{}).callStatus=this.callSessionStore.getStatus(),t.sendBufferLen=this.sendBuffer.length,t.firstSendBufferMsg=null===(n=this.sendBuffer[0])||void 0===n?void 0:n.id,t.firstSendBufferTime=null===(r=this.sendBuffer[0])||void 0===r?void 0:r.timestamp,t.lastSendBufferMsg=null===(i=this.sendBuffer[this.sendBuffer.length-1])||void 0===i?void 0:i.id,t.lastSendBufferTime=null===(o=this.sendBuffer[this.sendBuffer.length-1])||void 0===o?void 0:o.timestamp,t.lastSentId=this.lastSentId,t.nextSendId=this.nextSendId,t.lastHandledReceivedId=this.lastHandledReceivedId,t.recvBufferLen=this.recvBuffer.length,t.lastDeletedSendBufferIds=this.lastDeletedSendBufferIds,t.lastRemoteConfirmedId=this.lastRemoteConfirmedId,t.lastRemoteConfirmedIdNextSendId=this.lastRemoteConfirmedIdNextSendId,t.lastRemoteConfirmedTime=this.lastRemoteConfirmedTime,t.newCallSessionPreparedTime=this.newCallSessionPreparedTime,Zt.$e((function(n){n.setTags({source:"DispatchService"}),t&&n.setExtras(t),Zt.Tb(e,{level:"warning"})}))}},{key:"dispatchLocalAndRemote",value:function(e,t,n){this.context.dispatch(e,sn().cloneDeep(t)),n||this.dispatchRemote(e,t)}},{key:"dispatchRemote",value:function(e,t){var n=this,r=(new Date).getTime(),i={name:e,payload:sn().cloneDeep(t),timestamp:r,id:this.nextSendId++};this.sendBuffer.push(i),this.callSessionStore.getStatus()===S.kp.RUNNING?this._sendMessages(this.lastSentId+1):this._flushSendBufferOnRunningCallStatusFn||this.callSessionStore.on("change:status",this._flushSendBufferOnRunningCallStatusFn=function(e){if(e===S.kp.RUNNING){n.callSessionStore.removeListener("change:status",n._flushSendBufferOnRunningCallStatusFn),delete n._flushSendBufferOnRunningCallStatusFn,n.sendBuffer.length>0&&n.settings.get("debug.messageDelivery",!1)&&console.log("SENDING BUFFERED MESSAGES",n.lastSentId+1,n.sendBuffer[n.sendBuffer.length-1]);var t=n.lastSentId+1;n.sendBuffer.length>0&&t<=n.sendBuffer[n.sendBuffer.length-1].id&&n._sendMessages(t)}})}},{key:"_sendMessages",value:function(e){for(var t=!1,n=this.sendBuffer.length-1;n>=0;n--)if(this.sendBuffer[n].id===e){for(var r=n;r<this.sendBuffer.length;r++){var i=this.sendBuffer[r];this.messageService.sendToRoom(ct,i),this.lastSentId=i.id}t=!0;break}return!t&&e&&this.logToSentry(new Error("No messages were sent even if requested"),{fromMessageId:e}),t}},{key:"handleRemoteDispatch",value:function(e){var t=this,n=this.lastHandledReceivedId+1;if(!(e.id<n))if(this.recvBuffer.length>0){var r=sn().sortedIndex(this.recvBuffer,e,"id");for(r!==this.recvBuffer.length&&this.recvBuffer[r].id===e.id||this.recvBuffer.splice(r,0,e);this.recvBuffer.length>0;){var i=this.recvBuffer[0];if(i.id!==n){window.clearTimeout(this._resendTimeout),this._resendTimeout=window.setTimeout((function(){t.messageService.sendToRoom(st,{id:t.lastHandledReceivedId+1})}),1e3);break}this.lastHandledReceivedId=i.id,n++,this.recvBuffer.splice(0,1),this.context.dispatch(i.name,i.payload)}0===this.recvBuffer.length&&this._resendTimeout&&(window.clearTimeout(this._resendTimeout),delete this._resendTimeout)}else if(e.id===n)this.lastHandledReceivedId=e.id,this.context.dispatch(e.name,e.payload);else if(e.id>n){console.log("Detected a hole in the received message sequence ".concat(n," -> ").concat(e.id,", requesting resend from ").concat(n)),this.logToSentry(new Error("Detected a hole in the received message sequence"),{nextExpectedId:n,receivedId:e.id});var o=sn().sortedIndex(this.recvBuffer,e,"id");this.recvBuffer.splice(o,0,e),this.messageService.sendToRoom(st,{id:n})}}}]),e}();Su.serviceName="dispatchService",Su.inject=["messageService","CallSessionStore","DispatchStore","settings"],Su.explicitActionExports=["dispatchLocalAndRemote","dispatchRemote"];var Tu=Su;var bu=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(e,t,n,a){var l;return o()(this,i),(l=r.call(this,e,t,a)).context=t,l.externalInterfaceService=n,l.externalInterfaceService.on("viddget:client_data",l._onPushClientEmbeddingPageData.bind(s()(l))),l}return l()(i,[{key:"connect",value:function(e){var t=this;return pu()(h()(i.prototype),"connect",this).call(this,e).then((function(){t.on("reconnected",(function(){t.currentRoomId&&function e(){t.socket&&t.socket.connected&&t.currentRoomId&&t.join(t.currentRoomId).catch((function(){setTimeout((function(){e()}),2500)}))}()})),t.on(ct,(function(e){t.dispatchService||(t.dispatchService=t.context.getService(Tu)),t.dispatchService.handleRemoteDispatch(e)})),t.on("request_client_embedding_page_data",(function(){t.externalInterfaceService.emit(Pt)}))}))}},{key:"_onPushClientEmbeddingPageData",value:function(e){var t,n;null!==(t=e)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.clientData&&this.context.executeAction(dr,e.data.clientData),e=_.merge(e||{},{data:{settings:{uiRefresh:!0}}}),this.sendToRoom("client_embedding_page_data",e)}}]),i}(Eu);bu.serviceName="messageService",bu.inject=["externalInterfaceService","settings"],bu.actionExports=["connect","join","sendToRoom"];var _u=bu;n(4723);var yu=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(e,t){var n;return o()(this,i),(n=r.call(this)).options=e,n.viddget=t,n.connected=!1,n}return l()(i,[{key:"connect",value:function(e){var t=this,n=e.url;if(e.path){var r=n.match(/^(http[s]?:\/\/)([^\/\s]+)(.*)$/);r&&(n=r[1]+r[2])}e.transports=["websocket"],this.socket=fu()(n,sn().omit(e,"url"));var i=!1;return new Promise((function(e,n){t.socket.on("connect",(function(){t.connected=!0,i?t.emit("reconnected"):(t.socket.on("disconnect",(function(e){t.emit("disconnect",e),t.connected=!1})),e()),i=!0})),t.socket.on("error",(function(){return n()}))}))}},{key:"close",value:function(){var e=this;return new Promise((function(t){e.connected=!1,e.socket&&e.socket.disconnect(),t()}))}}]),i}(hu.EventEmitter),Cu=n(79052);function xu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ou(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xu(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Iu(e){var t=Yc.ZP.firestore(),n={queues:[]},r=(0,Cu.U)();return t.collection("organizations").doc(r).collection("settings").doc("calls").collection("queues").get().then((function(t){t.forEach((function(e){n.queues.push(Ou(Ou({},e.data()),{},{id:e.id}))})),e.dispatch(S.gd.RECEIVED,n)}))}function Au(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Au(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Au(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wu=(0,vo.Wz)(),Ru=function(e){d()(a,e);var t,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h()(n);if(r){var i=h()(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return m()(this,e)});function a(e,t,n,r,l,c){var u;return o()(this,a),u=i.call(this,e,t),v()(s()(u),"createVisitorTicket",function(){var e=xe()(ye().mark((function e(t){var n,r,i,o,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.queueId,r="".concat(Jl.Z.clientAPIBaseUrl,"/o/").concat(wu.orgId,"/visitor-tickets"),i={queueId:n},e.next=6,fetch(r,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});case 6:return o=e.sent,e.next=9,o.json();case 9:return a=e.sent,e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),v()(s()(u),"getEstimatedWaitingTime",function(){var e=xe()(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="".concat(Jl.Z.clientAPIBaseUrl,"/o/").concat(wu.orgId,"/visitor-tickets/").concat(t,"/estimated-waiting-time"),e.next=4,fetch(n,{mode:"cors",headers:{"Content-Type":"application/json"}});case 4:return r=e.sent,e.next=7,r.json();case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()),v()(s()(u),"updateEstimatedWaitingTime",function(){var e=xe()(ye().mark((function e(t){var n,r,i,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.getEstimatedWaitingTime(t);case 2:n=e.sent,r=n.estimatedWaitingTime,i=n.place,o=n.agents,u.viddget.executeAction(ll,{estimatedWaitingTime:r,place:i,countAgents:o});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),v()(s()(u),"leaveQueue",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];clearTimeout(u.setupTimeout),window.removeEventListener("unload",u.clearSetupTimeout),clearInterval(u.updateWaitingTimeInterval);var t="".concat(Jl.Z.clientAPIBaseUrl,"/o/").concat(wu.orgId,"/visitor-tickets/").concat(u.queueStore.ticketId,"/explicit-leave");navigator.sendBeacon(t),e||(u.ticket=null),u.messageService.removeListener(Wt,u.onWantToHelpListener),wu.ticketId&&(delete wu.ticketId,window.history.replaceState(null,"","?".concat((0,vo.C7)(wu))))})),v()(s()(u),"pauseTicket",(function(){u.leaveQueue(!0)})),v()(s()(u),"resumeTicket",(function(){u.enterQueueWithTicket(u.ticket.id,u.ticket.queueId)})),v()(s()(u),"createTicket",function(){var e=xe()(ye().mark((function e(t){var n,r,i,o,a,l,c,s;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.createVisitorTicket({queueId:t});case 3:return n=e.sent,r=n.ticketId,e.next=7,u.getEstimatedWaitingTime(r);case 7:return i=e.sent,o=i.estimatedWaitingTime,a=i.place,l=i.agents,u.viddget.executeAction(ll,{estimatedWaitingTime:o,place:a,countAgents:l}),c=new Date,u.viddget.executeAction(cl,{ticketId:r}),s={ticketId:r,queueId:t,createdAt:c,id:r},window.addEventListener("unload",u.leaveQueue),u.ticket=s,e.abrupt("return",s);case 20:throw e.prev=20,e.t0=e.catch(0),e.t0;case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t){return e.apply(this,arguments)}}()),v()(s()(u),"updateTicketStatus",function(){var e=xe()(ye().mark((function e(t){var n,r,i,o,a,l,c=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:null,r="".concat(Jl.Z.clientAPIBaseUrl,"/o/").concat(wu.orgId,"/visitor-tickets/").concat(n||u.queueStore.ticketId),i="PATCH",o={status:t},a=JSON.stringify(o),l=function(){var e=xe()(ye().mark((function e(t,n){var o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u._fetch(r,i,a);case 2:if(!1!==(o=e.sent).success){e.next=6;break}return e.abrupt("return",new Promise((function(e){setTimeout((function(){e(l(t,n))}),1e3)})));case 6:return e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),u.currentTicketStatusUpdatePromise=u.currentTicketStatusUpdatePromise.then((function(){return l(t,n)})),e.abrupt("return",u.currentTicketStatusUpdatePromise);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),v()(s()(u),"_fetch",function(){var e=xe()(ye().mark((function e(t,n,r){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{method:n,mode:"cors",headers:{"Content-Type":"application/json"},body:r});case 3:return e.abrupt("return",{success:!0});case 6:return e.prev=6,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",{success:!1});case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n,r){return e.apply(this,arguments)}}()),v()(s()(u),"_bestAgent",(function(){return u.agentsWhoOfferedHelp[Object.keys(u.agentsWhoOfferedHelp)[0]]})),v()(s()(u),"_onWantToHelp",(function(e){if(e){u.agentsWhoOfferedHelp[e.id]=e;var t="".concat(u.ticket.id,"_call_").concat((0,$a.Z)()),n=u._bestAgent(),r=(new Date-u.ticket.createdAt)/1e3,i=ec(),o=u.queueStore.getQueue(u.ticket.queueId),a=o?o.name:"unknown";u.viddget.executeAction(dr,{queueName:a,queueWaitingTime:r,browser:i}),u.updateTicketStatus(S.Us.CONNECTING,u.ticket.ticketId),u.isConnecting=!0,u.messageService.whiteListParticipant(e.id),u.messageService.sendToRoom("start_call_from_negotiation",{agentId:n.id,clientInfo:Nu(Nu({},u.ticket),{},{queueName:a,browser:i,queueWaitingTime:r,roomId:t,orgId:u.settingsService.get("merchant.id")})}),u.messageService.leaveRoom(),u.viddget.executeAction(Kt,{status:S.kp.STARTING}),u.viddget.executeAction(Rn,"main"),u.viddget.executeAction(Mn,{roomId:t}),u.messageService.removeListener(Wt,u.onWantToHelpListener);var l=u.callSessionStore.getStatus();u.connectionTimeout&&clearInterval(u.connectionTimeout),u.connectionTimeout=setTimeout((function e(){if(clearInterval(u.connectionTimeout),l!==u.callSessionStore.getStatus())return u.connectionTimeout=setTimeout(e,8e3),void(l=u.callSessionStore.getStatus());!0===u.isConnecting&&(u.isConnecting=!1,u.messageService.close(),u.viddget.executeAction(Se.FI,{dialogId:"could-not-connect-queue-call",title:u.viddget.getText("CALL_SESSION_CLIENT_CONNECTION_FAILED_TITLE"),message:u.viddget.getText("CALL_SESSION_CONNECTION_PROBLEM_RESTORE_ATTEMPT_1"),canBeClosed:!1}),setTimeout((function(){u.viddget.executeAction(Se.Xd,{dialogId:"could-not-connect-queue-call"}),u.viddget.executeAction(Pn)}),3e3))}),25e3)}})),v()(s()(u),"onWantToHelpListener",(function(e){var t=e.agent;clearInterval(u.updateWaitingTimeInterval),u._onWantToHelp(t)})),v()(s()(u),"_enterQueue",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;u.agentsWhoOfferedHelp={},u.updateWaitingTimeInterval&&clearInterval(u.updateWaitingTimeInterval),u.messageService.removeListener(Wt,u.onWantToHelpListener),u.updateWaitingTimeInterval=setInterval((function(){u.updateEstimatedWaitingTime(e.id)}),15e3),u.messageService.on(Wt,u.onWantToHelpListener),u.messageService.join(e.id).catch((function(){t<5?setTimeout((function(){u._enterQueue(e,t+1)}),1e3):(u.messageService.removeListener(Wt,u.onWantToHelpListener),u.messageService.close(),u.viddget.executeAction(Kt,{status:S.kp.DISCONNECTED}),u.updateWaitingTimeInterval&&clearInterval(u.updateWaitingTimeInterval),u.updateTicketStatus(S.Us.CANCELLED_BY_CLIENT,e.id),u.viddget.executeAction(Se.FI,{dialogId:"could-not-connect-queue-call",title:u.viddget.getText("CALL_SESSION_CLIENT_CONNECTION_FAILED_TITLE"),message:u.viddget.getText("CALL_SESSION_CONNECTION_PROBLEM_RESTORE_ATTEMPT_1"),canBeClosed:!1}),setTimeout((function(){u.viddget.executeAction(Se.Xd,{dialogId:"could-not-connect-queue-call"}),u.viddget.executeAction(Rn,"start")}),3e3))})),wu.ticketId=e.id,window.history.replaceState(null,"","?".concat((0,vo.C7)(wu)))})),v()(s()(u),"clearSetupTimeout",(function(){u.setupTimeout&&clearTimeout(u.setupTimeout)})),v()(s()(u),"enterQueue",function(){var e=xe()(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=5e3,e.next=3,u.createTicket(t);case 3:return r=e.sent,window.addEventListener("unload",u.clearSetupTimeout),u.setupTimeout=setTimeout(xe()(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.updateTicketStatus(S.Us.WAITING,r.ticketId);case 2:case"end":return e.stop()}}),e)}))),n),u._enterQueue(r),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),v()(s()(u),"enterQueueWithTicket",function(){var e=xe()(ye().mark((function e(t,n){var r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={ticketId:t,queueId:n,id:t,createdAt:new Date},u.ticket=r,e.next=4,u.updateTicketStatus(S.Us.WAITING,t);case 4:return u.updateEstimatedWaitingTime(t),u._enterQueue(r),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),u.viddget=t,u.messageService=n,u.settingsService=r,u.queueStore=l,u.callSessionStore=c,u.inReconnection=null,u.agentsWhoOfferedHelp={},u.isConnecting=!1,u.currentTicketStatusUpdatePromise=Promise.resolve({success:!0}),u.viddget.on(S.P1.CALL_STARTED,(function(){clearInterval(u.updateWaitingTimeInterval),u.isConnecting=!1,u.updateTicketStatus(S.Us.SERVING)})),u.viddget.on(S.P1.CALL_ENDED,(function(){u.updateTicketStatus(S.Us.COMPLETE),window.removeEventListener("unload",u.leaveQueue)})),u}return l()(a,[{key:"isReconnecting",value:function(){return!!this.inReconnection}},{key:"connect",value:function(){return this.viddget.executeAction(Iu)}},{key:"cancelTicket",value:(t=xe()(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ticket){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.updateTicketStatus(S.Us.CANCELLED_BY_CLIENT,this.ticket.id);case 4:window.removeEventListener("unload",this.leaveQueue);case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),a}(yu);Ru.serviceName="queueService",Ru.inject=["messageService","settings","QueueStore","CallSessionStore"],Ru.actionExports=["connect","close","createTicket","updateTicketStatus","getEstimatedWaitingTime","enterQueue","enterQueueWithTicket","leaveQueue","pauseTicket","resumeTicket"],Ru.componentExports=["isReconnecting"];var ku=Ru,Lu=function e(t,n){var r=this;o()(this,e),v()(this,"resetState",(function(){r.transferToSourceApp!==S.$X.AGENT_WEB?r.context.executeAction(le,{localOnly:!0}):r.context.executeAction(ae,{visible:!1,localOnly:!0}),r.context.executeAction(an.hD,{state:S.LT.DEFAULT,localOnly:!0}),r.context.executeAction(ln.P8,{externalId:null,localOnly:!0})})),v()(this,"hydrateAgentStore",(function(){var e=S.JC.REASON_TRANSFER_CALL,t={reason:e};t.chat=r.context.getStore("ChatStore").getStoreData(e),t.basket=r.context.getStore("BasketStore").getStoreData(e),t.drawer=r.context.getStore("ProductDrawerStore").getStoreData(e),t.products=r.context.getStore("ProductStore").getStoreData(e),t.compare=r.context.getStore("CompareStore").getStoreData(e),t.client=r.context.getStore("ClientStore").getStoreData(e),r.context.dispatchRemote(S.JC.HYDRATE,t)})),v()(this,"_callSessionStatusChange",(function(e){e===S.kp.RUNNING&&(r.resetState(),r.hydrateAgentStore(),r.callSessionStore.removeListener("change:status",r._callSessionStatusChange))})),this.options=t,this.context=n,this.callSessionStore=n.getStore("CallSessionStore");var i=n.getService("messageService"),a=n.getService("callSessionService");this.abortTransfer=!1,i.on(S.zC.REQUEST_TAKE_OVER,(function(e){var t=e.agent,n=(t=void 0===t?{}:t).sourceApp;r.abortTransfer=!1,r.transferToSourceApp=n})),i.on(S.zC.REQUEST_ACCEPTED,(function(e,t){if(r.abortTransfer)return console.warn("Abort transfer");var o=e.agentTakingOverCall;n.executeAction(Kt,{status:S.kp.FORWARDING}),r.previousAgentPlatform=r.callSessionStore.getAgentPlatform(),n.executeAction(en,{device:r.transferToSourceApp===S.$X.AGENT_WEB?q.DeviceType.DESKTOP:q.DeviceType.MOBILE}),i.whiteListParticipant(o),r.previousAgentSessionId=t,i.muteParticipant(t),i.once(dt,(function(e){var t=e.connectionConfig;a.closeMediaConnection(),a._startWebRTCTransport(t),r.callSessionStore.on("change:status",r._callSessionStatusChange)}))})),i.on(S.zC.TRANSFER_FAIL,(function(e,t){i.muteParticipant(t),i.unMuteParticipant(r.previousAgentSessionId),n.executeAction(en,r.previousAgentPlatform),i.once(dt,(function(e){var t=e.connectionConfig;a.closeMediaConnection(),a._startWebRTCTransport(t)})),r.callSessionStore.removeListener("change:status",r._callSessionStatusChange)})),i.on(S.zC.TRANSFER_ABORT,(function(){r.abortTransfer=!0}))};Lu.serviceName="forwardCallService";var Du=Lu,Pu=n(73074),Mu=function(){function e(t,n,r,i){o()(this,e),this.viddget=n,this.dispatchStore=r,this.dispatchStore.on(S.b9.EVENT,this._onComponentEvent.bind(this)),this.activeComponentStore=i}return l()(e,[{key:"_onComponentEvent",value:function(e){var t=this,n=e.id,r=this.activeComponentStore.getById(n);r?this._fireEvent(r,e):this.activeComponentStore.waitFor(n).then((function(){r=t.activeComponentStore.getById(n),t._fireEvent(r,e)}))}},{key:"_fireEvent",value:function(e,t){e.__componentDidReceiveEvent(t.action,t.data)}}]),e}();Mu.serviceName="dispatchedEventService",Mu.inject=["DispatchStore","ActiveComponentStore"];var Bu=Mu;n(64765);var ju=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(e,t){var n;return o()(this,i),e=e||{},(n=r.call(this)).options=e,n.viddget=t,n.messageService=n.viddget.getService(Eu),n.connectionId=0,n._resetConnectionStatus(),n.upStreams=[],n.downStreams=[],n.shouldHaveDownstream=!1,n.statusCheckTimeout=e.connectionStatusTimeout||3e4,n._handleRemoteHasAvailableUpstream=n._handleRemoteHasAvailableUpstream.bind(s()(n)),n}return l()(i,[{key:"open",value:function(){throw new Error("mediaConnection.open not implemented in parent class")}},{key:"publish",value:function(){throw new Error("mediaConnection.publish not implemented in parent class")}},{key:"close",value:function(){throw new Error("mediaConnection.close not implemented in parent class")}},{key:"getTransportType",value:function(){throw new Error("mediaConnection.getTransportType not implemented in parent class")}},{key:"_onNewConnection",value:function(){this.connectionId++,this.shouldHaveDownstream=!1,this._resetConnectionStatus()}},{key:"_resetConnectionStatus",value:function(){this.connectionStatus=null}},{key:"_onConnectionOpen",value:function(){this.messageService.on("mediaConnection.remoteHasAvailableUpstream",this._handleRemoteHasAvailableUpstream)}},{key:"_onConnectionClose",value:function(){this.messageService.removeListener("mediaConnection.remoteHasAvailableUpstream",this._handleRemoteHasAvailableUpstream),this.connectionId++}},{key:"_getCurrentState",value:function(){return null}},{key:"_handleRemoteHasAvailableUpstream",value:function(e){this.shouldHaveDownstream={video:e.video,audio:e.audio}}},{key:"_setConnectionStatus",value:function(e){this.connectionStatus!==e&&(this.connectionStatus=e,this.emit(Et,{type:e}))}}]),i}(hu.EventEmitter);function Uu(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Gu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gu(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function Gu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Fu=function(e){var t;return null===(t=e.get(Array.from(e.keys())[0]))||void 0===t?void 0:t.timestamp},Wu=function(e,t){return e.mediaSourceId?t.get(e.mediaSourceId):null},Hu=function(e,t,n){var r;return e.trackId?t.get(e.trackId):{trackIdentifier:n&&(null===(r=n[0])||void 0===r?void 0:r.id)||null}},Vu=function(e,t){return e.remoteId?t.get(e.remoteId):null},zu=function(e){var t=e.candidateType,n=e.address,r=e.ip,i=e.protocol,o=e.relayProtocol;return{kind:t,protocol:"relay"===t&&o?o:i,relayIp:"relay"===t?n||r:null}},Zu=function(e){return{frameWidth:e.width,frameHeight:e.height,frameRate:e.framesPerSecond}},Yu=function(e,t){if(!t)return e;for(var n={},r=0,i=Object.keys(e);r<i.length;r++){var o=i[r];n[o]=e[o]-(t[o]||0)}return n},Ku=function(e,t,n,r){var i=null==n?void 0:n.get(e.id),o={frameWidth:e.frameWidth,frameHeight:e.frameHeight,frameRate:e.framesPerSecond,framesSent:e.framesSent-((null==i?void 0:i.framesSent)||0),framesEncoded:e.framesEncoded-((null==i?void 0:i.framesEncoded)||0),qualityLimitation:e.qualityLimitationReason,qualityLimitationDurations:Yu(e.qualityLimitationDurations,null==i?void 0:i.qualityLimitationDurations),bytesSent:e.bytesSent-((null==i?void 0:i.bytesSent)||0),bytesResent:e.retransmittedBytesSent-((null==i?void 0:i.retransmittedBytesSent)||0),firCount:e.firCount-((null==i?void 0:i.firCount)||0),pliCount:e.pliCount-((null==i?void 0:i.pliCount)||0),nackCount:e.nackCount-((null==i?void 0:i.nackCount)||0)},a=Vu(e,t);if(a){var l=null==n?void 0:n.get(a.id);o.remote={jitter:a.jitter,roundTripTime:a.roundTripTime,packetsLost:a.packetsLost-((null==l?void 0:l.packetsLost)||0),fractionLost:a.fractionLost}}try{var c,s,u=r.getParameters();o.scaleResolutionDownBy=(null===(c=u.encodings[0])||void 0===c?void 0:c.scaleResolutionDownBy)||1,o.maxBitrate=(null===(s=u.encodings[0])||void 0===s?void 0:s.maxBitrate)||null}catch(e){o.scaleResolutionDownBy=null,o.maxBitrate=null}return o},qu=function(e,t,n){var r=null==n?void 0:n.get(e.id),i={bytesSent:e.bytesSent-((null==r?void 0:r.bytesSent)||0),bytesResent:e.retransmittedBytesSent-((null==r?void 0:r.retransmittedBytesSent)||0),nackCount:e.nackCount-((null==r?void 0:r.nackCount)||0)},o=Vu(e,t);if(o){var a=null==n?void 0:n.get(o.id);i.remote={jitter:o.jitter,roundTripTime:o.roundTripTime,packetsLost:o.packetsLost-((null==a?void 0:a.packetsLost)||0),fractionLost:o.fractionLost}}return i},Qu=function(e,t,n,r){var i,o,a,l=null==n?void 0:n.get(e.id),c=null===(i=r.settings)||void 0===i?void 0:i.frameRate;return{packetsLost:e.packetsLost-((null==l?void 0:l.packetsLost)||0),packetsReceived:e.packetsReceived-((null==l?void 0:l.packetsReceived)||0),bytesReceived:e.bytesReceived-((null==l?void 0:l.bytesReceived)||0),jitter:e.jitter,averageJitterBufferDelay:e.jitterBufferDelay/e.jitterBufferEmittedCount,framesReceived:e.framesReceived-((null==l?void 0:l.framesReceived)||0),framesDecoded:e.framesDecoded-((null==l?void 0:l.framesDecoded)||0),framesDropped:e.framesDropped-((null==l?void 0:l.framesDropped)||0),totalDecodeTime:e.totalDecodeTime,firCount:e.firCount-((null==l?void 0:l.firCount)||0),pliCount:e.pliCount-((null==l?void 0:l.pliCount)||0),nackCount:e.nackCount-((null==l?void 0:l.nackCount)||0),frameWidth:null===(o=r.settings)||void 0===o?void 0:o.width,frameHeight:null===(a=r.settings)||void 0===a?void 0:a.height,frameRate:c?Math.round(c):null}},Xu=function(e,t,n){var r=null==n?void 0:n.get(e.id);return{packetsLost:e.packetsLost-((null==r?void 0:r.packetsLost)||0),packetsReceived:e.packetsReceived-((null==r?void 0:r.packetsReceived)||0),bytesReceived:e.bytesReceived-((null==r?void 0:r.bytesReceived)||0),jitter:e.jitter,averageJitterBufferDelay:e.jitterBufferDelay/e.jitterBufferEmittedCount}};function Ju(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return $u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function $u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ed=function(e){d()(p,e);var t,n,r,i,a,c,s,u=(c=p,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h()(c);if(s){var n=h()(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return m()(this,e)});function p(e,t,n){var r;return o()(this,p),r=u.call(this,e,t),e=e||{},r.LOG_SOURCE="WebRTCMediaConnection",r.iceConnectionState=null,r.supportsRenegotiation=!0,r.iceFilter=e.iceFilter||null,r.iceTransportPolicy=e.iceTransportPolicy||null,r.iceCandidates=[],r.mungeOldProtocolInSDP=!1,r.remotePlatform=n,r.mutedIOSVideoCheckDelay=e.mutedIOSVideoCheckDelay||1e3,r.applyingResolution=!1,r.mediaStreamStore=r.viddget.getStore("MediaStreamStore"),r.sdpConstraints={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0},optional:[{VoiceActivityDetection:!1}]},r.peerConstraints={optional:[{DtlsSrtpKeyAgreement:!0}]},(0,q.firefoxOlderThan)("38.0")&&(r.supportsRenegotiation=!1),Le()||(r.supportsRenegotiation=!1),r}return l()(p,[{key:"getTransportType",value:function(){return"webrtc"}},{key:"open",value:function(e){this.peerConnection&&this.close(),this.iceTransportPolicy&&(e.iceTransportPolicy=this.iceTransportPolicy),this.peerConfig=e,this._newPeerConnection(e),this.messageService.on("mediaConnection.iceCandidate",this.onSocketIceCandidate=this._handleReceivedIceCandidate.bind(this)),this.messageService.on("mediaConnection.peerConnectionOffer",this.onSocketPeerConnectionOffer=this._handlePeerConnectionOffer.bind(this)),this.messageService.on("mediaConnection.peerConnectionAnswer",this.onSocketPeerConnectionAnswer=this._handlePeerConnectionAnswer.bind(this)),this.messageService.on("mediaConnection.requestReconnect",this.onSocketPeerConnectionRequestReconnect=this._handlePeerConnectionRequestReconnect.bind(this)),this.messageService.on("mediaConnection.requestRepublish",this.onSocketPeerConnectionRequestRepublish=this.republish.bind(this)),pu()(h()(p.prototype),"_onConnectionOpen",this).call(this)}},{key:"attachStreamToConnection",value:(a=xe()(ye().mark((function e(){var t,n,r,i,o,a,l,c,s=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:[],this.peerConnection){e.next=3;break}return e.abrupt("return",Promise.reject(new Error("Need a connection to attach stream tracks to")));case 3:n=0,r=Ju(t),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=40;break}return o=i.value,this.viddget.dispatchRemote(S.Lm.TOGGLE_STREAM_INPUT,{isClientStream:!0,video:Ve(o),audio:ze(o),type:n}),e.prev=10,e.next=13,this.replaceStreamTracks(this.upStreams[n],o);case 13:e.next=35;break;case 15:e.prev=15,e.t0=e.catch(10),a=Ju(o.getTracks()),e.prev=18,a.s();case 20:if((l=a.n()).done){e.next=27;break}if("ended"!==(c=l.value).readyState){e.next=24;break}return e.abrupt("continue",25);case 24:this.peerConnection.addTrack(c,o);case 25:e.next=20;break;case 27:e.next=32;break;case 29:e.prev=29,e.t1=e.catch(18),a.e(e.t1);case 32:return e.prev=32,a.f(),e.finish(32);case 35:return e.prev=35,n++,e.finish(35);case 38:e.next=7;break;case 40:e.next=45;break;case 42:e.prev=42,e.t2=e.catch(5),r.e(e.t2);case 45:return e.prev=45,r.f(),e.finish(45);case 48:return this.upStreams=t,e.abrupt("return",Promise.resolve());case 50:case"end":return e.stop()}}),e,this,[[5,42,45,48],[10,15,35,38],[18,29,32,35]])}))),function(){return a.apply(this,arguments)})},{key:"publish",value:(i=xe()(ye().mark((function e(){var t,n,r,i=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:[],this.peerConnection){e.next=3;break}throw new Error("An open connection must exist before publishing a stream!");case 3:return this.supportsRenegotiation||(this.upStreams=[],this._newPeerConnection(this.peerConfig)),e.prev=4,e.next=7,this.attachStreamToConnection(t.map((function(e,t){return $e(t,e)})));case 7:e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(4),this._setConnectionStatus(bt),e.abrupt("return");case 14:n=Ve(this.upStream),r=ze(this.upStream),this.messageService.sendToRoom("mediaConnection.remoteHasAvailableUpstream",{needsNewConnection:!this.supportsRenegotiation,video:n,audio:r,willPublish:this.supportsRenegotiation}),this.supportsRenegotiation&&this._sendOffer();case 18:case"end":return e.stop()}}),e,this,[[4,9]])}))),function(){return i.apply(this,arguments)})},{key:"close",value:function(){this.messageService.removeListener("mediaConnection.iceCandidate",this.onSocketIceCandidate),this.messageService.removeListener("mediaConnection.peerConnectionOffer",this.onSocketPeerConnectionOffer),this.messageService.removeListener("mediaConnection.peerConnectionAnswer",this.onSocketPeerConnectionAnswer),this.messageService.removeListener("mediaConnection.requestReconnect",this.onSocketPeerConnectionRequestReconnect),this.messageService.removeListener("mediaConnection.requestRepublish",this.onSocketPeerConnectionRequestRepublish),(0,q.isIOS)()&&(window.removeEventListener("blur",this.onWindowBlur),window.removeEventListener("focus",this.onWindowFocus)),this.onSocketPeerConnectionReconnectPrepared&&(this.messageService.removeListener("mediaConnection.reconnectPrepared",this.onSocketPeerConnectionReconnectPrepared),delete this.onSocketPeerConnectionReconnectPrepared),this.requestRenegotiateInterval&&(window.clearInterval(this.requestRenegotiateInterval),delete this.requestRenegotiateInterval),this._iceDisconnectedTryReconnectTimeout&&(window.clearTimeout(this._iceDisconnectedTryReconnectTimeout),delete this._iceDisconnectedTryReconnectTimeout),this._onConnectionClose(),this.peerConnection&&(this._removeStreams(this.upStreams),this._removeStreams(this.downStreams),this._releasePeerConnection(),this.peerConnection=null),this.downStreams=[],this.upStreams=[]}},{key:"_handleRemoteHasAvailableUpstream",value:function(e){pu()(h()(p.prototype),"_handleRemoteHasAvailableUpstream",this).call(this,e)}},{key:"_removeStreams",value:function(e){var t=this;if(this.peerConnection&&"closed"!==this.peerConnection.signalingState){var n,r=Ju(e);try{var i=function(){var e=n.value;t.peerConnection.getSenders().forEach((function(n){e.getTracks().includes(n.track)&&t.peerConnection.removeTrack(n)}))};for(r.s();!(n=r.n()).done;)i()}catch(e){r.e(e)}finally{r.f()}}}},{key:"_replaceSenderTrack",value:function(e,t){if(!e||!t)return Promise.reject(new Error("A track is missing to perform a replacement"));this.peerConnection||Promise.reject(new Error("Need a connection to replace track to"));var n=this.peerConnection.getSenders().find((function(t){if(t.track)return t.track.id===e.id}));return n?n.replaceTrack(t):Promise.reject(new Error("Failed to find sender to replace track for"))}},{key:"replaceStreamTracks",value:function(e,t,n){var r,i,o=this;if(t=t||e,!e)return Promise.reject(new Error("Not possible to replace stream as there is none"));switch(n){case S.oI.AUDIO:r=t.getAudioTracks(),i=e.getAudioTracks();break;case S.oI.VIDEO:r=t.getVideoTracks(),i=e.getVideoTracks();break;default:r=t.getTracks(),i=e.getTracks()}return Promise.all(i.map((function(e){var t=r.find((function(t){return t.kind===e.kind}));return t?o._replaceSenderTrack(e,t):Promise.resolve()})))}},{key:"scaleResolution",value:(r=xe()(ye().mark((function e(t,n,r){var i,o,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&this.peerConnection){e.next=2;break}return e.abrupt("return");case 2:if(!this.applyingResolution){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,this.applyingResolution=!0,i=this.peerConnection.getSenders().find((function(e){if(e.track)return e.track.id===t.id})),o=i.track.getSettings().height/n,(a=i.getParameters()).encodings.forEach((function(e){o&&(e.scaleResolutionDownBy=Math.max(o,1)),r&&(e.maxBitrate=r)})),e.next=12,i.setParameters(a);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),console.log("Failed to scale video resolution",e.t0);case 17:return e.prev=17,this.applyingResolution=!1,e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[4,14,17,20]])}))),function(e,t,n){return r.apply(this,arguments)})},{key:"_sendOffer",value:function(e){var t=this;this.peerConnection.createOffer(e).then((function(e){return e.sdp=t._preferOpus(e.sdp),t.mungeOldProtocolInSDP&&(e.sdp=t._mungeOldProtocol(e.sdp)),t.peerConnection.setLocalDescription(e)})).then((function(){t.messageService.sendToRoom("mediaConnection.peerConnectionOffer",t.peerConnection.localDescription)})).catch((function(e){return t._handleCreateOfferError(e)}))}},{key:"_newPeerConnection",value:(n=xe()(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._releasePeerConnection(),n=this.shouldHaveDownstream,this._onNewConnection(),this.shouldHaveDownstream=n,this.peerConnection=new Ae(t,this.peerConstraints),this.peerConnection.onicecandidate=this._handleIceCandidate.bind(this),this.peerConnection.ontrack=this._handleOnTrack.bind(this),this.peerConnection.oniceconnectionstatechange=this._handleIceConnectionStateChange.bind(this),this.iceConnectionState=null,this.iceCandidates=[],this.downStreams.length&&(this.downStreams.forEach((function(e){return e.onremovetrack=null})),this.downStreams=[],this.emit(gt)),e.next=13,this.attachStreamToConnection(this.upStreams);case 13:this._requestStats(this.connectionId);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_releasePeerConnection",value:function(){if(this.peerConnection){if(this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null,this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onnegotiationneeded=null,"closed"===this.peerConnection.signalingState)return;this.peerConnection.close()}}},{key:"_getCurrentState",value:function(){return this.iceConnectionState}},{key:"_iceCandidateToString",value:function(e){var t=e.candidate.split(" ");return t="tcp"==t[2]||"udp"==t[2]?t.slice(0,4):[],-1!==e.candidate.indexOf("typ host")?t.unshift("host"):-1!==e.candidate.indexOf("typ srflx")?t.unshift("reflexive"):-1!==e.candidate.indexOf("typ relay")&&t.unshift("relay"),t.join(" ")}},{key:"_handleIceCandidate",value:function(e){null!=e&&e.candidate&&this._filterIceCandidate.call(this,e.candidate)&&(this.iceCandidates.push(e.candidate),this.messageService.sendToRoom("mediaConnection.iceCandidate",{label:e.candidate.sdpMLineIndex,id:e.candidate.sdpMid,candidate:e.candidate.candidate},!0))}},{key:"_handlePeerConnectionOffer",value:function(e){var t=this;this.peerConnection.setRemoteDescription(e).then((function(){return t.peerConnection.createAnswer(t.sdpConstraints)})).then((function(e){return e.sdp=t._preferOpus(e.sdp),t.mungeOldProtocolInSDP&&(e.sdp=t._mungeOldProtocol(e.sdp)),t.peerConnection.setLocalDescription(e)})).then((function(){t.messageService.sendToRoom("mediaConnection.peerConnectionAnswer",t.peerConnection.localDescription,!0)}))}},{key:"_handlePeerConnectionAnswer",value:function(e){this.peerConnection.setRemoteDescription(e)}},{key:"_handleReceivedIceCandidate",value:function(e){if(this._filterIceCandidate(e)){var t=new Ne({sdpMLineIndex:e.label,sdpMid:e.id,candidate:e.candidate});this.peerConnection.addIceCandidate(t).catch((function(t){Zt.Tb(new Error("Problem adding ".concat(ot(e.candidate)," ice candidate: ").concat(t.message)))}))}}},{key:"_handleIceConnectionStateChange",value:function(){var e,t=this,n=["disconnected","failed"];if(this.iceConnectionState!==this.peerConnection.iceConnectionState)if(this.iceConnectionState=this.peerConnection.iceConnectionState,this.messageService.sendToRoom("messageService.iceConnectionState",{iceConnectionState:this.iceConnectionState,hasConnectedBefore:this._hasConnectedBefore||!1,orgId:this.viddget.getSetting("merchant.id"),callId:null===(e=this.viddget.getStore("CallSessionStore"))||void 0===e?void 0:e.getSessionId()}),"connected"===this.iceConnectionState)this.peerId=(0,$a.Z)(),this.isReconnecting=!1,this._iceDisconnectedTryReconnectTimeout&&(window.clearTimeout(this._iceDisconnectedTryReconnectTimeout),delete this._iceDisconnectedTryReconnectTimeout),this._setConnectionStatus(St),this._hasConnectedBefore||(this._hasConnectedBefore=!0,this._emitSelectedConnection());else if(n.includes(this.iceConnectionState)){if(this.viddget.getStore("CallSessionStore").getStatus()===S.kp.FORWARDING)return void this._setConnectionStatus("disconnected");if(this._iceDisconnectedTryReconnectTimeout)return;this._iceDisconnectedTryReconnectTimeout=window.setTimeout((function(){delete t._iceDisconnectedTryReconnectTimeout,n.includes(t.iceConnectionState)&&t._tryReconnect()}),5e3)}}},{key:"_handleOnTrack",value:function(e){var t=this;null!=e&&e.streams&&(e.streams.forEach((function(e){if(t.downStreams.some((function(t){return t.id===e.id})))return!1;e.onremovetrack=function(){t.downStreams.some((function(e){return e.getTracks().length}))||(t.downStreams=[],t.emit(gt))},t.downStreams.push(e)})),this.emit(ht))}},{key:"_handleCreateOfferError",value:function(e){this.emit("createOfferFailed",e)}},{key:"_handleAnswerOfferError",value:function(e){this.emit("answerOfferFailed",e)}},{key:"_emitSelectedConnection",value:function(){var e=this;window.setTimeout((function(){e.peerConnection&&e.peerConnection.getStats().then((function(t){var n=["transport","candidate-pair","local-candidate"],r=[];t.forEach((function(e){n.includes(e.type)&&r.push(e)}));var i=r.find((function(e){return"transport"===e.type})),o=r.find((function(e){return"candidate-pair"===e.type&&(i?e.id===i.selectedCandidatePairId:e.selected)})),a=o&&r.find((function(e){return"local-candidate"===e.type&&e.id===o.localCandidateId}));if(a){var l=a.candidateType,c=a.address,s=a.ip,u=a.protocol,d=a.relayProtocol;e.viddget.emit(S.P1.SELECTED_MEDIA_CONNECTION,{candidateType:l,protocol:"relay"===l&&d?d:u,relayIp:"relay"===l?c||s:null})}}))}),2500)}},{key:"_filterIceCandidate",value:function(e){var t=e.candidate;return!this.iceFilter||ot(t)===this.iceFilter}},{key:"_tryReconnect",value:function(){this.isReconnecting||(this.isReconnecting=!0,this._setConnectionStatus(Tt))}},{key:"_handlePeerConnectionReconnectPrepared",value:function(){this.onSocketPeerConnectionReconnectPrepared&&(this.messageService.removeListener("mediaConnection.reconnectPrepared",this.onSocketPeerConnectionReconnectPrepared),delete this.onSocketPeerConnectionReconnectPrepared)}},{key:"_handlePeerConnectionRequestReconnect",value:(t=xe()(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.supportsRestartIce&&!(0,q.isFirefox)()){e.next=8;break}return n=this.shouldHaveDownstream,e.next=6,this._newPeerConnection(this.peerConfig);case 6:this.iceConnectionState="disconnected",this.shouldHaveDownstream=n;case 8:this.messageService.sendToRoom("mediaConnection.reconnectPrepared",{});case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"republish",value:function(){this.publish(this.upStreams)}},{key:"requestRepublish",value:function(){this.messageService.sendToRoom("mediaConnection.requestRepublish")}},{key:"_mungeOldProtocol",value:function(e){return e.replace(/UDP\/TLS\/RTP\/SAVPF/g,"RTP/SAVPF")}},{key:"_preferOpus",value:function(e){for(var t=e.split("\r\n"),n=null,r=0;r<t.length;r++)if(-1!==t[r].search("m=audio")){n=r;break}if(null===n)return e;for(var i=0;i<t.length;i++)if(-1!==t[i].search("opus/48000")){var o=this._extractSdp(t[i],/:(\d+) opus\/48000/i);o&&(t[n]=this._setDefaultCodec(t[n],o));break}return(t=this._removeCN(t,n)).join("\r\n")}},{key:"_setDefaultCodec",value:function(e,t){for(var n=e.split(" "),r=[],i=0,o=0;o<n.length;o++)3===i&&(r[i++]=t),n[o]!==t&&(r[i++]=n[o]);return r.join(" ")}},{key:"_removeCN",value:function(e,t){try{for(var n=e[t].split(" "),r=e.length-1;r>=0;r--){var i=this._extractSdp(e[r],/a=rtpmap:(\d+) CN\/\d+/i);if(i){var o=n.indexOf(i);-1!==o&&n.splice(o,1),e.splice(r,1)}}e[t]=n.join(" ")}catch(e){console.error(e)}return e}},{key:"_extractSdp",value:function(e,t){var n=e.match(t);return n&&2===n.length?n[1]:null}},{key:"_requestStats",value:function(e){var t=this;if(this.connectionId===e&&this.peerConnection){var n=Date.now(),r=function(){var r=Math.max(0,5e3-(Date.now()-n));window.setTimeout((function(){t._requestStats(e)}),r)};if(this.isReconnecting||!this.peerId)return r();this.peerConnection.getStats(null).then((function(n){var i=Fu(n);t._stats||(t._stats={});var o=t.viddget.getStore("MediaStreamStore"),a=t._stats[e]||{},l=a.startTime,c=void 0===l?i:l,s=a.lastTime,u=function(e,t){var n=t.startTime,r=t.lastTime,i=Fu(e),o={timestamp:i,timeFromLast:(i-r)/1e3,timeFromStart:(i-n)/1e3,videoSources:[],videoSenders:[],audioSenders:[],videoReceivers:[],audioReceivers:[]};return e.forEach((function(n){"candidate-pair"===n.type?function(e,t,n,r){var i=function(e,t){return e.transportId?t.get(e.transportId):null}(t,n);if(t.selected||(null==i?void 0:i.selectedCandidatePairId)===t.id){var o=function(e,t){return e.localCandidateId?t.get(e.localCandidateId):null}(t,n);o&&(e.localIceCandidate=zu(o));var a=function(e,t){return e.remoteCandidateId?t.get(e.remoteCandidateId):null}(t,n);a&&(e.remoteIceCandidate=zu(a)),i||e.transport||(e.transport=function(e,t,n){var r=null==n?void 0:n.get(e.id);return{bytesSent:e.bytesSent-((null==r?void 0:r.bytesSent)||0),bytesReceived:e.bytesReceived-((null==r?void 0:r.bytesReceived)||0)}}(t,0,r.prevReports))}}(o,n,e,t):"outbound-rtp"===n.type?(function(e,t,n,r){var i,o,a=Hu(t,n,null===(i=r.upStreams[e.videoSenders.length])||void 0===i?void 0:i.videoTracks),l=0,c=Uu(r.upStreams);try{for(c.s();!(o=c.n()).done;){var s=o.value.videoTracks.find((function(e){return e.id===a.trackIdentifier&&e.enabled}));if(s){var u=Wu(t,n);u&&(e.videoSources[l]=Zu(u)),e.videoSenders[l]=Ku(t,n,r.prevReports,s.sender);break}l++}}catch(e){c.e(e)}finally{c.f()}}(o,n,e,t),function(e,t,n,r){var i,o,a=Hu(t,n,null===(i=r.upStreams[e.audioSenders.length])||void 0===i?void 0:i.audioTracks),l=0,c=Uu(r.upStreams);try{for(c.s();!(o=c.n()).done;){if(o.value.audioTracks.find((function(e){return e.id===a.trackIdentifier&&e.enabled}))){e.audioSenders[l]=qu(t,n,r.prevReports);break}l++}}catch(e){c.e(e)}finally{c.f()}}(o,n,e,t)):"inbound-rtp"===n.type?(function(e,t,n,r){var i,o,a=Hu(t,n,null===(i=r.downStreams[e.videoReceivers.length])||void 0===i?void 0:i.videoTracks),l=0,c=Uu(r.downStreams);try{for(c.s();!(o=c.n()).done;){var s=o.value.videoTracks.find((function(e){return e.id===a.trackIdentifier&&e.enabled}));if(s){e.videoReceivers[l]=Qu(t,0,r.prevReports,s);break}l++}}catch(e){c.e(e)}finally{c.f()}}(o,n,e,t),function(e,t,n,r){var i,o,a=Hu(t,n,null===(i=r.downStreams[e.audioReceivers.length])||void 0===i?void 0:i.audioTracks),l=0,c=Uu(r.downStreams);try{for(c.s();!(o=c.n()).done;){if(o.value.audioTracks.find((function(e){return e.id===a.trackIdentifier&&e.enabled}))){e.audioReceivers[l]=Xu(t,0,r.prevReports);break}l++}}catch(e){c.e(e)}finally{c.f()}}(o,n,e,t)):"transport"===n.type&&function(e,t,n,r){e.transport||(e.transport=function(e,t,n){var r=null==n?void 0:n.get(e.id),i=function(e,t){return e.selectedCandidatePairId?t.get(e.selectedCandidatePairId):null}(e,t);return{bytesSent:e.bytesSent-((null==r?void 0:r.bytesSent)||0),bytesReceived:e.bytesReceived-((null==r?void 0:r.bytesReceived)||0),packetsSent:e.packetsSent-((null==r?void 0:r.packetsSent)||0),packetsReceived:e.packetsReceived-((null==r?void 0:r.packetsReceived)||0),availableOutgoingBitrate:(null==i?void 0:i.availableOutgoingBitrate)||0}}(t,n,r.prevReports))}(o,n,e,t)})),o}(n,{lastTime:void 0===s?i:s,startTime:c,prevReports:a.prevReports,upStreams:o.publishableLocalMediaStreams.map((function(e){return{videoTracks:e.getVideoTracks().map((function(e){return{id:e.id,enabled:e.enabled,sender:t.peerConnection.getSenders().find((function(t){if(t.track)return t.track.id===e.id}))}})),audioTracks:e.getAudioTracks().map((function(e){return{id:e.id,enabled:e.enabled}}))}})),downStreams:o.remoteMediaStreams.map((function(e){return{videoTracks:e.getVideoTracks().map((function(e){return{id:e.id,enabled:e.enabled,settings:"function"==typeof e.getSettings?e.getSettings():null}})),audioTracks:e.getAudioTracks().map((function(e){return{id:e.id,enabled:e.enabled}}))}}))});t._stats[e]={startTime:c,lastTime:i,prevReports:n},t.viddget.getService("mediaStreamStatsService").send(u,t.peerId),r()}))}}}]),p}(ju),td=ed,nd=n(32297),rd="CALL_PHASE_BEFORE_BEGIN",id="CALL_PHASE_BEGIN",od=function(){function e(t,n,r,i,a,l,c,s,u,d,p){o()(this,e),this.context=n,this.messageService=r,this.queueService=i,this.settingsService=a,this.mediaStreamStore=l,this.callSessionStore=c,this.externalInterfaceService=s,this.clientStore=u,this.trackingService=d,this.speedTestService=p,this.callPhase=rd,this.onWantToHelpListener=function(){},this._onAgentReady=this._onAgentReady.bind(this),this._onAgentHangup=this._onAgentHangup.bind(this),this._onRemoteStreamAdded=this._onRemoteStreamAdded.bind(this),this._onRemoteStreamRemoved=this._onRemoteStreamRemoved.bind(this),this._onLocalStreamUpdated=this._onLocalStreamUpdated.bind(this),this._onMediaConnectionStatus=this._onMediaConnectionStatus.bind(this),this._onPauseCall=this._onPauseCall.bind(this)}var t,n,r,i,a;return l()(e,[{key:"getMediaConnection",value:function(){return this.mediaConnection}},{key:"_waitForConnectHandshake",value:(a=xe()(ye().mark((function e(){var t=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=function(n,r){var i;clearInterval(t.pingInterval),clearTimeout(t.connectionTimeout),t.messageService.whiteListParticipant(r);var o={device:(null==n||null===(i=n.agent)||void 0===i?void 0:i.sourceApp)===S.$X.AGENT_WEB?q.DeviceType.DESKTOP:q.DeviceType.MOBILE};t.context.executeAction(en,o),t._startCall(),e()};t.messageService.once(ft,r),t.pingInterval=setInterval((function(){t.messageService.sendToRoom("request_for_connection",{client:{orgId:t.settingsService.get("merchant.id")}},!0)}),300),t.connectionTimeout=setTimeout((function(){t.messageService.removeListener(ft,r),clearInterval(t.pingInterval),n("Connection timeout")}),5e3)})));case 1:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})},{key:"_startCall",value:function(){this.messageService.once(dt,this._onAgentReady),this.messageService.on(mt,this._onPauseCall),this.messageService.on(pt,this._onAgentHangup),this.queueService.connected&&this.queueService.close(),this.connectWithAgent()}},{key:"callAgent",value:(i=xe()(ye().mark((function e(t){var n,r,i,o,a,l;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.connectionData,r=t.roomId,i=sn().merge(this.settingsService.get("messageServer"),n),this.callPhase=rd,this.speedTestService.startTest(),i.url&&r){e.next=8;break}throw new Error;case 8:return this.messageServiceConnectData={connectionData:n,roomId:r},e.prev=9,e.next=12,this.messageService.join(r);case 12:if(o=e.sent,a=o.countParticipants,!(l=o.requireConnectHandshake)){e.next=18;break}return e.next=18,this._waitForConnectHandshake();case 18:if(!(a>1)){e.next=23;break}return this._startCall(),e.abrupt("return");case 23:if(l){e.next=25;break}throw new Error;case 25:e.next=30;break;case 27:throw e.prev=27,e.t0=e.catch(9),e.t0;case 30:case"end":return e.stop()}}),e,this,[[9,27]])}))),function(e){return i.apply(this,arguments)})},{key:"connectWithAgent",value:(r=xe()(ye().mark((function e(){var t,n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.externalInterfaceService.emit("viddget:viewport_settings",{allowMaximizedFullViewport:!0}),"normal"===(t=(0,vo.Wz)()).viewportMode&&(t.clientId&&this.context.executeAction(Rn,"main"),this.context.executeAction(Al)),this.context.executeAction(Kt,{status:S.kp.CONNECTING}),e.next=6,this._getPlatformMeta();case 6:n=e.sent,this.context.executeAction($t,n),this.messageService.sendToRoom("client_platform",n),this.speedTestService.abortTest();case 10:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"abortCallAgent",value:function(){var e=this;this.trackingService.track("pre_call","abort_setup_call"),this.context.executeAction(Se.V2,{withCloseIcon:!1,title:this.context.getText("CALL_SESSION_CLIENT_CONNECTION_FAILED_TITLE"),message:this.context.getText("CALL_SESSION_CLIENT_CONNECTION_FAILED_MESSAGE"),cancelButtonTitle:this.context.getText("CALL_SESSION_CLIENT_HANGUP_ABORT_BTN_LABEL"),buttonTitle:this.context.getText("AGENT_CLIENT_HANGUP_CONFIRM_BTN_LABEL"),callback:function(t){e.trackingService.track("pre_call",t?"click_cancel_after_abort":"click_retry_after_abort"),e.context.executeAction(Se._S),e.context.executeAction(On),t?(e.externalInterfaceService.emit("viddget:call_failed"),e.externalInterfaceService.emit(jt)):(e.context.executeAction(wl),setTimeout((function(){window.location.reload()}),100))}})}},{key:"hangupCall",value:function(e){var t=this;return e=e||yt,new Promise((function(n){e!==xt&&t.externalInterfaceService.emit("viddget:call_ending"),t.context.executeAction(Kt,{status:S.kp.DISCONNECTING}),t.context.executeAction(nd.P,{name:S.P1.CALL_ENDED,data:{reason:e}}),t.messageService.sendHangupMessage({reason:e===yt?Ct:e}),t._resetMessageAndMediaConnectionState(),t.messageService.close().then((function(){t.context.executeAction(Kt,{status:S.kp.DISCONNECTED}),window.onbeforeunload=null,e===xt?(0,vo.Wz)().clientId?(t.context.executeAction(Se._S),t.context.executeAction(Se.FI,{title:t.context.getText("GENERAL_CONNECTION_ERROR"),message:t.context.getText("CLIENT_MEETING_JOIN_ERROR"),callback:function(){t.externalInterfaceService.emit(Rt,{callSessionId:t.callSessionStore.getSessionId(),reason:e}),t.context.executeAction(wl),t.context.executeAction(Rn,{screen:"enter-from-connect-link"})}})):(t.externalInterfaceService.emit(Rt,{callSessionId:t.callSessionStore.getSessionId(),reason:e}),t.context.executeAction(wl)):(t.externalInterfaceService.emit(Rt,{callSessionId:t.callSessionStore.getSessionId(),reason:e}),t.context.executeAction(Se._S),t.context.executeAction(On),t.context.executeAction(wl),t.context.executeAction(Rn,{screen:"thank-you"})),n()}))}))}},{key:"hangupCallWithFallback",value:function(e){this.callSessionStore.getStatus()!==S.kp.DISCONNECTING&&this.callSessionStore.getStatus()!==S.kp.DISCONNECTED&&(e=e||_t,this.messageService.sendHangupMessage({reason:e===yt?Ct:e}),this._resetMessageAndMediaConnectionState(),this.context.executeAction(Kt,{status:S.kp.DISCONNECTING}),this.hangupCall(e))}},{key:"hangupCallWithErrorDialog",value:function(e,t,n,r){var i=this;this.callSessionStore.getStatus()!==S.kp.DISCONNECTING&&this.callSessionStore.getStatus()!==S.kp.DISCONNECTED&&(n=n||_t,this.messageService.sendHangupMessage({reason:n===yt?Ct:n}),this._resetMessageAndMediaConnectionState(),this.context.executeAction(Kt,{status:S.kp.DISCONNECTING}),this.context.executeAction(Se.FI,{title:e,message:t,buttonTitle:r,callback:function(){i.hangupCall(n)}}))}},{key:"_resetMessageAndMediaConnectionState",value:function(){this.messageService.removeListener(dt,this._onAgentReady),this.messageService.removeListener(pt,this._onAgentHangup),this.messageService.removeListener(mt,this._onPauseCall),this.closeMediaConnection()}},{key:"closeMediaConnection",value:function(){this.mediaConnection&&(this.mediaConnection.removeListener(ht,this._onRemoteStreamAdded),this.mediaConnection.removeListener(gt,this._onRemoteStreamRemoved),this.mediaConnection.removeListener(vt,this._onLocalStreamUpdated),this.mediaConnection.removeListener(Et,this._onMediaConnectionStatus),this.mediaConnection.close(),this.mediaConnection=null)}},{key:"_getPlatformMeta",value:(n=xe()(ye().mark((function e(){var t,n=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,q.getPlatformMetadata)(),this.settingsService.get("webrtc.disable",!1)&&(t.features.webRTC=!1),t.features.webRTCUnifiedPlan=Le(),t.language={locale:this.settingsService.get("language.locale")},e.next=6,new Promise((function(e){var t=n.callSessionStore.getMerchantIntegration();if(t)return e(t);n.context.executeAction(Un),n.callSessionStore.addChangeListener((function r(){if(t=n.callSessionStore.getMerchantIntegration())return n.callSessionStore.removeChangeListener(r),e(t)}))}));case 6:return t.merchantIntegration=e.sent,e.abrupt("return",t);case 8:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"_onAgentReady",value:function(e){var t=(0,vo.Wz)().orgId,n=e.connectionConfig,r=e.callSessionId;this.trackingService.track("call","agent_ready"),this.context.executeAction(Qt,{sessionId:r,orgId:t}),this.context.executeAction(tn,n.type),this.context.executeAction(nn,this.settingsService.get("callSession.initialMode")),this.callPhase=id,this.externalInterfaceService.emit("viddget:call_starting",{callSessionId:r}),"webrtc"===n.type&&this._startWebRTCTransport(n,r)}},{key:"_onAgentHangup",value:function(e){var t=this;e.reason===_t?this.context.executeAction(Se.FI,{title:this.context.getText("CALL_SESSION_AGENT_HUNGUP_TITLE"),message:this.context.getText("CALL_SESSION_CLIENT_CALL_ENDED_MESSAGE"),callback:function(){t.hangupCall(e.reason)}}):this.hangupCall(e.reason)}},{key:"_startWebRTCTransport",value:(t=xe()(ye().mark((function e(t,n){var r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=n||this.callSessionStore.getSessionId(),this.mediaConnection=new td(this.settingsService.get("webrtc"),this.context),this.mediaConnection.on(ht,this._onRemoteStreamAdded),this.mediaConnection.on(gt,this._onRemoteStreamRemoved),this.mediaConnection.on(vt,this._onLocalStreamUpdated),this.mediaConnection.on(Et,this._onMediaConnectionStatus),this.mediaConnection.open(t.peerConfig),r=$e(S.lo.CAMERA,this.mediaStreamStore.getLocalMediaStream()),e.next=10,this.context.executeAction(Cn,{stream:r});case 10:return e.next=12,this.mediaConnection.attachStreamToConnection([r]);case 12:this.messageService.sendToRoom("client_ready",{iceFilter:this.settingsService.get("webrtc.iceFilter",this.mediaConnection.iceFilter),callId:n},!0);case 13:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"_onRemoteStreamRemoved",value:function(){this.context.executeAction(bn)}},{key:"_onPauseCall",value:function(e){this.context.executeAction(Kt,{status:e.pause?S.kp.PAUSED:S.kp.RUNNING})}},{key:"_onRemoteStreamAdded",value:function(){var e=this;this.mediaConnection instanceof td&&this.mediaConnection.downStreams.forEach((function(t,n){e.context.executeAction(Tn,{type:n,stream:t})}))}},{key:"_onLocalStreamUpdated",value:function(e){this.context.dispatch(S.Lm.RECEIVED_LOCAL_STREAM,{stream:e})}},{key:"_onMediaConnectionStatus",value:function(e){if(e.type===St){var t=this.callSessionStore.getStatus();this.callPhase===id&&(t!==S.kp.FORWARDING&&this.context.executeAction(nd.P,{name:S.P1.CALL_STARTED}),this.callPhase="CALL_PHASE_AGENT_STREAM_RECEIVED"),t!==S.kp.RUNNING&&t!==S.kp.PAUSED&&(this.callSessionStore.previousStatus===S.kp.PAUSED?this.context.executeAction(qt):this.context.executeAction(Kt,{status:S.kp.RUNNING}))}else e.type===Tt?this.context.executeAction(Kt,{status:S.kp.RECONNECTING}):e.type===bt&&this.context.executeAction(Se.FI,{title:this.context.getText("GENERAL_CONNECTION_ERROR"),message:this.context.getText("GENERAL_CONNECTION_ERROR_MESSAGE")})}}]),e}();od.serviceName="callSessionService",od.actionExports=["callAgent","connectWithAgent","hangupCall","hangupCallWithErrorDialog","abortCallAgent"],od.storeExports=["getMediaConnection"],od.inject=["messageService","queueService","settings","MediaStreamStore","CallSessionStore","externalInterfaceService","ClientStore","trackingService","speedTestService"];var ad=od;var ld=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this,e)).screen="loading",t.screenProps={},t}return l()(i,[{key:"handleChangeScreen",value:function(e){var t=sn().isObject(e)?e.screen:e;this.screen!==t&&(this.screen=t,this.screenProps=sn().isObject(e)&&e.props?e.props:{},this.emitChange())}},{key:"getCurrentScreenName",value:function(){return this.screen}},{key:"getCurrentScreenProps",value:function(){return this.screenProps}}]),i}(cu.Z);ld.storeName="ApplicationStore",ld.handlers=sn().invert({handleChangeScreen:S.B7.SCREEN});var cd=ld,sd=function(){function e(){o()(this,e),this.nextId=1}return l()(e,[{key:"get",value:function(){return this.nextId++}},{key:"reset",value:function(){this.nextId=1}}]),e}();sd.serviceName="uniqueId",sd.componentExports=["get","reset"],sd.storeExports=["get","reset"],sd.actionExports=["get","reset"];var ud=sd,dd="client",pd="agent";var md=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(e){var t,n;return o()(this,i),(n=r.call(this,e)).messages=[],n.expanded=!0,n.typing=(t={},v()(t,dd,!1),v()(t,pd,!1),t),n.unreadMessages=0,n}return l()(i,[{key:"handleReceived",value:function(e){var t=sn().clone(e);t.date=new Date(t.date).toISOString(),this.messages.push(t);var n=!1;t.src!==dd&&this.dispatcher.getStore("ToolStore").currentTool!==S.Js.CHAT&&(this.unreadMessages++,n=!0),t.src===dd&&(this.typing.agent=!1),t.src===pd&&(this.typing.client=!1),n&&this.emit("message:unreadRemote",t),this.emitChange()}},{key:"handleSelectTool",value:function(e){var t=e.tool;if(1==!!e.clientSelectedTool&&this.unreadMessages){var n=this.dispatcher.getStore("ToolStore").previousTool;t!==S.Js.CHAT&&n!==S.Js.CHAT||(this.unreadMessages=0,this.emitChange())}}},{key:"handleDeselectTool",value:function(e){var t=this;1==!!e.clientDeSelectedTool&&this.unreadMessages&&this.dispatcher.waitFor("ToolStore",(function(){t.dispatcher.getStore("ToolStore").previousTool===S.Js.CHAT&&(t.unreadMessages=0,t.emitChange())}))}},{key:"handlePrepareNewCallSession",value:function(){this.messages=[],this.unreadMessages=0,this.emitChange()}},{key:"handleTyping",value:function(e){var t=this,n=function(e,n){t.typing[e]=n,t.emitChange()};e.src===dd&&(n(pd,!0),this.clientTypingTimer&&clearTimeout(this.clientTypingTimer),this.clientTypingTimer=setTimeout((function(){return n(pd,!1)}),1e4)),e.src===pd&&(n(dd,!0),this.agentTypingTimer&&clearTimeout(this.agentTypingTimer),this.agentTypingTimer=setTimeout((function(){return n(dd,!1)}),1e4)),this.emitChange()}},{key:"getMessages",value:function(){return this.messages}},{key:"getNumberUnread",value:function(){return this.unreadMessages}},{key:"isTyping",value:function(e){return this.typing[e]}},{key:"hydrate",value:function(e){var t,n;!(null!=e&&null!==(t=e.chat)&&void 0!==t&&null!==(n=t.messages)&&void 0!==n&&n.length)>0||e.reason===S.JC.REASON_TRANSFER_CALL&&(this.messages=e.chat.messages,this.emitChange())}},{key:"getStoreData",value:function(e){if(e===S.JC.REASON_TRANSFER_CALL)return{messages:this.messages}}}]),i}(cu.Z);md.storeName="ChatStore",md.handlers=sn().invert({handleReceived:S.Uf.RECEIVED,handleTyping:S.Uf.IS_TYPING,handlePrepareNewCallSession:S.Nb.PREPARE_NEW,hydrate:S.JC.HYDRATE,handleSelectTool:S.Ie.SELECT,handleDeselectTool:S.Ie.DESELECT});var fd=md,hd=(n(85827),n(50008)),gd=n.n(hd);function vd(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ed(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ed(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function Ed(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Sd=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this,e)).basket=null,t._errors={},t.checkingOut=!1,t.hasChanges=!1,t}return l()(i,[{key:"numberOfBasketItems",get:function(){var e=this.getBasket();if(!e||!e.groups)return 0;var t=0;return e.groups.forEach((function(e){e.rows&&e.rows.length&&e.rows.forEach((function(e){e.nrOfItems&&(t+=e.nrOfItems)}))})),t}},{key:"errors",get:function(){return this._errors}},{key:"products",get:function(){var e=this.getBasket();if(!e||!e.groups)return[];var t=new Set;return e.groups.forEach((function(e){e.rows&&e.rows.length&&e.rows.forEach((function(e){t.add(e.externalId)}))})),Pi()(t)}},{key:"handleBasketError",value:function(e){if(e){var t,n;if("cart"!==this.dispatcher.getStore("ToolStore").getCurrentTool())return;if(null==e||null===(t=e.row)||void 0===t||!t.externalId)return;e.error?this._errors[e.row.externalId]=e.error:delete this._errors[e.row.externalId],"OutOfStockError"===(null===(n=e.error)||void 0===n?void 0:n.name)&&this.getBasket().groups.forEach((function(t){t.rows.map((function(t){t.externalId===e.row.externalId&&(t.inStock=!1)}))}))}else this._errors={};this.emitChange()}},{key:"handleRemoveBasket",value:function(e){this.isBasket(e.panelId)&&(this.basket=null,this.emitChange())}},{key:"handleLoading",value:function(e){var t=this.getBasket();t&&(t.updatingRows=function(e){var n=e.externalId;if(n)return t.updatingRows?(t.updatingRows.some((function(e){return(null==e?void 0:e.externalId)===n}))||t.updatingRows.push({externalId:n}),t.updatingRows):[{externalId:n}]}(e),t.isLoading=!!e.loading,this.emitChange())}},{key:"isAddingProductToCart",value:function(e){var t=this.getBasket();if(e&&t.updatingRows)return t.updatingRows.some((function(t){return t.externalId===e}))}},{key:"_calculateTotal",value:function(e){var t,n=this.dispatcher.getStore("ProductStore"),r=null,i=null,o=vd(e.groups);try{for(o.s();!(t=o.n()).done;){var a,l=t.value,c={},s=vd(l.rows);try{for(s.s();!(a=s.n()).done;){var u,d,p=a.value,m=n.getProductByExternalId(p.externalId);if(m&&"object"===gd()(m.price)&&!isNaN(null===(u=m.price)||void 0===u?void 0:u.current)&&null!==(d=m.price)&&void 0!==d&&d.currency){i=m.locale,r||(r=m.price.currency);var f=c[m.price.currency]||0;f+=m.price.current*p.nrOfItems,c[m.price.currency]=f}}}catch(e){s.e(e)}finally{s.f()}var h=Object.keys(c).length>1&&Object.values(c).every((function(e){return e>0}));l.total=h?null:{price:{current:c[r],currency:r},locale:i}}}catch(e){o.e(e)}finally{o.f()}e.groups.length?e.total={locale:i,price:{current:e.groups.reduce((function(e,t){var n;return e+(null!=t&&null!==(n=t.total)&&void 0!==n&&n.price?t.total.price.current:0)}),0),currency:r}}:e.total=null}},{key:"handleAddToCart",value:function(e){this.handleLoading({externalId:e.externalId})}},{key:"handleReceived",value:function(e){var t=this,n=this.getBasket();if(n){var r=[];(n.updatingRows||[]).some((function(t,i){var o;if(null!=t&&t.externalId)if(((null==e||null===(o=e.basket)||void 0===o?void 0:o.groups)||[]).some((function(e){return(e.rows||[]).some((function(e){return e.externalId===t.externalId}))}))){var a=e.basket.groups[0].rows.find((function(e){return e.externalId===t.externalId})).nrOfItems;r.push({eventName:"product-update",payload:{externalId:t.externalId,nrOfItems:a}}),n.updatingRows.splice(i,1)}else r.push({eventName:"product-remove",payload:{externalId:t.externalId}})})),n.groups=e.basket.groups.filter((function(e){return e.rows.length})),this._calculateTotal(n),this.hasChanges=!0,r.forEach((function(e){var n=e.eventName,r=e.payload;t.emit(n,r)})),this.emitChange()}}},{key:"handlePrepareNewCallSession",value:function(){this._errors={},this.checkingOut=!1,this.hasChanges=!1,this.basket&&(this.basket=null,this.emitChange())}},{key:"isBasket",value:function(e){var t=this.getBasket();return t&&t.panelId===e}},{key:"getBasket",value:function(){return this.basket||(this.basket={panelId:"basket1",uuid:(0,$a.Z)(),isLoading:!1,groups:[],total:null}),this.basket}},{key:"isProductInBasket",value:function(e){var t=this.getBasket();return!(!t||!e)&&(t.groups||[]).some((function(t){return(t.rows||[]).some((function(t){return t.externalId===e}))}))}},{key:"hasMaxCartItemById",value:function(e){return!!this.isProductInBasket(e)&&this.getBasket().groups.map((function(t){return t.rows.find((function(t){return t.externalId===e})).nrOfItems}))[0]>=S.AL}},{key:"handleCheckout",value:function(e){var t=e.checkout;this.checkingOut!==t&&(this.checkingOut=t,this.hasChanges=!0,this.emitChange())}},{key:"_clearChanges",value:function(){this.hasChanges&&(this.hasChanges=!1,this.emitChange())}},{key:"handleSelectTool",value:function(e){var t=e.tool;if(1==!!e.clientSelectedTool){var n=this.dispatcher.getStore("ToolStore").previousTool;("cart"===t||"cart"===n&&n!==t)&&this._clearChanges()}}},{key:"handleDeselectTool",value:function(e){1==!!e.clientDeSelectedTool&&"cart"===this.dispatcher.getStore("ToolStore").previousTool&&this._clearChanges()}},{key:"handleRemoveTools",value:function(){this._clearChanges()}},{key:"hydrate",value:function(e){var t,n,r=this;null!=e&&null!==(t=e.basket)&&void 0!==t&&null!==(n=t.products)&&void 0!==n&&n.length&&e.reason===S.JC.REASON_TRANSFER_CALL&&this.dispatcher.waitFor("ProductStore",(function(){var t=r.getBasket();t.groups=[{uuid:(0,$a.Z)(),rows:e.basket.products}],r._calculateTotal(t),r.emitChange()}))}},{key:"getStoreData",value:function(e){var t=[];if(this.getBasket().groups.forEach((function(e){e.rows&&e.rows.length&&e.rows.forEach((function(e){e.nrOfItems&&t.push(e)}))})),e===S.JC.REASON_TRANSFER_CALL)return{products:t}}}]),i}(cu.Z);Sd.storeName="BasketStore",Sd.handlers=sn().invert({handlePrepareNewCallSession:S.Nb.PREPARE_NEW,handleAddToCart:S.dA.ADD_TO_CART,handleRemoveBasket:S.dA.REMOVE,handleLoading:S.dA.LOADING,handleReceived:S.dA.RECEIVED,handleBasketError:S.dA.ERROR,handleCheckout:S.dA.CHECKOUT,handleSelectTool:S.Ie.SELECT,handleDeselectTool:S.Ie.DESELECT,handleRemoveTools:S.Ie.REMOVE_ALL,hydrate:S.JC.HYDRATE});var Td=Sd;var bd=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(){return o()(this,i),r.apply(this,arguments)}return l()(i,[{key:"handleDispatchAny",value:function(e,t){this.emit(t,e)}}]),i}(cu.Z);bd.storeName="DispatchStore",bd.handlers=sn().invert({handleDispatchAny:"default"});var _d=bd;function yd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yd(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xd=S.LS.TEXT_CHAT,Od=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this,e)).status=S.kp.DISCONNECTED,t.previousStatus=null,t.metadata=null,t.fontSize="normal",t.clientPlatform=null,t.agentPlatform=null,t.mediaTransport=null,t.problemIndicator={remote:!1,local:!1,message:null},t.paused=!1,t.connectLinksEntrypointUrl=null,t.initialMode=xd,t.merchantIntegration=null,t._visibilityState=null,t.streamCaptureImage=null,t.isShowingMediaGuide=!1,t}return l()(i,[{key:"clientStream",get:function(){return this.dispatcher.getStore("MediaStreamStore").getLocalMediaStream()}},{key:"isRemoteBusy",get:function(){var e,t;return(null===(e=this._visibilityState)||void 0===e?void 0:e.videoIsMuted)&&"hidden"===(null===(t=this._visibilityState)||void 0===t?void 0:t.state)}},{key:"isRemoteTabHidden",get:function(){var e;return"hidden"===(null===(e=this._visibilityState)||void 0===e?void 0:e.state)}},{key:"handleSessionStatusChange",value:function(e){this.status!==e.status&&(e.status===S.kp.RECONNECTING&&this.status!==S.kp.RECONNECTING?this.previousStatus=this.status:e.status!==S.kp.RUNNING&&e.status!==S.kp.PAUSED||(this.previousStatus=null),this.status=e.status,this.status===S.kp.PAUSED?this.paused=!0:this.paused&&this.status===S.kp.RUNNING&&(this.paused=!1),this.emitChange(),this.emit("change:status",this.status))}},{key:"handleRestoreSessionStatus",value:function(){this.status!==this.previousStatus&&null!==this.previousStatus&&(this.status=this.previousStatus,this.previousStatus=null,this.emitChange(),this.emit("change:status",this.status))}},{key:"handleFontSize",value:function(e){this.fontSize!==e.fontSize&&(this.fontSize=e.fontSize,this.emitChange())}},{key:"handlePrepareNewCallSession",value:function(){this.metadata=null,this.fontSize="normal",this.clientPlatform=null,this.agentPlatform=null,this.mediaTransport=null,this.problemIndicator={remote:!1,local:!1,message:null},this.paused=!1,this.connectLinksEntrypointUrl=null,this.initialMode=xd,this.merchantIntegration=null,this._visibilityState=null,this.streamCaptureImage=null,this.isShowingMediaGuide=!1,this.emitChange()}},{key:"handleSessionMetadata",value:function(e){this.metadata!=e&&(this.metadata=e,this.emitChange())}},{key:"handleSessionAddMetadata",value:function(e){this.metadata=Cd(Cd({},this.metadata),e),this.emitChange()}},{key:"handleClientPlatform",value:function(e){this.clientPlatform=e,this.emitChange()}},{key:"handleAgentPlatform",value:function(e){this.agentPlatform=e,this.emitChange()}},{key:"handleMediaTransport",value:function(e){this.mediaTransport=e,this.emitChange()}},{key:"handleProblemIndicator",value:function(e){e.remote?(this.problemIndicator.remote=e.visible,this.problemIndicator.local||(this.problemIndicator.message=e.message)):(this.problemIndicator.local=e.visible,this.problemIndicator.message=e.message),this.emitChange()}},{key:"handleConnectLinksEntrypointUrl",value:function(e){e&&e!==this.connectLinksEntrypointUrl&&(this.connectLinksEntrypointUrl=e,this.emitChange())}},{key:"handleInitialMode",value:function(e){(e||xd)!==this.initialMode&&(this.initialMode=e,this.emitChange())}},{key:"handleMerchantIntegration",value:function(e){this.merchantIntegration=e,this.emitChange()}},{key:"handleVisibilityChange",value:function(e){this._visibilityState=e,this.emitChange()}},{key:"handleStreamCaptureImage",value:function(e){e.capturedImage&&(this.streamCaptureImage=e.capturedImage)}},{key:"handleIsShowingMediaGuide",value:function(e){this.isShowingMediaGuide=e.status,this.emitChange()}},{key:"getStatus",value:function(){return this.status}},{key:"getSessionId",value:function(){return this.metadata&&this.metadata.sessionId?this.metadata.sessionId:null}},{key:"getMetadata",value:function(){return this.metadata}},{key:"getClientInputHasBeenEnabled",value:function(){return ze(this.clientStream)||Ve(this.clientStream)}},{key:"hasEnabledVideo",value:function(){return this.getClientInputHasBeenEnabled()||this.initialMode!==S.LS.TEXT_CHAT}},{key:"getClientPlatform",value:function(){return this.clientPlatform}},{key:"getAgentPlatform",value:function(){return this.agentPlatform}},{key:"getFontSize",value:function(){return this.fontSize}},{key:"getMediaTransport",value:function(){return this.mediaTransport}},{key:"shouldShowProblemIndicator",value:function(){return this.problemIndicator.local||this.problemIndicator.remote}},{key:"getProblemIndicator",value:function(){return this.problemIndicator}},{key:"isPaused",value:function(){return this.paused}},{key:"getConnectLinksEntrypointUrl",value:function(){return this.connectLinksEntrypointUrl}},{key:"getMerchantIntegration",value:function(){return this.merchantIntegration}},{key:"getStreamCaptureImage",value:function(){return this.streamCaptureImage}}]),i}(cu.Z);Od.storeName="CallSessionStore",Od.handlers=sn().invert({handleSessionStatusChange:S.Nb.STATUS,handleRestoreSessionStatus:S.Nb.STATUS_RESTORE,handleFontSize:S.Nb.FONT_SIZE,handlePrepareNewCallSession:S.Nb.PREPARE_NEW,handleSessionMetadata:S.Nb.METADATA,handleSessionAddMetadata:S.Nb.ADD_METADATA,handleClientPlatform:S.Nb.CLIENT_PLATFORM,handleAgentPlatform:S.Nb.AGENT_PLATFORM,handleMediaTransport:S.Nb.MEDIA_TRANSPORT,handleProblemIndicator:S.Nb.PROBLEM_INDICATOR,handleConnectLinksEntrypointUrl:S.Nb.CONNECT_LINKS_ENTRYPOINT_URL,handleInitialMode:S.Nb.INITIAL_MODE,handleMerchantIntegration:S.Nb.MERCHANT_INTEGRATION,handleVisibilityChange:S.Lb.VISIBILITY_CHANGE,handleStreamCaptureImage:S.Nb.SET_STREAM_CAPTURE_IMAGE,handleIsShowingMediaGuide:S.Nb.SHOW_MEDIA_GUIDE});var Id=Od;var Ad=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(e){var t;return o()(this,i),t=r.call(this,e),v()(s()(t),"_isLocalEvent",(function(e){return 1==!!e})),v()(s()(t),"handleExpandedProductMenu",(function(e){return t.expandedProductMenu.item!==e.item&&(t.expandedProductMenu={item:e.item}),t.emitChange()})),v()(s()(t),"getExpandedProductMenu",(function(){return t.expandedProductMenu})),v()(s()(t),"handleCreateToast",(function(e){t.toasts.push(e),t.emitChange()})),v()(s()(t),"handleDeleteToast",(function(){t.toasts.shift(),t.emitChange()})),v()(s()(t),"handleVTO",(function(e){var n=e.idList,r=e.action;null!=n&&n.length?r!==S.B0.TRY_ON_REMOVE&&t.handleSelectTool("vto"):t.handleDeselectTool()})),v()(s()(t),"handleToolOverlay",(function(e){var n=e.show;t.showToolOverlay!==n&&(t.showToolOverlay=n,t.emitChange())})),t.currentTool=null,t.toolSelectedByRemoteParty=null,t.previousTool=null,t.availableTools=[],t.expandedProductMenu={item:null},t.toasts=[],t.showToolOverlay=!1,t.dispatcher.getStore("VirtualTryOnStore").on("tryOnChange",t.handleVTO),t}return l()(i,[{key:"_handleSelectToolForRemoteParty",value:function(e){this.toolSelectedByRemoteParty=e,this.emit("remoteToolChange",e)}},{key:"handleSelectTool",value:function(e){var t=e.tool,n=e.clientSelectedTool;this._isLocalEvent(n)?t!==this.getCurrentTool()&&(this.previousTool=this.currentTool,this.currentTool=t,this.showToolOverlay=!1,this.currentTool&&!this.availableTools.includes(this.currentTool)&&this.availableTools.push(this.currentTool),this.emit("toolChange",this.getCurrentTool()),this.emitChange()):this._handleSelectToolForRemoteParty(t)}},{key:"handleDeselectTool",value:function(e){var t=e.clientDeSelectedTool,n=void 0!==t&&t;this._isLocalEvent(n)?(this.previousTool=this.currentTool,this.currentTool&&(this.currentTool=null,this.emit("toolChange"),this.emitChange())):this._handleSelectToolForRemoteParty()}},{key:"handleRemoveAllTool",value:function(){this.previousTool=null,this.currentTool=null,this.availableTools=[],this.showToolOverlay=!1,this.toolSelectedByRemoteParty=null,this.emitChange()}},{key:"handlePrepareNewCallSession",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.booking,e.isStarting,this.currentTool=null,this.previousTool=null,this.toolSelectedByRemoteParty=null,this.availableTools=[],this.showToolOverlay=!1,this.expandedProductMenu={item:null},this.emitChange()}},{key:"getCurrentTool",value:function(){var e=this.dispatcher.getStore("VirtualTryOnStore").isVTOActive&&(0,q.isMobileDevice)();return this.currentTool||e&&"vto"}},{key:"hasToolOverlay",value:function(){return this.showToolOverlay}}]),i}(cu.Z);Ad.storeName="ToolStore",Ad.handlers=sn().invert({handleSelectTool:S.Ie.SELECT,handleDeselectTool:S.Ie.DESELECT,handleRemoveAllTool:S.Ie.REMOVE_ALL,handlePrepareNewCallSession:S.Nb.PREPARE_NEW,handleExpandedProductMenu:S.pX.EXPANDED_PRODUCT_MENU,handleCreateToast:S.Ie.CREATE_TOAST,handleDeleteToast:S.Ie.DELETE_TOAST,handleToolOverlay:S.Ie.SET_TOOL_OVERLAY});var Nd=Ad;function wd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(84633);var Rd=function(){function e(t,n,r){var i=this;o()(this,e),v()(this,"handleSelectTool",(function(e){(0,q.isMobileDevice)()&&(e?i.compareStore.visible&&(i.compareStore.collapsed||(i.lastActiveTool=i.toolStore.getCurrentTool(),i.context.executeAction(oe,{collapsed:!0}))):i.lastActiveTool=null)})),v()(this,"handleCompareVisibility",(function(){if((0,q.isMobileDevice)()){var e=i.compareStore.visible,t=i.compareStore.collapsed;if(e&&!t){var n=i.toolStore.getCurrentTool();i.context.executeAction(k),setImmediate((function(){i.lastActiveTool=n}))}else if(i.lastActiveTool){if(i.lastActiveTool===i.toolStore.getCurrentTool())return;i.context.executeAction(R,i.lastActiveTool)}}})),this.tools=new Map,this.context=n,this.toolStore=r,this.compareStore=this.context.getStore("CompareStore"),this.toolStore.on("toolChange",this.handleSelectTool),this.compareStore.on("visibilityChange",this.handleCompareVisibility),this.compareStore.on("collapseChange",this.handleCompareVisibility)}return l()(e,[{key:"registerTool",value:function(e,t,n){this.tools.set(e,{identifier:e,name:t,Component:n}),this.toolStore.emitChange()}},{key:"getTool",value:function(e){if(e)return this.tools.get(e)}},{key:"getTools",value:function(){var e,t=[],n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return wd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wd(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}(this.tools.values());try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r)}}catch(e){n.e(e)}finally{n.f()}return t}}]),e}();Rd.serviceName="toolService",Rd.inject=["ToolStore"],Rd.actionExports=["getTools"],Rd.componentExports=["getTools","getTool"];var kd=Rd;function Ld(e,t){e.dispatchLocalAndRemote(S.Uf.RECEIVED,t)}function Dd(e,t){e.dispatchLocalAndRemote(S.Uf.IS_TYPING,t)}var Pd=n(44778);function Md(e,t){var n=t.url;return e.externalInterfaceService.emitToEmbedInstance("navigate-to",{url:n})}function Bd(e){return jd.apply(this,arguments)}function jd(){return(jd=xe()(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(Jl.Z.scraperAPI,"?publicUrl=").concat(t)).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(97314),(0,sr.Z)({container:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",border:"1px solid rgba(239, 239, 239, 1)",borderRadius:"4px",background:"rgba(255, 255, 255, 1)",padding:"8px",position:"relative",cursor:"pointer",height:"28px",minWidth:"40px",flexShrink:"0","&:hover":{borderColor:"rgba(42, 42, 42, 1)"},"&:disabled":{borderColor:"rgba(239, 239, 239, 1)","& p":{color:"rgba(0, 0, 0, 0.3)"}}},text:{animation:"none",fontSize:"12px",fontWeight:"500",lineHeight:"16px",margin:"0"}})((function(e){var t=e.classes,n=e.className,r=e.disabled,i=e.onClick,o=e.showLoader,a=e.label,l=I()(t.container,n);return E.createElement("button",{onClick:function(e){e.stopPropagation(),i&&!r&&i(e)},disabled:r,className:l,"aria-label":a},o?E.createElement(Q.aN,{style:{height:"10px",width:"10px"},color:"black"}):E.createElement(Q.xv,{className:t.text},a))}));var Ud=function(e){var t,n,i,o,a,l,c=e.product,s=e.selectedId,u=void 0===s?"":s,d=e.onClick,p=e.className,m=e.classes,f=(e.onClickAdd,e.addingProductId),h=void 0===f?null:f,g=e.error,v=e.renderRemoveButton,T=e.isProductInDrawer,b=e.getVerifiedExternalId,_=(e.ctaLabel,e.cardType),y=(0,r.bp)(),C=(0,E.useState)(!1),x=ee()(C,2),O=x[0],A=x[1],N=(0,E.useState)(!1),w=ee()(N,2),R=w[0],k=w[1],L=(0,E.useState)(!1),D=ee()(L,2),P=D[0],M=D[1],B=(0,E.useRef)(),j=(null==c||null===(t=c.price)||void 0===t?void 0:t.current)&&y.getFormattedPrice(c),U=(null==c?void 0:c.thumbnail)||(null==c||null===(n=c.image)||void 0===n||null===(i=n.front)||void 0===i?void 0:i.url)||(null==c?void 0:c.imageUrl),G=(null==c?void 0:c.name)||(null==c?void 0:c.title),F="".concat((null==c?void 0:c.externalId)||(null==c?void 0:c.sku)||(null==c?void 0:c.id)),W=(T(b(F)),!!h&&h!==T||R),H=u.toString()===F.toString(),V=null==c||null===(o=c.price)||void 0===o?void 0:o.original,z=null==c||null===(a=c.price)||void 0===a?void 0:a.current,Z=!!V&&V!==z,Y=(0,gi.V4)(c),K="addProductToolCard"===p,q="chatMe"===p,X="chatRemote"===p,J=q||X,$=(0,jo.Z)();(0,E.useEffect)((function(){h===F&&A(!0),O&&null===h&&null===g&&(A(!1),k(!0),l=setTimeout((function(){$()&&k(!1)}),3e3)),g&&O&&null===h&&$()&&A(!1)}),[h,g,O,$]),(0,E.useEffect)((function(){return function(){return clearTimeout(l)}}),[]);var te=function(){M(!0)},ne=I()(m.container,p,W&&m.disabled,H&&m.selected,K&&m.addProductToolCard,J&&m.chatContainer,q&&m.chatContainerMe,X&&m.chatContainerRemote),re=I()(m.price,Z&&m.currentPriceOnSale),ie=I()(m.price,m.originalPrice),oe={imageStyle:{backgroundColor:"#fff",borderRadius:"4px",width:J?"64px":"56px",height:J?"64px":"56px",boxShadow:"0px 14px 19px -5px rgba(0, 0, 0, 0.16)"},saleTag:{left:"4px",bottom:"4px"}};return E.createElement("li",{className:ne,ref:B,onFocus:te,onBlur:function(e){B.current&&!B.current.contains(e.relatedTarget)&&M(!1)},onMouseOver:te,onMouseLeave:function(){M(!1)},"data-testid":"product-card","data-productid":c.externalId||c.sku,"data-json":JSON.stringify(c)},E.createElement(Q.L9,{onClick:function(){if(!W&&!O)return d(c)},disabled:W,className:m.clickableContainer,"aria-labelledby":"".concat(F).concat(_," ").concat(F).concat(_,"price"),"data-testid":"product-card-clickable"}),E.createElement("div",{className:m.leftContent},!!v&&P&&!(null==c||!c.id)&&v(c.id),E.createElement(Q.S3,{src:U,size:S.Si.THUMBNAIL,style:oe.imageStyle,ariaHidden:!0,className:m.imageContainer}),Z&&E.createElement(vi.Z,{position:oe.saleTag})),E.createElement("div",{className:m.info},E.createElement(Q.u,{text:G,placement:"top",width:250},E.createElement(Q.xv,{className:m.title,id:"".concat(F).concat(_)},G)),!!Y&&E.createElement(Q.xv,{className:m.attributes},Y),(null==c?void 0:c.price)&&E.createElement("div",{className:m.priceWrapper},E.createElement(Q.xv,{type:"secondary",className:re,id:"".concat(F).concat(_,"price")},j),Z&&E.createElement(Q.xv,{type:"secondary",className:ie},y.getFormattedPrice(c,{field:"original"})))),!1)};Ud.propTypes={product:di().shape({price:di().shape({currency:di().string.isRequired,current:di().number,original:di().number})})};var Gd=(0,N.Z)((function(){return{container:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",margin:"0 8px",padding:"8px",borderRadius:"4px",transition:"all .1s linear",cursor:"pointer",animation:"fadeIn 0.5s 1",width:"auto",height:"76px","&:focus":{zIndex:1},position:"relative"},clickableContainer:{position:"absolute",top:0,left:0,right:0,bottom:0},chatContainer:{backgroundColor:"#FFFFFF"},chatContainerMe:{width:"100%",margin:"8px 0 0 0"},chatContainerRemote:{width:"100%",margin:"8px 0 0 0"},leftContent:{display:"flex",justifyContent:"center",alignItems:"center",position:"relative",zIndex:1},addProductToolCard:{"&:hover":{background:"#F9F9F9"}},imageContainer:{margin:"10px 0 10px 10px",borderRadius:"4px",boxShadow:"0px 14px 19px -5px rgba(0, 0, 0, 0.16)",border:"1px solid rgba(0, 0, 0, 0.02)",backgroundColor:"#fff"},disabled:{cursor:"not-allowed"},selected:{background:"#F9F9F9"},info:{display:"flex",alignItems:"flex-start",flexDirection:"column",margin:"0 24px 0 8px",overflowX:"hidden",flex:1},title:{maxWidth:"100%",textAlign:"left",whiteSpace:"nowrap",textOverflow:"ellipsis",fontSize:"12px",lineHeight:"16px",margin:"0px",fontWeight:500,overflow:"hidden"},attributes:{maxWidth:"100%",whiteSpace:"nowrap",textOverflow:"ellipsis",fontSize:"12px",lineHeight:"16px",fontWeight:400,overflow:"hidden",margin:"0px"},priceWrapper:{display:"flex",flexDirection:"row",flexWrap:"wrap"},price:{marginTop:"4px",fontSize:"12px",lineHeight:"15px",margin:"0px",fontWeight:500},originalPrice:{marginLeft:"4px",color:"#000",textDecoration:"line-through",opacity:.7},currentPriceOnSale:{color:"#971D33"},rightContent:{padding:"5px 0",flexShrink:0},previewIcon:{height:15},compareIcon:{height:15}}}))((0,w.ZP)(Ud,["ProductDrawerStore","ProductStore"],(function(e){return{isProductInDrawer:function(t){return e.ProductDrawerStore.isSignificantProductVariantInDrawer(t)},getVerifiedExternalId:function(t){return e.ProductStore.getVerifiedExternalId(t)}}})));function Fd(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Wd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wd(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function Wd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Hd=function(e){var t=e.message,n=e.handleClick,r=e.className,i=(0,E.useState)([]),o=ee()(i,2),a=o[0],l=o[1];return(0,E.useEffect)((function(){var e=function(){var e=xe()(ye().mark((function e(){var n,r,i,o,a,c,s,u,d;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Pd.N1.match(t),r=null==n?void 0:n.map((function(e){return e.url})),i=Pi()(new Set(r)),o=[],a=Fd(i);try{for(a.s();!(c=a.n()).done;)"string"==typeof(s=c.value)&&s.startsWith("http")&&o.push(Bd(s))}catch(e){a.e(e)}finally{a.f()}return e.next=8,Promise.allSettled(o);case 8:u=e.sent,d=[],u.forEach((function(e){"fulfilled"===e.status?d.push(e.value):"rejected"===e.status&&console.warn("Failed to scrape url",e.reason)})),l(d);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),a.filter((function(e){var t=e.title,n=e.thumbnail;return!!t&&!!n})).map((function(e){return E.createElement(Gd,{key:e.sku||e.id,onClick:n,className:r,product:e,cardType:"chat"})}))},Vd=(0,N.Z)({link:{textDecoration:"underline",cursor:"pointer",border:0,padding:0,backgroundColor:"transparent",textAlign:"left"}})((function(e){var t=e.message,n=e.isFromMe,i=e.classes,o=(0,r.bp)(),a=(o.settings,o.executeAction),l=o.getStore,c=o.isRtlLanguage,s=function(e){var t,n;if(e){var r=null===(t=l("CallSessionStore").getMerchantIntegration())||void 0===t||null===(n=t.coBrowsing)||void 0===n?void 0:n.enabled;if(e.includes("bambuserConnectId")||!r)return window.open(e,"_blank");var i,o,c=null===(i=l("CallSessionStore").getMerchantIntegration())||void 0===i||null===(o=i.merchant)||void 0===o?void 0:o.baseUrl;u(e,[new URL(c).host])?a(Md,{url:e}):window.open(e,"_blank")}},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=new URL(e);if(t.includes(n.host))return!0;for(var r=n.host.split(".");r.length>1;)if(r.shift(),t.includes(r.join(".")))return!0;return!1},d="message ".concat(n?"me":"remote"),p="chat".concat(n?"Me":"Remote");return E.createElement("div",{className:d,style:{textAlign:c()?"right":"left"}},E.createElement("span",{className:i.text},E.createElement(Pd.ZP,{component:"button",properties:{onClick:function(e){s(e.target.innerHTML)},className:i.link}},t)),E.createElement(Hd,{message:t,handleClick:function(e){s(e.publicUrl)},className:p}))}));var zd=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(){return o()(this,i),r.apply(this,arguments)}return l()(i,[{key:"render",value:function(){var e,t=this.props,n=t.data,r=t.chatRole,i=t.agent,o=(t.client,t.showMessageMetadata),a=t.sameSender,l=n.date,c=n.src,s=n.message,u=new Date(l).toLocaleTimeString(this.context.settings.get("language.locale"),{hour:"2-digit",minute:"2-digit"}),d=c===r,p=I()("message-wrapper",{me:d,"without-meta-data":!o,"same-sender":a});!d&&i.imageUrl&&(e=E.createElement("img",{className:"avatar",src:i.imageUrl,alt:this.context.getText("AGENT_IMAGE_ALT_TEXT")}));var m=d?this.context.getText("CHAT_MESSAGE_FROM_YOU"):i.name;return E.createElement("div",{className:p},o&&E.createElement("div",{className:"message-meta"},e,"".concat(m," ").concat(u)),E.createElement(Vd,{message:s,isFromMe:d}))}}]),i}(x),Zd=zd;var Yd=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(){return o()(this,i),r.apply(this,arguments)}return l()(i,[{key:"render",value:function(){var e=this.props.agent.imageUrl,t=this.props.agent.name;return this.props.client,E.createElement("div",{className:"agent-massage"},e&&E.createElement("img",{src:e,alt:this.context.getText("AGENT_IMAGE_ALT_TEXT")}),E.createElement("div",{className:"message-wrapper"},E.createElement("div",{className:"message-meta"},t),E.createElement("div",{className:"message remote"},E.createElement("span",{className:"text typing-indicator"},E.createElement("span",null),E.createElement("span",null),E.createElement("span",null)))))}}]),i}(x),Kd=Yd;function qd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Qd={container:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qd(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},(0,re.EZ)())},Xd=(0,N.Z)(Qd)((function(e){var t,n=e.messages,r=e.isTyping,i=e.classes,o=Or()(e,["messages","isTyping","classes"]),a=(0,E.useRef)();(0,E.useEffect)((function(){var e=a.current;e.scrollTop=e.scrollHeight}),[n.length]);var l=n.map((function(e,r){var i,a;r>0&&(a=n[r-1]);var l=e.date,c=!0,s=e.src===(null===(i=a)||void 0===i?void 0:i.src);return s&&new Date(l)<=t?c=!1:t=new Date(new Date(l).getTime()+3e5),E.createElement(Zd,lo()({},o,{key:r,data:e,showMessageMetadata:c,sameSender:s}))})),c=I()("message-list",i.container);return E.createElement("div",{ref:a,className:c,"data-testid":"chat-message-list"},l,r&&E.createElement(Kd,o))}));var Jd=(0,q.mobileSafariNewerOrEqualTo)(15)&&!(0,q.mobileSafariNewerOrEqualTo)(15.1),$d=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(e,t){var n;return o()(this,i),n=r.call(this,e,t),v()(s()(n),"_handleKeyDown",(function(e){13===e.keyCode&&n._handleSubmit(e)})),v()(s()(n),"_onChange",(function(){return n.context.executeAction(Dd,{src:n.props.chatRole})})),v()(s()(n),"_handleSubmit",(function(e){e.preventDefault();var t=n.messageInput.current,r=t.value.trim();r.length>0&&n.context.executeAction(Ld,{message:r,src:n.props.chatRole,date:(new Date).toISOString()}),t.value="";var i=document.getElementById("chat-messages");i.scrollTop=i.scrollHeight})),v()(s()(n),"onFocusIOS150Fix",(function(){n.containerRef.current.style.height="calc(100vh - 52px)"})),v()(s()(n),"onBlurIOS150Fix",(function(){n.containerRef.current.style.height="100vh"})),v()(s()(n),"onAnimationComplete",(function(e){"open"===e&&n.messageInput.current.focus()})),n.messageInput=E.createRef(),n.containerRef=E.createRef(),n}return l()(i,[{key:"componentDidMount",value:function(){this.context.executeAction(Fa.yF,{type:S.Kr.CHAT})}},{key:"render",value:function(){var e="chat",t=(0,q.isIOS)();this.props.className&&(e+=" ".concat(this.props.className)),(0,q.isTabletDevice)()&&(e+=" tablet");var n=this.props,r=n.clientData,i=n.callMetadata,o={name:this.context.getText("CHAT_AGENT_NAME_FALLBACK"),imageUrl:null};i&&i.agentDisplayName&&(o.name=i.agentDisplayName),i&&i.agentImageUrl&&(o.imageUrl=i.agentImageUrl);var a={name:this.context.getText("CHAT_MESSAGE_FROM_CLIENT")};r&&(r.firstName||r.name)&&(a.name=r.firstName||r.name);var l=Jd?this.onFocusIOS150Fix:void 0,c=Jd?this.onBlurIOS150Fix:void 0,s=I()("inner-wrapper",{comparing:this.props.compareIsOpen});return E.createElement("div",{className:e,style:this.props.style,"data-testid":"chat"},E.createElement("div",{className:"chat-container",ref:this.containerRef},E.createElement("div",{className:s,id:"chat-messages"},E.createElement(Xd,{chatRole:this.props.chatRole,isTyping:this.props.isTyping,messages:this.props.messages,agent:o,client:a})),(0,q.isMobileDevice)()?E.createElement("div",{className:"mobile-chat-input"},E.createElement(Q.II,{ariaLabel:"",placeholder:this.context.getText("CHAT_MESSAGE_PLACEHOLDER"),onChange:this._onChange,onFocus:l,onBlur:c,onKeyDown:this._handleKeyDown,"data-testid":"chat-input",ref:this.messageInput,useLocalValue:!1,value:this.messageInput.value,elementRight:E.createElement(Q.EU,{path:{stroke:"#171717"},svg:{width:"14px",height:"9px"},direction:"right",testId:"send-chat-message"}),style:{background:"#ffffff"},rightStyle:{alignItems:"center",justifyContent:"center"},onClickElementRight:this._handleSubmit})):E.createElement("div",{className:"input-section"},E.createElement("textarea",{rows:"1",className:"messageInput ".concat(t?"is-iphone":""),onChange:this._onChange,placeholder:this.context.getText("CHAT_MESSAGE_PLACEHOLDER"),ref:this.messageInput,onKeyDown:this._handleKeyDown,onFocus:l,onBlur:c,"data-testid":"chat-input"}),E.createElement(Q.zx,{type:"secondary","aria-label":this.context.getText("COMMON_CHAT_SEND"),onClick:this._handleSubmit,"data-testid":"send-chat-message"},this.context.getText("COMMON_CHAT_SEND")))))}}]),i}(x);$d.propTypes={messages:di().array,chatRole:di().string};var ep=$d=(0,w.ZP)($d,["ChatStore","ViewportStore","CallSessionStore","ToolStore","CompareStore"],(function(e){var t=dd,n=e.ChatStore.isTyping(t);return{chatRole:t,videoCallEnabled:e.CallSessionStore.hasEnabledVideo(),callMetadata:e.CallSessionStore.getMetadata(),clientData:e.ClientInfoStore?e.ClientInfoStore.getData():null,messages:e.ChatStore.getMessages(),isTyping:n,compareIsOpen:e.CompareStore.visible}}));function tp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var np={container:{display:"flex",height:"100%",flexDirection:"column"},shopperInputForm:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tp(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({flex:1,overflow:"auto",margin:"0 -16px",padding:"0 16px"},(0,re.EZ)()),paragraph:{fontWeight:400,fontSize:12,lineHeight:"20px",color:"#171717",marginBottom:"16px"},btn:{marginTop:"16px","&:disabled":{borderColor:"#CCCCCC",backgroundColor:"#CCCCCC","& span":{color:"#FFFFFF"}},"& span":{fontSize:"14px",lineHeight:"20px"}}},rp=(0,N.Z)(np)((0,w.S1)((function(e){var t=e.classes,n=(0,r.bp)(),i=n.getText,o=n.settings,a=n.getStore,l=(0,E.useState)(o.get("shopperInformationForm.formInputs",[])),c=ee()(l,2),s=c[0],u=c[1],d=s.filter((function(e){return!(null==e||!e.type)})).map((function(e){return e.hasOwnProperty("value")||(e.value=a("ClientStore").getStringValueFor(e.key)),e}));return E.createElement("div",{className:t.container},E.createElement("div",{className:t.shopperInputForm},E.createElement(Q.xv,{className:t.paragraph},i("SHOPPER_INPUT_FORM_REQUEST",i("AGENT_SINGULAR"))),E.createElement(Q.xv,{className:t.paragraph},i("SHOPPER_IN_CALL_INPUT_FORM_INSTRUCTIONS")),E.createElement($s,{onUpdate:function(e){var t=s.slice();t.find((function(t){t.key===e.target.name&&(t.value=e.target.value)})),u(t)},inputs:d})),E.createElement(Q.zx,{className:t.btn,type:"primary",disabled:!s.some((function(e){var t;return(null===(t=e.value)||void 0===t?void 0:t.length)>0})),onClick:function(){}},i("GENERAL_BUTTON_SAVE")))}),["ClientStore.metadata:updated"],(function(){}))),ip=(n(91058),function(e){var t=e.nrOfItems,n=e.handleSaveNrOfItems,i=e.editDisabled,o=e.hasPermissionToEdit,a=(0,r.bp)(),l=(0,E.useState)(null),c=ee()(l,2),s=c[0],u=c[1],d=(0,E.useState)(!1),p=ee()(d,2),m=p[0],f=p[1],h=function(e){if(!i){var r=parseInt(e);if(e>S.AL)return f(!0);u(null),f(!1),isNaN(r)||r.length<=0||s!==t&&n(r)}};return o?E.createElement("div",{className:"basket-amount"},E.createElement(Q.L9,{className:"quantity-button","data-testid":"basket-row-item-decrease",onClick:function(){return h(t-1)},disabled:t<=0||i,ariaLabel:a.getText("CART_PRODUCT_QUANTITY_DECREASE")},E.createElement(Q.HF,{type:"small",color:"#171717"})),E.createElement("input",{type:"number",min:"0",value:null!==s?s:t,disabled:i,onChange:function(e){var t=parseInt(e.target.value);if(!(isNaN(t)||t.length<=0||t<0))return t>S.AL?(f(!0),void u(S.AL)):(m&&f(!1),u(t))},onKeyUp:function(e){13===e.keyCode&&e.target.blur()},onBlur:function(){return h(s)},"aria-label":a.getText("CART_PRODUCT_QUANTITY_ARIA_LABEL")}),E.createElement(Q.L9,{className:"quantity-button","data-testid":"basket-row-item-increase",onClick:function(){return h(t+1)},disabled:i||t===S.AL,ariaLabel:a.getText("CART_PRODUCT_QUANTITY_INCREASE")},E.createElement(Q.dt,{type:"small",color:"#171717"})),m&&E.createElement(To,{className:"basket-warning",text:"AGENT_BASKET_MAX_ITEM_AMOUNT_MESSAGE"})):null});var op=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(){var e;o()(this,i);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return e=r.call.apply(r,[this].concat(n)),v()(s()(e),"_saveItems",(function(t){isNaN(t)||e.props.data.nrOfItems!==t&&e.props.updateRow(e.props.data,{nrOfItems:t})})),v()(s()(e),"openPDA",(function(){var t,n;e.props.compareIsOpen||e.context.executeAction(ln.P8,{externalId:null===(t=e.props)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.externalId})})),v()(s()(e),"removeRowFromBasket",(function(){e.props.data.preventOpen||e.context.executeAction(hi.bl,{externalId:e.props.data.externalId})})),e}return l()(i,[{key:"render",value:function(){var e,t,n=this.props,r=n.basket,i=n.data,o=n.compareIsOpen,a=n.viewOnly,l=void 0!==a&&a,c=n.checkingOut,s=n.coBrowseEnabled,u=n.productHydrationEnabled,d=i.externalId,p=i.nrOfItems,m=this.context.getStore("ProductStore").getProductByExternalId(d),f=this.context.getStore("CallSessionStore").getStatus();if(!m)return null;var h,g,v=!l,T=(null==m?void 0:m.url)&&s||u,b=this.context.getText(m.name),_="",y=m.price,C=void 0===y?null:y,x=m.inStock,O=void 0===x||x;if(null!==C)try{_=this.context.getFormattedPrice(m),C.original&&C.current!==C.original&&(h=this.context.getFormattedPrice(m,{field:"original"}))}catch(e){console.warn("Failed to format price",C,e.message)}!this.props.viewOnly&&r.updatingRows&&r.updatingRows.some((function(e){return e.externalId===d}))&&(g=E.createElement("div",{className:"loader-holder"},E.createElement(Q.aN,{type:"small"})));var I=!!g||r.isLoading||c||f!==S.kp.RUNNING;return E.createElement("li",null,E.createElement("ul",{className:"basket-row","data-testid":"cart-row","data-externalid":d},E.createElement("li",{className:"left-column"},E.createElement("ul",null,E.createElement("li",{className:"image-holder"},E.createElement(Q.L9,{ariaLabel:b,onClick:this.openPDA,disabled:o||!T},E.createElement(Q.S3,{style:{maxHeight:"64px",borderRadius:"4px"},size:S.Si.THUMBNAIL,src:(null===(e=m.image)||void 0===e||null===(t=e.front)||void 0===t?void 0:t.thumbnailUrl)||Va,altName:b}))),E.createElement("li",{className:"product-info"},E.createElement("div",null,E.createElement("div",{className:"product-header truncate-multi-line"},E.createElement(Q.L9,{disabled:o||!T,ariaLabel:m.brandName,onClick:this.openPDA,tabIndex:-1},b)),m.brandName&&E.createElement("div",{className:"product-brand"},E.createElement(Q.L9,{className:"truncate-single-line",ariaLabel:m.brandName,disabled:o||!T,onClick:this.openPDA,tabIndex:-1},m.brandName)),Object.keys(m.attributes).filter((function(e){return m.attributes[e].isConfigurable&&m.attributes[e].value})).map((function(e){return E.createElement("div",{key:e,className:"item-attribute truncate-single-line"},E.createElement("span",null,m.attributes[e].value))})),O&&E.createElement("div",{className:"total"},E.createElement("span",{className:"".concat(h?"sale ":""," current")},_),E.createElement("span",{className:"original"},h))||E.createElement(Q.u,{text:_},E.createElement("div",{className:"total sold-out"},E.createElement("span",null,this.context.getText("AGENT_TOOL_PANEL_INFO_PRODUCT_OUT_OF_STOCK")))),E.createElement("div",{className:"product-bottom"},O&&this.props.cartIntegrationEnabled&&E.createElement(ip,{nrOfItems:p,handleSaveNrOfItems:this._saveItems,editDisabled:I,hasPermissionToEdit:v}),!this.props.cartIntegrationEnabled&&p>1&&E.createElement("div",null,p),v&&this.props.cartIntegrationEnabled&&E.createElement(Q.L9,{className:"remove-from-cart",disabled:I,"data-testid":"remove-from-cart-".concat(d),onClick:this.removeRowFromBasket},this.context.getText("AGENT_REMOVE"))))))),g))}}]),i}(x),ap=op=(0,w.S1)(op,["CallSessionStore"],(function(e){var t=e.CallSessionStore.getMerchantIntegration();return{cartIntegrationEnabled:sn().get(t,"cartIntegration.enabled",!1),coBrowseEnabled:sn().get(t,"coBrowsing.enabled",!1),productHydrationEnabled:sn().get(t,"productHydration.enabled",!1)}}));function lp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var cp={container:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lp(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},(0,re.EZ)())},sp=(0,N.Z)(cp)((function(e){var t=e.data,n=void 0===t?{}:t,r=e.basket,i=e.addChildRow,o=e.updateRow,a=e.compareIsOpen,l=e.checkingOut,c=e.classes,s=n.rows,u=void 0===s?[]:s,d=n.name,p=void 0===d?"":d,m=u.map((function(e){return E.createElement(ap,{key:e.externalId,basket:r,data:e,addChildRow:i,updateRow:o,compareIsOpen:a,checkingOut:l})})),f=I()("basket-list",c.container,{comparing:a});return E.createElement("div",{className:f},E.createElement("div",{className:"group","data-name":p},E.createElement("ul",null,m)))})),up=(0,N.Z)((function(){return{container:{display:"flex",alignItems:"center",background:"#E82F2C",borderRadius:"4px",border:"1px solid rgba(0, 0, 0, 0.04)",justifyContent:"space-between",padding:"16px"},message:{color:"#FFFFFF",fontSize:"12px",lineHeight:"16px",margin:"0 8px 0 0"}}}))((function(e){var t=e.message,n=e.onClose,r=e.classes,i=e.style,o=void 0===i?{}:i;return E.createElement("div",{className:r.container,style:o,onClick:n},E.createElement(Q.xv,{className:r.message},t),E.createElement(Q.zx,{type:"icon",icon:"close",size:"soloIcon",iconColor:"white"}))}));var dp=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(){var e;o()(this,i);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return e=r.call.apply(r,[this].concat(n)),v()(s()(e),"goToCheckout",(function(){e.context.executeAction(hi.ru)})),v()(s()(e),"closeErrorAlert",(function(t){e.context.executeAction(hi.TZ,{key:t})})),e}return l()(i,[{key:"animationVariants",get:function(){return(0,q.isMobileDevice)()?{created:{opacity:0,translateY:window.innerHeight},visible:{opacity:1,display:"",translateY:0},hidden:{opacity:0,translateY:window.innerHeight,transitionEnd:{display:"none"}},destroy:{opacity:0,translateY:window.innerHeight}}:pu()(h()(i.prototype),"animationVariants",this)}},{key:"getOrderReference",value:function(){return this.props.basket.remoteId}},{key:"_onUpdateRow",value:function(e,t,n){var r=sn().cloneDeep(t);sn().merge(r,n,(function(e,t){if(sn().isArray(t))return t})),this.context.executeAction(hi.eB,{row:r})}},{key:"render",value:function(){var e=this,t=E.createElement("div",{className:"center-wrapper",style:{margin:"auto"}},E.createElement(Bi,{label:this.context.getText("BAG_EMPTY_LABEL")}));this.props.basket.isLoading&&(t=E.createElement("div",{className:"center-wrapper"},E.createElement(Q.aN,null)));var n,r=this.props.basket.total;try{n=r?this.context.getFormattedPrice(r):""}catch(e){console.warn("Failed to format total basket price",r,e.message)}return this.props.basket.groups.length&&(t=this.props.basket.groups.map((function(t,n){return E.createElement(sp,{basket:e.props.basket,data:t,ref:"group_".concat(n),key:n,compareIsOpen:e.props.compareIsOpen,checkingOut:e.props.checkingOut,updateRow:e._onUpdateRow.bind(e,t)})}))),E.createElement("div",{className:"basket-panel"},E.createElement("div",{className:"content","data-testid":"cart"},t,this.props.basketErrors&&E.createElement("div",{className:"basket-alerts"},Object.keys(this.props.basketErrors).map((function(t){var n,r=null===(n=e.props.basketErrors[t])||void 0===n?void 0:n.message;if(r)return E.createElement(up,{key:t,message:r,onClose:function(){return e.closeErrorAlert(t)}})}))),E.createElement("div",{className:"order-button--wrapper".concat(t.length?"":" empty")},!!n&&E.createElement("div",{className:"group-info"},E.createElement("ul",{className:"result"},E.createElement("li",null,this.context.getText("AGENT_BASKET_TOTAL")),E.createElement("li",{"data-testid":"cart-total"},n))),E.createElement(Q.zx,{size:"slim",disabled:!this.props.numberOfItems,type:"submit",onClick:this.goToCheckout,"data-testid":"cart-checkout-button"},this.context.getText("CHECKOUT_BUTTON_LABEL"))),this.props.checkingOut&&E.createElement("div",{className:"checkout-notice","data-testid":"cart-checkout-notice"},this.context.getText("CLIENT_IS_CHECKING_OUT"))))}}]),i}(x);dp.UnwrappedComponent=dp;var pp=dp=(0,w.ZP)(dp,["BasketStore","CompareStore.visibilityChange"],(function(e){return{basket:e.BasketStore.getBasket(),checkingOut:e.BasketStore.checkingOut,basketErrors:e.BasketStore.errors,numberOfItems:e.BasketStore.numberOfBasketItems,compareIsOpen:e.CompareStore.visible}})),mp=(0,sr.Z)({container:{display:"flex",justifyContent:"center",alignItems:"center",position:"relative"},disabled:{opacity:.3,cursor:"default"},circle:{borderRadius:"100%",position:"absolute",width:"100%",height:"100%",border:"1px solid transparent"},border:{border:"1px solid #2A2A2A"},removeBorder:{border:"none",boxShadow:"inset 0px 1px 2px 1px rgba(0, 0, 0, 0.12)"},innerCircle:{borderRadius:"100%"},innerCircleShadow:{boxShadow:"inset 0px 1px 2px 1px rgba(0, 0, 0, 0.12), inset 0px 0.5px 2px 0.5px rgba(0, 0, 0, 0.12), inset 0px 0px 0px 1px rgba(0, 0, 0, 0.16)"}})((function(e){var t,n,r,i,o,a=e.colors,l=void 0===a?[]:a,c=e.colorId,s=e.className,u=e.classes,d=e.onSelectColor,p=e.fill,m=e.showBorder,f=e.tooltipText,h=e.showPointer,g=void 0!==h&&h,v=e.size,S=void 0===v?32:v,T=e.disabled,b=I()(u.container,T&&u.disabled,s),_=I()(u.innerCircle,!p&&u.innerCircleShadow,p&&u.removeBorder),y=I()(u.circle,m&&u.border),C={height:S,width:S},x=p?S:Math.round(.75*S),O={background:(r=360/l.length/360*100,i=l.map((function(e,t){var n=Math.round(r*t),i=Math.round(r*(t+1));return"".concat(e," ").concat(n,"% ").concat(i,"%")})),o="conic-gradient(".concat(i.join(","),")"),null!==(t=window.CSS)&&void 0!==t&&null!==(n=t.supports)&&void 0!==n&&n.call(t,"background: ".concat(o))?o:"linear-gradient(90deg, ".concat(i.join(","),")")),height:x,width:x};return E.createElement(Q.u,{text:f||"",disabled:!f,width:120},E.createElement(Q.L9,{onClick:function(){d&&!T&&d(c)},className:b,style:C,cursorPointer:g,tabIndex:d&&!T?0:-1},E.createElement("span",{className:y}),E.createElement("span",{className:_,style:O})))})),fp=(0,sr.Z)({wrapper:{width:"24px",height:"24px",display:"flex",justifyContent:"center",alignItems:"center"}})((function(e){var t=e.classes;return E.createElement("div",{className:t.wrapper},E.createElement(Q.aN,{type:"small",position:"relative",style:{width:15,height:15}}))})),hp=(0,sr.Z)({container:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",border:"1px solid #E0E0E0",borderRadius:"4px",background:"rgba(255, 255, 255, 1)",padding:"8px",position:"relative",cursor:"pointer",height:"28px",minWidth:"50px",flexShrink:"0",pointerEvents:"auto","&:hover":{borderColor:"rgba(42, 42, 42, 1)"}},disabled:{cursor:"not-allowed",borderColor:"rgba(239, 239, 239, 1)","&:hover":{borderColor:"rgba(239, 239, 239, 1)"},"& p":{color:"rgba(0, 0, 0, 0.3)"}},text:{animation:"none",fontSize:"12px",fontWeight:"500",lineHeight:"16px",margin:"0"}})((function(e){var t=e.classes,n=e.className,i=e.label,o=e.loading,a=void 0!==o&&o,l=e.disabled,c=void 0!==l&&l,s=e.onClick,u=(0,r.bp)().getText,d=I()(t.container,c&&t.disabled,n),p=I()(t.text);return E.createElement(Q.L9,{onClick:function(e){e.stopPropagation(),s&&!c&&s(e)},disabled:c,className:d,ariaLabel:u(i||"VIRTUAL_TRY_ON_BUTTON_LABEL")},a?E.createElement(Q.aN,{position:"relative",style:{width:12,height:12}}):E.createElement(Q.xv,{className:p},u(i||"VIRTUAL_TRY_ON_BUTTON_LABEL")))})),gp=n(87938);function vp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(0,sr.Z)({container:{width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",userSelect:"none",padding:"16px",position:"relative"},containerHover:{"&:hover .try-on-button":{display:"flex"},"&:hover .color-circle":{display:"none"},"&:hover .remove-try-on":{display:"inherit"}},leftContent:{display:"flex",alignItems:"center",marginRight:"auto"},circle:{flexShrink:0},removeButton:{display:"none",position:"absolute",top:"-4px",left:"-4px",borderRadius:"50%",border:"1px solid #E0E0E0",width:"24px",height:"24px",alignItems:"center",justifyContent:"center",transition:"border-color 0.2s",backgroundColor:"#ffffff","&:hover":{borderColor:"#444444"}},tryOnButton:{display:"none"},activeTryOn:{"& p":{color:"#DC1B71"}},textWrapper:{marginLeft:12,display:"flex",flexDirection:"column"},title:{margin:0,color:"rgba(42, 42, 42, 1)",fontSize:"12px",fontWeight:"500",lineHeight:"16px"},subtitle:{margin:0,color:"rgba(42, 42, 42, 1)",fontSize:"12px",fontWeight:"400",lineHeight:"16px"},rightContent:{marginLeft:"auto",display:"flex",alignItems:"center",flexShrink:0},imageWrapper:{position:"relative"},activeIndicator:{left:49,top:-5,height:10,width:10,border:"1px solid #FFFFFF",position:"absolute",borderRadius:"100%",backgroundColor:"#D90866"}})((0,w.A1)((function(e){var t=e.title,n=e.subtitle,i=e.image,o=e.selectedColors,a=e.externalId,l=e.classes,c=e.toggleOpenSelector,s=e.isExpanded,u=e.isActive,d=void 0===u||u,p=e.viewProductEnabled,m=e.isProductLoaded,f=(0,r.bp)(),h=f.executeAction,g=f.getText,v=I()(l.container,!s&&l.containerHover),T=I()("color-circle",l.circle),b=I()("try-on-button",l.tryOnButton,d&&l.activeTryOn),_=I()("remove-try-on",l.removeButton);return E.createElement(Q.L9,{className:v,onClick:c,tabIndex:s?-1:0},E.createElement(Q.L9,{className:_,onClick:function(){h(Yr,{id:a,hide:!0})},ariaLabel:g("VIRTUAL_TRY_ON_REMOVE_FROM_TRY_ON")},E.createElement(Q.aM,{color:"#171717",type:"small",style:{width:"9px",height:"9px"}})),E.createElement("div",{className:l.leftContent},E.createElement("div",{className:l.imageWrapper},d&&E.createElement("span",{className:l.activeIndicator}),E.createElement(Q.u,{text:g("VIEW_PRODUCT"),placement:"top",delay:1,disabled:!p},E.createElement(Q.L9,{disabled:!p,onClick:function(e){e.stopPropagation(),h(ln.P8,{externalId:a})},ariaLabel:g("VIEW_PRODUCT")},E.createElement(gp.Z,{src:i,size:S.Si.THUMBNAIL,style:{borderRadius:"4px",border:"1px solid #EDEDED",width:54,height:54,minWidth:54,minHeight:54},ariaHidden:!0})))),E.createElement("div",{className:l.textWrapper},m?E.createElement(E.Fragment,null,E.createElement(Q.xv,{className:l.title},t),E.createElement(Q.xv,{className:l.subtitle},n)):E.createElement(Q.xv,{className:l.title},g("AGENT_VIRTUAL_TRY_ON_LOADING_LABEL")))),E.createElement("div",{className:l.rightContent},m?E.createElement(E.Fragment,null,E.createElement(mp,{size:24,className:T,colors:o,fill:!0}),E.createElement(hp,{onClick:function(){h(d?Yr:Kr,{id:a})},label:g(d?"VIRTUAL_TRY_ON_BUTTON_LABEL_ACTIVE":"VIRTUAL_TRY_ON_BUTTON_LABEL"),className:b})):E.createElement(fp,null)))}),["CallSessionStore","ProductStore"],(function(e,t){var n,r=e.CallSessionStore.getMerchantIntegration(),i=sn().get(r,"productHydration.enabled",!1),o=sn().get(r,"coBrowsing.enabled",!1),a=!(null===(n=e.ProductStore.getProductByExternalId(null==t?void 0:t.externalId))||void 0===n||!n.url);return{viewProductEnabled:i||o&&a}})));var Ep={container:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vp(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({display:"flex",width:"100%",flexDirection:"column"},(0,re.pv)()),wrapper:{display:"flex",flexDirection:"row"},infoWrapper:{display:"flex",flexDirection:"column",marginLeft:12,alignItems:"flex-start",width:"100%"},mobileInfoWrapper:{flexDirection:"row",alignItems:"center"},circle:{marginTop:"12px"},mobileCircle:{marginTop:"0px"},productInfo:{display:"flex",flexDirection:"column",justifyContent:"center",height:"100%",flex:1},title:{margin:"0 0 2px 0",fontSize:"14px",fontWeight:"500",color:"#171717",lineHeight:"20px"},mobileTitle:{fontSize:"12px",lineHeight:"16px",color:"#000000"},subtitle:{margin:"0 0 2px 0",fontSize:"12px",fontWeight:"400",color:"#171717",lineHeight:"16px"},priceLabels:{display:"flex",flexDirection:"row"},price:{margin:0,color:"#171717",fontWeight:"500",fontSize:"12px",lineHeight:"16px"},sale:{margin:0,fontWeight:"500",fontSize:"12px",lineHeight:"16px",color:"#E81740",display:"inline-flex"},oldPrice:{margin:"0 0 0 4px",color:"#171717",fontWeight:"500",fontSize:"12px",lineHeight:"16px",textDecoration:"line-through",display:"inline-flex"},loaderText:{textAlign:"center",margin:"0 0 4px 0",fontWeight:"500",fontSize:"12px",lineHeight:"16px",color:"#171717"},mobileLoaderText:{textAlign:"start",margin:"0 0 0 12px"},loaderWrapper:{margin:12,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",width:"100%"},mobileLoaderWrapper:{margin:0,flexDirection:"row",justifyContent:"space-between"}},Sp=(0,sr.Z)(Ep)((function(e){var t,n,i,o,a,l,c=e.externalId,s=e.selectedColors,u=e.isProductLoaded,d=e.recentProduct,p=e.classes,m=(0,r.bp)(),f=m.getText,h=m.getStore,g=m.executeAction,v=m.getFormattedPrice,T=h("ProductStore").getProductByExternalId(c),b=(null==T?void 0:T.thumbnail)||(null==T||null===(t=T.image)||void 0===t||null===(n=t.front)||void 0===n?void 0:n.url)||(null==T?void 0:T.imageUrl)||"",_=(null==T?void 0:T.name)||(null==T?void 0:T.title)||"",y=null==T||null===(i=T.attributes.find((function(e){return"Color"===e.name||"color"===e.type})))||void 0===i?void 0:i.value,C=(null==T?void 0:T.price)&&v(T),x="";null!==(o=T.price)&&void 0!==o&&o.original&&(null===(a=T.price)||void 0===a?void 0:a.current)!==(null===(l=T.price)||void 0===l?void 0:l.original)&&(x=v(T,{field:"original"}));var O=d||(0,q.isMobileDevice)(),A=function(){switch(!0){case(0,q.isMobileDevice)():return"40px";case d:return"64px";default:return"114px"}},N={borderRadius:"4px",border:"1px solid #EDEDED",width:A(),height:A(),minWidth:A(),minHeight:A()},w=I()(p.title,(0,q.isMobileDevice)()&&p.mobileTitle),R=I()(p.infoWrapper,O&&p.mobileInfoWrapper),k=I()(p.circle,O&&p.mobileCircle),L=I()(p.loaderWrapper,(0,q.isMobileDevice)()&&p.mobileLoaderWrapper),D=I()(p.loaderText,(0,q.isMobileDevice)()&&p.mobileLoaderText),P=E.createElement(mp,{className:k,colors:s,size:24,fill:!0});return E.createElement(Q.L9,{ariaLabel:_,onClick:function(){g(ln.P8,{externalId:c})},className:p.container},E.createElement("div",{className:p.wrapper},E.createElement(Q.S3,{src:b,size:S.Si.THUMBNAIL,style:N,ariaHidden:!0}),u?E.createElement("div",{className:R},E.createElement("div",{className:p.productInfo},E.createElement(Q.xv,{className:w,truncateAt:160},_),!!y&&!(0,q.isMobileDevice)()&&E.createElement(Q.xv,{className:p.subtitle,truncateAt:160},y),E.createElement("div",{className:p.priceLabels},!!C&&E.createElement(Q.xv,{className:x?p.sale:p.price},C),!!x&&E.createElement(Q.xv,{className:p.oldPrice},x)),!O&&P),O&&P):E.createElement("div",{className:L},E.createElement(Q.xv,{className:D,truncateAt:(0,q.isMobileDevice)()&&200},f("CLIENT_VIRTUAL_TRY_ON_LOADING_LABEL")),E.createElement(fp,null))))}));function Tp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tp(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(0,sr.Z)({container:{padding:"0 0 16px 0"},optionClassName:{padding:"0 8px",color:"#4C4C4C"},selectedOptionClassName:{background:"#F2F2F2",color:"#000","&:hover":{background:"#F2F2F2",color:"#000"}},disabledOptionClassName:{opacity:.3},circle:{marginRight:8}})((function(e){var t,n=e.colors,i=e.onSelectColor,o=e.selected,a=e.classes,l=(0,r.bp)().getText,c=null==n?void 0:n.map((function(e){return bp(bp({},e),{},{element:E.createElement(mp,{colors:e.colorCodes,className:a.circle,size:20,showPointer:!0,fill:!0})})}));return E.createElement("div",{className:a.container},E.createElement(Q.A1,{useInStockLabel:!1,displayDisabledOptions:!0,maxListHeight:250,disabledOptionClassName:a.disabledOptionClassName,selectedOptionClassName:a.selectedOptionClassName,optionClassName:a.optionClassName,className:a.selectContainerClass,label:l("VTO_COLOR_LABEL"),selectedValue:o||(null===(t=n[0])||void 0===t?void 0:t.sku),onChange:function(e){i&&i(e)},list:c||[],keyValue:"sku",keyLabel:"colorLabel"}))})),(0,sr.Z)({container:{position:"relative",display:"flex",flexDirection:"row",flexWrap:"wrap"},withColors:{margin:"-2px -6px 11px -6px"},circleWrapper:{display:"flex",justifyContent:"center",alignItems:"center",margin:"2px"}})((function(e){var t=e.onSelectColor,n=e.selected,r=e.colors,i=void 0===r?[]:r,o=e.classes,a=I()(o.container,i.length>0&&o.withColors);return E.createElement("div",{className:a},i.map((function(e){return E.createElement("span",{key:e.sku,className:o.circleWrapper},E.createElement(mp,{disabled:e.disabled,colorId:e.sku,tooltipText:e.colorLabel,showBorder:e.sku===n,colors:e.colorCodes,onSelectColor:t,showPointer:!0}))})))})),(0,sr.Z)({container:{padding:"0 0 16px 0"},optionClassName:{padding:"0 8px",color:"#4C4C4C"},selectedOptionClassName:{background:"#F2F2F2",color:"#000","&:hover":{background:"#F2F2F2",color:"#000"}},img:{marginRight:8,height:"16px",width:"24px"}})((function(e){var t,n=e.patterns,i=e.onSelectPattern,o=e.selectedPattern,a=e.classes,l=(0,r.bp)().getText;if((null==n?void 0:n.length)<1)return null;var c=null==n?void 0:n.map((function(e){var t=e.patternThumbnail,n=e.patternName;return{patternGUID:e.patternGUID,patternName:n,element:E.createElement("img",{className:a.img,src:t,alt:n})}}));return E.createElement("div",{className:a.container},E.createElement(Q.A1,{maxListHeight:250,useInStockLabel:!1,selectedOptionClassName:a.selectedOptionClassName,optionClassName:a.optionClassName,className:a.selectContainerClass,label:l("VTO_PATTERN_LABEL"),selectedValue:o||(null===(t=n[0])||void 0===t?void 0:t.patternGUID),onChange:function(e){i&&i(e)},list:c||[],keyValue:"patternGUID",keyLabel:"patternName"}))}));var _p=(0,sr.Z)({container:{height:28,display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0px 0px 1px rgba(0, 0, 0, 0.04), 0px 2px 6px rgba(0, 0, 0, 0.04), 0px 24px 48px rgba(0, 0, 0, 0.06)",borderRadius:"4px",margin:"4px",transition:"background 0.2s","&:hover":{background:"#EFEFEF"}},containerSelected:{background:"#2a2a2a","&:hover":{background:"#444444"}},label:{userSelect:"none",padding:"8px 12px",fontSize:"12px",fontWeight:"400",lineHeight:"16px",transition:"color 0.2s",color:"#171717"},labelSelected:{color:"#FFFFFF"}})((function(e){var t=e.label,n=e.id,r=e.isSelected,i=e.onFilterSelected,o=e.classes,a=I()(o.container,r&&o.containerSelected),l=I()(o.label,r&&o.labelSelected);return E.createElement(Q.L9,{onClick:function(){i&&i(n)},className:a,ariaLabel:t},E.createElement(Q.xv,{className:l},t))}));function yp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yp(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(0,sr.Z)({container:{display:"flex",flexDirection:"row",flexWrap:"wrap",margin:"0 -4px"},hasTags:{marginBottom:16},hidden:{display:"none"},title:{margin:"0 0 8px 0",color:"#171717",fontWeight:500,fontSize:"12px",lineHeight:"16px"}})((function(e){var t=e.selectedFilter,n=void 0===t?"":t,r=e.tags,i=void 0===r?[]:r,o=e.onFilterSelected,a=e.hide,l=void 0!==a&&a,c=e.classes,s=e.title,u=I()(c.container,i.length>0&&!l&&c.hasTags,l&&c.hidden);return E.createElement(E.Fragment,null,s&&!l&&E.createElement(Q.xv,{className:c.title},s),E.createElement("div",{className:u},i.map((function(e){return E.createElement(_p,{id:e,key:e,label:e,isSelected:n===e,onFilterSelected:o})}))))})),(0,sr.Z)((function(){return{container:{width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},tryOnButton:{marginRight:8},activeTryOn:{"& p":{color:"#DC1B71"}},leftContent:{display:"flex",alignItems:"center",marginRight:"auto"},rightContent:{marginLeft:"auto",display:"flex",alignItems:"center",flexShrink:0}}}))((0,w.ZP)((function(e){var t=e.classes,n=e.externalId,i=e.productInDrawer,o=e.inCompare,a=e.isActive,l=e.cartIntegrationEnabled,c=(0,r.bp)(),s=c.getText,u=c.executeAction,d=I()(t.tryOnButton,a&&t.activeTryOn),p=[l&&{identifier:S.Js.CART,text:s("PRODUCT_CONTEXT_MENU_ADD_TO_CART"),icon:E.createElement(Q.w7,{color:"#171717"}),onClick:function(){u(hi.n9,{externalId:n})}},{identifier:"compare",text:s(o?"PRODUCT_CONTEXT_MENU_COMPARE_REMOVE":"PRODUCT_CONTEXT_MENU_COMPARE"),icon:o?E.createElement(Q.aM,{type:"sharp",color:"#171717"}):E.createElement(Q.J_,{color:"#171717"}),onClick:function(){u(o?ue:se,{externalId:n})}},{identifier:"remove-tryon",text:s("VIRTUAL_TRY_ON_REMOVE_FROM_TRY_ON"),icon:E.createElement(Q.aM,{type:"sharp",color:"#171717"}),onClick:function(){u(Yr,{id:n,hide:!0}),u(L,{show:!1})}}].filter(Boolean);return E.createElement("div",{className:t.container},E.createElement("div",{className:t.leftContent},E.createElement(hp,{onClick:function(){u(a?Yr:Kr,{id:n})},label:s(a?"VIRTUAL_TRY_ON_BUTTON_LABEL_ACTIVE":"VIRTUAL_TRY_ON_BUTTON_LABEL"),className:d}),E.createElement(hp,{onClick:function(){i?u(Oi.eg,{externalId:n}):u(Oi.K,{externalId:n,confirmed:!0})},label:s(i?"VIRTUAL_TRY_ON_REMOVE_FROM_DRAWER_LABEL":"VIRTUAL_TRY_ON_ADD_TO_DRAWER_LABEL")})),E.createElement("div",{className:t.rightContent},E.createElement(zr,{options:p})))}),["CompareStore","ProductDrawerStore","CallSessionStore"],(function(e,t){var n,r;return{productInDrawer:e.ProductDrawerStore.isProductInDrawer(t.externalId),inCompare:e.CompareStore.isProductInCompare(t.externalId),cartIntegrationEnabled:null===(n=e.CallSessionStore.getMerchantIntegration())||void 0===n||null===(r=n.cartIntegration)||void 0===r?void 0:r.enabled}})));var xp=(0,E.forwardRef)((function(e,t){e.patterns;var n,i=e.colorSet,o=e.classes,a=e.isProductLoaded,l=(e.selectedPattern,e.externalId),c=e.isExpanded,s=(e.isActive,e.recentProduct),u=(0,r.bp)(),d=(u.executeAction,u.getStore),p=(u.getText,null==i||null===(n=i.find((function(e){return(null==e?void 0:e.sku)===l})))||void 0===n?void 0:n.colorCodes),m=(d("ProductStore").getProductByExternalId(l),(0,E.useState)("")),f=ee()(m,2),h=f[0],g=(f[1],Pi()(new Set((i||[]).filter((function(e){return!!e.category})).map((function(e){return e.category})))),null==i||i.map((function(e){return Cp(Cp({},e),{},{disabled:!(null==e||!e.category)&&h===e.category})})),I()(o.container,c&&o.containerOpen,(0,q.isMobileDevice)()&&o.mobileContainer,o.clientContainer));return E.createElement("div",{className:g,"data-testid":"virtual-try-on-selector",ref:t},!1,E.createElement(Sp,{externalId:l,selectedColors:p,isProductLoaded:a,recentProduct:s}))})),Op=(0,sr.Z)({container:{width:"100%",backgroundColor:"#FFFFFF",border:"1px solid #F6F6F6",boxShadow:"0px 6px 8px rgba(0, 0, 0, 0.04)",borderRadius:"8px",marginBottom:"4px"},clientContainer:{border:"1px solid transparent",marginBottom:"12px",padding:"12px",boxShadow:"0px 8px 8px rgba(0, 0, 0, 0.02), 0px 4px 8px rgba(0, 0, 0, 0.02), 0px 2px 4px rgba(0, 0, 0, 0.03), 0px 0px 1px rgba(0, 0, 0, 0.04)","&:hover":{border:"1px solid #EFEFEF",boxShadow:"0px 24px 32px rgba(0, 0, 0, 0.04), 0px 16px 24px rgba(0, 0, 0, 0.04), 0px 4px 8px rgba(0, 0, 0, 0.04), 0px 0px 1px rgba(0, 0, 0, 0.04)"}},mobileContainer:{border:"none",boxShadow:"none",marginBottom:"0px",padding:"0 0 8px","&:hover":{border:"none",boxShadow:"none"}},containerOpen:{boxShadow:"0px 32px 16px rgba(0, 0, 0, 0.06), 0px 8px 12px rgba(0, 0, 0, 0.06)"},controlsWrapper:{width:"100%"},controls:{padding:"0 16px 16px 16px"}})((0,w.ZP)(xp,["VirtualTryOnStore","CallSessionStore","ProductStore"],(function(e,t){var n,r=t.tryOnId,i=e.VirtualTryOnStore.getPerfectCorpProductPatterns(r),o=e.VirtualTryOnStore.getPatternUsedBySku(r);return i.some((function(e){return e.patternGUID===o}))||(o=null===(n=i[0])||void 0===n?void 0:n.patternGUID),{externalId:r,patterns:i,selectedPattern:o,colorSet:e.VirtualTryOnStore.getPerfectCorpColorSet(r),isProductLoaded:e.VirtualTryOnStore.isProductLoaded(r),isActive:e.VirtualTryOnStore.isTryingOnProduct(r),isExpanded:e.VirtualTryOnStore.isProductExpanded(r)}}))),Ip=(0,sr.Z)({container:{width:"100%"},header:{marginBottom:"12px",marginTop:0,fontSize:"12px",fontWeight:500,lineHeight:"12px",letterSpacing:"0.01em",color:"#000000"},mobileHeader:{marginBottom:"8px",fontSize:"14px",lineHeight:"20px",color:"#171717"}})((function(e){var t=e.products,n=e.classes,i=(0,r.bp)().getText,o=(0,E.useState)(),a=ee()(o,2),l=a[0],c=a[1],s=I()(n.header,(0,q.isMobileDevice)()&&n.mobileHeader);return t&&t.length?E.createElement("div",{className:n.container},E.createElement(Q.xv,{className:s},i("RECENTLY_TRIED_ON_PRODUCTS")),E.createElement("div",null,t.slice(0,3).map((function(e){return E.createElement(Op,{key:e,tryOnId:e,recentProduct:!0})}))),t.length>3&&E.createElement(Q.UQ,{style:{margin:0,width:"auto"}},E.createElement(Q.Qd,{style:{display:"flex",alignItems:"center",flexDirection:"column"},title:i(l?"SHOW_LESS":"SHOW_ALL"),headerStyle:{fontSize:"12px",color:"#171717",lineHeight:"16px",textDecoration:"underline",marginRight:"8px"},headerButtonStyle:{width:"auto",height:"auto",margin:"8px 0 16px 0",border:"none",padding:0},contentStyle:{width:"100%"},open:l,collapseFromBottom:!0,maxContent:!0,onClickExternal:function(){return c(!l)}},t.slice(3).map((function(e){return E.createElement(Op,{key:e,tryOnId:e,recentProduct:!0})}))))):null}));(0,N.Z)((function(){return{addProductsButton:{marginTop:"16px",color:"#171717",borderColor:"#E0E0E0","&:disabled":{borderColor:"#EFEFEF",backgroundColor:"#ffffff","& span":{color:"rgba(23, 23, 23, 0.3)"}},"&:not(:disabled):hover":{color:"#171717",borderColor:"#444444",background:"#ffffff"},"& span":{fontSize:"14px"}}}}))((0,w.ZP)((function(e){var t=e.productHydrationEnabled,n=e.classes,i=e.disabled,o=void 0!==i&&i,a=(0,r.bp)(),l=a.getText,c=a.executeAction;return t?E.createElement(Q.zx,{disabled:o,className:n.addProductsButton,type:"secondary",onClick:function(){return c(void 0,{visible:!0})}},l("AGENT_TOOL_ADD_PRODUCT_TITLE")):null}),["CallSessionStore","AgentCallControlStore.addProductToolVisiblity:change"],(function(e){return{disabled:e.AgentCallControlStore.addProductIsOpen,productHydrationEnabled:_.get(e.CallSessionStore.getMerchantIntegration(),"productHydration.enabled",!1)}})));var Ap={container:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",height:"auto",width:"100%",position:"relative"},mobileContainer:{maxHeight:"35vh",padding:"16px"},activeList:{width:"100%",marginBottom:(0,q.isMobileDevice)()?"16px":"20px","&:empty":{marginBottom:0}},empty:{justifyContent:"center",alignItems:"center",height:"100%"},emptyLabelWrapper:{margin:"32px","& > p":{marginBottom:"20px"}},emptyLabel:{fontSize:"14px",lineHeight:"20px"},emptyLabelForAgent:{margin:"0 32px"}},Np=(0,sr.Z)(Ap)((0,w.ZP)((function(e){var t=e.products,n=e.recentProducts,i=e.classes,o=(e.categories,e.focusedProduct),a=e.isOpen,l=(0,r.bp)(),c=l.executeAction,s=l.getText,u=(0,E.useRef)([]);(0,E.useEffect)((function(){if(a&&o){var e=null==u?void 0:u.current[o];e&&(function(e){if(!e)return!1;var t=e.getBoundingClientRect();return!!t&&t.top>=0&&t.left>=0&&t.bottom<=Ar()&&t.right<=Ir()}(e)||e.scrollIntoView({behavior:"smooth"}),c(Xr,{id:null}))}}),[c,o,a]);var d=I()(i.container,t.length<=0&&n.length<=0&&i.empty,(0,q.isMobileDevice)()&&i.mobileContainer);return E.createElement("div",{className:d,"data-testid":"virtual-try-on"},t.length<=0?E.createElement("div",{className:i.emptyLabelWrapper},E.createElement(Bi,{style:Ap.emptyLabel,label:s("VTO_EMPTY_LABEL_FOR_CLIENT")}),E.createElement(Bi,{style:Ap.emptyLabel,label:s("VTO_ASK_TO_TRY_ON",s("AGENT_SINGULAR"))})):E.createElement("div",{className:i.activeList},t.map((function(e){return E.createElement(Op,{key:e,tryOnId:e})}))),n.length>0&&E.createElement(Ip,{products:n}))}),["VirtualTryOnStore"],(function(e){return{products:e.VirtualTryOnStore.tryOnIds||[],recentProducts:e.VirtualTryOnStore.inActiveTryOnIds||[],categories:e.VirtualTryOnStore.categories,focusedProduct:e.VirtualTryOnStore.focusedProduct}})));var wp=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(e){var t,n,a;o()(this,i),t=r.call(this,e),v()(s()(t),"handleTryOn",(function(e){var n=e.idList;(null==n?void 0:n.length)>0||(t.alteredLocalMediaStreams.delete(S.lo.VIRTUAL_TRY_ON),t.emitChange())})),t.localMediaStreams=[$e(S.lo.CAMERA)],t.audioPermission=!1,t.cameraPermission=!1,t.prepareScreenShareStream(),t.alteredLocalMediaStreams=new Map,t.remoteMediaStreams=[],t.remoteMediaStreamStates=[],t.remoteMediaStreamPlaying=!1,t.mediaDevices=[],t.defaultCameraDeviceId=null,t.defaultMicrophoneDeviceId=null,t.audioOutputMediaDevice=null,t.status=null;try{t.audioOutput=(n=new Audio,a=new MediaStream,n.srcObject=a,{audioOutput:n,play:function(){return n.play()},setSinkId:function(e){return n.setSinkId(e)},replaceTracks:function(e){null==a||a.getAudioTracks().forEach((function(e){return a.removeTrack(e)})),(e||[]).forEach((function(e){return a.addTrack(e)})),n.play()}})}catch(e){console.log("Failed to inialize audio output",e)}var l=function(e){e?(t.audioPermission=!0,t.emitChange()):!1===e&&(t.audioPermission=!1,t.emitChange())},c=function(e){e?(t.cameraPermission=!0,t.emitChange()):!1===e&&(t.cameraPermission=!1,t.emitChange())};return nt("microphone",(function(){return nt("microphone").then(l)})).then(l),nt("camera",(function(){return nt("camera").then(c)})).then(c),t.dispatcher.getStore("VirtualTryOnStore").on("tryOnChange",t.handleTryOn),t}return l()(i,[{key:"availbleMediaDevices",get:function(){return this.mediaDevices.filter((function(e){return!!e.deviceId}))}},{key:"audioOutputMediaDeviceId",get:function(){var e=this.getMediaDevices("audiooutput");return this.audioOutputMediaDevice||e.length?(this.audioOutputMediaDevice||e[0]).deviceId:""}},{key:"allRemoteAudioTracks",get:function(){var e=[];return this.remoteMediaStreams.forEach((function(t){t&&(e=e.concat(t.getAudioTracks()))})),e}},{key:"activeLocalCameraStream",get:function(){return this.localVirtualStream||this.localMediaStreams[S.lo.CAMERA]}},{key:"localCameraStreams",get:function(){return this.localVirtualStreams.concat(this.getLocalMediaStream())}},{key:"localVirtualStream",get:function(){return this.localVirtualTryOnStream||this.localVirtualBackgroundStream}},{key:"localVirtualBackgroundStream",get:function(){return this.alteredLocalMediaStreams.get(S.lo.VIRTUAL_BACKGROUND)}},{key:"localVirtualTryOnStream",get:function(){return this.alteredLocalMediaStreams.get(S.lo.VIRTUAL_TRY_ON)}},{key:"localVirtualStreams",get:function(){return Array.from(this.alteredLocalMediaStreams.values())}},{key:"publishableLocalMediaStreams",get:function(){return this.localVirtualStream?[this.localVirtualStream].concat(this.localMediaStreams.filter((function(e,t){return t!==S.lo.CAMERA}))):this.localMediaStreams}},{key:"hasAudioPermission",get:function(){return this.audioPermission}},{key:"hasCameraPermission",get:function(){return this.cameraPermission}},{key:"isCameraOn",get:function(){return Ve(this.getLocalMediaStream(S.lo.CAMERA))}},{key:"isMicOn",get:function(){return ze(this.getLocalMediaStream(S.lo.CAMERA))}},{key:"prepareScreenShareStream",value:function(){}},{key:"handleReceivedLocalStream",value:function(e){var t=this,n=e||{},r=n.type,i=void 0===r?S.lo.CAMERA:r,o=n.stream;switch(o&&(ze(o)&&(this.audioPermission=!0),Ve(o)&&(this.cameraPermission=!0)),i){case S.lo.VIRTUAL_BACKGROUND:case S.lo.VIRTUAL_TRY_ON:this.alteredLocalMediaStreams.set(i,o);break;case S.lo.CAMERA:if(this.localMediaStreams[i]=o,!this.localVirtualStream)break;o&&Array.from(this.alteredLocalMediaStreams.keys()).forEach((function(e){var n=t.alteredLocalMediaStreams.get(e);n&&t.alteredLocalMediaStreams.set(e,new MediaStream(n.getVideoTracks().concat(o.getAudioTracks())))})),this.localVirtualStreams.forEach((function(e){t._updateEnabledStateForMediaStream(e,{video:Ve(o),audio:ze(o)})}));default:this.localMediaStreams[i]=o}this.emitChange()}},{key:"handleReceivedRemoteStream",value:function(e){var t=e||{},n=t.type,r=void 0===n?S.lo.CAMERA:n,i=t.stream;this.remoteMediaStreams[r]=i,this.remoteMediaStreamPlaying=!1,this.audioOutput.replaceTracks(this.allRemoteAudioTracks);var o=this.remoteMediaStreamStates[r];o&&this._updateEnabledStateForMediaStream(i,o),this.emitChange()}},{key:"handlePlayingRemoteStream",value:function(e){!this.remoteMediaStreamPlaying&&this.remoteMediaStreams.some((function(t){return t===e}))&&(this.remoteMediaStreamPlaying=!0,this.emitChange())}},{key:"handleCallStatus",value:function(){var e=this,t=this.dispatcher.getStore("CallSessionStore");this.dispatcher.waitFor(["CallSessionStore"],(function(){var n=t.isPaused(),r=e.localMediaStreams.concat(e.remoteMediaStreams);if(e.localVirtualStreams.length>0&&(r=r.concat(e.localVirtualStreams)),n){if(e.streamStatePriorToPause)return;e.streamStatePriorToPause=r.map((function(e){return{video:Ve(e),audio:ze(e)}}))}else if(!e.streamStatePriorToPause)return;r.map((function(t,r){if(t){var i=!n&&e.streamStatePriorToPause[r].video,o=!n&&e.streamStatePriorToPause[r].audio;e._updateEnabledStateForMediaStream(t,{video:i,audio:o})}})),n||(e.streamStatePriorToPause=null),e.emitChange()}))}},{key:"handlePrepareNewCallSession",value:function(){this.prepareScreenShareStream(),this.remoteMediaStreams=[],this.remoteMediaStreamStates=[],this.remoteMediaStreamPlaying=!1,this.status=null,this.emitChange()}},{key:"handlePrepareRestartCallSession",value:function(){this.prepareScreenShareStream(),this.remoteMediaStreams=[],this.remoteMediaStreamStates=[],this.remoteMediaStreamPlaying=!1,this.status=null,this.emitChange()}},{key:"handleAvailableMediaDevices",value:function(e){sn().isArray(e)&&(sn().isEqual(this.mediaDevices,e)||(this.mediaDevices=e,this.emitChange()))}},{key:"handleSelectAudioOutputMediaDevice",value:function(e){this.audioOutputMediaDevice!==e&&(this.audioOutputMediaDevice=e,this._setRemoteAudioOutput(),this.emitChange())}},{key:"handleToggleInput",value:function(e){var t=this;if(e){var n=e.type,r=void 0===n?S.lo.CAMERA:n,i=!0===e.isClientStream,o=i?this.getLocalMediaStream(r):this.getRemoteMediaStream(r);i?r===S.lo.CAMERA&&this.localVirtualStreams.forEach((function(n){t._updateEnabledStateForMediaStream(n,e)})):this.remoteMediaStreamStates[r]=e,this._updateEnabledStateForMediaStream(o,e),this.emitChange()}}},{key:"handleDiscardLocalStreams",value:function(){[].concat(Pi()(this.localMediaStreams),Pi()(this.localVirtualStreams)).forEach((function(e){((null==e?void 0:e.getTracks())||[]).forEach((function(e){return e.stop()}))})),this.localMediaStreams=[$e(S.lo.CAMERA)]}},{key:"_updateEnabledStateForMediaStream",value:function(e,t){e&&(t.hasOwnProperty("video")&&Ze(e.getVideoTracks(),t.video),t.hasOwnProperty("audio")&&Ze(e.getAudioTracks(),t.audio))}},{key:"getLocalMediaStream",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S.lo.CAMERA;switch(e){case S.lo.VIRTUAL_BACKGROUND:case S.lo.VIRTUAL_TRY_ON:return this.alteredLocalMediaStreams.get(e);default:return this.localMediaStreams[e]}}},{key:"getRemoteMediaStream",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S.lo.CAMERA;return this.remoteMediaStreams[e]}},{key:"isRemoteMediaStreamPlaying",value:function(){return this.remoteMediaStreamPlaying}},{key:"getMediaDevices",value:function(e){return e?this.availbleMediaDevices.filter((function(t){return t.kind===e})):this.availbleMediaDevices}},{key:"getStatus",value:function(){return this.status?{state:this.status.success?"success":"failure",local:this.status.local||{},remote:this.status.remote||{}}:{state:"loading",local:{},remote:{}}}},{key:"_setRemoteAudioOutput",value:function(){"setSinkId"in HTMLMediaElement.prototype&&this.allRemoteAudioTracks.length&&this.audioOutput.setSinkId(this.audioOutputMediaDeviceId)}},{key:"wakeUpRemoteAudio",value:function(){return Promise.all([this.audioOutput.play()]).then((function(){})).catch((function(e){console.log("Failed to play audio",e)}))}}]),i}(cu.Z);wp.storeName="MediaStreamStore",wp.handlers=sn().invert({handleReceivedLocalStream:S.Lm.RECEIVED_LOCAL_STREAM,handleReceivedRemoteStream:S.Lm.RECEIVED_REMOTE_STREAM,handlePlayingRemoteStream:S.Lm.PLAYING_REMOTE_STREAM,handleCallStatus:S.Nb.STATUS,handleToggleInput:S.Lm.TOGGLE_STREAM_INPUT,handlePrepareNewCallSession:S.Nb.PREPARE_NEW,handlePrepareRestartCallSession:S.Nb.PREPARE_RESTART,handleAvailableMediaDevices:S.Lm.AVAILABLE_DEVICES,handleSelectAudioOutputMediaDevice:S.Lm.SELECT_AUDIO_OUTPUT_MEDIA_DEVICE,handleDiscardLocalStreams:S.Lm.DISCARD_LOCAL_STREAMS});var Rp=wp;function kp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Lp=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this,e)).componentsMap=new Map,t.waitForMap=new Map,t}return l()(i,[{key:"handleRegisterPanelComponent",value:function(e){e.id&&this.componentsMap.get(e.id)!==e.component&&(this.componentsMap.set(e.id,e.component),this.emitChange(),this._resolveWaitingForPromises(e.id))}},{key:"handleUnregisterPanelComponent",value:function(e){e.id&&this.componentsMap.has(e.id)&&(this.componentsMap.delete(e.id),this.emitChange())}},{key:"_resolveWaitingForPromises",value:function(e){if(this.waitForMap.has(e)){var t,n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return kp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kp(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}(this.waitForMap.get(e));try{for(n.s();!(t=n.n()).done;)(0,t.value)(this.getById(e))}catch(e){n.e(e)}finally{n.f()}this.waitForMap.delete(e)}}},{key:"_addPromiseResolver",value:function(e,t){var n=[];this.waitForMap.has(t)&&(n=this.waitForMap.get(t)),n.push(e),this.waitForMap.set(t,n)}},{key:"waitFor",value:function(e){var t=this;return new Promise((function(n){t.componentsMap.has(e)?n(t.getById(e)):t._addPromiseResolver(n,e)}))}},{key:"getById",value:function(e){return this.componentsMap.get(e)||null}}]),i}(cu.Z);Lp.storeName="ActiveComponentStore",Lp.handlers=sn().invert({handleRegisterPanelComponent:S.b9.REGISTER_COMPONENT,handleUnregisterPanelComponent:S.b9.UNREGISTER_COMPONENT});var Dp=Lp;var Pp=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this,e)).sessionId=null,t.metadata={},t}return l()(i,[{key:"handleSessionId",value:function(e){this.sessionId!==e&&(this.sessionId=e,Zt.av({id:this.sessionId}),this.emitChange())}},{key:"handleReceivedMetadata",value:function(e){Object.assign(this.metadata,e),this.emit("metadata:updated"),this.emitChange()}},{key:"getSessionId",value:function(){return this.sessionId}},{key:"firstName",get:function(){return this.metadata&&this.metadata.firstName}},{key:"lastName",get:function(){return this.metadata&&this.metadata.lastName}},{key:"email",get:function(){return this.metadata&&this.metadata.email}},{key:"externalId",get:function(){return this.metadata&&this.metadata.externalId}},{key:"getStringValueFor",value:function(e){return e?"name"===e?"".concat(this.firstName||"").concat(this.firstName&&this.lastName?" ":"").concat(this.lastName||""):(this.metadata||{})[e]||"":""}},{key:"getData",value:function(){return this.metadata}},{key:"getStoreData",value:function(e){if(e===S.JC.REASON_TRANSFER_CALL)return{info:this.metadata}}}]),i}(cu.Z);Pp.storeName="ClientStore",Pp.handlers=sn().invert({handleSessionId:kn.SESSION_ID,handleReceivedMetadata:kn.RECEIVED_CLIENT_METADATA});var Mp=Pp;var Bp=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this,e)).text=null,t}return l()(i,[{key:"handleTextUpdate",value:function(e){"string"==typeof e&&this.text!==e&&(this.text=e,this.emitChange())}},{key:"getText",value:function(){return this.text}}]),i}(cu.Z);Bp.storeName="LoadingScreenStore",Bp.handlers=sn().invert({handleTextUpdate:S.O3.TEXT});var jp=Bp,Up=n(62518),Gp=function(){function e(t,n,r,i){var a=this;o()(this,e);var l=window!==window.top;this.context=n,this.trackingService=r,this.enabled=!!(t&&t.queryString&&t.queryString.iframe||l),this.events=new hu.EventEmitter,this.nextForwardEventResponseId=1,this.currentWaitingForwardEventResponses={},this.enabled&&window.addEventListener("message",this._onMessage.bind(this));var c=function(e){var t=e.externalId,n=e.confirmed;if(t&&n){var r=a.context.getStore("ProductStore").getProductByExternalId(t);a._trackImpression(r,"highlight")}};i.on(S.dF.ADD,c),i.on(S.dF.UPDATE,c),i.on(S.Cl.FOCUS,(function(e){var t=e.externalId,n=e.isAgent,r=e.sync;if(t&&(!n||r)){var i=a.context.getStore("ProductStore").getProductByExternalId(t);a._trackImpression(i,"focused")}}))}var t;return l()(e,[{key:"_trackImpression",value:(t=xe()(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.emitToEmbedInstance("product-impression",{ref:{type:"sku",value:t.externalId},name:t.name,price:t.price,brand:t.brandName,type:n},!1);case 1:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"_onMessage",value:function(e){var t=this;if(!(e.data.length<=0||"{"!==e.data[0])){var n;try{n=JSON.parse(e.data)}catch(t){console.log("Unable to parse postMessage: ",e)}if(n){if("viddget:action_connect_to_agent"===n.eventType)this.context.executeAction(Bn);else if(n.eventType===Lt)"boolean"==typeof n.data.mouseIsOver&&this.context.executeAction(n.data.mouseIsOver?kl:Ll),"boolean"==typeof n.data.minimized&&(this.context.executeAction(n.data.minimized?Il:Al),n.data.minimized||this.context.executeAction(kl));else if("call_widget:track_startup"===n.eventType){var r,i,o,a;this.trackingService.track("app","iframe_initiatied",{url:null===(r=n)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.url,gtmInfo:null===(o=n)||void 0===o||null===(a=o.data)||void 0===a?void 0:a.gtmInfo})}else if("viddget:action_request_hangup"===n.eventType)this._isRequestingHangup||(this._isRequestingHangup=!0,this.context.executeAction(Se.V2,{title:this.context.getText("CALL_SESSION_CLIENT_HANGUP_CONFIRM_TITLE"),message:this.context.getText("CALL_SESSION_CLIENT_HANGUP_CONFIRM_MESSAGE"),buttonTitle:this.context.getText("GENERAL_BUTTON_OK"),callback:function(e){e?t.context.executeAction(jn):t._isRequestingHangup=!1}}));else if("viddget:forwarded_event_response"===n.eventType){var l=n.data.id,c=this.currentWaitingForwardEventResponses[l];c?(c.resolve(n.data.responseData||null),window.clearTimeout(c.timeoutId),delete this.currentWaitingForwardEventResponses[l]):console.log("Received unexpected response ".concat(l))}else if("viddget:page_zoom_level"===n.eventType){var s=n.data;if(!s)return;s<1?document.body.classList.add("zoomed-out"):document.body.classList.remove("zoomed-out")}else"viddget:integration_settings_response"===n.eventType&&this.context.executeAction(rn,n.data);this.events.emit(n.eventType,n)}}}},{key:"emit",value:function(e,t){this.enabled&&(console.log("WILL EMIT ",e,t),window.parent.postMessage(JSON.stringify({eventType:e,data:t}),"*")),this.trackingService.embedInterceptor(e,t)}},{key:"emitToEmbedInstance",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;return new Promise((function(o,a){if(r&&!t.enabled)return a(new Error("Not in an embed context"));var l={eventName:e,data:n};if(r){var c="response-".concat(e,":").concat(t.nextForwardEventResponseId++);l.responseId=c;var s=window.setTimeout((function(){delete t.currentWaitingForwardEventResponses[c],a(new un.ZR("Timeout waiting for a response to event ".concat(e)))}),1e3*i);t.currentWaitingForwardEventResponses[c]={resolve:o,reject:a,timeoutId:s}}else o(null);t.emit(Mt,l)}))}},{key:"once",value:function(e,t){this.events.once(e,t)}},{key:"on",value:function(e,t){this.events.on(e,t)}},{key:"remove",value:function(e,t){this.events.removeListener(e,t)}}]),e}();Gp.serviceName="externalInterfaceService",Gp.actionExports=["emit","enabled","emitToEmbedInstance"],Gp.componentExports=["emit","enabled"],Gp.inject=["trackingService","DispatchStore"];var Fp=Gp;var Wp=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(){var e;o()(this,i);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return e=r.call.apply(r,[this].concat(n)),v()(s()(e),"handleKeyDown",(function(e){var t=document.getElementsByClassName("dimmer")[0];if(t){var n=t.querySelectorAll('button, [role="button"], [href], input, select, textarea, li, a'),r=n[0],i=n[n.length-1];if(e.ctrlKey||e.altKey)return;"Tab"===e.code&&(e.shiftKey&&e.target===r&&(i.focus(),e.preventDefault()),e.shiftKey||e.target!==i||(r.focus(),e.preventDefault()))}})),v()(s()(e),"_onCloseClick",(function(){var t=e.props.dialog;t.hasOwnProperty("canBeClosed")&&!t.canBeClosed||("function"==typeof t.callback&&t.callback(),e.context.executeAction(Se.Xd,t))})),v()(s()(e),"_onKeyPress",(function(t){13===t.keyCode&&(document.removeEventListener("keyup",e._onKeyPress),e._onCloseClick())})),v()(s()(e),"_onMouseOver",(function(){e.setState({mouse:"mouseOver"})})),v()(s()(e),"_onMouseOut",(function(){e.setState({mouse:"mouseOut"})})),v()(s()(e),"onDialogAnimationComplete",(function(e){})),e}return l()(i,[{key:"animationVariants",get:function(){return{initial:{translateY:-20,opacity:0},open:{translateY:0,opacity:1,transition:this.animationDuration},closed:{translateY:-20,opacity:0,transition:{delay:0,duration:0}}}}},{key:"animationVariantsCustom",get:function(){}},{key:"animationDimmerVariants",get:function(){return{closed:{opacity:0},open:{opacity:.25}}}},{key:"animationDuration",get:function(){return{duration:Gn.iG}}},{key:"componentDidMount",value:function(){document.addEventListener("keyup",this._onKeyPress),window.addEventListener("keydown",this.handleKeyDown,!1);var e=document.getElementsByClassName("dimmer")[0];if(e){var t,n=document.getElementById("cancel-button")||(null===(t=e.querySelectorAll('button, [role="button"], [href], input, select, textarea, li, a'))||void 0===t?void 0:t[0]);n&&n.focus()}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown,!1),document.removeEventListener("keyup",this._onKeyPress)}},{key:"renderDialog",value:function(e){}},{key:"_getClassName",value:function(){return"system-dialog-container"}},{key:"render",value:function(){var e,t,n=this.props.dialog,r=!(n.hasOwnProperty("dimmer")&&!n.dimmer),i=I()(this._getClassName(),{hidden:n.hidden,dimmer:r,positioned:n.position}),o=["dialog-wrapper","dialog-type-".concat(this.props.dialog.type),{agent:!1}];this.props.dialog.subType&&o.push("dialog-type-".concat(this.props.dialog.subType));var a=I()("dialog-holder",{positioned:n.position});return E.createElement("div",{className:i},r&&E.createElement(A.E.div,{className:"backlight",variants:this.animationDimmerVariants,initial:"closed",animate:(null===(e=this.state)||void 0===e?void 0:e.mouse)||"open",exit:"closed"}),E.createElement(A.E.div,{className:a,style:n.position,onAnimationComplete:this.onDialogAnimationComplete,initial:"initial",animate:(null===(t=this.state)||void 0===t?void 0:t.mouse)||"open",exit:"closed",variants:this.animationVariants,custom:this.animationVariantsCustom},E.createElement("div",{className:I()(o),"data-dialogid":this.props.dialog.dialogId},this.renderDialog(n))))}}]),i}(x);Wp.propTypes={dialog:di().object.isRequired};var Hp=Wp;var Vp=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(){return o()(this,i),r.apply(this,arguments)}return l()(i,[{key:"renderDialog",value:function(e){var t,n,r;e.canBeClosed&&(t=E.createElement(Q.zx,{type:"primary",className:this.props.classes.dialogPrimary,onClick:this._onCloseClick},e.buttonTitle||"Ok")),e.title&&e.title.length>0&&(n=E.createElement(Q.Dx,{type:"h3",className:"title"},e.title)),r=e.messageHtml?E.createElement("div",{className:"message",dangerouslySetInnerHTML:{__html:e.messageHtml}}):E.createElement("div",{className:"message"},e.message);var i=e.withCloseIcon&&E.createElement("div",{className:"close-icon-wrapper"},E.createElement(Q.zx,{type:"icon",icon:"close",size:"soloIcon",className:"close-button",onClick:this._onCloseClick}));return E.createElement("div",{className:"dialog message-dialog"},i,n,r,t)}}]),i}(Hp),zp=(0,N.Z)((function(){return{dialogPrimary:{},dialogSecondary:{}}}),{name:"bambuserDialog"})(Vp);var Zp=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(){var e;o()(this,i);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return e=r.call.apply(r,[this].concat(n)),v()(s()(e),"_onCancelClick",(function(){e.context.executeAction(Z,{target:"confirm_dialog_cancel",data:{dialogId:e.props.dialog.dialogId}}),e.props.dialog.callback(!1),e.context.executeAction(Se.Xd,e.props.dialog)})),v()(s()(e),"_onActionClick",(function(){e.context.executeAction(Z,{target:"confirm_dialog_continue",data:{dialogId:e.props.dialog.dialogId}}),!1!==e.props.dialog.callback(!0)&&e.context.executeAction(Se.Xd,e.props.dialog)})),e}return l()(i,[{key:"renderDialog",value:function(e){var t,n,r=this.props,i=r.classes,o=r.theme.overrides,a=e.withCloseIcon&&E.createElement("div",{className:"close-icon-wrapper"},E.createElement(Q.zx,{type:"icon",icon:"close",size:"soloIcon",className:"close-button",iconColor:o&&o.dialog&&o.dialog.color,onClick:this._onCancelClick,disabled:!(null==e||null===(t=e.state)||void 0===t||!t.buttonLoading),"data-testid":"close-button"}));return E.createElement("div",{className:"dialog confirm-dialog"},a,E.createElement("div",{className:"confirm-wrapper"},E.createElement(Q.Dx,{type:"h1",className:"title"},e.title),E.createElement("div",{className:"message"},e.message),E.createElement(Q.zx,{type:"primary",loading:e.state&&e.state.buttonLoading,disabled:e.state&&e.state.buttonLoading,className:"".concat(i.dialogPrimary," ").concat(e.dialogId===Gn.Js&&i.confirmHangup),onClick:this._onActionClick,"data-testid":"ok-button"},e.buttonTitle||this.context.getText("GENERAL_BUTTON_OK")),E.createElement(Q.zx,{id:"cancel-button",type:"secondary",className:"".concat(i.dialogSecondary," ").concat(e.dialogId===Gn.Js&&i.cancelHangup),onClick:this._onCancelClick,"data-testid":"cancel-button",disabled:!(null==e||null===(n=e.state)||void 0===n||!n.buttonLoading)},e.cancelButtonTitle||this.context.getText("GENERAL_BUTTON_CANCEL"))))}}]),i}(Hp),Yp=(0,N.Z)((function(){return{dialogPrimary:{},dialogSecondary:{},confirmHangup:{},cancelHangup:{}}}),{name:"bambuserDialog",withTheme:!0})(Zp);var Kp=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(){var e;o()(this,i);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return e=r.call.apply(r,[this].concat(n)),v()(s()(e),"onDialogAnimationComplete",(function(t){"open"===t&&e.forceUpdate()})),v()(s()(e),"onClose",(function(){return e.context.executeAction(Se.Xd,e.props.dialog)})),e}return l()(i,[{key:"renderDialog",value:function(){return E.createElement("div",{className:"device-settings-dialog"},E.createElement("div",{className:"header-row"},E.createElement(Q.xv,{type:"h3",className:"title",border:!0},this.context.getText("SETTINGS_MODAL_TITLE")),E.createElement(Q.zx,{"data-testid":"close-device-settings-dialog",icon:"close",size:"soloIcon",type:"icon",onClick:this.onClose})),E.createElement("div",{className:"content"},E.createElement(xl,null)))}}]),i}(Hp),qp=Kp;function Qp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qp(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Jp={type:"ease",duration:Gn.iG},$p=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(){var e;o()(this,i);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return e=r.call.apply(r,[this].concat(n)),v()(s()(e),"onDialogAnimationComplete",(function(t){switch(t){case"open":case"mouseOut":case"closed":break;default:return}e._onCloseClick()})),v()(s()(e),"openCart",(function(){e._onCloseClick(),e.context.executeAction(R,"cart")})),e}return l()(i,[{key:"animationVariants",get:function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hasActiveTool,n=void 0!==t&&t,r=e.pdaOpen,i=void 0!==r&&r,o=(0,q.isMobileDevice)()?0:-4;return n&&!(0,q.isMobileDevice)()&&(o=-S.BW.WIDTH),i&&!(0,q.isMobileDevice)()&&(o-=8),"".concat(o,"px")},t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hasActiveTool,n=void 0!==t&&t,r=e.pdaOpen,i=void 0!==r&&r,o=(0,q.isMobileDevice)()?0:4;return n&&!(0,q.isMobileDevice)()&&(o=-6),i&&!(0,q.isMobileDevice)()&&(o=10),"".concat(o,"px")};return{initial:function(t){return{translateY:"-110%",translateX:"".concat(e(t)),transition:Xp(Xp({},Jp),{},{duration:0})}},mouseOver:function(n){return{translateY:"".concat(t(n)),translateX:"".concat(e(n)),zIndex:99,transition:Jp}},open:function(n){return{translateY:"".concat(t(n)),translateX:"".concat(e(n)),zIndex:99,transition:Xp(Xp({},Jp),{},{repeat:1,repeatType:"reverse",repeatDelay:3.5})}},mouseOut:function(t){return{translateY:"-110%",translateX:"".concat(e(t)),transition:Jp}},closed:function(t){return{translateY:"-110%",translateX:"".concat(e(t)),transition:Jp}}}}},{key:"animationVariantsCustom",get:function(){var e=this.props;return{hasActiveTool:e.hasActiveTool,pdaOpen:e.pdaOpen}}},{key:"renderDialog",value:function(e){return E.createElement("div",{className:"dialog basket-notification-dialog basket-panel",style:{padding:0},role:"button",tabIndex:"0",onMouseOver:this._onMouseOver,onFocus:this._onMouseOver,onMouseMove:this._onMouseOver,onMouseOut:this._onMouseOut,onBlur:this._onMouseOut,"data-testid":"basket-notification"},E.createElement("div",{className:"header-row heading",style:{alignItems:"center"}},E.createElement(Q.Dx,{type:"h4",style:{lineHeight:"18px"}},this.context.getText("PRODUCT_ADDED_TO_CART")),E.createElement(Q.zx,{"data-testid":"close-basket-notification-dialog",icon:"close",size:"soloIcon",type:"icon",onClick:this._onCloseClick})),E.createElement("div",{className:"content",style:{minHeight:"auto"}},E.createElement("div",{className:"basket-list"},E.createElement("div",{className:"group"},E.createElement("ul",null,E.createElement(ap,{viewOnly:!0,data:e.row,basket:this.context.getStore("BasketStore").getBasket()}))))),E.createElement("div",{className:"order-button--wrapper",style:{paddingTop:"12px"}},E.createElement(Q.zx,{type:"primary",size:"slim",onClick:this.openCart,"data-testid":"basket-notification-view-cart"},this.context.getText("VIEW_THE_CART"))))}}]),i}(Hp),em=(0,N.Z)((function(){return{dialogPrimary:{},dialogSecondary:{}}}),{name:"bambuserDialog"})((0,w.ZP)($p,["ToolStore","ProductStore"],(function(e){return{pdaOpen:e.ProductStore.focusedExternalId||e.ProductStore.nativeProductUrl,hasActiveTool:ti(e.ToolStore.getCurrentTool())}}))),tm=(0,N.Z)((function(e){var t,n,r;return{media:{width:46,height:46,backgroundColor:(null==e||null===(t=e.general)||void 0===t||null===(n=t.buttons)||void 0===n||null===(r=n.disabled)||void 0===r?void 0:r.backgroundColor)||"#999999",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},failed:{width:20,height:20,backgroundColor:"red",borderRadius:"50%",border:"1px solid white",position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",top:-5,right:-5}}}),{name:"CameraFailedIcon"})((function(e){var t=e.classes;return E.createElement("div",{className:t.media},E.createElement(Q.GI,{lineColor:"white"}),E.createElement("div",{className:t.failed},E.createElement(Q.Cz,null)))})),nm=(0,N.Z)((function(e){var t,n,r;return{media:{width:46,height:46,backgroundColor:(null==e||null===(t=e.general)||void 0===t||null===(n=t.buttons)||void 0===n||null===(r=n.disabled)||void 0===r?void 0:r.backgroundColor)||"#999999",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},failed:{width:20,height:20,backgroundColor:"red",borderRadius:"50%",border:"1px solid white",position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",top:-5,right:-5}}}),{name:"MicrophoneFailedIcon"})((function(e){var t=e.classes;return E.createElement("div",{className:t.media},E.createElement(Q.vY,{lineColor:"white",style:{fontSize:30}}),E.createElement("div",{className:t.failed},E.createElement(Q.Cz,null)))}));var rm=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(){return o()(this,i),r.apply(this,arguments)}return l()(i,[{key:"renderDialog",value:function(e){var t=this,n=!(0,q.isMobileDevice)()&&(0,q.isChrome)(),r=!(0,q.isMobileDevice)()&&(0,q.isFirefox)(),i=n||r,o=null!=e&&e.audio?E.createElement(nm,null):null!=e&&e.video?E.createElement(tm,null):"",a=null!=e&&e.audio?this.context.getText("MIC_ACCESS_ERROR_DIALOG_TITLE"):null!=e&&e.video?this.context.getText("VIDEO_ACCESS_ERROR_DIALOG_TITLE"):"Camera and/or microphone access is required.",l=this.props.callStatus!==S.kp.RUNNING;return E.createElement("div",{className:this.props.classes.dialog},E.createElement("div",{className:this.props.classes.close,onClick:this._onCloseClick},E.createElement(Do.Z,null)),o,E.createElement("h1",{className:this.props.classes.title},a),E.createElement("p",{className:this.props.classes.message},function(){if(null!=e&&e.audio){var i="";switch(!0){case n:i="<img style='margin: -7px 0px' src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjkiIGhlaWdodD0iMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgY2xpcC1wYXRoPSJ1cmwoI2EpIj48bWFzayBpZD0iYiIgc3R5bGU9Im1hc2stdHlwZTphbHBoYSIgbWFza1VuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeD0iMCIgeT0iMCIgd2lkdGg9IjI5IiBoZWlnaHQ9IjI4Ij48cGF0aCBkPSJNMjguNSAwSC41djI4aDI4VjBaIiBmaWxsPSIjRDlEOUQ5Ii8+PC9tYXNrPjxnIG1hc2s9InVybCgjYikiPjxwYXRoIGQ9Ik0xNC41IDE2LjMzNGMtLjk3MiAwLTEuNzk5LS4zNC0yLjQ4LTEuMDIxLS42OC0uNjgtMS4wMi0xLjUwNy0xLjAyLTIuNDh2LTdjMC0uOTcyLjM0LTEuNzk4IDEuMDItMi40NzkuNjgxLS42OCAxLjUwOC0xLjAyIDIuNDgtMS4wMnMxLjc5OS4zNCAyLjQ4IDEuMDJjLjY4LjY4IDEuMDIgMS41MDcgMS4wMiAyLjQ4djdjMCAuOTcyLS4zNCAxLjc5OC0xLjAyIDIuNDc5LS42ODEuNjgtMS41MDggMS4wMi0yLjQ4IDEuMDJaTTEzLjMzMyAyNC41di0zLjU4N2MtMi4wMjItLjI3My0zLjY5NC0xLjE3Ny01LjAxNi0yLjcxMy0xLjMyMy0xLjUzNi0xLjk4NC0zLjMyNS0xLjk4NC01LjM2NmgyLjMzNGMwIDEuNjEzLjU2OSAyLjk4OSAxLjcwNiA0LjEyNiAxLjEzOCAxLjEzOCAyLjUxMyAxLjcwNyA0LjEyNyAxLjcwNyAxLjYxNCAwIDIuOTktLjU3IDQuMTI4LTEuNzA3IDEuMTM3LTEuMTM3IDEuNDM2LTEuODcgMS40MzYtMy40ODVsMi45MTcgMS4xNjdjMCAyLjA0Mi0uOTc2IDIuMDIyLTIuMjk4IDMuNTU4cy0yLjk5NCAyLjQ0LTUuMDE2IDIuNzEzVjI0LjVoLTIuMzM0WiIgZmlsbD0iIzVENUQ1RCIvPjxwYXRoIGQ9Ik0yNy4wNjQgMTIuODkyaC05LjMzM2MtLjY0NSAwLTEuMTY3LjUyMi0xLjE2NyAxLjE2N3Y5LjMzM2MwIC42NDQuNTIzIDEuMTY3IDEuMTY3IDEuMTY3aDkuMzMzYy42NDUgMCAxLjE2Ny0uNTIzIDEuMTY3LTEuMTY3VjE0LjA2YzAtLjY0NS0uNTIzLTEuMTY3LTEuMTY3LTEuMTY3WiIgZmlsbD0iI0NCNTA0MCIvPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJtMjIuMzk3IDE5LjU2IDIuMDg0IDIuMDgyLjgzMy0uODMzLTIuMDgzLTIuMDgzIDIuMDgzLTIuMDg0LS44MzMtLjgzMy0yLjA4NCAyLjA4My0yLjA4My0yLjA4My0uODMzLjgzMyAyLjA4MyAyLjA4NC0yLjA4MyAyLjA4My44MzMuODMzIDIuMDgzLTIuMDgzWiIgZmlsbD0iI2ZmZiIvPjwvZz48L2c+PGRlZnM+PGNsaXBQYXRoIGlkPSJhIj48cGF0aCBmaWxsPSIjZmZmIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSguNSkiIGQ9Ik0wIDBoMjh2MjhIMHoiLz48L2NsaXBQYXRoPjwvZGVmcz48L3N2Zz4='>";break;case r:i="<img style='margin: -7px 5px' src='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHdpZHRoPSIyNCI+PHBhdGggZD0ibTE4LjEyNSAxNS4wNS0xLjYtMS42cS4zMjUtLjU1LjQ3NS0xLjEzOC4xNS0uNTg3LjE1LTEuMjYyaDIuMnEwIDEuMS0uMzEyIDIuMTEyLS4zMTMgMS4wMTMtLjkxMyAxLjg4OFptLTYuMS02LjE1Wm0zLjA1IDMuMDVMMTMgOS44NzVWNS4xcTAtLjQtLjI4Ny0uNjc1LS4yODgtLjI3NS0uNjg4LS4yNzUtLjQgMC0uNjc1LjI3NXQtLjI3NS42NzV2Mi44NUw4Ljg1IDUuNzI1VjQuOHEuMDc1LTEuMjI1Ljk4OC0yLjA4OC45MTItLjg2MiAyLjE4Ny0uODYyIDEuMzUgMCAyLjMuOTUuOTUuOTUuOTUgMi4zdjUuOTVxMCAuMjUtLjA2Mi40NzUtLjA2My4yMjUtLjEzOC40MjVabS00LjEyNSA5LjQyNXYtMy4xcS0yLjctLjM3NS00LjQ2Mi0yLjQzOC0xLjc2My0yLjA2Mi0xLjc2My00Ljc4N0g2LjlxMCAyLjEyNSAxLjQ4NyAzLjYyNSAxLjQ4OCAxLjUgMy42MzggMS41LjkgMCAxLjcxMy0uMjg4LjgxMi0uMjg3IDEuNDYyLS44MTJsMS41NzUgMS41NXEtLjc3NS42NS0xLjY4NyAxLjA3NS0uOTEzLjQyNS0xLjk2My41NzV2My4xWm04LjgyNSAxLjE3NS0xOC40LTE4LjQgMS40NS0xLjQ1IDE4LjQgMTguNFoiLz48L3N2Zz4='>";break;default:return t.context.getText("MIC_ACCESS_ERROR_DIALOG")}return E.createElement(To,{text:t.context.getText("CLIENT_SETTINGS_USER_MEDIA_DENIED_MIC_MESSAGE_BEFORE_ICON")+t.context.getText("CLIENT_SETTINGS_USER_MEDIA_DENIED_MESSAGE_WITH_ICON",i)})}if(null!=e&&e.video){var o="";switch(!0){case n:o="<img style='margin: -7px 5px' src='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjEiIGhlaWdodD0iMTgiCgkgdmlld0JveD0iMCAwIDIxIDE4Ij4KCTxkZWZzPgoJCTxwYXRoIGQ9Ik0yMS43NSAxMlYxLjVIMS41djIxaDIwLjI1di0uNDM4YTEuOTkxIDEuOTkxIDAgMCAxLTEuMjUuNDM4SDEyVjE0YTIgMiAwIDAgMSAyLTJoNy43NXoiIGlkPSJhIi8+Cgk8L2RlZnM+Cgk8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMyAtNikiPgoJCTxtYXNrIGlkPSJiIiBmaWxsPSIjZmZmIj4KCQkJPHVzZSB4bGluazpocmVmPSIjYSIvPgoJCTwvbWFzaz4KCQk8cGF0aCBkPSJNMTcgMTAuNVY3YzAtLjU1LS40NS0xLTEtMUg0Yy0uNTUgMC0xIC40NS0xIDF2MTBjMCAuNTUuNDUgMSAxIDFoMTJjLjU1IDAgMS0uNDUgMS0xdi0zLjVsNCA0di0xMWwtNCA0eiIKCQkJICBmaWxsPSIjNUE1QTVBIiBtYXNrPSJ1cmwoI2IpIi8+CgkJPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTMuNSAxMy41KSI+CgkJCTxyZWN0IGZpbGw9IiNEQjQ0MzciIHdpZHRoPSIxMC41IiBoZWlnaHQ9IjEwLjUiIHJ4PSIyIi8+CgkJCTxwYXRoCgkJCQlkPSJNNS4yNSA2LjA0TDMuMjA0IDguMDg2YS41NTkuNTU5IDAgMCAxLS43OS0uNzlMNC40NiA1LjI1IDIuNDE0IDMuMjA0YS41NTkuNTU5IDAgMCAxIC43OS0uNzlMNS4yNSA0LjQ2bDIuMDQ2LTIuMDQ2YS41NTkuNTU5IDAgMCAxIC43OS43OUw2LjA0IDUuMjVsMi4wNDYgMi4wNDZhLjU1OS41NTkgMCAwIDEtLjc5Ljc5TDUuMjUgNi4wNHoiCgkJCQlmaWxsPSIjRkZGIi8+CgkJPC9nPgoJPC9nPgo8L3N2Zz4K'>";break;case r:o="<img style='margin: -4px 5px' src='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHdpZHRoPSIyNCI+PHBhdGggZD0ibTIyLjIgMTcuNS00LTR2MS43NzVMMTUuOTI1IDEzVjYuMDc1SDlMNi43MjUgMy44aDkuMnEuOTUgMCAxLjYxMy42NjIuNjYyLjY2My42NjIgMS42MTNWMTAuNWw0LTRabS0xLjU1IDUuOTc1TC41MjUgMy4zNSAyIDEuODc1IDIyLjEyNSAyMlptLTguMTUtMTMuOVpNOS41NSAxMi40Wk0zLjkgMy44bDIuMjc1IDIuMjc1aC0yLjF2MTEuODVoMTEuODV2LTIuMWwyLjI3NSAyLjI1cS0uMDUuOS0uNzEyIDEuNTEyLS42NjMuNjEzLTEuNTYzLjYxM0g0LjA3NXEtLjk1IDAtMS42MTMtLjY2Mi0uNjYyLS42NjMtLjY2Mi0xLjYxM1Y2LjA3NXEwLS45LjYxMy0xLjU2My42MTItLjY2MiAxLjUxMi0uNzEyWiIvPjwvc3ZnPg=='>";break;default:return t.context.getText("VIDEO_ACCESS_ERROR_DIALOG")}return E.createElement(To,{text:t.context.getText("CLIENT_SETTINGS_USER_MEDIA_DENIED_CAMERA_MESSAGE_BEFORE_ICON")+t.context.getText("CLIENT_SETTINGS_USER_MEDIA_DENIED_MESSAGE_WITH_ICON",o)})}return"Ensure you have allowed access to your camera in browser or system settings."}()),E.createElement(Q.zx,{type:"primary",className:this.props.classes.dialogPrimary,onClick:function(){t._onCloseClick(),l&&!i&&(t.context.getService("trackingService").track("pre_call","click_media_permissions_learn_more"),t.context.executeAction(Rn,{screen:"media-guide"}))}},l&&!i?this.context.getText("MIC_CAM_ACCESS_ERROR_DIALOG_LEARN_MORE"):this.context.getText("MIC_CAM_ACCESS_ERROR_DIALOG_CLOSE")))}}]),i}(Hp);rm=(0,w.ZP)(rm,["CallSessionStore"],(function(e){return{callStatus:e.CallSessionStore.getStatus()}}));var im=(0,N.Z)((function(e){return{dialogPrimary:{"& span":{textTransform:"uppercase"}},dialogSecondary:{},dialog:{backgroundColor:"white",width:"90%",maxWidth:"350px",minHeight:288,borderRadius:8,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",position:"relative",padding:24},close:{position:"absolute",right:15,top:15},title:{fontSize:18,fontWeight:"500",textAlign:"center",lineHeight:"110%"},message:{fontSize:16,textAlign:null!=e&&e.rtl?"right":"left",fontWeight:"400"},controlButton:{width:46,height:46,borderRadius:"100%",margin:"0 8px",filter:"drop-shadow(0px 2.9696px 8.16639px rgba(0, 0, 0, 0.15))"}}}),{name:"MicCamDialogs"})(rm),om=function(){function e(t,n){o()(this,e),this.options=t,this.viddget=n,this.dialogs=new Map,this._registerDefaultDialogs()}return l()(e,[{key:"_registerDefaultDialogs",value:function(){this.registerDialog("message",zp),this.registerDialog("mic-cam",im),this.registerDialog("confirm",Yp),this.registerDialog("device-settings-dialog",qp),this.registerDialog("basket-notification-dialog",em)}},{key:"registerDialog",value:function(e,t){this.dialogs.set(e,t)}},{key:"renderDialog",value:function(e){var t=this.dialogs.get(e.type);if(t)return E.createElement(t,{dialog:e,key:e.dialogId});console.log("Unknown system dialog type ".concat(e.type))}},{key:"showMessageDialog",value:function(e){this.viddget.executeAction(Se.FI,e)}},{key:"showConfirmDialog",value:function(){this.viddget.executeAction(Se.V2,options)}},{key:"closeDialog",value:function(){this.viddget.executeAction(Se.Xd,options)}}]),e}();om.serviceName="systemDialogService",om.componentExports=["renderDialog","showMessageDialog","showConfirmDialog","closeDialog"];var am=om;var lm={width:1280,height:720,clientIsMobile:!1,clientIsTablet:!1},cm=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this,e)).additionalCssClasses=[],t.clientViewportMode=S.DI.MINIMAL,t.clientForceNormalViewportMode=!1,t.clientInsideOverlay=!1,t.clientViewportFrame=lm,t.clientPointerPresent=!0,t}return l()(i,[{key:"handleAdditionalCssClasses",value:function(e){this.additionalCssClasses=e,this.additionalCssClasses||(this.additionalCssClasses=[]),this.emitChange()}},{key:"handleClientViewportMode",value:function(e){this.clientViewportMode!==e.type&&(this.clientViewportMode=e.type,this.emitChange())}},{key:"handleClientViewportForceNormalMode",value:function(e){this.clientForceNormalViewportMode!==e&&(this.clientForceNormalViewportMode=e,this.emitChange())}},{key:"handleClientInsideOverlay",value:function(e){this.clientInsideOverlay!==e&&(this.clientInsideOverlay=e,this.emitChange())}},{key:"handleClientPlatform",value:function(e){var t=e.window,n=t.width,r=t.height,i=e.device.type,o=i===q.DeviceType.MOBILE,a=i===q.DeviceType.TABLET;this.clientViewportFrame={width:n,height:r,clientIsMobile:o,clientIsTablet:a},this.emitChange()}},{key:"getClientViewportFrame",value:function(){return this.clientViewportFrame}},{key:"handleClientPointerMode",value:function(e){this.clientPointerPresent!==e.present&&(this.clientPointerPresent=e.present,this.emitChange())}},{key:"isClientPointerPresent",value:function(){return this.clientPointerPresent}},{key:"handlePrepareNewCallSession",value:function(){this.clientViewportMode=S.DI.MINIMAL,this.clientForceNormalViewportMode=!1,this.clientInsideOverlay=!1,this.clientViewportFrame=lm,this.clientPointerPresent=!0,this.emitChange()}},{key:"getClientViewportMode",value:function(){return this.clientForceNormalViewportMode?S.DI.NORMAL:this.clientViewportMode}},{key:"isClientInsideOverlay",value:function(){return this.clientInsideOverlay}}]),i}(cu.Z);cm.storeName="ViewportStore",cm.handlers=sn().invert({handlePrepareNewCallSession:S.Nb.PREPARE_NEW,handleAdditionalCssClasses:S.KR.ADDITIONAL_CSS_CLASSES,handleClientViewportMode:S.KR.CLIENT_VIEWPORT_MODE,handleClientViewportForceNormalMode:S.KR.CLIENT_VIEWPORT_FORCE_NORMAL_MODE,handleClientInsideOverlay:S.KR.CLIENT_INSIDE_OVERLAY,handleClientPlatform:S.Nb.CLIENT_PLATFORM,handleClientPointerMode:S.KR.CLIENT_POINTER_MODE});var sm=cm;function um(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?um(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):um(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(34553),n(84944),n(33792);var pm=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(e){var t;return o()(this,i),t=r.call(this,e),v()(s()(t),"handleComparableAttributes",(function(){if(0===t.rows.length&&t.comparableAttributes.length>0)return t.comparableAttributes=[];var e=t.dispatcher.getStore("ProductStore"),n=Pi()(t.comparableAttributes),r=t.rows.map((function(t){return e.getProductByExternalId(t).attributes.map((function(e){return e.name}))})).flat(1).filter((function(e,t,n){return n.indexOf(e)===t}));return r.length>0&&r.length>t.comparableAttributes.length?(r.map((function(e){t.comparableAttributes.some((function(t){return t.name===e}))||n.push({name:e,visible:!0})})),t.comparableAttributes=n):r.length<t.comparableAttributes.length?t.comparableAttributes=t.comparableAttributes.filter((function(e){return r.includes(e.name)})):void 0})),t._init(),t}return l()(i,[{key:"products",get:function(){return this.rows}},{key:"_init",value:function(){this.rows=[],this._visible=!1,this._collapsed=!1,this.comparableAttributes=[],this._updateCompare()}},{key:"_updateCompare",value:function(){this.currentCompare={uuid:(0,$a.Z)(),rows:this.rows}}},{key:"handleAddRow",value:function(e){var t=e.externalId;this.dispatcher.getStore("ProductStore").getProductByExternalId(t)&&(this.isProductInCompare(t)||(this.rows.push(t),this.handleComparableAttributes(),this._updateCompare(),1===this.rows.length&&this.emit("visibilityChange",this.visible),this.emitChange()))}},{key:"handleRemoveRow",value:function(e){var t=e.externalId;if(t){var n=this.rows.findIndex((function(e){return e===t}));n<0||(this.rows.splice(n,1),this.handleComparableAttributes(),this._updateCompare(),this.rows.length<=0&&this.emit("visibilityChange",this.visible),this.emitChange())}}},{key:"handleProductRemove",value:function(e){var t=e.externalId;this.dispatcher.getStore("BasketStore").isProductInBasket(t)||this.handleRemoveRow({externalId:t})}},{key:"handlePrepareNewCallSession",value:function(){this._init(),this.emitChange()}},{key:"handleDestroyCompare",value:function(){this._init(),this.emitChange()}},{key:"handleVisibility",value:function(e){this._visible!==(null==e?void 0:e.visible)&&(this._visible=!(null==e||!e.visible),this._visible||(this._collapsed=!1),this.emit("visibilityChange",this.visible),this.emitChange())}},{key:"handleVisibleAttributes",value:function(e){var t=this;if(e&&e.attributes){var n=e.attributes,r=Pi()(this.comparableAttributes);return Array.isArray(n)&&n.length>0?(n.map((function(e){t.comparableAttributes.find((function(t,n){t.name===e&&(r[n]=dm(dm({},r[n]),{},{visible:!r[n].visible}))}))})),this.comparableAttributes=r,this.emitChange()):(this.comparableAttributes.find((function(e,t){e.name===n&&(r[t]=dm(dm({},r[t]),{},{visible:!r[t].visible}))})),this.comparableAttributes=r,this.emitChange())}}},{key:"handleCollapsed",value:function(e){var t=e.collapsed;this._collapsed!==t&&(this._collapsed=t,this.emit("collapseChange",t),this.emitChange())}},{key:"handleAddProductToDrawer",value:function(e){var t=e.externalId,n=e.confirmed,r=void 0===n||n;this._visible&&r&&this.handleAddRow({externalId:t})}},{key:"isProductInCompare",value:function(e){return this.rows.some((function(t){return t===e}))}},{key:"getCompare",value:function(){return this.currentCompare}},{key:"getNumberOfItems",value:function(){return this.rows.length}},{key:"getComparableAttributes",value:function(){return this.comparableAttributes}},{key:"collapsed",get:function(){return!!this.visible&&this._collapsed}},{key:"visible",get:function(){return!!this.rows.length&&this._visible}},{key:"hydrate",value:function(e){var t,n,r=this;!(null!=e&&null!==(t=e.compare)&&void 0!==t&&null!==(n=t.products)&&void 0!==n&&n.length)>0||e.reason===S.JC.REASON_TRANSFER_CALL&&this.dispatcher.waitFor("ProductStore",(function(){r.rows=e.compare.products,r.currentCompare={uuid:(0,$a.Z)(),rows:r.rows},r.emitChange()}))}},{key:"getStoreData",value:function(e){if(e===S.JC.REASON_TRANSFER_CALL)return{products:this.products}}}]),i}(cu.Z);pm.storeName="CompareStore",pm.handlers=sn().invert({handlePrepareNewCallSession:S.Nb.PREPARE_NEW,handleDestroyCompare:S.sK.DESTROY,handleAddRow:S.sK.ADD,handleRemoveRow:S.sK.REMOVE,handleAddProductToDrawer:S.dF.ADD,handleProductRemove:S.dF.REMOVE,handleVisibility:S.sK.SET_VISIBILITY,handleVisibleAttributes:S.sK.SET_VISIBLE_ATTRIBUTES,handleCollapsed:S.sK.SET_COLLAPSED,hydrate:S.JC.HYDRATE});var mm=pm;var fm=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(e){var t;return o()(this,i),t=r.call(this,e),v()(s()(t),"initialBlur",(function(){return!1})),v()(s()(t),"handleIsNativeSDK",(function(){t.isNativeSDK=!0,t.splitScreen=!0})),v()(s()(t),"handlePrepareNewCallSession",(function(){t.splitScreen=!!t.isNativeSDK,t.isDragging=!1,t.blurClient=t.initialBlur(),t.emitChange()})),v()(s()(t),"handleSplitScreen",(function(e){e.hasOwnProperty("splitScreen")?t.splitScreen=e.splitScreen:t.splitScreen=!t.splitScreen,t.emitChange()})),v()(s()(t),"handleSetBlurClient",(function(){t.blurClient=!1,t.emitChange()})),v()(s()(t),"handleRemoveSplitScreenOnVTO",(function(e){t.dispatcher.settings.get("virtualTryOn.enabled")&&t.splitScreen&&0!==e.idList.length&&(t.splitScreen=!1,t.emitChange())})),v()(s()(t),"getSplitScreen",(function(){return t.splitScreen})),v()(s()(t),"getBlurClient",(function(){return!1})),t.splitScreen=!1,t.isDragging=!1,t.blurClient=t.initialBlur(),t.isNativeSDK=!1,t.dispatcher.getStore("VirtualTryOnStore").on("tryOnChange",t.handleRemoveSplitScreenOnVTO),t}return l()(i,[{key:"handleSetIsDragging",value:function(e){var t=e.isDragging;t!==this.isDragging&&(this.isDragging=t,this.emitChange())}},{key:"hydrate",value:function(e){e.reason===S.JC.REASON_TRANSFER_CALL&&this.blurClient&&(this.blurClient=!1,this.emitChange())}}]),i}(cu.Z);fm.storeName="VideoContainerStore",fm.handlers=sn().invert({handlePrepareNewCallSession:S.Nb.PREPARE_NEW,handleSplitScreen:S.t.SET_SPLIT_SCREEN,handleSetIsDragging:S.t.SET_IS_DRAGGING,handleSetBlurClient:S.t.SET_BLUR_CLIENT,handleIsNativeSDK:S.t.SET_IS_NATIVE_SDK,hydrate:S.JC.HYDRATE});var hm=fm;function gm(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return vm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vm(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function vm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Em=function(e){d()(a,e);var t,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h()(n);if(r){var i=h()(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return m()(this,e)});function a(e){var t;return o()(this,a),(t=i.call(this,e)).reset(),t}return l()(a,[{key:"reset",value:function(){this._products=new Map,this._productsRequestRefs=new Map,this._extractedProducts=new Map,this._focusedExternalId=null,this._previewExternalId=null,this._remoteFocusedExternalId=null,this._nativeProductUrl=null,this._nativeProductUrlTime=null,this._nativeProductExternalId=null}},{key:"products",get:function(){return Array.from(this._products.values())}},{key:"previewExternalId",get:function(){return this._previewExternalId}},{key:"focusedExternalId",get:function(){return this._focusedExternalId}},{key:"remoteFocusedExternalId",get:function(){return this._remoteFocusedExternalId}},{key:"nativeProductUrl",get:function(){return this._nativeProductUrl}},{key:"nativeProductUrlTime",get:function(){return this._nativeProductUrlTime}},{key:"nativeProductExternalId",get:function(){return this._nativeProductExternalId}},{key:"getVariantsByExternalId",value:function(e){var t;if(!(e=this.getProductExternalIdUsingRef(e)))return[];var n=this._products.get(e);return null!=n&&null!==(t=n.variations)&&void 0!==t&&t.length?null==n?void 0:n.variations:[]}},{key:"getProductExternalIdUsingRef",value:function(e){var t,n=this._productsRequestRefs.get(e);if(this._products.has(e)||null==n||!n.length)return e;var r=this._products.get(n[0]);if(!r)return e;var i=r.defaultVariationIndex,o=void 0===i?0:i,a=r.variations;return null===(t=(void 0===a?[]:a)[o])||void 0===t?void 0:t.sku}},{key:"setPrice",value:function(e,t){this.getProductByExternalId(e).price=t}},{key:"getProductByExternalId",value:function(e){if(this._products.has(e))return this._extractedProducts.has(e)||this._extractedProducts.set(e,(0,gi.OE)(this._products.get(e),e)),this._extractedProducts.get(e)}},{key:"getVerifiedExternalId",value:function(e){var t;if(e=this.getProductExternalIdUsingRef(e)){var n=this._products.get(e);if(n){var r=n.defaultVariationIndex,i=void 0===r?0:r,o=n.variations,a=void 0===o?[]:o;return a.some((function(t){return t.sku===e}))?e:null===(t=a[i])||void 0===t?void 0:t.sku}}}},{key:"_addProduct",value:function(e,t,n){if(!e||!t)return!1;if(this._products.set(e,t),n){this._products.set(n,t);var r=this._productsRequestRefs.get(n);r?r.push(e):this._productsRequestRefs.set(n,[e])}return!0}},{key:"handlePrepareNewCallSession",value:function(){this.reset(),this.emitChange()}},{key:"handleAddProduct",value:function(e){var t=this,n=e.product,r=e.requestRef,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n&&(((null==n?void 0:n.variations)||[]).forEach((function(e){return t._addProduct(e.sku,n,r)})),n.sku&&!this._products.has(n.sku)&&this._addProduct(n.sku,n,r),i&&this.emitChange())}},{key:"handleUpdateProduct",value:function(e){var t=e.product;if(null!=t&&t.sku){if(this._extractedProducts.has(t.sku)){var n=(0,gi.OE)(t,t.sku),r=this._extractedProducts.get(t.sku),i=(0,gi.SE)(r,n);this._extractedProducts.set(t.sku,i)}else this.handleAddProduct({product:t},!1);this.emitChange()}}},{key:"handleFocusProduct",value:(t=xe()(ye().mark((function e(t){var n,r,i,o,a,l,c,s,u,d;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.externalId,r=t.isAgent,i=t.sync,!n||this._products.has(n)){e.next=3;break}return e.abrupt("return");case 3:if(!1,!(o=r)&&!i){e.next=33;break}if(this._remoteFocusedExternalId=n,!o){e.next=30;break}if(!(a=this.dispatcher.callSessionService.getMediaConnection())){e.next=30;break}l=this.dispatcher.getStore("MediaStreamStore"),c=S.Rs.VIDEO_WIDTH,n&&(c=S.Rs.VIDEO_THUMBNAIL_HEIGHT),s=gm(l.activeLocalCameraStream.getVideoTracks()),e.prev=14,s.s();case 16:if((u=s.n()).done){e.next=22;break}return d=u.value,e.next=20,a.scaleResolution(d,c);case 20:e.next=16;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(14),s.e(e.t0);case 27:return e.prev=27,s.f(),e.finish(27);case 30:if(i){e.next=33;break}return this.emitChange(),e.abrupt("return");case 33:this._focusedExternalId=n,this.emitChange();case 35:case"end":return e.stop()}}),e,this,[[14,24,27,30]])}))),function(e){return t.apply(this,arguments)})},{key:"handleShowNativeUrl",value:function(e){var t=e.url;this._nativeProductUrl=t,this._nativeProductUrlTime=Date.now(),this._nativeProductExternalId=null,this.emitChange()}},{key:"handleSetNativeProduct",value:function(e){var t=e.externalId,n=e.url;this._nativeProductExternalId=t,this._nativeProductUrl=n,this.emitChange()}},{key:"handlePreviewProduct",value:function(e){var t=e.externalId;this._previewExternalId=t,this.emitChange()}},{key:"hydrate",value:function(e){var t,n,r=this;null!=e&&null!==(t=e.products)&&void 0!==t&&null!==(n=t.productHydrations)&&void 0!==n&&n.length&&e.reason===S.JC.REASON_TRANSFER_CALL&&(e.products.productHydrations.forEach((function(e){r.handleAddProduct({product:e},!1)})),this.emitChange())}},{key:"getStoreData",value:function(e){if(e===S.JC.REASON_TRANSFER_CALL)return{productHydrations:Pi()(new Set(Array.from(this._products.values())))}}}]),a}(cu.Z);Em.storeName="ProductStore",Em.handlers=sn().invert({handlePrepareNewCallSession:S.Nb.PREPARE_NEW,handleAddProduct:S.Cl.ADD,handleUpdateProduct:S.Cl.UPDATE,handleFocusProduct:S.Cl.FOCUS,handleShowNativeUrl:S.Cl.SHOW_NATIVE_URL,handleSetNativeProduct:S.Cl.SET_NATIVE_PRODUCT,handlePreviewProduct:S.Cl.PREVIEW,hydrate:S.JC.HYDRATE});var Sm=Em;var Tm=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this,e)).reset(),t}return l()(i,[{key:"reset",value:function(){this._products=[]}},{key:"products",get:function(){return this.confirmedProducts}},{key:"confirmedProducts",get:function(){return this._products.filter((function(e){return null==e?void 0:e.confirmed})).map((function(e){return e.externalId}))}},{key:"handlePrepareNewCallSession",value:function(){this.reset(),this.emitChange()}},{key:"isProductConfirmed",value:function(e){var t=this.dispatcher.getStore("ProductStore");return this._products.some((function(n){return n.externalId===t.getVerifiedExternalId(e)&&n.confirmed}))}},{key:"isProductInDrawer",value:function(e){if(!e)return!1;var t=this.dispatcher.getStore("ProductStore");return this.products.some((function(n){if(n===e)return!0;var r=t.getVerifiedExternalId(n);return!!r&&r===t.getVerifiedExternalId(e)}))}},{key:"isSignificantProductVariantInDrawer",value:function(e){var t=this;if(this.isProductInDrawer(e))return!0;var n=this.dispatcher.getStore("ProductStore");if(!(e=n.getProductExternalIdUsingRef(e)))return!1;var r=n.getProductByExternalId(e);return((null==r?void 0:r.attributes)||[]).some((function(e){if(null!=e&&e.significant)return null==e?void 0:e.options.some((function(e){return t.isProductInDrawer(e)}))}))}},{key:"getSignificantProductVariant",value:function(e){var t,n=this,r=this.dispatcher.getStore("ProductStore");return e=r.getVerifiedExternalId(e),this.isProductInDrawer(e)?e:this.isSignificantProductVariantInDrawer(e)?(r.getProductByExternalId(e).attributes.some((function(e){null!=e&&e.significant&&(t=null==e?void 0:e.options.find((function(e){return n.isProductInDrawer(e)})))})),t):void 0}},{key:"handleProductAdd",value:function(e){var t=this,n=e.externalId,r=e.confirmed,i=void 0===r||r;if(n){var o=this.dispatcher.getStore("ProductStore");n=o.getVerifiedExternalId(n),this._products.some((function(e){return e.externalId===n}))||o.getProductByExternalId(n)&&(this.isSignificantProductVariantInDrawer(n)||this.dispatcher.waitFor("CompareStore",(function(){t._products.push({externalId:n,confirmed:i}),t.emitChange()})))}}},{key:"handleDrawerUpdate",value:function(e){var t=e.externalId,n=e.newExternalId,r=e.confirmed,i=this.dispatcher.getStore("ProductStore");if(t=i.getVerifiedExternalId(t)){var o=this._products.find((function(e){return e.externalId===t}));o&&(n&&n!==t&&(o.externalId=n),e.hasOwnProperty("confirmed")&&o.confirmed!==r&&(o.confirmed=r),this.emitChange())}}},{key:"handleProductRemove",value:function(e){var t=e.externalId;if(t){var n=this.dispatcher.getStore("ProductStore");t=n.getVerifiedExternalId(t);var r=this._products.findIndex((function(e){return e.externalId===t}));r<0||(this._products.splice(r,1),this.emit("product-remove",{externalId:t}),this.emitChange())}}},{key:"hydrate",value:function(e){var t,n,r=this;!(null!=e&&null!==(t=e.drawer)&&void 0!==t&&null!==(n=t.products)&&void 0!==n&&n.length)>0||e.reason===S.JC.REASON_TRANSFER_CALL&&this.dispatcher.waitFor("ProductStore",(function(){r._products=e.drawer.products,r.emitChange()}))}},{key:"getStoreData",value:function(e){if(e===S.JC.REASON_TRANSFER_CALL)return{products:this._products}}}]),i}(cu.Z);Tm.storeName="ProductDrawerStore",Tm.handlers=sn().invert({handlePrepareNewCallSession:S.Nb.PREPARE_NEW,handleDrawerUpdate:S.dF.UPDATE,handleProductAdd:S.dF.ADD,handleProductRemove:S.dF.REMOVE,hydrate:S.JC.HYDRATE});var bm=Tm;function _m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ym=(0,vo.Wz)(),Cm=!!ym.ticketId,xm=function(){function e(t,n,r,i,a,l){var c=this;o()(this,e),this.context=n,this.settingsService=r,this.callSessionStore=i;var s,u=this.context.getStore("DispatchStore");this.queueStore=this.context.getStore("QueueStore"),this.callSessionTimeStore=a,this.mediaStreamStore=l,this.userId=ym.userId,this.clientStore=this.context.getStore("ClientStore"),this.context.on(S.P1.CALL_STARTED,(function(){c._track({category:"call",action:"started",data:{payload:{isCameraOn:c.mediaStreamStore.isCameraOn,isMicOn:c.mediaStreamStore.isMicOn}}})})),this.context.on(S.P1.CALL_ENDED,(function(e){var t=e.reason,n="agent";t===Ct?c._track({category:"call",action:"ended_".concat(n,"_hangup")}):t===yt?c._track({category:"call",action:"ended_".concat("client","_hangup")}):t===Ot?c._track({category:"call",action:"ended_".concat(n,"_unload")}):c._track({category:"call",action:"ended_".concat(t)})})),i.on("change:status",(function(e){e===S.kp.RECONNECTING?c._track({category:"call",action:"reconnecting"}):e===S.kp.RUNNING&&s===S.kp.RECONNECTING?c._track({category:"call",action:"resume_from_reconnecting"}):e===S.kp.PAUSED?c._track({category:"call",action:"paused"}):e===S.kp.RUNNING&&s===S.kp.PAUSED&&c._track({category:"call",action:"resume_from_paused"}),s=e})),u.on(S.Uf.RECEIVED,(function(e){e.src==dd&&c._track({category:"call",action:"chat_message_sent"})}));var d=function(e){var t=e.externalId,n=e.confirmed;t&&n&&c._track({category:"call",action:"show_product",data:{sku:t}})};u.on(S.dF.ADD,d),u.on(S.dF.UPDATE,d),u.on(S.Ie.SELECT,(function(e){var t=e.tool;1==!!e.clientSelectedTool&&t&&c._track({category:"call",action:"show_".concat(t.replace("-","_"))})})),u.on(S.Ie.DESELECT,(function(e){if(1==!!e.clientDeSelectedTool){var t=c.context.getStore("ToolStore").previousTool;t&&c._track({category:"call",action:"close_".concat(t.replace("-","_"))})}})),u.on(S.Lm.TOGGLE_STREAM_INPUT,(function(e){var t=e.type,n=e.video;t===S.lo.SCREENSHARE&&c._track({category:"call",action:"".concat(n?"start":"stop","_screen_share")})})),this.context.getStore("CompareStore").on("visibilityChange",(function(e){c._track({category:"call",action:"".concat(e?"show":"close","_compare")})})),this.context.on(S.P1.SELECTED_MEDIA_CONNECTION,(function(e){var t=e.candidateType,n=e.protocol,r=e.relayIp;c._track({category:"webrtc",action:"selected_connection",data:{candidateType:t,protocol:n,relayIp:r}})}))}return l()(e,[{key:"remoteUrl",get:function(){return ym.mock?null:this.settingsService.get("tracking.endpoint",null)}},{key:"embedInterceptor",value:function(e,t){if(e===kt){if(Cm)return;if(t.sessionId){var n=((window.location||{}).ancestorOrigins||[])[0];this._track({category:"app",action:"session_id",clientSessionId:t.sessionId,data:{userAgent:window.navigator&&window.navigator.userAgent,referrerUrl:n}})}}else if(e===wt){if(Cm)return;this._track({category:"pre_call",action:"entered_queue",data:t})}else if(e===Nt){if(Cm)return;this._track({category:"pre_call",action:"entered_queue_failed",payload:t})}else if(e===Mt){var r=t.eventName,i=t.data;if("should-add-item-to-cart"===r)this._track({category:"cart",action:"add_to_cart",data:{sku:i.sku,quantity:1}});else if("should-update-item-in-cart"===r)this._track({category:"cart",action:"update_cart_item",data:{sku:i.sku,quantity:i.quantity}});else if("goto-checkout"===r){var o,a,l=this.context.getStore("BasketStore").getBasket(),c=function(e){return"object"===gd()(e)&&null!==e?{amount:e.current,currency:e.currency}:"string"==typeof e?{amount:e}:{amount:null}},s=this.context.getStore("ProductStore"),u=null==i||null===(o=i.cart)||void 0===o?void 0:o.items.map((function(e){var t=e.sku;return{sku:t,quantity:e.count,price:c(s.getProductByExternalId(t).price)}}));this._track({category:"cart",action:"checkout",data:{items:u,totalPrice:c(null===(a=l.total)||void 0===a?void 0:a.price)}})}else"navigate-to"===r&&this._track({category:"call",action:"agent_commanded_client_to_navigate"})}}},{key:"track",value:function(e,t,n){this._track({category:e,action:t,data:n})}},{key:"_track",value:function(e){var t,n,r=e.category,i=e.action,o=e.data,a=e.clientSessionId,l=e.agentSessionId,c=e.callSessionId||this.callSessionStore.getSessionId(),s=l,u=a;if(u=u||this.clientStore.getSessionId(),n=(null==o?void 0:o.ticketId)||this.queueStore.getTicketId(),t=S.$X.CLIENT_WEB,(s||u)&&r&&i){var d={};o&&(d=sn().cloneDeep(o));var p=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_m(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({source:"call",customerId:this.settingsService.get("merchant.id"),action:i,category:r,sourceApp:t,userId:this.userId,clientTimestamp:new Date,userAgent:window.navigator.userAgent,callTime:this.callSessionTimeStore.getElapsedSeconds()},d);c&&(p.callSessionId=c),u&&(p.clientSessionId=u,p.ticketId=n),void 0!==ym.group&&(p.ABGroup=ym.group);var m=JSON.stringify(p);null!==this.remoteUrl&&this._send(m)}else console.log("Skipping sending log",r,i,o,c,s,u)}},{key:"_send",value:function(e){var t=this;if(window.navigator&&window.navigator.sendBeacon)return new Promise((function(n,r){window.navigator.sendBeacon(t.remoteUrl,e)?n():r()}));fetch(this.remoteUrl,{headers:{"Content-Type":"application/json"},mode:"cors",method:"POST",body:e})}},{key:"_trackingTagAlreadySent",value:function(e,t){return this._lastSentTrackingTag&&e===this._lastSentTrackingTag.trackingTag&&t===this._lastSentTrackingTag.callSessionId}}]),e}();xm.serviceName="trackingService",xm.componentExports=["track"],xm.storeExports=["track"],xm.actionExports=["track"],xm.inject=["settings","CallSessionStore","CallSessionTimeStore","MediaStreamStore"];var Om=xm;function Im(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Am=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this,e)).channelsMap=new Map,t.waitForMap=new Map,t}return l()(i,[{key:"handleRegisterChannel",value:function(e){e.id&&this.channelsMap.get(e.id)!==e.channel&&(this.channelsMap.set(e.id,e.channel),this.emitChange(),this._resolveWaitingForPromises(e.id))}},{key:"handleUnregisterChannel",value:function(e){e.id&&this.channelsMap.has(e.id)&&(this.channelsMap.delete(e.id),this.emitChange())}},{key:"_resolveWaitingForPromises",value:function(e){if(this.waitForMap.has(e)){var t,n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Im(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Im(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}(this.waitForMap.get(e));try{for(n.s();!(t=n.n()).done;)(0,t.value)(this.getById(e))}catch(e){n.e(e)}finally{n.f()}this.waitForMap.delete(e)}}},{key:"_addPromiseResolver",value:function(e,t){var n=[];this.waitForMap.has(t)&&(n=this.waitForMap.get(t)),n.push(e),this.waitForMap.set(t,n)}},{key:"waitFor",value:function(e){var t=this;return new Promise((function(n){t.channelsMap.has(e)?n(t.getById(e)):t._addPromiseResolver(n,e)}))}},{key:"getById",value:function(e){return this.channelsMap.get(e)||null}}]),i}(cu.Z);Am.storeName="ActiveChannelStore",Am.handlers=sn().invert({handleRegisterChannel:S.sz.REGISTER,handleUnregisterChannel:S.sz.UNREGISTER});var Nm=Am,wm=function(){function e(t,n,r,i,a){o()(this,e),this.viddget=n,this.dispatchStore=r,this.dispatchService=a,this.dispatchStore.on(S.sz.MESSAGE,this._onRemoteChannelMessage.bind(this)),this.dispatchStore.on(S.sz.MESSAGE_RESPONSE,this._onRemoteChannelMessageResponse.bind(this)),this.activeChannelStore=i}return l()(e,[{key:"_onRemoteChannelMessage",value:function(e){var t,n=this,r=e.channelId,i=e.responseId,o=this.activeChannelStore.getById(r);i&&(t=function(e){n.dispatchService.dispatchRemote(S.sz.MESSAGE_RESPONSE,{channelId:r,data:e,responseId:i})}),o?this._fireMessage(o,e,t):this.activeChannelStore.waitFor(r).then((function(){o=n.activeChannelStore.getById(r),n._fireMessage(o,e,t)}))}},{key:"_onRemoteChannelMessageResponse",value:function(e){var t=e.channelId,n=this.activeChannelStore.getById(t);n?n._handleResponse(e.data,e.responseId):console.log("Received respons to non existing channel ".concat(e.channelId,"?"))}},{key:"_fireMessage",value:function(e,t,n){e._remoteReceiver.emit("message",t.data,n)}}]),e}();wm.serviceName="remoteChannelService",wm.inject=["DispatchStore","ActiveChannelStore","dispatchService"];var Rm=wm;function km(e,t){if(!t.hasOwnProperty("id")||!t.hasOwnProperty("channel"))throw new Error("registerRemoteChannelAction payload must include 'id' and 'channel'.");return e.dispatch(S.sz.REGISTER,{id:t.id,channel:t.channel})}function Lm(e,t){if(!t.hasOwnProperty("id"))throw new Error("unregisterRemoteChannelAction payload must include 'id'.");e.dispatch(S.sz.UNREGISTER,{id:t.id})}var Dm=function(){function e(t,n){o()(this,e),this.id=t,this._viddget=n,this._remoteReceiver=new hu.EventEmitter,this._dispather=n.getService("dispatchService"),this._nextResponseId=1,this._currentWaitingResponses={},this._opened=!1}return l()(e,[{key:"open",value:function(){this._viddget.executeAction(km,{id:this.id,channel:this}),this._opened=!0}},{key:"dispatchMessage",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;if(!this._opened)throw new Error("Channel must be opened before dispatching a message");return new Promise((function(i,o){var a={channelId:t.id,data:e};if(n){var l=t._nextResponseId++;a.responseId=l;var c=window.setTimeout((function(){delete t._currentWaitingResponses[l],o(new un.W5("Timeout waiting for a response for data ".concat(JSON.stringify(e))))}),1e3*r);t._currentWaitingResponses[l]={resolve:i,reject:o,timeoutId:c}}else i(null);t._dispather.dispatchRemote(S.sz.MESSAGE,a)}))}},{key:"_handleResponse",value:function(e,t){var n=this._currentWaitingResponses[t];n?(n.resolve(e),window.clearTimeout(n.timeoutId),delete this._currentWaitingResponses[t]):console.log("Received unexpected response ".concat(t))}},{key:"addListener",value:function(e){this._remoteReceiver.on("message",e)}},{key:"removeListener",value:function(e){this._remoteReceiver.removeListener("message",e)}},{key:"close",value:function(){viddget.executeAction(Lm,{id:this.id}),this._remoteReceiver.removeAllListeners("message")}}]),e}(),Pm=Dm,Mm=function e(t,n,r,i){var a=this;o()(this,e),v()(this,"_onRemoteChannelMessage",(function(e,t){var n=e.event,r=e.data;if("should-add-item-to-cart"===n||"should-update-item-in-cart"===n){var i=a.context.getStore("ProductStore").getProductByExternalId(null==r?void 0:r.sku);i&&(r.price=i.price,r.name=i.name,r.brand=i.brandName,r.attributes=i.attributes)}"function"==typeof t?a.externalInterfaceService.emitToEmbedInstance(n,r,!0).then((function(e){return!0===e&&"should-add-item-to-cart"===n&&a.context.executeAction(Se.e_,{externalId:r.sku}),e})).then(t).catch((function(e){return console.warn(e)})):a.externalInterfaceService.emitToEmbedInstance(n,r)})),this.context=n,this.externalInterfaceService=r,this._remoteChannel=new Pm("liveshopping-cart",this.context),this._remoteChannel.addListener(this._onRemoteChannelMessage),this._remoteChannel.open(),this.externalInterfaceService.on("customer-added-to-cart",function(){var e=xe()(ye().mark((function e(t){var n,r,o,l,c,s,u;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a._remoteChannel.dispatchMessage({event:"customer-added-to-cart",data:t.data},!1);case 2:if(i.track("call","customer_added_to_native_cart",t.data),o=a.context.getStore("ProductStore"),l="".concat(t.data.sku),!(null===(n=a.context.getStore("CallSessionStore").getMerchantIntegration())||void 0===n||null===(r=n.productHydration)||void 0===r?void 0:r.enabled)){e.next=8;break}return e.abrupt("return");case 8:return c=t.data,(s=o.getProductByExternalId(l))?s.price||(s.price={original:c.price,current:c.price,currency:c.currency},o.handleUpdateProduct({product:s})):(u=(0,gi.PT)(c),o.handleAddProduct({product:u}),s=u),e.next=13,Promise.resolve(s);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.externalInterfaceService.on("customer-removed-from-cart",function(){var e=xe()(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a._remoteChannel.dispatchMessage({event:"customer-removed-from-cart",data:t.data},!1);case 2:i.track("call","customer_removed_from_native_cart",t.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())};Mm.serviceName="basket",Mm.inject=["externalInterfaceService","trackingService"];var Bm=Mm;function jm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Um(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jm(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gm=function e(t,n,r){var i=this;o()(this,e),v()(this,"_onUpdateProducts",(function(e){(e.data.products||[]).forEach((function(e){e&&!e._error&&(e.locale=e.locale||i.context.getService("settings").get("language.locale"))})),i._remoteChannel.dispatchMessage({event:"products",data:{products:e.data.products}}),(e.data.products||[]).forEach((function(e){if(e&&!e._error){var t=e.product,n=e.locale;i.context.executeAction(ln.gK,{product:Um(Um({},t),!!n&&{locale:n})})}}))})),v()(this,"_onRemoteChannelMessage",(function(e,t){var n=e.event,r=e.data;"function"==typeof t?i.externalInterfaceService.emitToEmbedInstance(n,r,!0).then(t).catch((function(e){console.warn("Failed to receive response from embed instance",e)})):i.externalInterfaceService.emitToEmbedInstance(n,r)})),this.context=n,this.externalInterfaceService=r,this.externalInterfaceService.on("viddget:update-products",this._onUpdateProducts),this._remoteChannel=new Pm("product-hydration",this.context),this._remoteChannel.addListener(this._onRemoteChannelMessage),this._remoteChannel.open()};Gm.serviceName="productInventroy",Gm.inject=["externalInterfaceService"];var Fm=Gm,Wm=function e(t,n,r){var i=this;o()(this,e),v()(this,"_onRemoteChannelMessage",(function(e,t){var n=e.event,r=e.data;"function"==typeof t?i.externalInterfaceService.emitToEmbedInstance(n,r,!0).then(t):i.externalInterfaceService.emitToEmbedInstance(n,r)})),this.context=n,this.externalInterfaceService=r,this._remoteChannel=new Pm("product-search",this.context),this._remoteChannel.addListener(this._onRemoteChannelMessage),this._remoteChannel.open()};Wm.serviceName="productSearch",Wm.inject=["externalInterfaceService"];var Hm=Wm,Vm=function(){function e(t,n){var r=this;o()(this,e),v()(this,"_onMute",(function(){r._removeMuteListeners(),r._dispatchVisibilityEvent()})),v()(this,"_onVisibilityChange",(function(){if(r._removeMuteListeners(),r.videoIsMuted||r._addMuteListeners(),r._dispatchVisibilityEvent(),r.context.getService("trackingService").track("call","visibility_change",{state:document.visibilityState}),q.isIOS)if(document.hidden)r._shouldHandleWindowFocus=!0;else if(r._shouldHandleWindowFocus){r._shouldHandleWindowFocus=!1;var e=function(){var e=xe()(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t&&t.play){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,t.play();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log("Error playing video",e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}();e(document.querySelector(".client-video video")),e(document.querySelector(".agent-video video"))}})),this.context=n,document.addEventListener("visibilitychange",this._onVisibilityChange),this.context.getStore("DispatchStore").on(S.Lm.RECEIVED_LOCAL_STREAM,(function(){r._removeMuteListeners(),r.videoIsMuted||r._addMuteListeners()}))}return l()(e,[{key:"videoIsMuted",get:function(){return this.context.getStore("MediaStreamStore").localCameraStreams.some((function(e){return He(e)&&Ve(e)}))}},{key:"_dispatchVisibilityEvent",value:function(){this.context.dispatchRemote(S.Lb.VISIBILITY_CHANGE,{state:document.visibilityState,videoIsMuted:this.videoIsMuted})}},{key:"_removeMuteListeners",value:function(){var e=this;this.context.getStore("MediaStreamStore").localCameraStreams.forEach((function(t){((null==t?void 0:t.getVideoTracks())||[]).forEach((function(t){t&&t.removeEventListener("mute",e._onMute)}))}))}},{key:"_addMuteListeners",value:function(){var e=this;this.context.getStore("MediaStreamStore").localCameraStreams.forEach((function(t){((null==t?void 0:t.getVideoTracks())||[]).forEach((function(t){t&&t.addEventListener("mute",e._onMute)}))}))}}]),e}();Vm.serviceName="visibilityChangeService";var zm=Vm;function Zm(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ym(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ym(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function Ym(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Km="____n/a____",qm=function(){function e(t,n,r){var i=this;o()(this,e),v()(this,"getVariantAttributeSelectorOptions",(function(e,t,n,r){var o,a=[],l=Zm(t.values);try{for(l.s();!(o=l.n()).done;){var c=o.value,s=i.isAttributeValueValidVariantConfiguration(e,t.id,c.value,n,r),u={label:c.label,value:c.value,disabled:!s};if(s){var d,p=Object.assign({},n,v()({},t.id,c.value)),m=i.getVariantMatchingAttributeValues(e,p,r);u.inStock=!1!==(null==m?void 0:m.inStock)&&!1!==(null===(d=e.item)||void 0===d?void 0:d.inStock)}else u.inStock=!s;a.push(u)}}catch(e){l.e(e)}finally{l.f()}return a})),v()(this,"updateProductVariant",(function(e,t){var n=e.item,r=sn().cloneDeep(n);r.name=t.name,r.selectedVariant=t.id,r.identifier=t.identifier,r.externalId=t.externalId,r.id=(0,gi.T$)(r),r.infoText=t.infoText,r.image.front=t.image.front,r.image.back=t.image.back,r.images=t.images,r.price=t.price,r.url=t.url,r.attributes=[];var i,o=Zm(t.attributes);try{for(o.s();!(i=o.n()).done;){var a=i.value;if(a.value===Km){var l=JSON.parse(JSON.stringify(a));l.value="",r.attributes.push(l)}else r.attributes.push(a)}}catch(e){o.e(e)}finally{o.f()}return r.infobox=t.infobox,r.relatedProducts=t.relatedProducts,r})),this.context=n,this.settings=r}return l()(e,[{key:"getVariantContext",value:function(e,t){var n,r=e.variants,i=new Map,o=[],a=new Map,l=new Map,c={},s=null,u=Zm(r);try{for(u.s();!(n=u.n()).done;){var d=n.value;a.set(d.id,d);var p,m={__id:d.id},f=!1,h=Zm(d.attributes);try{for(h.s();!(p=h.n()).done;){var g=p.value;g.isConfigurable&&(""!=g.value&&null!==g.value||(g.value=Km),f=!0,m[g.id]=g.value,t&&t===d.id&&(null===s&&(s={}),s[g.id]=g.value),i.has(g.id)||(i.set(g.id,{id:g.id,name:g.name,values:[]}),c[g.id]=g.value),l.has(g.id)||l.set(g.id,new Set),l.get(g.id).has(g.value)||(i.get(g.id).values.push({label:g.value===Km?this.context.getText("PRODUCT_VARIANT_SELECTOR_EMPTY_ATTRIBUTE_VALUE"):g.value,value:g.value}),l.get(g.id).add(g.value)))}}catch(e){h.e(e)}finally{h.f()}f&&o.push(m)}}catch(e){u.e(e)}finally{u.f()}var v=s?a.get(t):c;return{item:e,variantAttributes:i,variantsAttributesObjs:o,variants:a,variantValues:v}}},{key:"getVariantMatchingAttributeValues",value:function(e,t,n){var r,i=e.variantsAttributesObjs,o=e.variants,a=Zm(i);try{var l=function(){var e=r.value,n=!0;if(sn().forEach(t,(function(t,r){if(e[r]!==t)return n=!1,!1})),n)return{v:o.get(e.__id)}};for(a.s();!(r=a.n()).done;){var c=l();if("object"===gd()(c))return c.v}}catch(e){a.e(e)}finally{a.f()}for(var s=function(e){var r,a=Zm(i);try{var l=function(){var i=r.value,a=!0;if(sn().forEach(t,(function(t,r){if(i[r]!==t&&n.indexOf(r)<=e)return a=!1,!1})),a)return{v:{v:o.get(i.__id)}}};for(a.s();!(r=a.n()).done;){var c=l();if("object"===gd()(c))return c.v}}catch(e){a.e(e)}finally{a.f()}},u=n.length;u>-1;u--){var d=s(u);if("object"===gd()(d))return d.v}return null}},{key:"isAttributeValueValidVariantConfiguration",value:function(e,t,n,r,i){var o,a=e.variantsAttributesObjs,l=e.variantAttributes,c=i.indexOf(t),s=!1,u=Zm(a);try{for(u.s();!(o=u.n()).done;){var d=o.value;if(d[t]===n){var p,m=!0,f=Zm(l.keys());try{for(f.s();!(p=f.n()).done;){var h=p.value;if(h!==t&&d[h]!==r[h]&&i.indexOf(h)<=c){m=!1;break}}}catch(e){f.e(e)}finally{f.f()}if(m){s=!0;break}}}}catch(e){u.e(e)}finally{u.f()}return s}}]),e}();qm.serviceName="activeProductService",qm.actionExports=["getVariantContext","updateProductVariant","isAttributeValueValidVariantConfiguration","getVariantMatchingAttributeValues"],qm.componentExports=["getVariantContext","updateProductVariant","isAttributeValueValidVariantConfiguration","getVariantMatchingAttributeValues","getVariantAttributeSelectorOptions"],qm.inject=["settings"];var Qm=qm,Xm=n(9669),Jm=n.n(Xm);function $m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ef(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$m(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tf=function(){function e(t,n,r,i,a,l,c,s){var u=this;o()(this,e),v()(this,"_sendCallData",(function(){var e=u.clientMeetingStore.meeting,t={},n={};if(e)t.meeting=ef(ef({connectLinkId:e.id},!!e.validFrom&&{meetingStartTime:e.validFrom.toISOString()}),!!e.title&&{title:e.title}),n.waitingTime=u._calculateWaitingTime(u.clientMeetingStore.startWaitingTime),u._sendToBackend("metadata",t);else{var r,i=u.queueStore.getSelectedQueue(),o=null===(r=u.queueStore.getQueue(i))||void 0===r?void 0:r.name;n.queueId=i,n.queueName=o,n.waitingTime=u._calculateWaitingTime(u.queueStore.startWaitingTime)}u._sendToBackend("waiting",n)})),v()(this,"_calculateWaitingTime",(function(e){return Math.round((new Date-e)/1e3)})),v()(this,"_sendClientData",(function(){if(u.callSessionStore.getSessionId()){var e=u.clientStore,t=e.firstName,n=e.lastName,r=e.externalId,i=e.email,o=u.context.getService("settings").get("language.locale"),a={},l=ef(ef(ef(ef(ef({},!!t&&{firstName:t}),!!n&&{lastName:n}),!!r&&{externalId:r}),!!i&&{email:i}),!!o&&{locale:o});Object.keys(l).length>0&&(a.clientData=l),Object.keys(a).length>0&&u._sendToBackend("metadata",a)}else u.context.once(S.P1.CALL_STARTED,u._sendClientData)})),v()(this,"_onProductAdded",(function(e){var t=e.externalId,n=e.confirmed;if(t&&n){var r=u.context.getStore("ProductStore").getProductByExternalId(t);u._addProduct(r)}})),v()(this,"_onChat",(function(e){u._addChat(e)})),v()(this,"_onPrepareNewCall",(function(){u.addedProducts=[],u.addedVTOProducts=[]})),v()(this,"_onProductTryOn",(function(e){var t=e.idList,n=void 0===t?[]:t,r=e.type;0!==n.length&&(r&&r!==S.i3.PRODUCT||n.forEach((function(e){u.addedVTOProducts.includes(e)||(u.addedVTOProducts.push(e),u._sendToBackend("virtual-try-on",{sku:e}))})))})),v()(this,"_mapAttributesToSend",(function(e){return e.map((function(e){return{id:e.id,name:e.name,value:e.value}}))})),this.context=n,this.callSessionStore=i,this.clientMeetingStore=l,this.clientStore=c,this.addedProducts=[],this.addedVTOProducts=[],this.queueStore=s,n.on(S.P1.CALL_STARTED,this._sendCallData),a.get("client.sendCallContents.enabled",!1)&&(c.on("metadata:updated",this._sendClientData),r.on(S.dF.ADD,this._onProductAdded),r.on(S.dF.UPDATE,this._onProductAdded),r.on(S.Uf.RECEIVED,this._onChat),r.on(S.Nb.PREPARE_NEW,this._onPrepareNewCall)),a.get("virtualTryOn.enabled",!1)&&this.context.getStore("VirtualTryOnStore").on("tryOnChange",this._onProductTryOn)}return l()(e,[{key:"_addChat",value:function(e){var t=e.src,n=e.date,r=e.message;this._sendToBackend("chat",{src:t.charAt(0).toUpperCase()+t.slice(1),date:n,message:r})}},{key:"_addProduct",value:function(e){var t={name:e.name,sku:e.externalId,imageUrl:e.image.front.url,price:e.price,publicUrl:e.url,shownAt:(new Date).toISOString(),locale:e.locale};e.rating&&(t.rating=e.rating),e.attributes&&(t.attributes=this._mapAttributesToSend(e.attributes)),e.brandName&&(t.brandName=e.brandName),e.infoText&&(t.description=e.infoText),e.subtitle&&(t.subtitle=e.subtitle),this.addedProducts.includes(t.sku)||(this.addedProducts.push(t.sku),this._sendToBackend("product",t))}},{key:"_sendToBackend",value:function(e,t){var n,r=this.callSessionStore.getSessionId();if(!r)throw new Error("No ongoing call?");if("chat"===e)n="add-chat-message";else if("product"===e)n="add-product";else if("virtual-try-on"===e)n="virtual-try-on";else if("metadata"===e)n="add-metadata";else{if("waiting"!==e)throw new Error("Invalid type ".concat(e));n="add-waiting-data"}var i="".concat(Jl.Z.clientAPIBaseUrl,"/calls/").concat(r,"/").concat(n),o="metadata"===e||"waiting"===e?"PATCH":"POST";Jm()({url:i,method:o,data:t})}}]),e}();tf.serviceName="callContents",tf.inject=["DispatchStore","CallSessionStore","settings","ClientMeetingStore","ClientStore","QueueStore"];var nf=tf,rf=function(){function e(t,n){var r=this;o()(this,e),v()(this,"onTimeUpdate",(function(){r.stream&&r.videoElement&&(r.seconds<=r.lastCapturedImageTime+5||r.captureImage())})),this.context=n,this.lastCapturedImageTime=-1;var i=this.context.getStore("DispatchStore");i.on(S.Lm.RECEIVED_REMOTE_STREAM,(function(e){var t=e.stream;e.type===S.lo.CAMERA&&t&&(r.stream=t,r.videoElement=it(r.stream),r.lastCapturedImageTime=-1)})),i.on(S.Lm.TOGGLE_STREAM_INPUT,(function(e){var t,n,i=e.type,o=void 0===i?S.lo.CAMERA:i,a=e.video,l=e.isClientStream;o===S.lo.CAMERA&&!0!==l&&(null===(t=r.videoElement)||void 0===t||t.removeEventListener("timeupdate",r.onTimeUpdate),a&&(r.lastCapturedImageTime=r.seconds+5,null===(n=r.videoElement)||void 0===n||n.addEventListener("timeupdate",r.onTimeUpdate)))})),i.on(S.Nb.STATUS,(function(e){var t,n,i=e.status;null===(t=r.videoElement)||void 0===t||t.removeEventListener("timeupdate",r.onTimeUpdate),i===S.kp.RUNNING&&Ve(r.stream)&&(r.lastCapturedImageTime=r.seconds+5,null===(n=r.videoElement)||void 0===n||n.addEventListener("timeupdate",r.onTimeUpdate))}))}return l()(e,[{key:"seconds",get:function(){var e;return Math.floor(null===(e=this.videoElement)||void 0===e?void 0:e.currentTime)||0}},{key:"captureImage",value:function(){this.stream&&(this.context.executeAction(on,{stream:this.stream}),this.lastCapturedImageTime=this.seconds)}}]),e}();rf.serviceName="ImageCaptureService";var of=rf;var af=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this,e)).meeting=null,t.startWaitingTime=null,t}return l()(i,[{key:"handleReceived",value:function(e){this.meeting=e,this.emitChange()}},{key:"getMeeting",value:function(){return this.meeting}}]),i}(cu.Z);af.storeName="ClientMeetingStore",af.handlers=sn().invert({handleReceived:kn.RECEIVED_MEETING_DATA});var lf=af;var cf=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this,e)).animations=[],t}return l()(i,[{key:"handleAddToCart",value:function(){var e="addToBasket";this.animations.includes(e)||(this.animations.push(e),this.emitChange())}},{key:"_removeAnimation",value:function(e){var t=this.animations.indexOf(e);t>=0&&(this.animations.splice(t,1),this.emitChange())}},{key:"handleRevertAddToCart",value:function(){this._removeAnimation("addToBasket")}},{key:"handleEndAnimation",value:function(e){this._removeAnimation(e)}}]),i}(cu.Z);cf.storeName="AnimationStore",cf.handlers=sn().invert({handleAddToCart:S.dA.ADD_TO_CART,handleRevertAddToCart:S.dA.REVERT_ADD_TO_CART,handleEndAnimation:S.TY.END});var sf=cf,uf=function(){function e(t,n){var r=this;o()(this,e),v()(this,"_videoDevices",(function(){return r.devices.filter((function(e){return"videoinput"===e.kind}))})),v()(this,"_audioDevices",(function(){return r.devices.filter((function(e){return"audioinput"===e.kind}))})),v()(this,"_changes",(function(e,t){return t.filter((function(t){return!e.some((function(e){return e.deviceId===t.deviceId&&e.groupId===t.groupId}))}))})),v()(this,"handleOnDeviceChange",xe()(ye().mark((function e(){var t,n,i,o,a,l,c,s,u,d,p,m;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r._videoDevices(),n=r._audioDevices(),i=r.context.getStore("MediaStreamStore").getLocalMediaStream(),o=Ue(i),a=je(i),l=t.find((function(e){return a===e.deviceId})),c=n.find((function(e){return o===e.deviceId})),e.next=9,r.context.executeAction(Sn);case 9:if(r._devices=e.sent,s=r._videoDevices(),u=r._audioDevices(),d=r._changes(n,u),r._changes(r._lastDeviceChanges,d).length||r._changes(d,r._lastDeviceChanges).length){e.next=15;break}return e.abrupt("return");case 15:if(r._lastDeviceChanges=d,l&&(p=s.find((function(e){return e.deviceId===l.deviceId&&e.groupId!==l.groupId}))),c&&(m=u.find((function(e){return e.deviceId===c.deviceId&&e.groupId!==c.groupId}))),p||m){e.next=20;break}return e.abrupt("return");case 20:clearTimeout(r.timeout),r.timeout=setTimeout((function(){var e,t;clearTimeout(r.timeout),r.context.executeAction(gn,{video:null===(e=p||l)||void 0===e?void 0:e.deviceId,microphone:null===(t=m||c)||void 0===t?void 0:t.deviceId})}),1e3);case 22:case"end":return e.stop()}}),e)})))),this.context=n,this._devices,this._lastDeviceChanges=[],navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",this.handleOnDeviceChange)}return l()(e,[{key:"devices",get:function(){return this._devices||this.context.getStore("MediaStreamStore").getMediaDevices()}}]),e}();uf.serviceName="DeviceChangeService";var df=uf;function pf(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return mf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mf(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function mf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ff=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(e){var t;return o()(this,i),t=r.call(this,e),v()(s()(t),"handlePrepareNewCallSession",(function(){t.activeMicCallout=!0,t.activeCamCallout=!0,t.displayState=S.LT.DEFAULT,t.displayCallInformation=null})),v()(s()(t),"handleDisableMicCallout",(function(){t.activeMicCallout=!1,t.emitChange()})),v()(s()(t),"handleDisableCamCallout",(function(){t.activeCamCallout=!1,t.emitChange()})),v()(s()(t),"handleDisableAllCallouts",(function(){t.activeMicCallout=!1,t.activeCamCallout=!1,t.emitChange()})),v()(s()(t),"handleDisplayState",function(){var e=xe()(ye().mark((function e(n){var r,i,o,a,l,c,s;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n||!n.state){e.next=28;break}if(r=n.state,Object.values(S.LT).some((function(e){return r===e}))){e.next=4;break}throw new Error("handleDisplayState recieved an invalid CallControlState: ".concat(r));case 4:if(!(i=t.dispatcher.callSessionService.getMediaConnection())){e.next=26;break}o=t.dispatcher.getStore("MediaStreamStore"),a=S.Rs.VIDEO_WIDTH,r===S.LT.SCREENSHARE&&(a=S.Rs.VIDEO_THUMBNAIL_HEIGHT),l=pf(o.getLocalMediaStream().getVideoTracks()),e.prev=10,l.s();case 12:if((c=l.n()).done){e.next=18;break}return s=c.value,e.next=16,i.scaleResolution(s,a);case 16:e.next=12;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(10),l.e(e.t0);case 23:return e.prev=23,l.f(),e.finish(23);case 26:t.displayState=r,t.emitChange();case 28:case"end":return e.stop()}}),e,null,[[10,20,23,26]])})));return function(t){return e.apply(this,arguments)}}()),v()(s()(t),"handleDisplayCallInformation",(function(e){t.displayCallInformation!==e&&(t.displayCallInformation=e,t.emitChange())})),v()(s()(t),"handleFocus",(function(e){var n=e.externalId;n&&(n&&!t.displayCallInformation||(t.displayCallInformation=!1,t.emitChange()))})),v()(s()(t),"getCallInformationDisplayStatus",(function(){return t.displayCallInformation})),v()(s()(t),"getDisplayState",(function(){return t.displayState})),t.activeMicCallout=!0,t.activeCamCallout=!0,t.displayState=S.LT.DEFAULT,t.displayCallInformation=null,t}return l()(i,[{key:"getActiveMediaCallouts",value:function(){return{mic:this.activeMicCallout,cam:this.activeCamCallout}}}]),i}(cu.Z);ff.storeName="ClientCallControlStore",ff.handlers=sn().invert({handlePrepareNewCallSession:S.Nb.PREPARE_NEW,handleDisableMicCallout:S.Rm.DISABLE_ACTIVE_MIC_CALLOUT,handleDisableCamCallout:S.Rm.DISABLE_ACTIVE_CAM_CALLOUT,handleDisableAllCallouts:S.Rm.DISABLE_ALL_ACTIVE_CALLOUTS,handleDisplayState:S.Rm.SET_DISPLAY_STATE,handleDisplayCallInformation:S.Rm.SET_DISPLAY_CALLINFORMATION,handleFocus:S.Cl.FOCUS});var hf=ff;var gf=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this,e)).status=null,t.callTime=0,t.timer=null,t.startTimestamp=null,t}return l()(i,[{key:"handleSessionStatusChange",value:function(e){if(this.status!==e.status){var t=this.status;this.status=e.status,this.status===S.kp.RUNNING&&t!==S.kp.PAUSED&&t!==S.kp.RECONNECTING&&t!==S.kp.FORWARDING?this._startTimer():this.status===S.kp.DISCONNECTING?this._stopTimer():this.status===S.kp.DISCONNECTED&&(this._stopTimer(),this.callTime=0,this.startTimestamp=null),this.emitChange()}}},{key:"handlePrepareNewCallSession",value:function(){this._stopTimer(),this.callTime>0&&(this.startTimestamp=null,this.callTime=0,this.emitChange())}},{key:"_startTimer",value:function(){var e=this;this._stopTimer(),this.startTimestamp=(new Date).getTime(),this.callTime=0,this.timer=setInterval((function(){var t=(new Date).getTime();e.callTime=Math.floor((t-e.startTimestamp)/1e3),e.emitChange()}),1e3)}},{key:"_stopTimer",value:function(){this.timer&&(clearInterval(this.timer),this.timer=null)}},{key:"getElapsedHumanTime",value:function(){var e=this.callTime>=3600?"HH:mm:ss":"mm:ss";return Wc()().startOf("day").seconds(this.callTime).format(e)}},{key:"getElapsedSeconds",value:function(){return this.callTime}}]),i}(cu.Z);gf.storeName="CallSessionTimeStore",gf.handlers=sn().invert({handleSessionStatusChange:S.Nb.STATUS,handlePrepareNewCallSession:S.Nb.PREPARE_NEW});var vf=gf;var Ef=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this,e)).reset(),t}return l()(i,[{key:"isVTOActive",get:function(){var e;return(null===(e=this.idList)||void 0===e?void 0:e.length)>0}},{key:"tryOnIds",get:function(){return this.idList}},{key:"focusedProduct",get:function(){return this._focusedProduct}},{key:"categories",get:function(){return[]}},{key:"activeTryOnIds",get:function(){return this.idList}},{key:"inActiveTryOnIds",get:function(){var e=this;return Array.from(this.products.keys()).filter((function(t){return!e.activeTryOnIds.some((function(e){return e===t}))&&e.products.get(t).used})).sort((function(t,n){return t=e.products.get(t),n=e.products.get(n),t.time<n.time?1:t.time>n.time?-1:0}))}},{key:"isPerfectCorpSupported",get:function(){var e,t=(null===(e=this.dispatcher.getStore("CallSessionStore").getMerchantIntegration())||void 0===e?void 0:e.virtualTryOn)||{},n=t.enabled,r=t.perfectCorp;return n&&!!r}},{key:"_track",value:function(e,t){this.dispatcher.trackingService&&this.dispatcher.trackingService.track("call",e,{payload:{id:t}})}},{key:"_getVariantIndex",value:function(e,t){var n=this;return t.findIndex((function(t){return n.products.get(t).variants.some((function(t){return t===e}))}))}},{key:"_getTypeIndex",value:function(e,t){var n=this;return t.findIndex((function(t){return n.products.get(e).type===n.products.get(t).type}))}},{key:"_updateList",value:function(e,t,n){var r;if((r=n?this._getTypeIndex(e,t):this._getVariantIndex(e,t))>=0){var i,o=null===(i=this.products.get(t[r]))||void 0===i?void 0:i.expanded;this.products.get(e).expanded=o,t.splice(r,1,e)}else t.unshift(e);return t}},{key:"isProductLoaded",value:function(e){var t;return e?!(null!==(t=this.products.get(e))&&void 0!==t&&t.applying):!Array.from(this.products.values()).some((function(e){return e.applying}))}},{key:"isTryingOnProduct",value:function(e){return this.idList.some((function(t){return t===e}))}},{key:"reset",value:function(){this.idList=[],this.usedIdList=[],this.type=S.i3.PRODUCT,this.products=new Map,this.patterns=new Map,this._categories=new Map,this._focusedProduct=null}},{key:"handleProductHydrated",value:function(e){var t=this,n=e.product;if(this.dispatcher.settings.get("virtualTryOn.enabled")){var r=this.dispatcher.getStore("CallSessionStore").getAgentPlatform();(null==r?void 0:r.device)!==q.DeviceType.MOBILE&&this.dispatcher.waitFor("ProductStore",(function(){var e,r=n||{},i=r.sku,o=r.variations,a=void 0===o?[]:o,l=r.defaultVariationIndex,c=void 0===l?0:l,s=[],u=t.dispatcher.getStore("ProductStore").getVerifiedExternalId(i||(null===(e=a[c])||void 0===e?void 0:e.sku));t.products.has(u)||(i&&s.push(i),a.forEach((function(e){s.includes(e.sku)||s.push(e.sku)})),s.forEach((function(e){return t.products.set(e,{loading:!0})})),t.dispatcher.virtualTryOn&&t.dispatcher.virtualTryOn.fetchPerfectCorpSkus(u,s),t.emitChange())}))}}},{key:"isProductBeingFetched",value:function(e){var t;return!(null===(t=this.products.get(e))||void 0===t||!t.loading)}},{key:"isProductSupported",value:function(e){var t=this.products.get(e);return!!t&&!t.loading&&t.supported}},{key:"isProductExpanded",value:function(e){return!1}},{key:"getPatternUsedBySku",value:function(e){var t=this.products.get(e);if(t)return this.patterns.get(t.productGUID)}},{key:"getPerfectCorpProductPatterns",value:function(e){if(!e)return[];var t=this.products.get(e);return t?t.stylePatterns:[]}},{key:"getPerfectCorpColorSet",value:function(e){var t=this,n=this.products.get(e);if(null!=n&&n.sku)return(this.dispatcher.getStore("ProductStore").getVariantsByExternalId(n.sku)||[]).map((function(e){return t.products.get(e.sku)})).filter((function(e){return!!e&&t.isProductSupported(e.sku)}))}},{key:"handlePrepareNewCallSession",value:function(){this.reset(),this.emitChange()}},{key:"handleSDKLoaded",value:function(){var e=this;Array.from(this.products.keys()).forEach((function(t){var n=e.products.get(t);if(!n.loading&&!n.hasOwnProperty("supported")){var r=e.dispatcher.getStore("ProductStore"),i=r.getVerifiedExternalId(t),o=r.getVariantsByExternalId(i).map((function(e){return e.sku}));o.concat(i).forEach((function(t){return e.products.set(t,{loading:!0})})),e.dispatcher.virtualTryOn.fetchPerfectCorpSkus(i,o)}}))}},{key:"handleAddProducts",value:function(e){var t=this,n=e.products,r=e.skus,i=void 0===r?[]:r;0!==n.length&&(n.forEach((function(e){e.variants=i,t.products.set(e.sku,e)})),this.emitChange())}},{key:"handleTryOnAppend",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.pending,r=void 0!==n&&n;if(t){var i=(r?this.usedIdList:this.activeTryOnIds).slice();if(!i.some((function(e){return e===t}))){if(i=this._updateList(t,i,!r),r)return this.usedIdList=i,void this.emitChange();this.handleTryOn({idList:i})}}}},{key:"handleTryOnRemove",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;if(e.hide,t){var n=this.activeTryOnIds.some((function(e){return e===t}));n&&this.handleTryOn({idList:this.activeTryOnIds.filter((function(e){return e!==t}))})}else this.handleTryOn({idList:[]})}},{key:"handleTryOn",value:function(e){var t=this,n=e.idList,r=e.type,i=void 0===r?S.i3.PRODUCT:r;if(JSON.stringify(this.idList)!==JSON.stringify(n)||this.type!==i){var o=!1,a=sn().difference(this.idList,n),l=sn().difference(n,this.idList);l.forEach((function(e){t._track("add_virtual_try_on",e);var n=t.products.get(e);n.applying=!0,n.used=!0,n.expanded=!0,t._categories.set(n.type,{expanded:!0}),t.usedIdList=t._updateList(e,t.usedIdList),t._focusedProduct=e})),a.forEach((function(e){t._track("remove_virtual_try_on",e);var r=t.products.get(e);r.applying=!1,r.expanded=!1,o||(o=t._getTypeIndex(e,n)<0),r.time=Date.now()})),this.idList=n,this.type=i,n.length>0?this.dispatcher.virtualTryOn.applyVirtualTryOnProductBySku(n,o):this.dispatcher.virtualTryOn.stopVirtualTryOn(),this.emit("tryOnChange",{idList:this.tryOnIds,action:a.length>l.length?S.B0.TRY_ON_REMOVE:S.B0.TRY_ON}),this.emitChange()}}},{key:"handleSetFocus",value:function(e){var t=e.id;this._focusedProduct!==t&&(this._focusedProduct=t,this.emitChange())}},{key:"handleProductLoaded",value:function(e){var t=this;e.skus.forEach((function(e){var n=t.products.get(e);n.applying=!1,n.loading=!1})),this.emitChange()}},{key:"handleSetPattern",value:function(e){var t=e.sku,n=e.patternId,r=this.products.get(t);r&&(this.isTryingOnProduct(t)&&(r.applying=!0),this.patterns.set(r.productGUID,n),this.emitChange())}},{key:"handleProductExpand",value:function(e){var t=e.sku,n=e.expanded,r=this.products.get(t);r&&r.expanded!==n&&(r.expanded=n,this.emitChange())}},{key:"handleCategoryExpand",value:function(e){var t=e.type,n=e.expanded,r=this._categories.get(t);r&&r.expanded!==n&&(r.expanded=n,this.emitChange())}}]),i}(cu.Z);Ef.storeName="VirtualTryOnStore",Ef.handlers=sn().invert({handleTryOn:S.B0.TRY_ON,handlePrepareNewCallSession:S.Nb.PREPARE_NEW,handleAddProducts:S.B0.ADD,handleProductLoaded:S.B0.PRODUCT_LOADED,handleSetPattern:S.B0.SET_PATTERN,handleProductHydrated:S.Cl.ADD,handleTryOnAppend:S.B0.TRY_ON_APPEND,handleTryOnRemove:S.B0.TRY_ON_REMOVE,handleProductExpand:S.B0.SET_PRODUCT_EXPANDED,handleCategoryExpand:S.B0.SET_CATEGORY_EXPANDED,handleSetFocus:S.B0.SET_FOCUS,handleSDKLoaded:S.B0.SDK_LOADED});var Sf=Ef,Tf=function(){function e(t,n){var r=this;o()(this,e),v()(this,"onFullscreenChangeEvent",(function(e){console.log("onFullscreenChangeEvent",e)})),this.context=n,this.fullScreenEventNames.forEach((function(e){document.addEventListener(e,r.onFullscreenChangeEvent)}))}return l()(e,[{key:"fullScreenEventNames",get:function(){return["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"]}},{key:"fullScreenElement",get:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement}},{key:"fullScreenEnabledElement",value:function(e){return(0,q.isIOS)()&&"VIDEO"!==e.nodeName?e.getElementsByTagName("video")[0]:e}},{key:"toggle",value:function(e){(e=this.fullScreenEnabledElement(e))!==this.fullScreenElement?this.enter(e).catch((function(){console.log("Failed to enter fullscreen. Make sure the iframe allows fullscreen.")})):this.exit()}},{key:"enter",value:function(e){return e=this.fullScreenEnabledElement(e),this.fullScreenElement===e?Promise.resolve():e.requestFullscreen?e.requestFullscreen():e.webkitEnterFullScreen?new Promise((function(t,n){try{return e.addEventListener("webkitendfullscreen",(function t(){e.removeEventListener("webkitendfullscreen",t);var n=function(){e.play().then((function(){console.log("Video resumed")})).catch((function(){console.log("Failed to resume video after exiting fullscreen")}))};e.addEventListener("pause",(function t(){e.removeEventListener("pause",t),n()})),n()})),e.webkitEnterFullScreen(),t()}catch(e){return n()}})):e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen?e.msRequestFullscreen():Promise.reject()}},{key:"exit",value:function(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}}]),e}();Tf.serviceName="fullscreen",Tf.componentExports=["toggle"];var bf=Tf,_f=function(){window.onbeforeunload=null},yf=["queue","start","enter-from-connect-link"],Cf=function(){function e(t,n,r,i){var a=this;o()(this,e),v()(this,"_onChangeScreen",(function(e){if(a.currentScreen=sn().isObject(e)?e.screen:e,!yf.includes(a.currentScreen))return a.releaseVersionCheckInterval&&(window.clearInterval(a.releaseVersionCheckInterval),delete a.releaseVersionCheckInterval),void(a.orgVersionCheckInterval&&(window.clearInterval(a.orgVersionCheckInterval),delete a.orgVersionCheckInterval));if(!a.releaseVersionCheckInterval){var t=1e3*a.settingsService.get("autoReload.releaseVersionCheckInterval",30);a.releaseVersionCheckInterval=window.setInterval(a._checkReleaseVersion,t),Date.now()-a.lastReleaseVersionCheck>t&&a._checkReleaseVersion()}if(!a.orgVersionCheckInterval){var n=1e3*a.settingsService.get("autoReload.orgVersionCheckInterval",30);a.orgVersionCheckInterval=window.setInterval(a._checkOrgVersion,n),Date.now()-a.lastOrgVersionCheck>n&&a._checkOrgVersion()}a._checkReload()})),v()(this,"_checkReleaseVersion",xe()(ye().mark((function e(){var t,n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.lastReleaseVersionCheck=Date.now(),i=void 0,(i="https://one-to-one.bambuser.com/refresh-us/call-widget/").endsWith("/")||(i+="/"),t=i+="version.json",e.next=4,fetch(t,{cache:"no-store"});case 4:if((n=e.sent).ok){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,n.json();case 9:"d600b71d"===(r=e.sent).version&&"221223083335"===r.buildNumber||(a.shouldForceReload=!0,console.log("Detected new release version ",r.version,r.buildNumber),a._checkReload());case 13:case"end":return e.stop()}var i}),e)})))),v()(this,"_checkOrgVersion",xe()(ye().mark((function e(){var t,n,r,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.lastOrgVersionCheck=Date.now(),t=a.settingsService.get("merchant.id"),n="".concat(Jl.Z.orgVersionBaseUrl,"/").concat(t,".json"),e.next=5,fetch(n,{cache:"no-store"});case 5:if((r=e.sent).ok){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,r.json();case 10:if(i=e.sent,null!==a.currentOrgVersionValue){e.next=14;break}return a.currentOrgVersionValue=i.version,e.abrupt("return");case 14:i.version>a.currentOrgVersionValue&&(a.currentOrgVersionValue=i.version,a.shouldForceReload=!0,a.shouldVerifySettings=!0,console.log("Detected new org version ",i.version),a._checkReload());case 15:case"end":return e.stop()}}),e)})))),this.context=n,this.settingsService=r,this.currentScreen=null,this.shouldForceReload=!1,this.lastReleaseVersionCheck=Date.now(),this.lastOrgVersionCheck=Date.now(),this.currentOrgVersionValue=null;var l=!(window&&"testing"===window.ENV);r.get("autoReload.enabled",l)&&(i.on(S.B7.SCREEN,this._onChangeScreen),this._checkOrgVersion())}var t;return l()(e,[{key:"_checkReload",value:(t=xe()(ye().mark((function e(){var t,n,r,i,o,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.shouldForceReload&&yf.includes(this.currentScreen)){e.next=2;break}return e.abrupt("return");case 2:if("queue"!==this.currentScreen){e.next=6;break}return t=this.context.getService("queueService"),e.next=6,t.cancelTicket();case 6:if(!this.shouldVerifySettings){e.next=17;break}return n=this.settingsService.get("merchant.id"),e.next=10,(0,Yc.l3)(n);case 10:if(r=e.sent,i=r.client||{},o=i.callWidgetUrl,a=window.location.origin+window.location.pathname,!o||o===a){e.next=17;break}return _f(),window.location="".concat(o).concat(window.location.search),e.abrupt("return");case 17:_f(),e.next=21;break;case 21:e.next=25;break;case 25:window.location.reload();case 26:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();Cf.serviceName="forceReloadService",Cf.inject=["settings","DispatchStore"];var xf=Cf,Of=n(55347);function If(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Af(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?If(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):If(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Nf=function(){function e(t,n,r){var i=this;o()(this,e),v()(this,"initPerfectCorp",(function(){var e=i.settings.get("virtualTryOn.perfectCorp.key",!1);if(e){var t=i.context.getStore("CallSessionStore").getAgentPlatform();(null==t?void 0:t.device)!==q.DeviceType.MOBILE&&(window.ymkAsyncInit=function(){i.YMKInitialized=!0;var e=i.context.getStore("MediaStreamStore").getLocalMediaStream(),t=it(e),n={width:t.videoWidth,height:t.videoHeight};YMK.init(Af({disableUI:!0},function(e,t){if(!e||!t)return e;var n=e.width/e.height,r=t.width/t.height;if(n===r)return t;var i=t.width,o=t.height;if(n>r){for(;i/n%1!=0;)i--;o=i/n}else if(n<r){for(;o*n%1!=0;)o--;i=o*n}return{width:i,height:o}}(n,{width:600,height:900}))),i.context.executeAction(Qr),Ve(e)&&i.openPerfectCorpStream()},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;if(e&&t){var n=t.createElement("script");n.type="text/javascript",n.async=!0,n.src="https://plugins-media.makeupar.com/c41404/sdk.js?apiKey=".concat(e);var r=t.getElementsByTagName("script")[0];null!=r&&r.parentNode?r.parentNode.insertBefore(n,r):t===document?document.head.appendChild(n):t.append(n)}}(e))}})),v()(this,"perfectCorpUnsupportedResolution",(function(){console.log("Resolution not supported")})),v()(this,"perfectCorpReset",(function(){console.log("reset")})),v()(this,"perfectCorpClosed",(function(){console.log("closed");var e=i.context.getStore("MediaStreamStore").getLocalMediaStream(),t=i.context.getStore("MediaStreamStore").getLocalMediaStream(S.lo.VIRTUAL_TRY_ON);if(t){var n=i.context.getService("callSessionService").getMediaConnection();if(n){try{n.replaceStreamTracks(t,e)}catch(e){console.log("Failed to replace track on vto closed")}i.removePerfectCorpListeners()}}})),v()(this,"perfectCorpLoading",(function(e){console.log("loading",e)})),v()(this,"perfectCorpLoaded",(function(){console.log("ymk loaded");var e=i.context.getStore("VirtualTryOnStore").activeTryOnIds;e.length?i.applyVirtualTryOnProductBySku(e):i.pauseYMKModule()})),v()(this,"resumeOrPauseYMKBasedOnStreamState",(function(e){var t=i.context.getStore("MediaStreamStore").getLocalMediaStream(S.lo.VIRTUAL_TRY_ON),n=i.context.getStore("VirtualTryOnStore");switch(!0){case!t:case!n.isVTOActive:case!Ve(e):return void i.pauseYMKModule();default:i.resumeYMKModule()}})),v()(this,"changeStream",(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=i.context.getStore("VirtualTryOnStore");if(t.isVTOActive){var n=i.context.getStore("MediaStreamStore").getLocalMediaStream(),r=i.context.getStore("MediaStreamStore").getLocalMediaStream(S.lo.VIRTUAL_TRY_ON);if(r){var o=i.context.getService("callSessionService").getMediaConnection();if(o)try{e?(i.resumeYMKModule(),o.replaceStreamTracks(n,r)):(i.pauseYMKModule(),o.replaceStreamTracks(r,n))}catch(e){console.log("Failed to replace track on vto closed")}}}})),v()(this,"handleViewPortChange",(function(e){var t,n;if(null===(t=i.context.getStore("CallSessionStore").getMerchantIntegration())||void 0===t||null===(n=t.coBrowsing)||void 0===n||!n.enabled)return(null==e?void 0:e.type)===S.DI.FLOATING?i.changeStream(!1):(null==e?void 0:e.type)===S.DI.NORMAL?i.changeStream(!0):void 0})),v()(this,"openPerfectCorpStream",xe()(ye().mark((function e(){var t,n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.registerPerfectCorpListeners(),!(null!==(t=YMK)&&void 0!==t&&t.loading||i.isYMKLoaded())){e.next=3;break}return e.abrupt("return");case 3:if(!i.cancableARVideoTrack){e.next=5;break}return e.abrupt("return");case 5:return n=i.context.getStore("MediaStreamStore").getLocalMediaStream(),r=n.getVideoTracks()[0],i.cancableARVideoTrack=dn(new Promise((function(e,t){YMK.openLiveStream({videoStreamTrack:r}).then((function(t){var n=t.track;i.arTrackReady=!0,e(n)})).catch((function(e){e.isCanceled||t(e)}))}))),e.prev=8,e.next=11,i.cancableARVideoTrack.promise;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(8),console.error("Failed to open vto stream",e.t0);case 16:case"end":return e.stop()}}),e,null,[[8,13]])})))),v()(this,"stopVirtualTryOn",xe()(ye().mark((function e(){var t,n,r,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,Gn.zn)(),i.clearProductsFromYMKModule(),i.pauseYMKModule(),t=i.context.getStore("MediaStreamStore"),n=t.localVirtualTryOnStream){e.next=7;break}return e.abrupt("return");case 7:if(r=t.getLocalMediaStream(),!(o=i.context.getService("callSessionService").getMediaConnection())){e.next=19;break}return e.prev=10,e.next=13,o.replaceStreamTracks(n,r);case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(10),console.error("Failed to replace vto stream with camera stream",e.t0),e.abrupt("return");case 19:setImmediate((function(){i.context.dispatch(S.Lm.RECEIVED_LOCAL_STREAM,{type:S.lo.VIRTUAL_TRY_ON,stream:null})}));case 20:case"end":return e.stop()}}),e,null,[[10,15]])})))),v()(this,"applyMakeupBySkus",(function(e){e.forEach((function(t,n){var r=i.context.getStore("VirtualTryOnStore").getPatternUsedBySku(t);YMK.applyMakeupBySku(t,r,(function(r){r||console.warn("Failed applyMakeupBySku: ".concat(t)),e.length===n+1&&i.context.executeAction(qr,{skus:e}),(0,q.isMobileDevice)()&&(0,Gn.zn)(0)}))}))})),v()(this,"applyVirtualTryOnProductBySku",function(){var e=xe()(ye().mark((function e(t){var n,r,o,a,l,c,s=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!(s.length>1&&void 0!==s[1])||s[1],e.next=3;break;case 3:if(0!==t.length){e.next=5;break}return e.abrupt("return");case 5:if(i.isYMKLoaded()&&!YMK.loading){e.next=7;break}return e.abrupt("return");case 7:if((r=i.context.getStore("MediaStreamStore")).localVirtualTryOnStream){e.next=29;break}return i.resumeYMKModule(),e.next=13,i.cancableARVideoTrack.promise;case 13:if(o=e.sent,a=r.activeLocalCameraStream,o.enabled=Ve(a),l=new MediaStream([o].concat(a.getAudioTracks())),!(c=i.context.getService("callSessionService").getMediaConnection())){e.next=28;break}return e.prev=19,e.next=22,c.replaceStreamTracks(a,l);case 22:e.next=28;break;case 24:return e.prev=24,e.t0=e.catch(19),console.error("Failed to replace stream with new vto stream",e.t0),e.abrupt("return");case 28:i.context.dispatch(S.Lm.RECEIVED_LOCAL_STREAM,{type:S.lo.VIRTUAL_TRY_ON,stream:l});case 29:n&&i.clearProductsFromYMKModule(),i.applyMakeupBySkus(t);case 31:case"end":return e.stop()}}),e,null,[[19,24]])})));return function(t){return e.apply(this,arguments)}}()),this.context=n,this.settings=n.getService("settings"),this.YMKInitialized=!1,this.context.once(S.P1.CALL_STARTED,this.initPerfectCorp),this.context.on(S.P1.CALL_ENDED,(function(){var e;i.YMKInitialized&&(i.closeYMKModule(),i.closeYMKEngine()),null===(e=i.cancableARVideoTrack)||void 0===e||e.cancel(),i.cancableARVideoTrack=null,i.arTrackReady=!1,i.YMKInitialized=!1})),r.on(S.Lm.TOGGLE_STREAM_INPUT,(function(e){i.YMKInitialized&&(e.type&&e.type!==S.lo.CAMERA||e.isClientStream&&i.context.getStore("MediaStreamStore").getLocalMediaStream(S.lo.VIRTUAL_TRY_ON)&&e.hasOwnProperty("video")&&(i.isYMKLoaded()?e.video?i.resumeYMKModule():i.pauseYMKModule():i.openPerfectCorpStream()))})),r.on(S.Lm.RECEIVED_LOCAL_STREAM,function(){var e=xe()(ye().mark((function e(t){var n,r,o,a,l;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.YMKInitialized){e.next=2;break}return e.abrupt("return");case 2:if(!t.type||t.type===S.lo.CAMERA){e.next=4;break}return e.abrupt("return");case 4:if(i.isYMKLoaded()){e.next=7;break}return i.openPerfectCorpStream(),e.abrupt("return");case 7:if(e.prev=7,i.arTrackReady){e.next=11;break}return e.next=11,null===(r=i.cancableARVideoTrack)||void 0===r?void 0:r.promise;case 11:return null===(n=i.cancableARVideoTrack)||void 0===n||n.cancel(),i.cancableARVideoTrack=dn(new Promise((function(e,n){YMK.setVideoStreamTrack({videoStreamTrack:t.stream.getVideoTracks()[0]}).then((function(t){var n=t.track;e(n)})).catch((function(e){n(e)}))}))),i.resumeOrPauseYMKBasedOnStreamState(t.stream),e.next=16,i.cancableARVideoTrack.promise;case 16:e.next=25;break;case 18:if(e.prev=18,e.t0=e.catch(7),!e.t0.isCanceled){e.next=22;break}return e.abrupt("return");case 22:return i.closeYMKModule(),console.error("Failed to update stream for vto",e.t0),e.abrupt("return");case 25:return e.prev=25,e.next=28,i.cancableARVideoTrack.promise;case 28:if((o=e.sent).enabled=Ve(t.stream),a=new MediaStream([o].concat(t.stream.getAudioTracks())),!(l=i.context.getService("callSessionService").getMediaConnection())){e.next=35;break}return e.next=35,l.replaceStreamTracks(i.context.getStore("MediaStreamStore").activeLocalCameraStream,a);case 35:setImmediate((function(){i.context.dispatch(S.Lm.RECEIVED_LOCAL_STREAM,{type:S.lo.VIRTUAL_TRY_ON,stream:a})})),e.next=41;break;case 38:e.prev=38,e.t1=e.catch(25),console.error("Failed to change video track",e.t1);case 41:case"end":return e.stop()}}),e,null,[[7,18],[25,38]])})));return function(t){return e.apply(this,arguments)}}()),r.on(S.B0.SET_PATTERN,(function(e){var t=e.sku;if(i.context.getStore("VirtualTryOnStore").isTryingOnProduct(t)){var n=i.context.getStore("VirtualTryOnStore").activeTryOnIds;n.length&&i.applyMakeupBySkus(n)}})),n.getService("messageService").on(S.zC.TRANSFERRED,(function(){n.executeAction(Kr,{idList:[]}),i.YMKInitialized||i.initPerfectCorp()})),r.on(S.KR.CLIENT_VIEWPORT_MODE,this.handleViewPortChange)}var t;return l()(e,[{key:"addPerfectCorpListeners",value:function(){YMK.addEventListener("loading",this.perfectCorpLoading),YMK.addEventListener("loaded",this.perfectCorpLoaded),YMK.addEventListener("closed",this.perfectCorpClosed),YMK.addEventListener("reset",this.perfectCorpReset),YMK.addEventListener("unsupportedResolution",this.perfectCorpUnsupportedResolution)}},{key:"removePerfectCorpListeners",value:function(){YMK.removeEventListener("loading",this.perfectCorpLoading),YMK.removeEventListener("loaded",this.perfectCorpLoaded),YMK.removeEventListener("closed",this.perfectCorpClosed),YMK.removeEventListener("reset",this.perfectCorpReset),YMK.removeEventListener("unsupportedResolution",this.perfectCorpUnsupportedResolution)}},{key:"registerPerfectCorpListeners",value:function(){this.removePerfectCorpListeners(),this.addPerfectCorpListeners()}},{key:"_getCategoryTranslation",value:function(e){var t="VTO_CATEGORY_".concat(e.toUpperCase());return this.context.hasText(t)?this.context.getText(t):(0,Of.fm)(e).replace("_"," ")}},{key:"mapPerfectCorpDataToProducts",value:function(e){var t=this;if(null==e||!e.length)return[];var n=[];return e.forEach((function(e){var t;null!=e&&null!==(t=e.items)&&void 0!==t&&t.length&&(e.items=e.items.map((function(t){return t.productGUID=e.skuGUID,t.type=e.type,t})),n=n.concat(e.items))})),n.filter((function(e){if(e.shadeId&&e.itemGUID&&e.itemColors)return!!t.context.getStore("ProductStore").getVerifiedExternalId(e.shadeId)})).map((function(e){return Af(Af(Af({supported:!0,sku:e.shadeId,type:t._getCategoryTranslation(e.type),colorCodes:e.itemColors,guid:e.itemGUID},!!e.itemPatterns&&{stylePatterns:e.itemPatterns}),!!e.itemName&&{colorLabel:e.itemName}),!!e.itemTexture&&{category:e.itemTexture})}))}},{key:"fetchPerfectCorpSkus",value:(t=xe()(ye().mark((function e(t,n){var r,i,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,YMK.getSkuDetails({shadeIds:[t]});case 5:if(null!=(r=e.sent)&&r.data){e.next=8;break}throw new Error("Failed fetching YMK.getSkuDetails for skus: ".concat(n));case 8:if(i=r.data,o=this.mapPerfectCorpDataToProducts(i).filter((function(e){var r=n.some((function(t){return t===e.sku}));return r||console.warn("VTO misconfiguration, product ".concat(e.sku," is not a variant belonging to ").concat(t)),r})),n.forEach((function(e){o.some((function(t){return t.sku===e}))||o.push({sku:e,supported:!1})})),!(o.length<1)){e.next=13;break}return e.abrupt("return");case 13:this.context.executeAction(Zr,{products:o,skus:n}),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),console.log("Perfect corp error",e.t0),this.context.executeAction(qr,{skus:n});case 20:case"end":return e.stop()}}),e,this,[[0,16]])}))),function(e,n){return t.apply(this,arguments)})},{key:"isYMKLoaded",value:function(){var e,t;return null===(e=YMK)||void 0===e||null===(t=e.isLoaded)||void 0===t?void 0:t.call(e)}},{key:"closeYMKEngine",value:function(){var e,t;null===(e=YMK)||void 0===e||null===(t=e.closeEngine)||void 0===t||t.call(e)}},{key:"closeYMKModule",value:function(){var e,t;null===(e=YMK)||void 0===e||null===(t=e.close)||void 0===t||t.call(e)}},{key:"pauseYMKModule",value:function(){var e,t;null===(e=YMK)||void 0===e||null===(t=e.pause)||void 0===t||t.call(e)}},{key:"resumeYMKModule",value:function(){var e,t;null===(e=YMK)||void 0===e||null===(t=e.resume)||void 0===t||t.call(e)}},{key:"clearProductsFromYMKModule",value:function(){var e,t;null===(e=YMK)||void 0===e||null===(t=e.reset)||void 0===t||t.call(e)}}]),e}();Nf.serviceName="virtualTryOn",Nf.storeExports=["stopVirtualTryOn","applyVirtualTryOnProductBySku","fetchPerfectCorpSkus"],Nf.inject=["DispatchStore"];var wf=Nf,Rf=n(30523),kf=n.n(Rf),Lf="floating",Df="other-window",Pf=function(){function e(t,n,r){var i=this;o()(this,e),v()(this,"_onClientViewportModeChange",(function(e){(null==e?void 0:e.type)===S.DI.FLOATING?setImmediate((function(){i._enterCheckout(Lf)})):(null==e?void 0:e.type)===S.DI.NORMAL&&setImmediate((function(){i._exitCheckout()}))})),v()(this,"_onDocumentVisibilityChange",(function(){"visible"!==document.visibilityState?i._enterCheckout(Df):i._exitCheckout()})),v()(this,"_enterCheckout",(function(e){i.context.dispatchLocalAndRemote(S.dA.CHECKOUT,{checkout:!0}),e===Lf?document.removeEventListener("visibilitychange",i._onDocumentVisibilityChange):e===Df&&i.dispatchStore.removeListener(S.KR.CLIENT_VIEWPORT_MODE,i._onClientViewportModeChange)})),v()(this,"_exitCheckout",(function(){i.isHandlingCheckoutState=!1,document.removeEventListener("visibilitychange",i._onDocumentVisibilityChange),i.dispatchStore.removeListener(S.KR.CLIENT_VIEWPORT_MODE,i._onClientViewportModeChange),i.context.dispatchLocalAndRemote(S.dA.CHECKOUT,{checkout:!1})})),this.context=n,this.dispatchStore=r,this.isHandlingCheckoutState=!1}return l()(e,[{key:"waitForCheckout",value:function(){this.isHandlingCheckoutState||(this.isHandlingCheckoutState=!0,this.dispatchStore.on(S.KR.CLIENT_VIEWPORT_MODE,this._onClientViewportModeChange),document.addEventListener("visibilitychange",this._onDocumentVisibilityChange))}}]),e}();Pf.serviceName="checkoutService",Pf.actionExports=["waitForCheckout"],Pf.inject=["DispatchStore"];var Mf=Pf,Bf=function e(t,n,r,i){var a=this;o()(this,e),v()(this,"_onRemoteChannelMessage",(function(e,t){var n=e.event,r=e.data;"restore-minimized"!==n?"function"==typeof t?a.externalInterfaceService.emitToEmbedInstance(n,r,!0).then(t):a.externalInterfaceService.emitToEmbedInstance(n,r):a.context.executeAction(mr)})),this.context=n,this.externalInterfaceService=r,this._remoteChannel=new Pm("navigation",this.context),this._remoteChannel.addListener(this._onRemoteChannelMessage),this._remoteChannel.open(),this.externalInterfaceService.on("client-navigated",function(){var e=xe()(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i._track({category:"call",action:"navigated_in_minimized_mode"}),e.next=3,a._remoteChannel.dispatchMessage({event:"client-navigated",data:{url:t.data.url}},!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.externalInterfaceService.on("add-history-items",function(){var e=xe()(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a._remoteChannel.dispatchMessage({event:"add-history-items",data:{items:t.data}},!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.externalInterfaceService.on("customer-viewed-product",function(){var e=xe()(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a._remoteChannel.dispatchMessage({event:"customer-viewed-product",data:t.data},!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())};Bf.serviceName="coBrowsing",Bf.inject=["externalInterfaceService","trackingService"];var jf=Bf,Uf=function e(t,n,r){var i=this;o()(this,e),this.context=n,this.compareStore=r,r.on("visibilityChange",(function(){r.visible&&i.context.executeAction(ln.P8,null)}))};Uf.serviceName="productFocusService",Uf.inject=["CompareStore"];var Gf=Uf,Ff=(0,vo.Wz)(),Wf=function(){function e(t,n,r,i){o()(this,e),this.options=t,this.context=n,this.callSessionStore=r,this.callSessionTimeStore=i,this.clientStore=this.context.getStore("ClientStore"),this.deviceName=(0,q.getBrowserDescription)()}var t;return l()(e,[{key:"send",value:(t=xe()(ye().mark((function e(t,n){var r,i,o,a,l,c,s,u,d;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=this.callSessionStore.getSessionId()){e.next=3;break}throw new Error("No ongoing call?");case 3:return c="".concat(Jl.Z.clientAPIBaseUrl,"/calls/").concat(l,"/add-media-stream-stats"),s=JSON.stringify({peerId:n,userId:Ff.userId,sessionId:this.clientStore.getSessionId(),sourceApp:"".concat("client","-web"),appVersion:"d600b71d",deviceName:this.deviceName,deviceNetwork:(null===(r=window.navigator)||void 0===r||null===(i=r.connection)||void 0===i?void 0:i.type)||(null===(o=window.navigator)||void 0===o||null===(a=o.connection)||void 0===a?void 0:a.effectiveType),callTime:this.callSessionTimeStore.getElapsedSeconds(),stats:t}),e.next=7,fetch(c,{headers:{"Content-Type":"application/json"},mode:"cors",method:"POST",body:s});case 7:if((u=e.sent).ok){e.next=13;break}return e.next=11,u.json();case 11:d=e.sent,Zt.$e((function(e){var t;e.setTags({source:"MediaStreamStatsService"}),null!==(t=d.errors)&&void 0!==t&&t.length&&e.setExtras(d.errors[0]),Zt.Tb(new Error(d.message),{level:"warning"})}));case 13:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})}]),e}();Wf.serviceName="mediaStreamStatsService",Wf.inject=["CallSessionStore","CallSessionTimeStore"];var Hf=Wf,Vf=n(38648);function zf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zf(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Yf=(0,vo.Wz)(),Kf=function(){function e(t,n,r,i){var a=this;o()(this,e),v()(this,"_onCallStarted",(function(){a.abortTest(),a.sendTestSummaryData()})),this.options=t,this.context=n,this.settingsService=r,this.callSessionStore=i,this.clientStore=this.context.getStore("ClientStore"),this.uploadUrl="https://one-to-one.bambuser.com/speed-test/upload.html",this.downloadUrl="https://one-to-one.bambuser.com/speed-test/512k.bin",this.stats=null,this.enabled=this.settingsService.get("networkSpeedTest.enabled",!0),this.enabled&&n.on(S.P1.CALL_STARTED,this._onCallStarted)}var t;return l()(e,[{key:"abortTest",value:function(){var e,t,n,r,i,o;null!==(e=this.stats)&&void 0!==e&&null!==(t=e.download)&&void 0!==t&&t.completed&&null!==(n=this.stats)&&void 0!==n&&null!==(r=n.upload)&&void 0!==r&&r.completed||(this.uploadReq&&(this.stats=Zf(Zf({},this.stats),{},{upload:Zf(Zf({},null===(i=this.stats)||void 0===i?void 0:i.upload),{},{aborted:!0})}),this.uploadReq.abort(),this.uploadReq=null),this.downloadReq&&(this.stats=Zf(Zf({},this.stats),{},{download:Zf(Zf({},null===(o=this.stats)||void 0===o?void 0:o.download),{},{aborted:!0})}),this.downloadReq.abort(),this.downloadReq=null))}},{key:"startTest",value:function(){this.enabled&&(this.abortTest(),this.testUpload(),this.testDownload())}},{key:"testUpload",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:524288;this.uploadReq&&this.uploadReq.abort(),null!==(e=this.stats)&&void 0!==e&&e.upload||(this.stats=Zf(Zf({},this.stats),{},{upload:{duration:0,mbit:0}}));var r=Date.now(),i=new Blob([new ArrayBuffer(n)],{type:"application/octet-stream"}),o=function(e){var n=(Date.now()-r)/1e3,i=e.loaded/n;t.stats.upload={duration:n,mbit:i/1024/1024*8}},a=function(){t.uploadReq=null,t.stats.upload.aborted||(t.stats.upload.completed=!0)},l=new XMLHttpRequest;this.uploadReq=l,this.averageUpload=0,l.upload?(l.upload.onprogress=o,l.upload.onloadend=a):(l.onprogress=o,l.onreadystatechange=function(){4===l.readyState&&a()}),l.open("POST","".concat(this.uploadUrl,"?nocache=").concat(r),!0),l.send(i)}},{key:"testDownload",value:function(){var e,t=this;this.downloadReq&&this.downloadReq.abort(),null!==(e=this.stats)&&void 0!==e&&e.download||(this.stats=Zf(Zf({},this.stats),{},{download:{duration:0,mbit:0}}));var n=Date.now(),r=new XMLHttpRequest;this.downloadReq=r,this.averageDownload=0,r.onprogress=function(e){var r=(Date.now()-n)/1e3,i=e.loaded/r;t.stats.download={duration:r,mbit:i/1024/1024*8}},r.onreadystatechange=function(){4===r.readyState&&(t.downloadReq=null,t.stats.download.aborted||(t.stats.download.completed=!0))},r.open("GET","".concat(this.downloadUrl,"?nocache=").concat(n),!0),r.setRequestHeader("Cache-Control","no-cache"),r.responseType="blob",r.send(null)}},{key:"sendTestSummaryData",value:(t=xe()(ye().mark((function e(){var t,n,r,i,o,a,l,c,s,u,d,p,m,f,h,g;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=(null===(t=this.stats)||void 0===t||null===(n=t.download)||void 0===n?void 0:n.completed)||(null===(r=this.stats)||void 0===r||null===(i=r.download)||void 0===i?void 0:i.aborted),u=(null===(o=this.stats)||void 0===o||null===(a=o.upload)||void 0===a?void 0:a.completed)||(null===(l=this.stats)||void 0===l||null===(c=l.upload)||void 0===c?void 0:c.aborted),s||u){e.next=4;break}return e.abrupt("return");case 4:if(d=this.callSessionStore.getSessionId()){e.next=7;break}throw new Error("No ongoing call?");case 7:return p=this.stats,delete this.stats,m="".concat(Jl.Z.clientAPIBaseUrl,"/calls/").concat(d,"/add-speed-test-stats"),f=JSON.stringify({userId:Yf.userId,sessionId:this.clientStore.getSessionId(),stats:p}),e.next=13,fetch(m,{headers:{"Content-Type":"application/json"},mode:"cors",method:"POST",body:f});case 13:if((h=e.sent).ok){e.next=19;break}return e.next=17,h.json();case 17:g=e.sent,Zt.$e((function(e){var t;e.setTags({source:"SpeedTestService"}),null!==(t=g.errors)&&void 0!==t&&t.length&&e.setExtras(g.errors[0]),Zt.Tb(new Error(g.message),{level:"warning"})}));case 19:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();Kf.serviceName="speedTestService",Kf.actionExports=["startTest"],Kf.inject=["settings","CallSessionStore"];var qf=Kf,Qf=function(){function e(t,n,r){o()(this,e),this.options=t,this.context=n,this.trackingService=r}return l()(e,[{key:"startTest",value:function(){var e=this,t=Date.now(),n=new Ae({iceServers:[{urls:["stun:media-server.one-to-one.bambuser.com:443"]},{username:"viddget",credential:"viddget",urls:["turns:media-server.one-to-one.bambuser.com:443?transport=udp","turns:media-server.one-to-one.bambuser.com:443?transport=tcp","turn:media-server.one-to-one.bambuser.com:443?transport=udp"]}]}),r=!1,i=!1,o=function(){n.onicegatheringstatechange=null,n.onicecandidate=null,n.close()};return new Promise((function(a,l){var c=function(n){var c=Date.now()-t;r||i?(o(),a()):n&&(e.trackingService.track("pre_call","webrtc_connectivity_failed",{duration:c}),o(),l(new Error("WebRTC connection check failed.")))};n.onicegatheringstatechange=function(){"complete"===n.iceGatheringState&&c(!0)},n.onicecandidate=function(e){if(e.candidate){var t=ot(e.candidate.candidate);r||"relay"!==t||(r=!0),i||"srflx"!==t&&"prflx"!==t||(i=!0),c()}},n.createOffer({offerToReceiveAudio:!0}).then((function(e){n.setLocalDescription(e)}),l)}))}}]),e}();Qf.serviceName="webrtcConnectivityService",Qf.actionExports=["startTest"],Qf.inject=["trackingService"];var Xf=Qf;var Jf=function(e){d()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var i=h()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this,e))._notifications=[],t}return l()(i,[{key:"count",get:function(){return this._notifications.length}},{key:"notifications",get:function(){return Pi()(this._notifications)}},{key:"handleAddNotification",value:function(e){var t=e.type,n=e.data;t&&(this._notifications.unshift({id:(0,$a.Z)(),type:t,data:n,addedAt:Date.now()}),this.emitChange())}},{key:"handleRemoveNotification",value:function(e){var t=e.id,n=e.force;if(void 0!==n&&n)this._notifications=this._notifications.filter((function(e){return e.id!==t}));else{var r=this._notifications.find((function(e){return e.id===t}));r&&(r.removedAt=Date.now())}this.emitChange()}},{key:"handleRemoveAllNotification",value:function(e){var t=e.type,n=e.force;void 0!==n&&n?this._notifications=this._notifications.filter((function(e){return e.type!==t})):this._notifications.filter((function(e){return e.type===t})).forEach((function(e){e.removedAt=Date.now()})),this.emitChange()}}]),i}(cu.Z);Jf.storeName="NotificationStore",Jf.handlers=sn().invert({handleAddNotification:S.A8.ADD,handleRemoveNotification:S.A8.REMOVE,handleRemoveAllNotification:S.A8.REMOVE_ALL});var $f=Jf,eh=function e(t,n,r){var i=this;o()(this,e),v()(this,"_onNewRemoteChatMessage",(function(e){i.context.executeAction(Fa.P7,{type:S.Kr.CHAT,data:{message:e.message}})})),this.context=n,r.on("message:unreadRemote",this._onNewRemoteChatMessage)};eh.serviceName="notificationService",eh.inject=["ChatStore"];var th=eh;kf().polyfill();var nh=(0,vo.Wz)(),rh=new r.ZP({componentClass:lu});rh.registerStore(uu),rh.registerStore(Mp),rh.registerStore(cd),rh.registerStore(fd),rh.registerStore(Id),rh.registerStore(Td),rh.registerStore(Rp),rh.registerStore(jp),rh.registerStore(Dp),rh.registerStore(_d),rh.registerStore(sm),rh.registerStore(mm),rh.registerStore(Nm),rh.registerStore(lf),rh.registerStore(sf),rh.registerStore(hf),rh.registerStore(vf),rh.registerStore(Sm),rh.registerStore(bm),rh.registerStore(hm),rh.registerStore(Sf),rh.registerStore(Nd),rh.registerStore($f),rh.registerService(Pu.Z),rh.registerService(Om),rh.registerService(Up.Z),rh.registerService(Fp,{queryString:nh}),rh.registerService(am),nh.initiation||(rh.registerService(_u),rh.registerService(ku),rh.registerService(ad),rh.registerService(Tu),rh.registerService(ud),rh.registerService(Bu),rh.registerService(Rm),rh.registerService(Qm),rh.registerService(nf),rh.registerService(df),rh.registerService(bf),rh.registerService(Mf),rh.registerService(Gf),rh.registerService(zm),rh.registerService(Du),rh.registerService(xf),rh.registerService(Hf),rh.registerService(Vf.Z),rh.registerService(qf),rh.registerService(Xf),rh.registerService(of),rh.registerService(kd),rh.registerService(th)),nh.initiation&&(document.body.className+=" inside-initiation"),nh.overlay&&(rh.executeAction((function(e){e.dispatch(S.KR.CLIENT_INSIDE_OVERLAY,!0)})),document.body.className+=" inside-popup"),rh.executeAction((function(e,t){e.dispatch(S.O3.TEXT,t),e.dispatch(S.B7.SCREEN,"loading")})),nh.flowId&&(console.log("Using flowId ".concat(nh.flowId)),document.body.className+=" flow-".concat(nh.flowId));var ih=function(e,t,n){var r={getMediaConnectionStatus:function(){var t,n,r=!1,i=!1,o=e.getService("callSessionService").mediaConnection;return o&&o.peerConnection&&(n=(t=o.peerConnection).iceConnectionState,r=t.getReceivers().length,i=t.getSenders().length),{state:n,hasDownStream:r,hasUpStream:i}}};return t.manualBootstrap?r.init=function(e){delete r.init,n(e)}:n(),r}(rh,nh,(function(e){var t=document.getElementById("client-window");rh.once(S.P1.SETTINGS_LOADED,(function(){if(rh.registerService(Bm),rh.registerService(Fm),rh.registerService(Hm),rh.getSetting("coBrowsing.enabled",!1)&&rh.registerService(jf),rh.getService("languageService").isRtlLanguage()&&document.body.classList.add("rtl"),!nh.initiation){var e,t=rh.getService("toolService"),n=function(e,n,r){t.registerTool(e,n,r)},r=rh.getSetting("virtualTryOn",{});!nh.initiation&&r.enabled&&null!=r&&null!==(e=r.perfectCorp)&&void 0!==e&&e.key&&(0,q.isPerfectCorpSupported)()&&(rh.registerService(wf),n(S.Js.VIRTUAL_TRY_ON,"CLIENT_VIRTUAL_TRY_ON_TITLE",Np)),rh.getSetting("shopperInformationForm.enabled",!1)&&n(S.Js.SHOPPER_INFORMATION,"SHOPPER_INFORMATION_HEADER_LABEL",rp),n(S.Js.CHAT,"CHAT_HEADER_LABEL",ep),n(S.Js.SETTINGS,"SETTINGS_MODAL_TITLE",xl),n(S.Js.CART,"CLIENT_BAG_TITLE",pp)}})),rh.bootstrap(t,e).then((function(){var e=rh.getService(Pu.Z);if(!ke||!(0,q.isClientBrowserSupported)()){var t=(0,q.getPlatformMetadata)();return rh.executeAction(Rn,{screen:"unsupported-browser"}),void rh.getService(Fp).emit(At,{browser:t.browser})}if(nh.sessionId)if(nh.initiation){console.debug("show initiation screen");var n=nh.sessionId;rh.executeAction(Ln,n),rh.getService(Fp).emit(kt,{sessionId:n}),rh.executeAction(Rn,{screen:"initiation",props:{variant:nh.variant,firstTime:nh.firstTime,initialMode:nh.initialMode}}),rh.getService(Fp).emit(Dt)}else{var r=nh.sessionId;if(rh.executeAction(Ln,r),rh.getService(Fp).emit(kt,{sessionId:r,greeting:nh.greeting}),nh.mock){var i=function(e,t){return"meeting"===t.screen?(e.executeAction(Rn,{screen:"enter-from-connect-link",props:{enterQueueData:{clientId:"mock",clientData:{}}}}),e.dispatch(S.KR.CLIENT_VIEWPORT_FORCE_NORMAL_MODE,!0),!0):"waiting-screen"===t.screen?(e.executeAction(Rn,{screen:"queue"}),e.dispatch(S.KR.CLIENT_VIEWPORT_FORCE_NORMAL_MODE,!0),!0):"thank-you"===t.screen?(e.executeAction(Rn,{screen:"thank-you"}),e.dispatch(S.KR.CLIENT_VIEWPORT_FORCE_NORMAL_MODE,!0),!0):void 0}(rh,nh);if(i)return}if(nh.queue){var o=e.get("merchant.id");Yc.ZP.firestore().collection("organizations/".concat(o,"/settings/calls/queues")).doc(nh.queue).get().then((function(t){t.exists?rh.executeAction(tl,nh.queue):Yc.ZP.firestore().collection("organizations/".concat(o,"/settings/calls/queues")).where("name","==",nh.queue).get().then((function(t){if(t.empty)Yc.ZP.firestore().collection("organizations/".concat(o,"/settings/calls/queues")).where("slug","==",nh.queue).get().then((function(t){if(t.empty)rh.executeAction(tl,e.get("client.defaultQueue"));else{var n=t.docs[0];rh.executeAction(tl,n.id)}}));else{var n=t.docs[0];rh.executeAction(tl,n.id)}}))}))}else rh.executeAction(tl,e.get("client.defaultQueue"));if("missing"===nh.invalidClient)rh.getService(Fp).emit(It,{type:nh.invalidClient}),rh.executeAction(Rn,{screen:"invalid-client",props:{type:"missing"}});else if("expired"===nh.invalidClient)nh.validTo?(rh.getService(Fp).emit(It,{type:nh.invalidClient,validTo:nh.validTo}),rh.executeAction(Rn,{screen:"invalid-client",props:{validTo:nh.validTo,type:"expired"}})):nh.validFrom&&(rh.getService(Fp).emit(It,{type:nh.invalidClient,validFrom:nh.validFrom}),rh.executeAction(Rn,{screen:"invalid-client",props:{validFrom:nh.validFrom,type:"not-activated"}}));else if(ke&&!e.get("webrtc.disable",!1))!function(){var e=(0,q.getBrowserDescription)();rh.executeAction(Un);var t=sn().merge({},nh,{sessionId:r,clientInfo:{browser:e}});if(nh.roomId){var n={connectionData:nh.connectionData,roomId:nh.roomId,clientData:sn().omit(t,"connectionData","roomId")};rh.executeAction(Dn,n)}else if(nh.clientId){var i={clientId:nh.clientId,clientData:sn().omit(t,"queue"),prioritized:nh.prioritized};nh.viaViddgetConnect?rh.executeAction(Rn,{screen:"enter-from-connect-link",props:{greeting:nh.greeting,enterQueueData:i}}):rh.executeAction(rl,i)}else nh.ticketId?rh.executeAction(rl,{clientId:nh.clientId,clientData:sn().omit(t,"queue"),prioritized:nh.prioritized,ticketId:nh.ticketId}):(rh.executeAction(Rn,{screen:"start",props:{enterQueueData:{clientData:sn().omit(t,"queue"),prioritized:nh.prioritized}}}),rh.getService(Fp).emit(Dt))}();else{var a=(0,q.getPlatformMetadata)();rh.executeAction(Se.FI,{title:rh.getText("CLIENT_UNSUPPORTED_BROWSER_TITLE"),messageHtml:rh.getText("CLIENT_UNSUPPORTED_BROWSER_MESSAGE"),canBeClosed:!1}),rh.getService(Fp).emit(At,{browser:a.browser})}}else rh.executeAction(Se.FI,{title:"Internal configuration error",message:"Missing session id.",callback:function(){window.ViddgetClientApp.loadStartPage()}})}))}))},98850:function(e,t,n){"use strict";n.d(t,{Z:function(){return T}}),n(92222);var r,i=n(67294),o=n(52543),a=n(57306),l=n(60414),c=n(46183),s=n(8991),u=n(58832),d=n(28449),p=n(30381),m=n.n(p),f=n(94184),h=n.n(f),g=n(44444),v=(0,o.Z)((function(){return{container:{position:"absolute",width:"100%",height:"100%",pointerEvents:"none",zIndex:2,top:"0px",transition:"opacity 0.7s",opacity:0},topGradient:{background:"linear-gradient(360deg, rgba(34, 34, 34, 0) 0.76%, rgba(34, 34, 34, 0) 16.63%, rgba(34, 34, 34, 0) 85.93%, rgba(34, 34, 34, 0.4) 100%)"},mobileGradient:{background:"linear-gradient(180deg, rgba(0, 0, 0, 0.65) 0%, rgba(0, 0, 0, 0.23) 22.4%, rgba(0, 0, 0, 0.06) 68.75%, rgba(0, 0, 0, 0.51) 100%)"},show:{opacity:1}}}))((function(e){var t=e.show,n=void 0!==t&&t,r=e.classes,o=h()(r.container,r.topGradient,n&&r.show),a=h()(r.container,r.mobileGradient,n&&r.show);return(0,g.isMobileDevice)()?i.createElement("div",{className:a}):i.createElement("div",{className:o})})),E="0px 0px 32px rgba(0, 0, 0, 0.44), 0px 0px 24px rgba(0, 0, 0, 0.14), 0px 0px 8px rgba(0, 0, 0, 0.14), 0px 0px 1px rgba(0, 0, 0, 0.04)",S=(0,l.A1)((function(e){var t=e.agentName,n=e.show,o=e.meeting,l=e.clientIsMobile,d=e.isMinimized,p=e.classes,f=e.alwaysShow,g=(0,a.bp)();(0,i.useEffect)((function(){return null===n&&(g.executeAction(u.zm,!0),r=setTimeout((function(){g.executeAction(u.zm,!1)}),4e3)),function(){return clearTimeout(r)}}),[]);var E=null==o?void 0:o.title,S={show:{opacity:1,display:"flex",transition:{duration:f&&n?0:.15,ease:"easeInOut"}},hidden:{opacity:0,transition:{duration:l?0:.15,ease:"easeInOut"},transitionEnd:{display:"none"}}},T=h()(p.container,l&&p.containerSmall),b=h()(p.title,l&&p.titleSmall);return i.createElement(i.Fragment,null,i.createElement(v,{show:n}),i.createElement(s.E.div,{className:T,initial:f&&n?"show":"hidden",animate:n&&!d?"show":"hidden",variants:S},E&&i.createElement(c.xv,{className:b},E),E&&t&&i.createElement(c.xv,{className:p.withNameText},g.getText("CLIENT_CALL_INFORMATION_MEETING_WITH_AGENTNAME",t)),!E&&t&&i.createElement(c.xv,{className:p.withNameText},g.getText("CLIENT_CALL_INFORMATION_CALL_WITH_AGENTNAME",t)),i.createElement(c.xv,{className:p.time},function(){if(null!=o&&o.validFrom&&null!=o&&o.validTo){var e=m()(o.validFrom).format("dddd, D MMMM"),t=m()(o.validFrom).format("HH:mm"),n=m()(o.validTo).format("HH:mm");return"".concat(e,"  ").concat(t," - ").concat(n)}return null}())))}),["ProductStore","CallSessionStore","ClientCallControlStore","ClientMeetingStore","ViewportStore"],(function(e,t){var n=e.ViewportStore.getClientViewportFrame().clientIsMobile,r=e.CallSessionStore.getMetadata();return{agentName:null==r?void 0:r.agentDisplayName,clientIsMobile:n,callStatus:e.CallSessionStore.getStatus(),meeting:e.ClientMeetingStore.getMeeting(),show:t.alwaysShow||e.ClientCallControlStore.getCallInformationDisplayStatus(),pdaOpen:!!e.ProductStore.focusedExternalId,isMinimized:e.ViewportStore.getClientViewportMode()===d.DI.FLOATING}})),T=(0,o.Z)((function(e){return{container:{position:"absolute",zIndex:3,marginTop:"16px",textAlign:"center",left:"50%",transform:"translateX(-50%)",pointerEvents:"none",userSelect:"none",top:0,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%"},containerSmall:{position:"absolute",top:64,left:0,margin:"0 8px",transform:"none",alignItems:"flex-start",textAlign:"initial"},title:{fontSize:"19px",lineHeight:"19px",margin:"0 0 5px",color:e.palette.white.main,textShadow:E,wordBreak:"break-word",animation:"none"},titleSmall:{fontSize:"16px",lineHeight:"17px"},withNameText:{fontSize:"12px",color:e.palette.white.main,padding:0,margin:"0 0 2px",textShadow:E,wordBreak:"break-word",animation:"none"},time:{fontSize:"12px",color:e.palette.white.main,opacity:.7,lineHeight:"23px",margin:0,animation:"none",textShadow:E}}}))(S)},79069:function(e,t,n){"use strict";var r=n(67294),i=n(20061),o=n(8991),a=n(57306),l=n(42766),c=n(60414),s=n(55347),u={visible:{opacity:1},hidden:{opacity:0}};t.Z=(0,i.Z)((function(){return{container:{pointerEvents:"none",position:"absolute",zIndex:"1",top:44,margin:8},textBox:{textAlign:"left"}}}))((0,c.A1)((function(e){var t=e.classes,n=e.alias,i=e.visible,c=(0,a.bp)().getText,d=n||(0,s.fm)(c("AGENT_SINGULAR"));return r.createElement(o.E.div,{variants:u,animate:i?"visible":"hidden",transition:{duration:.15},initial:"hidden",className:t.container},r.createElement(l.Z,{text:c("CLIENT_CONTROL_BUTTON_SCREENSHARE_PRESENTING_NAME",d),classNames:t.textBox}))}),["CallSessionStore"],(function(e){var t=e.CallSessionStore.getMetadata();return{alias:!!t&&t.agentDisplayName}})))},1409:function(e,t,n){"use strict";var r=n(63038),i=n.n(r),o=n(67294),a=n(20061),l=n(8991),c=n(57306),s=n(42766),u={visible:{opacity:1},hidden:{opacity:0}};t.Z=(0,a.Z)((function(){return{container:{pointerEvents:"none",position:"absolute",zIndex:"1",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}}))((function(e){var t=e.classes,n=(0,c.bp)().getText,r=(0,o.useState)(!0),a=i()(r,2),d=a[0],p=a[1];return(0,o.useEffect)((function(){var e=setTimeout((function(){p(!1)}),3e3);return function(){return clearTimeout(e)}}),[]),o.createElement(l.E.div,{variants:u,animate:d?"visible":"hidden",initial:"visible",className:t.container},o.createElement(s.Z,{text:n("ENTER_FULLSCREEN_DOUBLE_TAP_MOBILE")}))}))},42766:function(e,t,n){"use strict";var r=n(67294),i=n(20061),o=n(46183),a=n(94184),l=n.n(a);t.Z=(0,i.Z)((function(){return{container:{backgroundColor:"rgba(0, 0, 0, 0.78)",borderRadius:4},text:{padding:"4px 8px",margin:0,textAlign:"center",fontSize:12,fontWeight:500,lineHeight:"16px",color:"#FFFFFF"}}}))((function(e){var t=e.classNames,n=e.classes,i=e.text;return r.createElement("div",{className:n.container},r.createElement(o.xv,{className:l()(n.text,t)},i))}))},51731:function(e,t,n){"use strict";var r=n(67294),i=n(20061),o=n(57306),a=n(46183),l=n(60414),c=n(55347),s=n(9042),u=n(94184),d=n.n(u);t.Z=(0,i.Z)((function(){return{container:{position:"fixed",top:0,left:0,margin:16,padding:"8px 20px",borderRadius:4,backgroundColor:"rgba(0, 0, 0, 0.78)",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",zIndex:1},textWrapper:{minWidth:200,marginRight:16},text:{fontWeight:500,fontSize:12,color:"#FFFFFF",lineHeight:"16px",animation:"unset"},btn:{width:"max-content"},link:{borderBottom:"1px solid #FFFFFF"}}}))((0,l.A1)((function(e){var t=e.classes,n=e.alias,i=(0,o.bp)(),l=i.getText,u=i.executeAction,p=n||(0,c.fm)(l("AGENT_SINGULAR"));return r.createElement("div",{className:t.container},r.createElement("div",{className:t.textWrapper},r.createElement(a.xv,{className:t.text},l("CLIENT_CONTROL_BUTTON_SCREENSHARE_PRESENTING_NAME",p)),r.createElement(a.L9,{className:t.btn,onClick:function(){u(s.P8,null)}},r.createElement(a.xv,{className:d()(t.text,t.link)},l("CLIENT_VIEW_SCREENSHARE_LABEL")))),r.createElement(a.El,{style:{heigth:16,width:18},color:"#FFFFFF"}))}),["CallSessionStore","ClientCallControlStore"],(function(e){var t=e.CallSessionStore.getMetadata();return{alias:!!t&&!!t.agentDisplayName,visible:e.ClientCallControlStore.getCallInformationDisplayStatus()}})))},74516:function(e,t,n){"use strict";n.d(t,{TZ:function(){return d},bl:function(){return f},eB:function(){return m},n9:function(){return p},ru:function(){return h}}),n(82526),n(41817),n(32165),n(69826),n(91038),n(66992),n(21249),n(47042),n(41539),n(88674),n(39714),n(78783),n(33948);var r=n(28449),i=n(98759),o=n(65659),a=n.n(o),l=n(32297),c=n(44586),s=n(99918);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){var n;null!==(n=t)&&void 0!==n&&n.key&&(t={row:{externalId:t.key},error:null}),e.dispatch(r.dA.ERROR,t)}function p(e,t){var n=t.externalId,o=t.source;if(!n)throw new Error("addProductToBasket payload must include 'externalId'.");if(!e.getStore("ProductStore").getProductByExternalId(n))throw new Error("addProductToBasket couldn't find product with external id ".concat(n));t.row={externalId:n,nrOfItems:1},e.dispatchLocalAndRemote(r.dA.ADD_TO_CART,{externalId:n});var a=e.getStore("BasketStore").getBasket();return function(e,t,n){e.dispatchLocalAndRemote(r.dA.LOADING,{loading:!0,externalId:null==n?void 0:n.externalId})}(e,0,{externalId:n}),e.basket.addRow(a,t.row,t.group,o).then((function(t){!function(e,t,n){e.dispatchLocalAndRemote(r.dA.RECEIVED,{basket:{groups:(n.basket.groups||[]).map((function(e){return{rows:e.rows||[],uuid:e.uuid||(0,c.Z)()}}))}}),e.dispatchLocalAndRemote(r.dA.LOADING,{loading:!1}),(0,l.P)(e,{name:r.P1.BASKET_UPDATED,data:{basket:e.getStore("BasketStore").getBasket()}})}(e,0,t)}),(function(t){(function(e,t,n){e.dispatchLocalAndRemote(r.dA.LOADING,{loading:!1}),(0,i.FI)(e,{dialogId:"failed-basket-update",title:n.title||e.getText("AGENT_BASKET_RESPONSE_UNKOWN_ERROR_TITLE"),message:n.message||e.getText("AGENT_BASKET_RESPONSE_UNKOWN_ERROR_MESSAGE")})})(e,0,t),e.dispatchLocalAndRemote(r.dA.REVERT_ADD_TO_CART,{externalId:n})}))}function m(e,t){var n=t.row,i=void 0===n?{}:n,o=(t.source,i.externalId),a=i.nrOfItems;if(!o||!i.hasOwnProperty("nrOfItems"))throw new Error("updateBasketRow payload must include 'row.externalId' and 'row.nrOfItems'");return e.getStore("CallSessionStore").getStatus()!==r.kp.RUNNING||(e.getStore("BasketStore").getBasket().updatingRows||[]).some((function(e){return o===(null==e?void 0:e.externalId)}))||e.dispatchRemote(r.dA.UPDATE_CART_REQUEST,{externalId:o,nrOfItems:a}),Promise.resolve()}function f(e,t){var n=t.externalId;if(!n)throw new Error("removeBasketRow payload must include 'externalId'.");if(e.getStore("CallSessionStore").getStatus()!==r.kp.RUNNING)return Promise.resolve();var i,o,l=e.getStore("BasketStore").getBasket(),c=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}(l.groups);try{for(c.s();!(o=c.n()).done;){var s=o.value,d=a().find(s.rows,(function(e){return e.externalId===n}));if(d){i=d;break}}}catch(e){c.e(e)}finally{c.f()}if(i)return(l.updatingRows||[]).some((function(e){return n===(null==e?void 0:e.externalId)}))||e.dispatchRemote(r.dA.UPDATE_CART_REQUEST,{externalId:n,nrOfItems:0}),Promise.resolve();throw new Error("Can't remove non existing product ".concat(n," from basket"))}function h(e){e.checkoutService.waitForCheckout(),e.externalInterfaceService.emitToEmbedInstance("goto-checkout",(0,s.F)(e.getStore("BasketStore").getBasket())),e.getStore("SystemDialogStore").isActiveDialog("device-settings")&&e.executeAction(i.Xd,{dialogId:"device-settings"})}},58832:function(e,t,n){"use strict";n.d(t,{hD:function(){return a},oD:function(){return i},yE:function(){return o},zm:function(){return l}});var r=n(28449);function i(e){e.dispatch(r.Rm.DISABLE_ACTIVE_MIC_CALLOUT)}function o(e){e.dispatch(r.Rm.DISABLE_ACTIVE_CAM_CALLOUT)}function a(e,t){e.dispatchLocalAndRemote(r.Rm.SET_DISPLAY_STATE,t,t.localOnly)}function l(e,t){e.dispatch(r.Rm.SET_DISPLAY_CALLINFORMATION,t)}},32297:function(e,t,n){"use strict";function r(e,t){e.emitViddgetEvent(t.name,t.data)}n.d(t,{P:function(){return r}})},99439:function(e,t,n){"use strict";n.d(t,{P7:function(){return i},pw:function(){return o},yF:function(){return a}});var r=n(28449);function i(e,t){e.dispatch(r.A8.ADD,t)}function o(e,t){e.dispatch(r.A8.REMOVE,t)}function a(e,t){e.dispatch(r.A8.REMOVE_ALL,t)}},9042:function(e,t,n){"use strict";n.d(t,{P8:function(){return o},f2:function(){return a},gK:function(){return i}});var r=n(28449);function i(e,t){t.localAndRemote?e.dispatchLocalAndRemote(r.Cl.ADD,t):e.dispatch(r.Cl.ADD,t)}function o(e,t){var n,i,o,a=!(null===(n=e.getStore("CallSessionStore").getMerchantIntegration())||void 0===n||null===(i=n.coBrowsing)||void 0===i||!i.enabled),l=e.getStore("ProductStore").getProductByExternalId(null===(o=t)||void 0===o?void 0:o.externalId);if(null!=l&&l.url&&a){var c=l.url;return e.externalInterfaceService.emitToEmbedInstance("navigate-to",{url:c})}t||(t={}),t.isAgent=!1,e.dispatchLocalAndRemote(r.Cl.FOCUS,t,t.localOnly)}function a(e,t){e.dispatch(r.Cl.SHOW_NATIVE_URL,t),"native-frame"!==e.settings.get("agent.surfBehind.type")&&window.open(t.url,"bmb_surf")}n(81752),n(91390)},91390:function(e,t,n){"use strict";n.d(t,{K:function(){return i},bs:function(){return o},eg:function(){return a}});var r=n(28449);function i(e,t){if(!t.hasOwnProperty("externalId"))throw new Error("addProductToDrawer payload must include 'externalId'.");e.dispatchLocalAndRemote(r.dF.ADD,t)}function o(e,t){e.dispatchLocalAndRemote(r.dF.UPDATE,t)}function a(e,t){var n=e.getStore("ProductDrawerStore");n.isProductInDrawer(null==t?void 0:t.externalId)||(t.externalId=n.getSignificantProductVariant(null==t?void 0:t.externalId)),e.dispatchLocalAndRemote(r.dF.REMOVE,t)}},98759:function(e,t,n){"use strict";n.d(t,{FI:function(){return o},T0:function(){return c},V2:function(){return l},Xd:function(){return d},_S:function(){return p},cd:function(){return u},e_:function(){return s},kn:function(){return a}});var r=n(28449),i=n(99439);function o(e,t){if(!t.hasOwnProperty("message")&&!t.hasOwnProperty("messageHtml"))throw new Error("showMessageDialogAction payload must include 'message' or 'messageHtml'.");t.hasOwnProperty("dialogId")||(t.dialogId=e.uniqueId.get()),t.hasOwnProperty("canBeClosed")||(t.canBeClosed=!0),t.hasOwnProperty("type")&&(t.subType=t.type),t.type="message",t.localAndRemote?e.dispatchLocalAndRemote(r.Fq.CREATE,t):e.dispatch(r.Fq.CREATE,t)}function a(e,t){t.hasOwnProperty("dialogId")||(t.dialogId=e.uniqueId.get()),t.type="mic-cam",e.dispatch(r.Fq.CREATE,t)}function l(e,t){if(!(t.hasOwnProperty("title")&&t.hasOwnProperty("message")||t.hasOwnProperty("callback")))throw new Error("showMessageDialogAction payload must include 'title' or 'message' and 'callback'.");t.hasOwnProperty("dialogId")||(t.dialogId=e.uniqueId.get()),t.hasOwnProperty("type")&&(t.subType=t.type),t.type="confirm",t.localAndRemote?e.dispatchLocalAndRemote(r.Fq.CREATE,t):e.dispatch(r.Fq.CREATE,t)}function c(e,t){t.dialogId="device-settings",t.type="device-settings-dialog",e.dispatch(r.Fq.CREATE,t)}function s(e,t){e.getStore("ViewportStore").getClientViewportMode()!==r.DI.FLOATING&&"cart"!==e.getStore("ToolStore").getCurrentTool()&&(0,i.P7)(e,{type:r.Kr.ADD_TO_CART,data:{externalId:t.externalId}})}function u(e,t){if(!t.hasOwnProperty("dialogId"))throw new Error("updateDialogAction payload must include 'dialogId'.");e.dispatch(r.Fq.UPDATE_STATE,t)}function d(e,t){if(!t.hasOwnProperty("dialogId"))throw new Error("SystemDialogStore payload must include 'dialogId'.");e.dispatch(r.Fq.DESTROY,t)}function p(e){e.dispatch(r.Fq.DESTROY_ALL)}},57306:function(e,t,n){"use strict";n.d(t,{Il:function(){return te},ZP:function(){return ae},bp:function(){return ne},G2:function(){return re}}),n(82526),n(41817),n(32165),n(92222),n(91038),n(66992),n(47042),n(51532),n(69720),n(47941),n(41539),n(88674),n(12419),n(39714),n(78783),n(10072),n(99137),n(71957),n(96306),n(103),n(74592),n(58276),n(35082),n(12813),n(18222),n(38563),n(50336),n(7512),n(33948),n(84633);var r=n(63038),i=n.n(r),o=n(69100),a=n.n(o),l=n(87757),c=n.n(l),s=(n(35666),n(48926)),u=n.n(s),d=n(93913),p=n.n(d),m=n(81506),f=n.n(m),h=n(2205),g=n.n(h),v=n(78585),E=n.n(v),S=n(29754),T=n.n(S),b=n(34575),_=n.n(b),y=n(67294),C=n(73935),x=n(59713),O=n.n(x),I=n(81772),A=n(28449),N=n(65659),w=n.n(N);var R=function(e){g()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=T()(t);if(n){var i=T()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return E()(this,e)});function i(e){var t;return _()(this,i),t=r.call(this,e),O()(f()(t),"handleCloseAllProductsView",(function(){t.allProductsView={open:!1},t.emitChange()})),O()(f()(t),"handleOpenAllProductsView",(function(){t.allProductsView={open:!0},t.emitChange()})),O()(f()(t),"getAllProductsView",(function(){return t.allProductsView})),t.allProductsView={},t}return p()(i,[{key:"handlePrepareNewCallSession",value:function(){this.allProductsView!=={}&&(this.allProductsView={},this.emitChange())}}]),i}(I.Z);R.storeName="ActivePanelStore",R.handlers=w().invert({handlePrepareNewCallSession:A.Nb.PREPARE_NEW,handleOpenAllProductsView:A.pX.OPEN_ALL_PRODUCTS_PANEL,handleCloseAllProductsView:A.pX.CLOSE_ALL_PRODUCTS_PANEL});var k=R;n(57327),n(69826),n(34553),n(54747);var L=function(e){g()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=T()(t);if(n){var i=T()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return E()(this,e)});function i(e){var t;return _()(this,i),(t=r.call(this,e)).dialogs=[],t.dialogsMap=new Map,t}return p()(i,[{key:"handleCreateDialog",value:function(e){if(e.dialogId){var t=this.getDialog(e.dialogId);if(t){if(!t.hidden)return;return t.hidden=!1,void this.emitChange()}this.dialogs.push(e),this.dialogsMap.set(e.dialogId,e),this.emitChange()}}},{key:"handleUpdateDialogState",value:function(e){var t=this.dialogs.find((function(t){return t.dialogId===e.dialogId}));if(t){var n=t.state||{};w().merge(n,e.state||{},(function(e,t){if(w().isArray(t))return t})),t.state=n,this.emitChange()}}},{key:"handleDestroyDialog",value:function(e){var t=this.dialogs.find((function(t){return t.dialogId===e.dialogId}));t&&(this.dialogs=w().without(this.dialogs,t),this.dialogsMap.delete(e.dialogId),this.emitChange())}},{key:"handleSessionStatusChange",value:function(e){var t=this;if(this.dialogs.length&&(e.status===A.kp.RUNNING||e.status===A.kp.PAUSED)){var n=this.dispatcher.getStore("CallSessionStore");this.dispatcher.waitFor(["CallSessionStore"],(function(){t.dialogs.forEach((function(e){var r=e.dialogId;r&&(t.getDialog(r).hidden=n.isPaused())})),t.emitChange()}))}}},{key:"isActiveDialog",value:function(e){return!!this.getDialog(e)}},{key:"handleDestroyAllDialogs",value:function(){this.dialogs=[],this.dialogsMap=new Map,this.emitChange()}},{key:"getDialogs",value:function(){var e=this;return this.dialogs.filter((function(t,n){return!t.queue||e.dialogs.findIndex((function(e){return e.type===t.type}))===n}))}},{key:"getDialog",value:function(e){return this.dialogsMap.get(e)}}]),i}(I.Z);L.storeName="SystemDialogStore",L.handlers=w().invert({handleCreateDialog:A.Fq.CREATE,handleUpdateDialogState:A.Fq.UPDATE_STATE,handleDestroyDialog:A.Fq.DESTROY,handleDestroyAllDialogs:A.Fq.DESTROY_ALL,handleSessionStatusChange:A.Nb.STATUS});var D=L;function P(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function B(e,t,n,r,i){var o,a={},l=P(r);try{for(l.s();!(o=l.n()).done;){var c=o.value,s=e[c];"function"==typeof s&&(s=s.bind(e)),a[c]=s}}catch(e){l.e(e)}finally{l.f()}r.length>0&&(t[n]=a);var u,d=P(i);try{for(d.s();!(u=d.n()).done;){var p=u.value,m=e[p];"function"==typeof m&&(m=m.bind(e)),t[p]=m}}catch(e){d.e(e)}finally{d.f()}}var j=n(73074),U=n(62518),G=n(43805),F=n(17187),W=n(27923),H=n(35228),V=n(64305),z=n(9669),Z=n.n(z),Y=n(71792),K=n(3999),q=n(79052),Q=n(50118);function X(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}W.S({dsn:"https://1b96664080a84bc1af10104608262f8b@sentry.bambuser.com/33",debug:!1,environment:"production",release:"221223083335"});var $=function e(t,n){_()(this,e),this.serviceClass=t,this.options=n},ee=function e(t,n){_()(this,e),this.storeClass=t,this.options=n},te=y.createContext(),ne=function(){return(0,y.useContext)(te)},re=function(e){return(0,y.useContext)(te).getService(e)},ie=function(e){var t=e.app,n=e.callbackRef,r=(0,G.Wz)().isNativeSDK,i=t.componentClass;return(0,y.useEffect)((function(){r&&t.executeAction((function(e){e.dispatch(A.t.SET_IS_NATIVE_SDK)}))}),[t,r]),y.createElement(H.SV,null,y.createElement(te.Provider,{value:t.componentContext},y.createElement(i,{ref:n})))},oe=function(e){g()(l,e);var t,n,r,o=(n=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=T()(n);if(r){var i=T()(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return E()(this,e)});function l(e){var t;return _()(this,l),t=o.call(this),console.info("Viddget","Version","d600b71d","Build","221223083335"),t.initialActions=[],t.services=new Map,t.stores=new Map,t.dispatcher={handlers:{},currentEvent:null},t._setup(e),t.actionContext.getService=t.getService.bind(f()(t)),t.actionContext.emitViddgetEvent=t.emit.bind(f()(t)),t.registerStore(k),t.registerStore(D),"testing"===window.ENV&&(document.body.className+=" env-".concat("production"),window.OneToOneApp=f()(t)),t}return p()(l,[{key:"_setup",value:function(e){var t=this;this.componentClass=e.componentClass,this.actionContext={executeAction:function(e,n,r){return t.executeAction(e,n,r)},dispatch:function(e,n){t.dispatch(e,n)},getStore:function(e){return t.getStore(e)}},this.storeContext={getStore:function(e){return t.getStore(e)},waitFor:function(e,n){if(!t.dispatcher.currentEvent)throw new Error("Not dispatching any event, can't call waitFor.");if("function"!=typeof n)throw new Error("Expected waitFor callback parameter to be a function");Array.isArray(e)||(e=[e]);var r,i=X(e);try{for(i.s();!(r=i.n()).done;){var o=r.value,a="function"==typeof o?o.storeName:o;t.dispatcher.currentEvent.dispatchToStore(a)}}catch(e){i.e(e)}finally{i.f()}n()}},this.componentContext={executeAction:function(e,n){t.executeAction(e,n).catch((function(e){if(!(e instanceof K.ZR))throw e}))},getStore:function(e){return t.getStore(e)},getService:function(e){return t.getService(e)}}}},{key:"bootstrap",value:(t=u()(c().mark((function e(t,n){var r,i,o,a,l,s,d,p,m,f,h,g,v,E,S,T,b,_,y,C=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=n||{},r=(0,G.Wz)(),this.emit("__bootstrap",this),e.prev=4,i=(0,q.U)()){e.next=8;break}throw new K.NI(A.dv.CONFIGURATION_ERROR,"Missing orgId");case 8:return e.next=11,u()(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=15;break;case 7:return e.next=9,(0,Q.mn)();case 9:return e.abrupt("return",e.sent);case 12:return e.prev=12,e.t0=e.catch(1),e.abrupt("return",null);case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))();case 11:return o=e.sent,e.next=14,(0,Q.l3)(i,o);case 14:a=e.sent,l={settings:{merchant:{id:i}}},delete a.callsBaseUrl,n=w().merge({baseSettings:a},l,n||{}),e.next=26;break;case 20:return e.prev=20,e.t0=e.catch(4),console.error(e.t0),document.head.innerHTML="",document.body.innerText=e.t0.message,e.abrupt("return");case 26:return s={baseSettings:n.baseSettings||{},additionalSettings:n.settings||{}},window.additionalSettings&&(w().merge(s.additionalSettings,window.additionalSettings),console.log("added global settings",window.additionalSettings)),r.settings&&(w().merge(s.additionalSettings,r.settings),console.log("added query string settings",r.settings)),d=[],this.emit(A.P1.SETTINGS_PREPARE,{urls:d,additionalSettings:s.additionalSettings}),p=r.themeId,m=r.themeScope,f=this._loadTheme(m,p),h=this.getService(j.Z),e.next=38,h.load(d,s);case 38:this.emit(A.P1.SETTINGS_LOADED,h),this.emit(A.P1.READY),g=X(this.stores.keys());try{for(g.s();!(v=g.n()).done;)E=v.value,this.getStore(E)}catch(e){g.e(e)}finally{g.f()}S=X(this.services.keys());try{for(S.s();!(T=S.n()).done;)b=T.value,this.getService(b)}catch(e){S.e(e)}finally{S.f()}return this._isReady=!0,_=this.getService(U.Z),r.mock&&window.addEventListener("message",(function(e){var t;if(!(e.data.length<=0||"{"!==e.data[0]))try{"bambuser-theme-update"===(t=JSON.parse(e.data)).eventName&&(window.theme=t.data.theme,(0,Y.p)(t.data.theme),C.elementComponent.forceUpdate())}catch(e){console.log("Unable to parse postMessage: ",e.message)}})),this.mount(t),y=function e(){C.getStore("MediaStreamStore").wakeUpRemoteAudio(),document.removeEventListener("click",e,!0)},document.addEventListener("click",y,!0),e.next=54,_.load();case 54:return e.prev=54,e.next=57,f;case 57:e.next=62;break;case 59:e.prev=59,e.t1=e.catch(54),console.warn("Unable to load theme",e.t1.message);case 62:case"end":return e.stop()}}),e,this,[[4,20],[54,59]])}))),function(e,n){return t.apply(this,arguments)})},{key:"_drainInitialActions",value:function(){if(this.initialActions.length>0){var e,t=X(this.initialActions);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.executeAction(n.action,n.payload,n.done)}}catch(e){t.e(e)}finally{t.f()}}this.initialActions=[]}},{key:"mount",value:function(e){var t=this;this.mountNode=e,this.element=y.createElement(ie,{app:this,callbackRef:function(e){t.elementComponent=e}}),C.render(this.element,this.mountNode),this._drainInitialActions()}},{key:"registerStore",value:function(e,t){t=t||{};var n=e.storeName;this.stores.set(n,new ee(e,t)),this._isReady&&(this.getStore(n),this.elementComponent.forceUpdate())}},{key:"getText",value:function(e){for(var t=this.getService(U.Z),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.getText.apply(t,[e].concat(r))}},{key:"isRtlLanguage",value:function(){return this.getService(U.Z).isRtlLanguage()}},{key:"hasText",value:function(e){return this.getService(U.Z).hasText(e)}},{key:"getSetting",value:function(e,t){return this.getService("settings").get(e,t)}},{key:"getStore",value:function(e){var t="function"==typeof e?e.storeName:e,n=this.stores.get(t);return n instanceof ee&&(n=this._createStore(n.storeClass,n.options)),n}},{key:"registerService",value:function(e,t){t=t||{};var n=e.serviceName;this.services.set(n,new $(e,t)),this._isReady&&(this.getService(n),this.elementComponent.forceUpdate())}},{key:"getService",value:function(e){var t="function"==typeof e?e.serviceName:e,n=this.services.get(t);return n instanceof $&&(n=this._createService(n.serviceClass,n.options)),n}},{key:"executeAction",value:function(e,t,n){var r=this;if("function"!=typeof e)throw new Error("Expected action to be a function!");return t=void 0!==t?t:{},this.element?new Promise((function(i,o){setImmediate(u()(c().mark((function a(){var l;return c().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!(l=e(r.actionContext,t,i))||"function"!=typeof l.then){a.next=6;break}return a.next=5,l;case 5:l=a.sent;case 6:a.next=13;break;case 8:return a.prev=8,a.t0=a.catch(0),o(a.t0),"function"==typeof n&&n(a.t0,null),a.abrupt("return");case 13:i(l),"function"==typeof n&&n(null,l);case 15:case"end":return a.stop()}}),a,null,[[0,8]])}))))})):new Promise((function(n,i){r.initialActions.push({action:e,payload:t,done:function(e,t){e?i(e):n(t)}})}))}},{key:"dispatch",value:function(e,t){if(!e)throw new Error("Expected eventName to be defined");if(this.dispatcher.currentEvent)throw new Error("Already dispatching '".concat(this.dispatcher.currentEvent.name,"', can't dispatch '").concat(e,"' at the same time!"));var n=this.dispatcher.handlers[e]||[],r=this.dispatcher.handlers.default||[],i=n.concat(r);if(i.length){var o,a={},l=X(i);try{for(l.s();!(o=l.n()).done;){var c=o.value,s=c.storeName,u=c.handler;a[s]||(a[s]={isCompleted:!1,fn:u})}}catch(e){l.e(e)}finally{l.f()}this.dispatcher.currentEvent={name:e,dispatchToStore:function(n){var r=a[n];r&&!r.isCompleted&&(r.fn(t,e),r.isCompleted=!0)}};try{for(var d=0,p=Object.keys(a);d<p.length;d++){var m=p[d];this.dispatcher.currentEvent.dispatchToStore(m)}}catch(e){this._logError(e)}this.dispatcher.currentEvent=null}}},{key:"dispatchLocalAndRemote",value:function(e,t,n){try{this.actionContext.dispatchLocalAndRemote(e,t,n)}catch(e){this._logError(e)}}},{key:"dispatchRemote",value:function(e,t,n){try{this.actionContext.dispatchRemote(e,t,n)}catch(e){this._logError(e)}}},{key:"_createStore",value:function(e,t){var n=e.storeName,r=[this.storeContext,t],o=a()(e,r);if(e.handlers)for(var l=0,c=Object.entries(e.handlers);l<c.length;l++){var s=i()(c[l],2),u=s[0],d=s[1],p=o[d];if("function"!=typeof p)throw new Error("Expected handler ".concat(n,".").concat(d," to be a function on store instance!"));this.dispatcher.handlers[u]||(this.dispatcher.handlers[u]=[]),this.dispatcher.handlers[u].push({storeName:n,handler:p.bind(o)})}return this.stores.set(n,o),o}},{key:"_createService",value:function(e,t){var n=function(e,t,n){var r=e.serviceName,i=[t,n];if(e.inject){var o,l=P(e.inject);try{for(l.s();!(o=l.n()).done;){var c,s=o.value;if(!(c=s.length>="Store".length&&"Store"===s.substr(s.length-"Store".length)?n.getStore(s):n.getService(s)))throw new Error('Unable to inject unknown dependency "'.concat(s,'" into Service ').concat(r));i.push(c)}}catch(e){l.e(e)}finally{l.f()}}var u=a()(e,i),d=e.componentExports||[],p=e.explicitComponentExports||[],m=e.actionExports||[],f=e.explicitActionExports||[],h=e.storeExports||[],g=e.explicitStoreExports||[];return B(u,n.componentContext,r,d,p),B(u,n.actionContext,r,m,f),B(u,n.storeContext,r,h,g),u}(e,t,this),r=e.serviceName;return this.services.set(r,n),"function"==typeof n.initializeService&&n.initializeService(),n}},{key:"_loadTheme",value:function(e,t){var n=this;return new Promise((function(r,i){if((0,G.Wz)().mock)return window.parent.postMessage(JSON.stringify({eventName:"request-bambuser-theme"}),"*"),r();Z().get("".concat(V.Z.clientThemeAPIBaseUrl,"/").concat(t||"default","/call/").concat(e)).then((function(e){200===e.status&&(window.theme=e.data,(0,Y.p)(e.data),n.elementComponent&&n.elementComponent.forceUpdate()),r()}),i)}))}},{key:"_logError",value:function(e){try{e instanceof Error||(e=new Error(e)),console.error(e)}catch(t){console.error("Error logging error :)",e,t)}}}]),l}(F.EventEmitter),ae=oe},33099:function(e){e.exports={appId:"1:929467204332:web:2a34a212e8d986600b9bc9",apiKey:"AIzaSyDPhwf9tMorK0Z-1tSaplPNe2nxmfK_1T8",authDomain:"lcpro-9cc17.firebaseapp.com",databaseURL:"https://lcpro-9cc17.firebaseio.com",projectId:"lcpro-9cc17",storageBucket:"lcpro-9cc17.appspot.com",messagingSenderId:"929467204332",measurementId:"G-N5P0FXQE0R",firestore:{host:"f.liveshopping.bambuser.com"},clientBaseUrl:"https://one-to-one.bambuser.com/call-widget/",clientThemeAPIBaseUrl:"https://svc-prod-us.liveshopping.bambuser.com/functions/productConfig/themes",clientAPIBaseUrl:"https://svc-prod-us.liveshopping.bambuser.com/functions/api",clientAuthBaseUrl:"https://svc-prod-us.liveshopping.bambuser.com/functions/auth",scraperAPI:"https://svc-prod-us.liveshopping.bambuser.com/functions/inventory/fetch",imageTransformerBaseUrl:"https://cdn.liveshopping.bambuser.com/imageTransformer",vapidKey:"BCEmiINOV4h6WzoWDOWCIWJHetzHLjvAbuUwxMqb7_lL__5eFg1xixtgdkBRQ1B1fu7myz0oy2xfeYxo-LErsyc"}},64305:function(e,t,n){"use strict";var r=n(33099);r.clientAPIBaseUrl||(r.clientAPIBaseUrl={NODE_ENV:"production",SENTRY_DSN:"https://1b96664080a84bc1af10104608262f8b@sentry.bambuser.com/33",RELAY_SERVER:""}.API_BASE_URL||"https://us-central1-".concat(encodeURIComponent(r.projectId),".cloudfunctions.net/api")),r.assetsBaseUrl||(r.assetsBaseUrl="https://one-to-one.bambuser.com/assets"),r.translationsBaseUrl||(r.translationsBaseUrl={NODE_ENV:"production",SENTRY_DSN:"https://1b96664080a84bc1af10104608262f8b@sentry.bambuser.com/33",RELAY_SERVER:""}.TRANSLATIONS_BASE_URL||"https://one-to-one.bambuser.com/translations"),r.clientThemeAPIBaseUrl||(r.clientThemeAPIBaseUrl={NODE_ENV:"production",SENTRY_DSN:"https://1b96664080a84bc1af10104608262f8b@sentry.bambuser.com/33",RELAY_SERVER:""}.CLIENT_THEME_API_BASE_URL||"https://one-to-one.bambuser.com/productConfig/themes"),r.scraperAPI||(r.scraperAPI={NODE_ENV:"production",SENTRY_DSN:"https://1b96664080a84bc1af10104608262f8b@sentry.bambuser.com/33",RELAY_SERVER:""}.SCRAPER_API_URL||"https://us-central1-".concat(encodeURIComponent(r.projectId),".cloudfunctions.net/inventory/fetch")),r.imageTransformerBaseUrl||(r.imageTransformerBaseUrl={NODE_ENV:"production",SENTRY_DSN:"https://1b96664080a84bc1af10104608262f8b@sentry.bambuser.com/33",RELAY_SERVER:""}.IMAGE_TRANSFORMER_BASE_URL||"https://cdn.liveshopping.bambuser.com/imageTransformer"),r.orgVersionBaseUrl||(r.orgVersionBaseUrl={NODE_ENV:"production",SENTRY_DSN:"https://1b96664080a84bc1af10104608262f8b@sentry.bambuser.com/33",RELAY_SERVER:""}.ORG_VERSION_BASE_URL||"https://one-to-one.bambuser.com/org-version/".concat(r.projectId)),r.chromeExtensionId||(r.chromeExtensionId="fkhddgplfbdjopphepkohfgdkikfleai"),t.Z=r},28449:function(e,t,n){"use strict";n.d(t,{$X:function(){return X},A3:function(){return U},A8:function(){return Y},AL:function(){return P},B0:function(){return g},B7:function(){return c},BW:function(){return G},Cl:function(){return u},DI:function(){return k},Fq:function(){return A},Ie:function(){return H},JC:function(){return Q},Js:function(){return ee},KR:function(){return w},KT:function(){return W},Kr:function(){return K},LS:function(){return S},LT:function(){return M},Lb:function(){return R},Lm:function(){return v},Nb:function(){return f},O3:function(){return N},P1:function(){return o},Rm:function(){return B},Rs:function(){return L},Si:function(){return D},T5:function(){return $},TY:function(){return m},Uf:function(){return x},Us:function(){return C},Zp:function(){return Z},_X:function(){return q},_l:function(){return F},b9:function(){return s},dA:function(){return O},dF:function(){return d},dv:function(){return j},gd:function(){return y},hj:function(){return z},i3:function(){return _},ir:function(){return te},kp:function(){return E},lo:function(){return b},oI:function(){return T},ou:function(){return J},pX:function(){return p},q0:function(){return V},sK:function(){return I},sz:function(){return l},t:function(){return h},zC:function(){return a}});var r=n(82782),i=n(38784),o={READY:"ready",SETTINGS_PREPARE:"settingsPrepare",SETTINGS_LOADED:"settingsLoaded",CALL_STARTED:"callStarted",CALL_ENDED:"callEnded",PANEL_CLOSE:"panelClose",BASKET_UPDATED:"basketUpdated",SELECTED_MEDIA_CONNECTION:"selectedMediaConnection"},a=(0,r.Z)("ForwardCall",["REQUEST_TAKE_OVER","REQUEST_ACCEPTED","REQUEST_DENIED","TRANSFERRED","TRANSFER_FAIL","TRANSFER_ABORT"]),l=(0,r.Z)("RemoteChannel",["REGISTER","UNREGISTER","MESSAGE","MESSAGE_RESPONSE"]),c=(0,r.Z)("Application",["SCREEN"]),s=(0,r.Z)("Component",["REGISTER_COMPONENT","UNREGISTER_COMPONENT","EVENT"]),u=(0,r.Z)("Product",["ADD","UPDATE","FOCUS","SHOW_NATIVE_URL","SET_NATIVE_PRODUCT","PREVIEW"]),d=(0,r.Z)("ProductDrawer",["ADD","UPDATE","REMOVE"]),p=(0,r.Z)("Panel",["EXPANDED_PRODUCT_MENU","OPEN_ALL_PRODUCTS_PANEL","CLOSE_ALL_PRODUCTS_PANEL"]),m=(0,r.Z)("Animation",["END"]),f=(0,r.Z)("CallSession",["STATUS","STATUS_RESTORE","COMMUNICATION_METHOD_CHOOSER","WAITING_FOR_CLIENT_ACCEPT_USER_MEDIA","FONT_SIZE","PREPARE_NEW","PREPARE_RESTART","METADATA","ADD_METADATA","CLIENT_SESSION_ID","AGENT_SESSION_ID","CLIENT_PLATFORM","AGENT_PLATFORM","MEDIA_TRANSPORT","PROBLEM_INDICATOR","PAUSED","CONNECT_LINKS_ENTRYPOINT_URL","INITIAL_MODE","MERCHANT_INTEGRATION","SET_STREAM_CAPTURE_IMAGE","SHOW_MEDIA_GUIDE"]),h=(0,r.Z)("VideoContainer",["SET_SPLIT_SCREEN","SET_IS_DRAGGING","SET_BLUR_CLIENT","SET_IS_NATIVE_SDK"]),g=(0,r.Z)("VirtualTryOn",["SDK_LOADED","PRODUCT_LOADED","TRY_ON","ADD","SET_PATTERN","TRY_ON_APPEND","TRY_ON_REMOVE","SET_PRODUCT_EXPANDED","SET_CATEGORY_EXPANDED","SET_FOCUS"]),v=(0,r.Z)("MediaStream",["RECEIVED_LOCAL_STREAM","RECEIVED_REMOTE_STREAM","PLAYING_REMOTE_STREAM","PAUSE_LOCAL_STREAM","PAUSE_REMOTE_STREAM","AVAILABLE_DEVICES","SELECT_AUDIO_OUTPUT_MEDIA_DEVICE","TOGGLE_STREAM_INPUT","DISCARD_LOCAL_STREAMS"]),E={STARTING:"CALL_SESSION_STATUS_STARTING",READY:"CALL_SESSION_STATUS_READY",WAITING:"CALL_SESSION_STATUS_WAITING",CONNECTING:"CALL_SESSION_STATUS_CONNECTING",RUNNING:"CALL_SESSION_STATUS_RUNNING",RECONNECTING:"CALL_SESSION_STATUS_RECONNECTING",DISCONNECTING:"CALL_SESSION_STATUS_DISCONNECTING",DISCONNECTED:"CALL_SESSION_STATUS_DISCONNECTED",PAUSED:"CALL_SESSION_STATUS_PAUSED",FORWARDING:"CALL_SESSION_STATUS_FORWARDING"},S={TEXT_CHAT:"text-chat",AGENT_VIDEO:"agent-video"},T={VIDEO:"video",AUDIO:"audio"},b={CAMERA:0,SCREENSHARE:1,VIRTUAL_BACKGROUND:101,VIRTUAL_TRY_ON:102},_={LOOK:"look",PRODUCT:"product"},y=(0,r.Z)("Queue",["RECEIVED","SELECT","PLACE","ESTIMATED_WAITING_TIME","TICKET_ID","CLOSED","CURRENT","NEW_SESSION_DETECTED"]),C=((0,r.Z)("QueueStatus",["RECEIVED"]),{REMOVED:"REMOVED",UPDATED:"UPDATED",COMPLETE:"COMPLETE",WAITING:"WAITING",CONNECTING:"CONNECTING",SERVING:"SERVING",CANCELLED_BY_CLIENT:"CANCELLED_BY_CLIENT",CANCELLED_BY_NO_SHOW:"CANCELLED_BY_NO_SHOW"}),x=(0,r.Z)("Chat",["RECEIVED","EXPAND","ACTIVATE_VIDEO","PAUSE_VIDEO","IS_TYPING"]),O=(0,r.Z)("Basket",["ADD_ROW","ADD_TO_CART","UPDATE_CART_REQUEST","REVERT_ADD_TO_CART","REMOVE_ROW","REMOVE","SET_NR_OF_ITEMS_FOR_ROW","LOADING","RECEIVED","ERROR","CHECKOUT"]),I=((0,r.Z)("SavedState",["STORE","REMOVE"]),(0,r.Z)("Compare",["DESTROY","ADD","REMOVE","SET_VISIBLE_ATTRIBUTES","SET_VISIBILITY","SET_COLLAPSED"])),A=(0,r.Z)("SystemDialog",["CREATE","UPDATE_STATE","DESTROY","DESTROY_ALL"]),N=(0,r.Z)("LoadingScreen",["TEXT"]),w=(0,r.Z)("Viewport",["ADDITIONAL_CSS_CLASSES","CLIENT_VIEWPORT_MODE","CLIENT_VIEWPORT_FORCE_NORMAL_MODE","CLIENT_INSIDE_OVERLAY","CLIENT_VIEWPORT_FRAME","CLIENT_POINTER_MODE"]),R=((0,r.Z)("Setting",["GET_SETTING"]),(0,r.Z)("Visibility",["VISIBILITY_CHANGE"])),k={MINIMAL:"minimal",FLOATING:"floating",NORMAL:"normal",FLOATING_LEFT_MINIMIZED:"floatingLeftMinimized",CENTER_MODAL:"centerModal"},L={WIDTH:2560,HEIGHT:1600,VIDEO_WIDTH:1280,VIDEO_HEIGHT:720,VIDEO_THUMBNAIL_HEIGHT:240,VIDEO_TOP_PERC:.15,VIDEO_LEFT_PERC:.26,VIDEO_WIDTH_PERC:.48,VIDEO_HEIGHT_PREC:.48,LANDSCAPE_ASPECT_RATIO:9/16,PORTRAIT_ASPECT_RATIO:16/9,PORTRAIT_ASPECT_RATIO_OTHER:1.33},D={THUMBNAIL:200,STAGE:420},P=999,M=(0,r.Z)("CallControlStates",["HIDDEN","OPACITY","DEFAULT","SCREENSHARE"]),B=(0,r.Z)("CallControlConstants",["DISABLE_ACTIVE_MIC_CALLOUT","DISABLE_ACTIVE_CAM_CALLOUT","DISABLE_ALL_ACTIVE_CALLOUTS","SET_DISPLAY_STATE","SET_DISPLAY_CALLINFORMATION"]),j={ACCESS_DENIED:"ACCESS_DENIED",CONFIGURATION_ERROR:"CONFIGURATION_ERROR",CALL_NEGOTIATION_NO_MORE_TICKETS:"CALL_NEGOTIATION_NO_MORE_TICKETS",CALL_NEGOTIATION_REACHED_MAX_TRIES:"CALL_NEGOTIATION_REACHED_MAX_TRIES"},U={MENU_HEIGHT:52,BUTTON_WIDTH:40,CLIENT_MOBILE_TOP_CONTROLS_HEIGHT:36,CLIENT_MOBILE_BOTTOM_CONTROLS_HEIGHT:40},G={WIDTH:344,MARGIN:i.ZP.smallSpace},F={HEIGHT:72},W={HEIGHT:44},H=(0,r.Z)("Tool",["SELECT","DESELECT","REMOVE_ALL","CREATE_TOAST","DELETE_TOAST","SET_TOOL_OVERLAY"]),V={HEADER_HEIGHT:60},z=800,Z={TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},Y={ADD:"NotificationConstant.ADD",REMOVE:"NotificationConstant.REMOVE",REMOVE_ALL:"NotificationConstant.REMOVE_ALL"},K={CHAT:"chat",ADD_TO_CART:"addToCart"},q={BACK:"environment",FRONT:"user"},Q={HYDRATE:"HYDRATE",REASON_TRANSFER_CALL:"REASON_TRANSFER_CALL"},X={AGENT_WEB:"agent-web",CLIENT_WEB:"client-web"},J={BOTTOM_RIGHT:"bottomRight",BOTTOM_LEFT:"bottomLeft",TOP_RIGHT:"topRight",TOP_LEFT:"topLeft"},$=4e4,ee={CLIENT_INFO:"client-info",METADATA:"metadata",CONNECT_LINK:"connect-link",CALL_FORWARD:"call-forward",CHAT:"chat",CART:"cart",SETTINGS:"settings",VIRTUAL_TRY_ON:"vto",SHOPPER_SURF_HISTORY:"shopper-surf-history",REPORT_CALL:"report-call",SHOPPER_INFORMATION:"shopper-information"},te={TOP_LEFT:"top-left",BOTTOM_LEFT:"bottom-left"}},97464:function(e,t,n){"use strict";n.d(t,{Gk:function(){return o},Hb:function(){return c},Js:function(){return r},N1:function(){return i},OJ:function(){return l},PC:function(){return d},cQ:function(){return s},iG:function(){return p},tt:function(){return u},zn:function(){return m}});var r="hangup-dialog",i="permissions-preboarding-dialog",o="prefer-chat-dialog",a=.15,l="keypress",c="keydown",s="mousedown",u="Enter",d=" ",p=a,m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;return p=e}},50118:function(e,t,n){"use strict";n.d(t,{ZP:function(){return S},mn:function(){return g},l3:function(){return v}}),n(82526),n(92222),n(57327),n(38880),n(49337),n(47941),n(41539),n(88674),n(54747);var r=n(87757),i=n.n(r),o=n(59713),a=n.n(o),l=(n(35666),n(48926)),c=n.n(l),s=n(64305),u=n(28449),d=n(3999),p=n(1902),m=n(11369);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(){return new Promise((function(e,t){var n=p.Z.auth();if(n.currentUser)n.currentUser.getIdToken().then((function(t){e(t)}),t);else var r=(0,m.Aj)(n,(function(n){r(),n?n.getIdToken().then((function(t){e(t)}),t):t()}))}))}function v(e){return E.apply(this,arguments)}function E(){return E=c()(i().mark((function e(t){var n,r,o,a,l,c=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:null,r="".concat(s.Z.clientAPIBaseUrl,"/o/").concat(t,"/settings/calls/").concat("client"),e.next=4,fetch(r,{headers:h({},!!n&&{Authorization:"Bearer ".concat(n)}),mode:"cors",method:"GET"});case 4:if(403!==(o=e.sent).status){e.next=7;break}throw new d.NI(u.dv.ACCESS_DENIED,"Missing permission to organization ".concat(t));case 7:return e.next=9,o.json();case 9:return a=e.sent,l=a,e.abrupt("return",l);case 12:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}n(34507),n(79477),n(38252),p.Z.initializeApp(s.Z),s.Z.firestore&&p.Z.firestore().settings(s.Z.firestore);var S=p.Z},84602:function(e,t,n){"use strict";var r=n(67294);t.Z=function(){var e=(0,r.useRef)(!1);return(0,r.useEffect)((function(){return e.current=!0,function(){return e.current=!1}}),[]),(0,r.useCallback)((function(){return e.current}),[])}},38769:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(67294);function i(e){var t=(0,r.useRef)();return(0,r.useEffect)((function(){t.current=e})),t.current}},38648:function(e,t,n){"use strict";n(92222),n(4723),n(23123);var r,i=n(34575),o=n.n(i),a=n(93913),l=n.n(a),c=n(80129),s=n(64305),u=!1;function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!=typeof e||!e.match(/:\/\//))return"";if("function"!=typeof window.btoa)return e;var n=e.split(".").pop().split(/#|\?/)[0].toLocaleLowerCase();t.url=e,t.height&&(t.height*=window.devicePixelRatio||1),t.width&&(t.width*=window.devicePixelRatio||1);var r,i=(0,c.stringify)(t);return r="gif"===n?"gif":u?"webp":"png"===n?"png":"jpg","".concat(s.Z.imageTransformerBaseUrl,"/").concat(window.btoa(i),"/i.").concat(r)}window&&window.Image&&((r=new window.Image).onload=function(){u=!!(r.height>0&&r.width>0)},r.onerror=function(){u=!1},r.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA");var p=function(){function e(t,n,r){o()(this,e),this.context=n,this.settings=r}return l()(e,[{key:"optimizedUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.settings.get("imageTransformer.enabled",!0);return n?(this.settings.get("imageTransformer.useStaticIpProxy",!1)&&(t.staticIP=1),d(e,t)):e}}]),e}();p.serviceName="imageService",p.inject=["settings"],t.Z=p},62518:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}}),n(82526),n(41817),n(32165),n(92222),n(57327),n(91038),n(26699),n(66992),n(21249),n(47042),n(9653),n(19601),n(41539),n(54678),n(88674),n(24603),n(39714),n(32023),n(78783),n(15306),n(23123),n(33948);var r=n(50008),i=n.n(r),o=n(34575),a=n.n(o),l=n(93913),c=n.n(l),s=n(65659),u=n.n(s),d=JSON.parse('{"ACTION_BAR_BUTTON_ARIA_LABEL_AUDIO":"Audio","ACTION_BAR_BUTTON_ARIA_LABEL_CAMERA":"Camera","ACTION_BAR_BUTTON_ARIA_LABEL_CART":"Cart","ACTION_BAR_BUTTON_ARIA_LABEL_CHAT":"Chat","ACTION_BAR_BUTTON_ARIA_LABEL_COMPARE":"Compare","ACTION_BAR_BUTTON_ARIA_LABEL_LEAVE_CALL":"Leave call","ACTION_BAR_BUTTON_ARIA_LABEL_MAXIMIZE":"Expand call window","ACTION_BAR_BUTTON_ARIA_LABEL_MICROPHONE":"Microphone","ACTION_BAR_BUTTON_ARIA_LABEL_MINIMIZE":"Minimize call window","ACTION_BAR_BUTTON_ARIA_LABEL_PAUSE":"Pause call","ACTION_BAR_BUTTON_ARIA_LABEL_SETTINGS":"Settings","ACTION_BAR_BUTTON_ARIA_LABEL_VR_BACKGROUND":"Toggle background","ADD_PRODUCT_SIDEBAR_CLOSE_BUTTON":"Close","ADD_PRODUCT_TOOL_CLOSE_BUTTON":"Close add product tool","AGENT_BACK_TO_DASHBOARD":"Back to dashboard","AGENT_BAG_TITLE":"Bag","AGENT_BASKET_COMPLETE_ORDER":"Allow checkout","AGENT_BASKET_EMPTY":"The cart is empty","AGENT_BASKET_MAX_ITEM_AMOUNT_MESSAGE":"Max limit","AGENT_BASKET_RESPONSE_ADD_TO_CART_ERROR":"Problem adding product to client on-site cart, please try again","AGENT_BASKET_RESPONSE_COULD_NOT_FIND_ITEM_TO_REMOVE_ERROR":"Could not find the item to be removed in the basket","AGENT_BASKET_RESPONSE_COULD_NOT_FIND_ITEM_TO_UPDATE_ERROR":"Could not find cart item to update","AGENT_BASKET_RESPONSE_ERROR_BEGIN_COMPLETE_MESSAGE":"Unable to process the order, please try again.","AGENT_BASKET_RESPONSE_ERROR_BEGIN_COMPLETE_TITLE":"Not possible right now","AGENT_BASKET_RESPONSE_OUT_OF_STOCK_ERROR":"The selected size has been sold out","AGENT_BASKET_RESPONSE_TIMEOUT":"The request to update the cart took too long","AGENT_BASKET_RESPONSE_UNKOWN_ERROR_MESSAGE":"An unknown error occurred, the last cart action failed.","AGENT_BASKET_RESPONSE_UNKOWN_ERROR_TITLE":"Cart update error","AGENT_BASKET_RESPONSE_UPDATE_ORDER_ERROR":"Could not update the order, please try again","AGENT_BASKET_TITLE":"Cart","AGENT_BASKET_TOTAL":"Total","AGENT_CALL_FORWARD_DIALOG_CALL_NOT_FOUND":"No active call was found, use another code","AGENT_CALL_FORWARD_DIALOG_CLEAR_INPUT_ARIA_LABEL":"Clear input field","AGENT_CALL_FORWARD_DIALOG_ENTER_MEETING_BUTTON":"Enter meeting","AGENT_CALL_FORWARD_DIALOG_INPUT_PLACEHOLDER":"Input meeting code to join","AGENT_CALL_FORWARD_DIALOG_JOIN_MEETING_BUTTON":"Join meeting","AGENT_CALL_FORWARD_DIALOG_RESUME_CALL_BUTTON":"Resume call","AGENT_CALL_FORWARD_DIALOG_RESUME_CALL_INFO":"You have an active call on another device. Would you like to resume it from this device?","AGENT_CALL_FORWARD_DIALOG_WITH_CLIENT_NAME":"with {0}","AGENT_CALL_FORWARD_HEADER":"Join from another device","AGENT_CALL_FORWARD_TOOL_INFO":"Open the Bambuser app on the new device and input the code to join","AGENT_CALL_INFO_CLIENT_DESKTOP":"Desktop  {0}","AGENT_CALL_INFO_CLIENT_MOBILE":"Mobile  {0}","AGENT_CAMERA_DISABLED":"Agent camera is off","AGENT_CAN_NOT_CREATE_OBJECT_IN_THIS_CALL_STATE_MESSAGE":"Either wait until the client has connected or unpause the call.","AGENT_CAN_NOT_CREATE_OBJECT_IN_THIS_CALL_STATE_TITLE":"Not possible right now","AGENT_CHROME_EXTENSION_REQUIRED_MESSAGE":"This tool requires that you download and install our chrome extension that you can find <a href=\\"{0}\\" target=\\"_top\\">here</a>","AGENT_CHROME_EXTENSION_REQUIRED_TITLE":"Bambuser chrome extension required","AGENT_CLIENT_AVAILABLE_BTN_ACCEPT":"Accept call","AGENT_CLIENT_AVAILABLE_BTN_DECLINE":"Decline","AGENT_CLIENT_AVAILABLE_MESSAGE":"There is a customer waiting to speak with you now","AGENT_CLIENT_AVAILABLE_TITLE":"Customer is calling...","AGENT_CLIENT_CONNECT_CALL_FAILED_MESSAGE":"Could not connect with the client. Please try again.","AGENT_CLIENT_CONNECT_CALL_FAILED_TITLE":"Failed to connect","AGENT_CLIENT_HANGUP_CONFIRM_BTN_LABEL":"Leave call","AGENT_CLIENT_HANGUP_TITLE":"You\'re about to leave the call","AGENT_CLIENT_HANGUP_TITLE_RELOAD":"It seems like there\'s something wrong with your microphone or camera. If you leave the call and reload this page, we\'ll make sure you end up first in line","AGENT_CLIENT_INFO_BROWSER":"Browser","AGENT_CLIENT_INFO_CLIENT_TYPE":"Type","AGENT_CLIENT_INFO_EMAIL":"Email","AGENT_CLIENT_INFO_ENVIROMENT":"Environment","AGENT_CLIENT_INFO_EXTERNAL_ID":"External id","AGENT_CLIENT_INFO_NAME":"Name","AGENT_CLIENT_INFO_QUEUE":"Queue","AGENT_CLIENT_INFO_UNKNOWN_QUEUE":"Unknown","AGENT_CLIENT_INFO_VIEWPORT_MODE":"Client view mode","AGENT_CLIENT_INFO_WAITING_TIME":"Time in queue","AGENT_CLIENT_LOST_MESSAGE":"Customer was connected to another sales rep or closed the web page","AGENT_CLIENT_LOST_TITLE":"Customer unavailable","AGENT_CLIENT_PAUSED_MESSAGE":"Your call is paused","AGENT_CONNECT_LINK_NOT_FOUND":"Connect link not valid, please contact your manager","AGENT_CONTROL_BUTTON_CALL_METADATA":"Call metadata","AGENT_CONTROL_BUTTON_CLIENT_INFO":"Shopper Information","AGENT_CONTROL_BUTTON_CONNECT_LINK":"Generate link","AGENT_CONTROL_BUTTON_RESUME_CALL":"Resume call","AGENT_CONTROL_BUTTON_SCREENSHARE_PRESENTING":"You are presenting","AGENT_CONTROL_BUTTON_SCREENSHARE_STOP":"Stop presenting","AGENT_CONTROL_BUTTON_START_SCREENSHARE_ARIA_LABEL":"Start screenshare","AGENT_CO_BROWSING_ADD_PRODUCT_BUTTON":"Add product","AGENT_CO_BROWSING_BRING_USER_TO_URL_BUTTON":"Bring user to me","AGENT_CO_BROWSING_CLOSE_BUTTON":"Close Co-browsing","AGENT_CO_BROWSING_GO_TO_URL":"Go to URL","AGENT_CO_BROWSING_OPEN_PREVIEW":"Open preview","AGENT_CO_BROWSING_PREVIEW_PRODUCT_BUTTON":"Preview product","AGENT_CO_BROWSING_USER_IS_HERE":"Client is here","AGENT_EDIT":"Edit","AGENT_FEEDBACK_TOOLTIP":"Submit feedback","AGENT_FILE_REQUESTED_IN_CHAT":"File requested in chat","AGENT_GENERAL_SOMETHING_WENT_WRONG":"Something went wrong, please try again","AGENT_HANGUP_ABORT_BTN_LABEL":"Stay on the call","AGENT_IMAGE_ALT_TEXT":"Agent photo","AGENT_INFO":"Agent Info","AGENT_IS_REQUESTING_CALL_TAKE_OVER":"{0} wants to take over the call","AGENT_JOIN_MEETING_BUTTON":"Join meeting","AGENT_LOADING_ACTIVATING_CHROME_EXTENSION":"Loading chrome extension","AGENT_LOADING_CONNECTING_TO_MESSAGE_SERVER":"Connecting to message server","AGENT_LOADING_CONNECTING_TO_QUEUE_SERVER":"Connecting to queue server","AGENT_LOADING_CONNECT_LINK":"Loading connect link","AGENT_LOADING_CONTENT":"Loading content","AGENT_LOADING_ERROR":"Loading failed, redirecting back...","AGENT_LOADING_QUEUES":"Loading queues","AGENT_LOADING_REGISTERING_QUEUES":"Registering selected queues","AGENT_LOADING_REGISTERING_QUEUE_STATUS":"Loading queue status","AGENT_LOGIN_ERROR_BACK_TO_DASHBOARD_BUTTON":"Back to dashboard","AGENT_LOGIN_ERROR_NO_ACCESS_MESSGE":"Account does not have access, please contact your administrator","AGENT_LOGIN_ERROR_NO_FIREBASE_USER_MESSAGE":"Your session has expired, please login again","AGENT_LOGIN_ERROR_REFRESH_BUTTON":"Login again","AGENT_LOGIN_ERROR_TRY_AGAIN_BUTTON":"Try again","AGENT_LOGIN_EXPIRED_TITLE":"Login expired","AGENT_LOGIN_GENERAL_ERROR_MESSAGE":"Something isn\'t right. Check your spelling.","AGENT_LOGIN_LOGIN":"Login","AGENT_LOGIN_LOGIN_ERROR_TITLE":"Login failed","AGENT_LOGIN_OR":"OR","AGENT_LOGIN_PASSWORD":"Password","AGENT_LOGIN_SIGN_IN_WITH":"Sign in with","AGENT_LOGIN_USERNAME":"Username","AGENT_MEETING_CODE_BUTTON":"Enter meeting code","AGENT_MENU_GENERATE_LINK":"Generate link","AGENT_MENU_LEAVE_MEETING":"Leave meeting","AGENT_MUST_BE_IN_CALL_TO_USE_TOOL":"Must be connected with a client to use this agent tool","AGENT_NETWORK_ERROR":"Failed to connect. Please check your internet connection and try again.","AGENT_NETWORK_ERROR_TITLE":"Network error","AGENT_NOTIFICATION_BANNER_BUTTON":"Enable notifications","AGENT_NOTIFICATION_BANNER_STATUS_GRANTED":"Notification permissions is granted.","AGENT_NOTIFICATION_BANNER_STATUS_NOT_GRANTED":"Notification permissions is not yet granted. Check if your settings have allowed notifications.","AGENT_NOTIFICATION_BANNER_TITLE":"Get notified when someone is in line or when a booking is about to start","AGENT_NOTIFICATION_INFORMATION":"Waiting customers - {0}","AGENT_PAGE_SETTINGS":"Settings","AGENT_PAGE_START":"Start","AGENT_PAST_CALLS_DROP_IN":"Drop-in","AGENT_PAST_CALLS_NOT_SENT":"Not sent","AGENT_PAST_CALLS_SENT":"Sent","AGENT_PDA_ADD_ITEM_TO_COMPARE":"Compare with other products","AGENT_PDA_REMOVE_ITEM_FROM_COMPARE":"Remove from compare","AGENT_PERSONAL_QUEUE":"My personal queue","AGENT_PLURAL":"representatives","AGENT_RECONNECTING_TO_SERVER":"Lost connection to server. Trying to reconnect...","AGENT_REMOVE":"Remove","AGENT_REQUEST_FILE_FROM_CLIENT":"Request file from client","AGENT_REQUEST_SEND_ANOTHER":"Upload/request another","AGENT_RINGTONE":"Ringtone","AGENT_SELECT_ATTRIBUTE_MODAL_TITLE":"Select attributes to compare","AGENT_SELECT_MEDIA_MEDIA_TRANSPORT_NONE_ERROR_MESSAGE":"No suitable media server exists, can\'t start call.","AGENT_SELECT_MEDIA_MEDIA_TRANSPORT_NONE_ERROR_TITLE":"Invalid configuration","AGENT_SELECT_QUEUE_TO_RECIEVE_CALLS_TOOLTIP":"Select a queue to go online","AGENT_SEND_FILE_TO_CHAT":"Share file in chat","AGENT_SESSION_CUSTOMER_CLOSED_CALL":"The customer closed the page","AGENT_SESSION_CUSTOMER_LEFT_CALL":"The customer has left the meeting","AGENT_SETTINGS_BOOKINGS_EMPTY_LABEL":"No upcoming meetings","AGENT_SETTINGS_BOOKINGS_TITLE":"Bookings today","AGENT_SETTINGS_BROWSER_NOTIFICATIONS_DISABLED_TOOLTIP":"Notifications are blocked. Please visit your browser settings and enable notifications for this site.","AGENT_SETTINGS_CALL_INSIGHTS":"Call insights","AGENT_SETTINGS_CALL_INSIGHTS_INFO":"It may take up to one hour before your call insights have been updated.","AGENT_SETTINGS_CLIENT_HAS_JOINED_MEETING":"{0} has joined","AGENT_SETTINGS_COMMUNICATIONS_DENIED":"Enable your camera and microphone to continue","AGENT_SETTINGS_CONNECT_LINK_CUSTOMER_EMAIL_HEADER":"E-mail","AGENT_SETTINGS_CONNECT_LINK_CUSTOMER_NAME_HEADER":"Customer name","AGENT_SETTINGS_CONNECT_LINK_DETAILS_HEADER":"Details","AGENT_SETTINGS_CONNECT_LINK_EXPIRED":"This meeting link has expired","AGENT_SETTINGS_CONNECT_LINK_SCHEDULED_AT":"Scheduled {0}","AGENT_SETTINGS_DESELECT_ALL_QUEUES":"Deselect all","AGENT_SETTINGS_ENABLE_BROWSER_NOTIFICATIONS_LABEL":"Browser notifications","AGENT_SETTINGS_ENABLE_SECURITY_BLUR_LABEL":"Apply safety blur filter on client","AGENT_SETTINGS_ENTER_MEETING":"Join now","AGENT_SETTINGS_GO_ONLINE_INFO":"Receive queue calls","AGENT_SETTINGS_LEAVE_MEETING":"Leave","AGENT_SETTINGS_LOGOUT":"Sign out","AGENT_SETTINGS_NOTIFICATIONS_TITLE":"Notifications","AGENT_SETTINGS_OPEN_QUEUE_DASHBOARD_TOOLTIP":"Open queue dashboard","AGENT_SETTINGS_PAST_CALLS_EMPTY_LABEL":"No call history","AGENT_SETTINGS_PAST_CALLS_TITLE":"History and follow up","AGENT_SETTINGS_QUEUE_STATUS_OFFLINE":"Offline","AGENT_SETTINGS_QUEUE_STATUS_ONLINE":"Online","AGENT_SETTINGS_RINGTONE_BUTTON":"Ringtone","AGENT_SETTINGS_SECURITY_TITLE":"Security","AGENT_SETTINGS_SELECT_ALL_QUEUES":"Select all","AGENT_SETTINGS_SELECT_QUEUES":"Queues","AGENT_SETTINGS_SELECT_QUEUE_INFO":"Choose your queues","AGENT_SETTINGS_SIGNED_IN_AS":"You are signed in as {0}","AGENT_SETTINGS_TITLE":"Settings","AGENT_SETTINGS_UNNAMED_CLIENT_HAS_JOINED_MEETING":"The customer has joined","AGENT_SETTINGS_WAITING_FOR_CLIENT_JOIN_MEETING":"Waiting for customer to join","AGENT_SINGULAR":"representative","AGENT_STATS_ACCEPTED_CALLS":"Accepted calls","AGENT_STATS_CALL_DURATION":"Avg. Call duration","AGENT_STATS_CHECKOUT":"Check out","AGENT_STATS_DAYS_SELECTION":"{0} days","AGENT_STATS_TIME_PERIOD":"Last {0} days","AGENT_STATS_TITLE":"Overview","AGENT_STATS_VALUE":"Avg. Value","AGENT_TOOL_ADD_PRODUCT_BUTTON":"Add product","AGENT_TOOL_ADD_PRODUCT_ERROR_INVALID_INPUT":"Please enter a valid url or id to the product to load","AGENT_TOOL_ADD_PRODUCT_INPUT_LABEL":"Product url or article number","AGENT_TOOL_ADD_PRODUCT_INPUT_SEARCH_LABEL":"Search for name, URL or SKU","AGENT_TOOL_ADD_PRODUCT_LOAD_FAILED":"Unable to load product","AGENT_TOOL_ADD_PRODUCT_LOAD_MORE_SEARCH_RESULTS":"Load more","AGENT_TOOL_ADD_PRODUCT_NO_MORE_SEARCH_RESULTS":"No more products","AGENT_TOOL_ADD_PRODUCT_NO_SEARCH_RESULTS":"No products found","AGENT_TOOL_ADD_PRODUCT_RECENT_PRODUCTS_TITLE":"Recent products","AGENT_TOOL_ADD_PRODUCT_SEARCH_ADD_BUTTON":"Add item","AGENT_TOOL_ADD_PRODUCT_SEARCH_PRODUCTS_TITLE":"Products","AGENT_TOOL_ADD_PRODUCT_SEARCH_REMOVE_BUTTON":"Remove","AGENT_TOOL_ADD_PRODUCT_TITLE":"Add products","AGENT_TOOL_ARIA_LABEL_MENU":"Tool menu","AGENT_TOOL_CALL_FORWARD_TITLE":"Call forwarding","AGENT_TOOL_CLEAR_RECENT_PRODUCTS_ARIA_LABEL":"Clear recent products","AGENT_TOOL_CLEAR_RECENT_PRODUCTS_LABEL":"Clear","AGENT_TOOL_CLOSE_BUTTON_LABEL":"Close","AGENT_TOOL_CO_BROWSE_BUTTON_TITLE":"Co-browse","AGENT_TOOL_CO_BROWSE_EMPTY_LIST":"No history yet","AGENT_TOOL_CO_BROWSE_ERROR_INVALID_INPUT":"Please enter a valid url from your ecom site","AGENT_TOOL_CO_BROWSE_LIST_TITLE":"Co-browsing history","AGENT_TOOL_CO_BROWSE_NAVIGATE_BUTTON_TITLE":"Navigate client","AGENT_TOOL_CO_BROWSE_TITLE":"Browse with customer","AGENT_TOOL_CURRENT_PRODUCTS_ADD_TO_CART_BUTTON":"Add to cart","AGENT_TOOL_CURRENT_PRODUCTS_GRID_VIEW_BUTTON":"Grid view","AGENT_TOOL_CURRENT_PRODUCTS_LIST_VIEW_BUTTON":"List view","AGENT_TOOL_CURRENT_PRODUCTS_Z_BUTTON":"Press to pin product drawer","AGENT_TOOL_CUSTOMER_INFO_TITLE":"Customer info","AGENT_TOOL_DROPDOWN_TOOLTIP":"Call tools","AGENT_TOOL_GENERATE_CONNECT_ERROR":"Couldn\'t create a connect link","AGENT_TOOL_GENERATE_CONNECT_LINK_BUTTON_LABEL":"Generate","AGENT_TOOL_GENERATE_CONNECT_LINK_CREATE_INFO":"Create a connect link that can be shared with a customer to join in a video session right away","AGENT_TOOL_GENERATE_CONNECT_LINK_QUEUES_LABEL":"Queues","AGENT_TOOL_GENERATE_CONNECT_LINK_TITLE":"Generate meeting link","AGENT_TOOL_GET_QUEUES_ERROR":"Couldn\'t get queue list from server","AGENT_TOOL_HISTORY_TITLE":"Browsing history","AGENT_TOOL_HISTORY_UNKNOWN_PAGE_TITLE":"Unknown page","AGENT_TOOL_METADATA_AGENT_DISPLAY_NAME_FIELD":"Agent alias","AGENT_TOOL_METADATA_AGENT_DISPLAY_NAME_FIELD_PLACEHOLDER":"Enter your call display name","AGENT_TOOL_METADATA_AGENT_TRACKING_TAG_FIELD":"Staff ID","AGENT_TOOL_METADATA_AGENT_TRACKING_TAG_FIELD_PLACEHOLDER":"Enter your staff ID","AGENT_TOOL_METADATA_TITLE":"Call metadata","AGENT_TOOL_NEW_MEETING_TITLE":"New meeting","AGENT_TOOL_PANEL_INFO_NO_INFO":"No information available","AGENT_TOOL_PANEL_INFO_PRODUCT_OUT_OF_STOCK":"Sold out","AGENT_TOOL_PANEL_INFO_RELATED_PRODUCTS_TITLE":"Related products","AGENT_TOOL_PANEL_INFO_SELECT_TITLE":"Select variant","AGENT_TOOL_PANEL_INFO_TITLE":"Product info","AGENT_TOOL_PLEASE_RESTART_BROWSER":"Please restart your browser","AGENT_TOOL_PLEASE_RESTART_BROWSER_DESCRIPTION":"Sorry for the inconvenience, we could not connect to the server. Please restart your browser by closing all instances of it. Note that refreshing the page is not sufficient, you have to restart the browser","AGENT_TOOL_PRODUCT_CARD_ADD_BUTTON":"Add","AGENT_TOOL_PRODUCT_CARD_ADD_BUTTON_ADDED":"Added","AGENT_TOOL_PRODUCT_CARD_ADD_VARIANT_BUTTON":"Add variant","AGENT_TOOL_PRODUCT_CARD_DISMISS_BUTTON":"Dismiss","AGENT_TOOL_PRODUCT_CARD_REMOVE_BUTTON":"Remove","AGENT_TOOL_PRODUCT_MENU_ITEM_ADD_TO_BASKET":"Add to cart","AGENT_TOOL_PRODUCT_MENU_ITEM_ADD_TO_COMPARE":"Compare","AGENT_TOOL_PRODUCT_MENU_ITEM_DESTROY":"Remove","AGENT_TOOL_PRODUCT_MENU_ITEM_FLIP":"Show more","AGENT_TOOL_PRODUCT_MENU_ITEM_REMOVE_FROM_COMPARE":"Stop comparing","AGENT_TOOL_PRODUCT_MENU_ITEM_SHOW_LESS":"Show less","AGENT_TOOL_RECEIVE_CALLS_NOTIFICATION_PERMISSION":"You need to allow notifications to receive calls. If you are in incognito this is not possible.","AGENT_TOOL_RECENT_PRODUCTS_EMPTY":"No recent products","AGENT_TOOL_SCREEN_SHARE_BTN_START":"Start sharing your screen now","AGENT_TOOL_SCREEN_SHARE_BTN_STOP":"Stop screen sharing now","AGENT_TOOL_SCREEN_SHARE_ERROR_ACQUIREING_DEVICE_MESSAGE":"Can\'t share your screen, the screen capture device is unavailable right now.","AGENT_TOOL_SCREEN_SHARE_ERROR_ACQUIREING_DEVICE_TITLE":"Not possible","AGENT_TOOL_SCREEN_SHARE_LOADING_AGENT_SHARE":"Loading agent screen share, please wait.","AGENT_TOOL_SCREEN_SHARE_LOADING_AGENT_VIDEO":"Loading agent video, please wait.","AGENT_TOOL_SCREEN_SHARE_NOT_CURRENTLY_AVAILABLE_MESSAGE":"You can\'t share your screen with a paused audio/video or without an ongoing call.","AGENT_TOOL_SCREEN_SHARE_NOT_CURRENTLY_AVAILABLE_TITLE":"Not available now","AGENT_TOOL_SCREEN_SHARE_NO_AVAILABLE_DEVICE_MESSAGE":"Can\'t share your screen, no screen capture device was found.","AGENT_TOOL_SCREEN_SHARE_NO_AVAILABLE_DEVICE_TITLE":"Not available","AGENT_TOOL_SELECT_VARIANT_TITLE":"Select Variation","AGENT_TOOL_UPDATE_PRODUCT_BUTTON":"Update product","AGENT_TRY_ON_HEADER":"Try-on","AGENT_UPCOMING_MEETING_NOTIFICATION_BODY":"1 minute until this meeting:  {0}","AGENT_UPCOMING_MEETING_NOTIFICATION_TITLE":"Upcoming meeting","AGENT_VIRTUAL_TRY_ON_FILTER_TAG_TITLE":"Finish","AGENT_VIRTUAL_TRY_ON_LOADING_LABEL":"Applying product...","AGENT_WELCOME_CLIENT_CHAT_MESSAGE":"Hello and welcome, how can I assist you?","AGENT_WRONG_OR_OUTDATED_BROWSER_MESSAGE":"You must use Google Chrome version 70 or greater to access the One-to-One Agent Interface","AGENT_WRONG_OR_OUTDATED_BROWSER_TITLE":"Your browser is not supported","ALREADY_IN_CALL":"It is not possible to transfer a call within the same session.","ANONYMOUS_AGENT":"Someone","AUDIO_VISUAL_CONTROLS_CAMERA_OFF":"Turn camera off","AUDIO_VISUAL_CONTROLS_CAMERA_ON":"Turn camera on","AUDIO_VISUAL_CONTROLS_EXPAND":"Expand video","AUDIO_VISUAL_CONTROLS_FIT_TO_SCREEN":"Show fit to screen","AUDIO_VISUAL_CONTROLS_MIC_OFF":"Turn mic off","AUDIO_VISUAL_CONTROLS_MIC_ON":"Turn mic on","AUDIO_VISUAL_CONTROLS_MINIMIZE":"Minimize video","AUDIO_VISUAL_CONTROLS_PAUSE":"Pause the call","AUDIO_VISUAL_CONTROLS_SPLITSCREEN":"Show splitscreen","BAG_EMPTY_LABEL":"No products","BAN_CALLER_LABEL":"Block user from future calls","BASKET_CLOSE_BUTTON":"Close cart","BOOKING_CONTINUE":"Continue","BOOKING_EMAIL":"Email","BOOKING_FAILURE":"Unable to complete booking request, please try again.","BOOKING_FIRST_NAME":"First name","BOOKING_LAST_NAME":"Last name","BOOKING_SCHEDULE_DAY_TITLE":"Day","BOOKING_SCHEDULE_SELECT_DAY":"Select day","BOOKING_SCHEDULE_SELECT_TIME":"Select time","BOOKING_SCHEDULE_TIME_TITLE":"Time","BOOKING_SLOT_NOT_AVAILABLE":"The time is not available","BOOKING_THANK_YOU_INSTRUCTIONS_MAILED_TO":"Instructions for how to join the meeting has been emailed to: <strong>{0}</strong>","BOOKING_THANK_YOU_MEETING_START_AT":"Your meeting will start at: <strong>{0}</strong>.","BOOKING_THANK_YOU_REMINDER":"You can also <a href=\\"{0}\\">download a calendar reminder</a> for the meeting.","BOOKING_THANK_YOU_TITLE":"Thank you","BRING_TO_ME_LABEL":"Bring to me","CALL_FEEDBACK_ANSWER_THUMBS_DOWN":"Bad","CALL_FEEDBACK_ANSWER_THUMBS_UP":"Good","CALL_FEEDBACK_NPS_HINT_MAX":"10 = Very likely","CALL_FEEDBACK_NPS_HINT_MIN":"0 = Not likely","CALL_FEEDBACK_NPS_QUESTION":"How likely is it that you would recommend this service to a friend or colleague?","CALL_FEEDBACK_NPS_SUBMIT_BUTTON":"Submit feedback","CALL_FEEDBACK_QUESTION_TITLE":"How was your call experience?","CALL_SESSION_AGENT_HUNGUP_TITLE":"Connection to agent lost","CALL_SESSION_AGENT_LOST_CLIENT_UNEXPECTEDLY_MESSAGE":"Connection to the client was unexpectedly closed.","CALL_SESSION_AGENT_LOST_CLIENT_UNEXPECTEDLY_TITLE":"Connection lost","CALL_SESSION_AGENT_PREPARE_FAILED_MESSAGE":"Unable to prepare call, can\'t start call.","CALL_SESSION_AGENT_PREPARE_FAILED_TITLE":"Call preparation failed","CALL_SESSION_CLIENT_ACTIVTE_MEDIA_CAM_CALLOUT":"Turn on your camera","CALL_SESSION_CLIENT_ACTIVTE_MEDIA_MIC_CALLOUT":"Are you saying something? Your mic is off.","CALL_SESSION_CLIENT_CALL_CANCELED_MESSAGE":"The call will be canceled.","CALL_SESSION_CLIENT_CALL_ENDED_MESSAGE":"Press the button below to continue.","CALL_SESSION_CLIENT_CONNECTION_FAILED_MESSAGE":"Unable to initiate connection with the agent.","CALL_SESSION_CLIENT_CONNECTION_FAILED_TITLE":"Connection failed","CALL_SESSION_CLIENT_HANGUP_ABORT_BTN_LABEL":"Continue the call","CALL_SESSION_CLIENT_HANGUP_CONFIRM_MESSAGE":"Do you want to hangup?","CALL_SESSION_CLIENT_HANGUP_CONFIRM_TITLE":"Hangup?","CALL_SESSION_CLIENT_LOST_AGENT_UNEXPECTEDLY_MESSAGE":"Connection was unexpectedly closed.","CALL_SESSION_CLIENT_LOST_AGENT_UNEXPECTEDLY_TITLE":"Connection lost","CALL_SESSION_CLIENT_VIDEO_DISABLED":"Customer camera is off","CALL_SESSION_CONNECTION_PROBLEM_RESTORE_ATTEMPT_1":"Reconnecting...","CALL_SESSION_CONNECTION_PROBLEM_RESTORE_ATTEMPT_2":"Reconnecting attempt 2/3...","CALL_SESSION_CONNECTION_PROBLEM_RESTORE_ATTEMPT_3":"Reconnecting attempt 3/3...","CALL_SESSION_CONNECTION_RESTART_COMMUNICATIONS":"Restarting call...","CALL_SESSION_CONNECTION_RESTART_COMMUNICATIONS_FAILED_MESSAGE":"The attempt to restart the call failed.","CALL_SESSION_CONNECTION_RESTART_COMMUNICATIONS_FAILED_TITLE":"Restart call failed","CALL_SESSION_PUBLISH_ERROR":"Unable to send camera and/or microphone to other end.","CALL_SESSION_RECEIVE_ERROR":"Unable to receive camera and/or microphone from other end.","CALL_SESSION_STATUS_CONNECTING":"Connecting","CALL_SESSION_STATUS_DISCONNECTED":"Disconnected","CALL_SESSION_STATUS_DISCONNECTING":"Disconnecting","CALL_SESSION_STATUS_FORWARDING":"The call is being forwarded","CALL_SESSION_STATUS_PAUSED":"Paused","CALL_SESSION_STATUS_READY":"Ready","CALL_SESSION_STATUS_RECONNECTING":"Reconnecting","CALL_SESSION_STATUS_RUNNING":"Running","CALL_SESSION_STATUS_STARTING":"Starting","CALL_SESSION_STATUS_WAITING":"Waiting","CALL_SESSION_WAITING_FOR_CLIENT":"Waiting for client to join","CALL_SUMMARY_CHAT_EMPTY_STATE":"No messages","CALL_SUMMARY_CLIENT_FIRST_NAME_PLACEHOLDER":"First name","CALL_SUMMARY_CLIENT_LAST_NAME_PLACEHOLDER":"Last name","CALL_SUMMARY_EMAIL_PLACEHOLDER":"Email","CALL_SUMMARY_FETCH_CALL_ERROR":"There was an error retrieving your selected call, please try again later!","CALL_SUMMARY_GENERAL_ERROR_TITLE":"Something went wrong...","CALL_SUMMARY_INCLUDE_CHAT_LABEL":"Include chat in email","CALL_SUMMARY_MEETING_TYPE_LABEL":"Meeting type","CALL_SUMMARY_MENU_TITLE":"Send product and chat history","CALL_SUMMARY_NOTE_PLACEHOLDER":"Add a note","CALL_SUMMARY_NOT_SENT_STATUS":"Not sent","CALL_SUMMARY_PRODUCTS_EMPTY_STATE":"No products found","CALL_SUMMARY_SEND_EMAIL_BTN":"Send","CALL_SUMMARY_SEND_EMAIL_ERROR":"There was an error sending the call summary, please try again later!","CALL_SUMMARY_SEND_TO_LABEL":"Send to","CALL_SUMMARY_SENT_LABEL":"Status","CALL_SUMMARY_SENT_STATUS":"Sent","CALL_SUMMARY_STATUS_LOADING_CALL":"Loading call...","CALL_SUMMARY_STATUS_SENDING_EMAIL":"Sending...","CALL_SUMMARY_STATUS_SENT_EMAIL":"Sent","CALL_SUMMARY_TABS_ARIA_LABEL":"Products and chat","CALL_SUMMARY_TAB_ONE":"Products","CALL_SUMMARY_TAB_TWO":"Chat","CALL_TRANSFER_ERROR_BAD_REQUEST":"Code must be 6 digits.","CALL_TRANSFER_ERROR_CONFLICT":"This call has ended.","CALL_TRANSFER_ERROR_DEFAULT":"Something went wrong. Please try again or contact support.","CALL_TRANSFER_ERROR_FORBIDDEN":"Call transfer is not enabled for your organization.","CALL_TRANSFER_ERROR_NOT_FOUND":"Call was not found, please try a different code.","CALL_TRANSFER_ERROR_UNAUTHORIZED":"Not authorized to transfer calls, contact an admin.","CALL_TRANSFER_REQUEST_ERROR_NOT_FOUND":"Call was not found. Please try again or contact support.","CALL_TRANSFER_REQUEST_TIMEOUT":"The call transfer request was not accepted in time","CALL_UNTITLED_CALLER":"Unnamed client","CALL_UNTITLED_MEETTING":"Meeting","CAMERA_DISABLED":"Disabled","CART_PRODUCT_QUANTITY_ARIA_LABEL":"Quantity","CART_PRODUCT_QUANTITY_DECREASE":"Decrease quantity in cart","CART_PRODUCT_QUANTITY_INCREASE":"Increase quantity in cart","CHAT_AGENT_NAME_FALLBACK":"Agent","CHAT_HEADER_LABEL":"Chat","CHAT_MESSAGE_FROM_CLIENT":"Client","CHAT_MESSAGE_FROM_YOU":"You","CHAT_MESSAGE_PLACEHOLDER":"Your message","CHECKOUT_BUTTON_LABEL":"Checkout","CHROME_ANDROID_MEDIA_GUIDE_SCREEN_STEP_FIVE":"Tap to turn the microphone or camera on or off.\\u2028","CHROME_ANDROID_MEDIA_GUIDE_SCREEN_STEP_FIVE_P2":"If you see the site you want to use under Blocked, tap the site > <b>Acces your microphone</b> > <b>Allow</b>","CHROME_ANDROID_MEDIA_GUIDE_SCREEN_STEP_FOUR":"Tap <b>Microphone</b> or <b>Camera</b>.","CHROME_ANDROID_MEDIA_GUIDE_SCREEN_STEP_ONE":"Reload the page, and when prompted, tap <b>Allow</b> or <b>Block</b>.","CHROME_ANDROID_MEDIA_GUIDE_SCREEN_STEP_THREE":"Tap <b>Site Settings</b>","CHROME_ANDROID_MEDIA_GUIDE_SCREEN_STEP_TWO":"To the right of the address bar, tap\\u2028 More","CHROME_ANDROID_MEDIA_GUIDE_SCREEN_STEP_TWO_P2":"> <b>Settings</b>","CHROME_ANDROID_MEDIA_GUIDE_SCREEN_TITLE":"Use your camera & microphone","CHROME_DESKTOP_MEDIA_GUIDE_SCREEN_P1":"Click the camera blocked icon","CHROME_DESKTOP_MEDIA_GUIDE_SCREEN_P2":"in your browsers address bar and allow access.\\\\n<br><br>\\\\nIf camera is still turned off, you can change permissions in your browser settings.","CHROME_DESKTOP_MEDIA_GUIDE_SCREEN_STEP_ONE":"To the right of the address bar, click \\u2028More","CHROME_DESKTOP_MEDIA_GUIDE_SCREEN_STEP_ONE_P2":"> <b>Settings</b>","CHROME_DESKTOP_MEDIA_GUIDE_SCREEN_STEP_ONE_V2":"At the top right of the address bar in your browser, click the <b>Camera/Microphone</b> icon","CHROME_DESKTOP_MEDIA_GUIDE_SCREEN_STEP_THREE":"Select the option you want as your default setting.","CHROME_DESKTOP_MEDIA_GUIDE_SCREEN_STEP_THREE_V2":"Refresh the page","CHROME_DESKTOP_MEDIA_GUIDE_SCREEN_STEP_TWO":"Click <b>Privacy and security</b> > <b>Site Settings</b> > <b>Microphone</b> or <b>Camera</b>","CHROME_DESKTOP_MEDIA_GUIDE_SCREEN_STEP_TWO_V2":"Choose <b>Always allow access</b>","CHROME_DESKTOP_MEDIA_GUIDE_SCREEN_TEXT":"Without permissions to access your camera/microphone, we cant start the call. Please allow permissions before you continue.","CHROME_DESKTOP_MEDIA_GUIDE_SCREEN_TITLE":"Your mic/camera is denied by your browser","CHROME_DESKTOP_MEDIA_GUIDE_SCREEN_TITLE_2":"How to allow access","CLIENT_AVAILABLE_MAIL_NOTIFICATION_SUBJECT":"Client is waiting in queue","CLIENT_BAG_TITLE":"Your bag","CLIENT_BASKET_TITLE":"Your bag","CLIENT_BOOKED_WITH":"Booked meeting with","CLIENT_CALL_INFORMATION_CALL_WITH_AGENTNAME":"Call with {0}","CLIENT_CALL_INFORMATION_MEETING_WITH_AGENTNAME":"with {0}","CLIENT_CHECK_AUDIO_VIDEO":"Check audio & video","CLIENT_CLOSED_HOURS_MESSAGE":"Please come back later","CLIENT_CLOSED_TITLE":"Currently closed","CLIENT_CLOSE_BUTTON":"Exit","CLIENT_CLOSE_WINDOW_WARNING_DESCRIPTION":"Are you sure you want to close the window? You will lose your place in the queue.","CLIENT_CLOSE_WINDOW_WARNING_TITLE":"Exit?","CLIENT_CONNECTING_WITH_AGENT":"We are connecting you with one of our agents.","CLIENT_CONNECTING_WITH_AGENT_PERSONAL_QUEUE":"We are connecting you with the agent.","CLIENT_CONNECTING_WITH_AGENT_TITLE":"Just a moment.","CLIENT_CONTROL_BUTTON_SCREENSHARE_PRESENTING":"Agent is presenting","CLIENT_CONTROL_BUTTON_SCREENSHARE_PRESENTING_NAME":"{0} is presenting","CLIENT_DEFAULT_MEETING_NAME":"Meeting","CLIENT_DROP_IN":"Drop in","CLIENT_ID_MISSING_MESSAGE":"A connect link is required to join the meeting.","CLIENT_INVITATION_ENTER_MEETING_NOW":"Join now","CLIENT_IS_CHECKING_OUT":"Shopper has started checkout","CLIENT_IS_NOT_VIEWING_WIDGET":"The client is not currently viewing the call","CLIENT_LEAVE_QUEUE":"Leave queue","CLIENT_LEAVE_QUEUE_WARNING_TITLE":"Are you sure you want to leave your place in the queue?","CLIENT_LINK_EXPIRED_MESSAGE":"This link has expired, it was valid until {0}","CLIENT_LINK_NOT_ACTIVATED_MESSAGE":"This link is not yet activated, it will be activated at {0}","CLIENT_MEETING_JOIN_ERROR":"Something went wrong, try again later.","CLIENT_MEETING_STATUS_CONNECTING":"Waiting for others to join","CLIENT_MEETING_STATUS_COUNTDOWN":"Starting in {0}","CLIENT_MEETING_STATUS_WELCOME":"Welcome","CLIENT_MEETING_TODAY":"Today","CLIENT_MEETING_TOMORROW":"Tomorrow","CLIENT_MENU_BUTTON_CLOSE_PDA_ARIA_LABEL":"Close","CLIENT_OPEN_LATER_MESSAGE":"We will open again on {0}","CLIENT_PRODUCT_LIST_BUTTON_ARIA_LABEL":"Open product list","CLIENT_PRODUCT_LIST_BUTTON_LABEL":"All products","CLIENT_QUEUE_AGENTS_BUSY":"All of our agents are currently busy.","CLIENT_QUEUE_AGENTS_BUSY_BOOKING_POSSIBLE":"You can also book a meeting when it suits you the best!","CLIENT_QUEUE_AGENTS_BUSY_VIA_BOOKING":"The agent is preparing for the meeting.","CLIENT_QUEUE_AGENTS_BUSY_VIA_BOOKING_PLACED_INTO_QUEUE":"You will connect shortly.","CLIENT_QUEUE_AVAILABLE_AGENT":"Agents online","CLIENT_QUEUE_CALL_SETTINGS":"Call settings","CLIENT_QUEUE_ESTIMATED_WAITING_TIME":"{0} min","CLIENT_QUEUE_ESTIMATED_WAITING_TIME_TEXT":"Estimated waiting time","CLIENT_QUEUE_NEW_SESSION_DETECTED":"You have a new session open and this session is now closed.","CLIENT_QUEUE_NO_ESTIMATED_WAITING_TIME":"Estimating waiting time...","CLIENT_QUEUE_NO_ESTIMATED_WAITING_TIME_V2":"Est. Waiting time","CLIENT_QUEUE_PLACEMENT_INFO":"You are number {0} in queue which is being served by {1} representative(s).","CLIENT_QUEUE_PLACE_FOOTER":"in queue","CLIENT_QUEUE_PLACE_HEADER":"You are number","CLIENT_QUEUE_PLACE_IN_QUEUE":"Place in queue","CLIENT_QUEUE_PLACE_MESSAGE":"Youre in the queue.\\\\n</br>\\\\nAn agent will soon take your call.","CLIENT_QUEUE_PLACE_MESSAGE_FIRST":"Youre next in line. Get ready!","CLIENT_QUEUE_PLACE_NO_AGENTS":"Unfortunately there are no agents <br/>available at the moment","CLIENT_QUEUE_PLACE_NO_AGENTS_BOOK":"Book a meeting","CLIENT_QUEUE_PLACE_NO_AGENTS_STATUS":"0 online","CLIENT_QUEUE_PLACE_NO_AGENTS_TRY_LATER":"Please try again later.","CLIENT_QUEUE_PLACE_NO_AGENTS_TRY_LATER_OR_BOOK":"Please try again later or book a meeting.","CLIENT_QUEUE_PLACE_NO_AGENTS_VIA_BOOKING":"The agent is preparing for the meeting.","CLIENT_QUEUE_PLACE_NO_AGENTS_VIA_BOOKING_TRY_LATER":"Please hold on.","CLIENT_QUEUE_PLACE_NO_AGENTS_VIA_CONNECT_LINK":"All of our agents are currently busy.","CLIENT_QUEUE_PLACE_NO_AGENTS_VIA_CONNECT_LINK_PERSONAL_QUEUE":"The agent is currently busy.","CLIENT_QUEUE_PLACE_NO_AGENTS_VIA_CONNECT_LINK_PERSONAL_QUEUE_TRY_LATER":"Please hold on.","CLIENT_QUEUE_SERVED_BY_AGENTS":"which is being served by","CLIENT_QUEUE_THANKS_FOR_WAITING":"We apologize for the inconvenience and look forward to connecting with you shortly.","CLIENT_QUEUE_WAITING_MESSAGE":" ","CLIENT_SETTINGS_USER_MEDIA_DENIED_CAMERA_MESSAGE_BEFORE_ICON":"Click the camera blocked icon","CLIENT_SETTINGS_USER_MEDIA_DENIED_MESSAGE_DEFAULT":"Ensure you have allowed access to your camera in browser or system settings.","CLIENT_SETTINGS_USER_MEDIA_DENIED_MESSAGE_WITH_ICON":"{0} in your browser\'s address bar.","CLIENT_SETTINGS_USER_MEDIA_DENIED_MIC_MESSAGE_BEFORE_ICON":"Click the microphone blocked icon","CLIENT_SETTINGS_USER_MEDIA_DENIED_TITLE":"Camera and/or microphone access is required.","CLIENT_SETTINGS_USER_MEDIA_UNKNOWN_ERROR_MESSAGE":"The web browser was unable to access your camera and/or microphone ({0}). The agent will try to assist you with enabling your camera and/or microphone.","CLIENT_SETTINGS_USER_MEDIA_UNKNOWN_ERROR_TITLE":"Access to camera and/or microphone failed","CLIENT_UNSUPPORTED_BROWSER_MESSAGE":"Your browser version is not supported, use the latest version of either Google Chrome, Firefox, Safari or Microsoft Edge.","CLIENT_UNSUPPORTED_BROWSER_MESSAGE_IOS":"Your browser version is not supported, on Apple devices you must use Safari with iOS 11 or greater.","CLIENT_UNSUPPORTED_BROWSER_TITLE":"Unsupported browser","CLIENT_UNSUPPORTED_PROTOCOL_MESSAGE":"Dear developer, you are running in an unsecure context and webrtc is not available. Please use https instead.","CLIENT_VIEW_SCREENSHARE_LABEL":"Watch","CLIENT_VIRTUAL_TRY_ON_BUTTON_OPEN_PDA_LABEL":"Read More","CLIENT_VIRTUAL_TRY_ON_LOADING_LABEL":"Applying...","CLIENT_VIRTUAL_TRY_ON_TITLE":"You are trying on","CLIENT_YOU_ARE_REQUESTED_TO_UPLOAD_FILE":"You are requested to upload a file","COMMON_CHAT_SEND":"Send","COMMON_SHARED_FILE_IN_CHAT":"Uploaded a file","COMPANY_LOGO_ALT_TEXT":"Company Logo","COMPARE_ADD_PRODUCTS_TOOL_TITLE":"Select products to compare","COMPARE_ADD_PRODUCT_BTN":"Add product","COMPARE_EMPTY_LABEL":"No products","COMPARE_LABEL":"Compare","COMPARE_LABEL_WITH_NUMBER":"Compare ({0})","COMPARE_NAME_ATTRIBUTE_LABEL":"Name","CONTROL_BUTTON_END_CALL":"End call","COPIED":"Copied","COPY":"Copy","CO_BROWSE_BUTTON_LABEL":"Browse","CO_BROWSE_BUTTON_LABEL_MINIMIZE":"Stop browsing","DEFAULT_MEDIA_GUIDE_SCREEN_TEXT":"In order for us to start the call, you need to make some changes in your settings that allow access to microphone and camera.","DEFAULT_MEDIA_GUIDE_SCREEN_TITLE":"Oh no!","DEFAULT_MERCHANT_URL":"apple.com","DYNAMIC_ACTION_DIALOG_TRY_AGAIN_BUTTON":"Try again","DYNAMIC_ACTION_HANDLER_ERROR_MESSAGE":"Something went wrong while processing the request.","DYNAMIC_ACTION_HANDLER_ERROR_TITLE":"Request failed","DYNAMIC_ACTION_INVALID_DELAYED_ACTION_DEFINITION_MESSAGE":"Received an invalid delayed action.","DYNAMIC_ACTION_INVALID_DELAYED_ACTION_DEFINITION_TITLE":"Invalid response","DYNAMIC_ACTION_UNKNOWN_ERROR_MESSAGE":"Something went wrong, please try again.","DYNAMIC_ACTION_UNKNOWN_ERROR_TITLE":"Failed","ENTER_FULLSCREEN_DOUBLE_TAP_MOBILE":"Double tap for fullscreen","ENTER_FULLSCREEN_LABEL_DESKTOP":"Double click to enter full screen","ENTER_FULLSCREEN_LABEL_MOBILE":"Tap to enter full screen","FAILED_TO_CONNECT_CALL_ERROR_MESSAGE":"Failed to connect the call","FIREFOX_MOBILE_MEDIA_GUIDE_SCREEN_TEXT":"Reload the page, and when prompted to use your mic or camera, tap <b>Allow</b> or <b>Block</b>.   \\\\n<br/><br/>\\\\nIf youve turned off microphone or camera access, you can turn on your mic or camera permissions in your device settings.","FIREFOX_MOBILE_MEDIA_GUIDE_SCREEN_TITLE":"Use your camera & microphone","FORM_UPLOAD_INPUT_LABEL":"Select file","FREE_TEXT_FEEDBACK_BUTTON":"Skip & return to store","FREE_TEXT_FEEDBACK_GDPR":"*This information is not connected to you as a person. Please do not include personal information about yourself in this feedback.","FREE_TEXT_FEEDBACK_HINT":"Tell us more about your experience...","FREE_TEXT_FEEDBACK_SUBMIT":"Send","GENERAL_BUTTON_CANCEL":"Cancel","GENERAL_BUTTON_CLOSE":"Close","GENERAL_BUTTON_OK":"Ok","GENERAL_BUTTON_SAVE":"Save","GENERAL_CONNECTION_ERROR":"Connection Warning","GENERAL_CONNECTION_ERROR_MESSAGE":"The camera and/or microphone couldn\'t be sent and/or received from other end.","GENERAL_CONNECTION_INTERNAL_ERROR":"Internal error","GENERAL_COPIED_SHORT":"Copied","GENERAL_FROM_YOU":"You","GENERAL_PENDING":"Pending","GENERAL_SETTINGS_CAMERA_DEACTIVATED":"Your camera is off","HISTORY_CARD_NO_OF_VISITS":"Visited {0} times","HISTORY_CARD_OPEN":"Open","IMAGE_CAROUSEL_NEXT_IMAGE_BUTTON":"Show next image","IMAGE_CAROUSEL_PREVIOUS_IMAGE_BUTTON":"Show previous image","IMAGE_CAROUSEL_THUMBNAIL_BUTTON":"Show image {0}","INITIATION_VARIANT_AVATAR_CTA":"Meet an expert","INITIATION_VARIANT_AVATAR_TEXT":"Get help from one of our experts through a video call","INITIATION_VARIANT_DOCK_CTA":"Meet an expert","INITIATION_VARIANT_DOCK_DOCKED_TEXT":"Video call","INITIATION_VARIANT_DOCK_TEXT":"Start a video call where you\'ll see us, but we won\'t see you.","INITIATION_VARIANT_DOCK_TITLE":"Come into our store and get help from one of our experts.","INITIATION_VARIANT_VIDEO_CLOSE":"Remove","INITIATION_VARIANT_VIDEO_DESCRIPTION":"Talk to a sales agent over video call.","INITIATION_VARIANT_VIDEO_START":"Start","INITIATION_VARIANT_VIDEO_TITLE":"Personal shopping","IOS_CHROME_MEDIA_GUIDE_SCREEN_TEXT":"If youve turned off microphone or camera access, you can turn on your mic or camera permissions in your device settings.\\\\n<br/><br/>\\\\nReload the page, and when prompted to use your mic or camera, tap <b>Allow</b> or <b>Block</b>.   ","IOS_CHROME_MEDIA_GUIDE_SCREEN_TITLE":"Use your camera & microphone","IOS_SAFARI_MEDIA_GUIDE_SCREEN_CHAR":"A","IOS_SAFARI_MEDIA_GUIDE_SCREEN_DEFAULT":"apple.com","IOS_SAFARI_MEDIA_GUIDE_SCREEN_STEP_FOUR":"Reload your browser","IOS_SAFARI_MEDIA_GUIDE_SCREEN_STEP_ONE":"Tap this icon in your adress-bar","IOS_SAFARI_MEDIA_GUIDE_SCREEN_STEP_THREE":"Set permissions to <b>Ask</b> or <b>Allow</b>","IOS_SAFARI_MEDIA_GUIDE_SCREEN_STEP_TWO":"Go to <b>Website Settings</b>","IS_CLOSED_LABEL":"Closed","ITEM_PRICE":"Price","MEDIA_GUIDE_SCREEN_STEP_RELOAD":"Rejoin within 10 min and you\'ll keep your place in queue. ","MEDIA_PREVIEW_BOTH":"Starting microphone and camera...","MEDIA_PREVIEW_MIC":"Starting microphone...","MEETING_COMMENT_PLACEHOLDER":"Meeting comment","MEETING_MAIL_AGENT_SUBJECT":"Client booked meeting","MEETING_MAIL_SUBJECT":"Your booked meeting","MEETING_REMINDER_AGENT_DESCRIPTION":"Meeting is booked for queue: {0}\\\\n\\\\nUse browser: {1}","MEETING_REMINDER_AGENT_SUMMARY":"Booked meeting","MEETING_REMINDER_DESCRIPTION":"Use this link to enter the meeting: {0}","MEETING_REMINDER_SUMMARY":"Booked meeting","MIC_ACCESS_ERROR_DIALOG":"Allow access to your microphone so you can make video calls.","MIC_ACCESS_ERROR_DIALOG_TITLE":"Your mic is muted by your system settings","MIC_CAM_ACCESS_ERROR_DIALOG_CLOSE":"Ok","MIC_CAM_ACCESS_ERROR_DIALOG_LEARN_MORE":"Learn more","MIC_DISABLED":"Disabled","NAVIGATE_BACK":"Go back","PAST_CALLS_A_DAY_AGO":"Yesterday","PAST_CALLS_DAYS_AGO":"{0} days ago","PAST_CALLS_OPEN_CALL_ARIA_LABEL":"Open past call {0}","PERMISSIONS_PREBOARDING_ALLOW":"Allow permissions","PERMISSIONS_PREBOARDING_ANDROID_DIALOG_AUDIO":"{0} wants to use your microphone.","PERMISSIONS_PREBOARDING_ANDROID_DIALOG_BOTH":"{0} wants to use your camera and microphone","PERMISSIONS_PREBOARDING_ANDROID_DIALOG_CAM":"{0} wants to use your camera","PERMISSIONS_PREBOARDING_CHAT_ACTION_BACK":"Go back","PERMISSIONS_PREBOARDING_CHAT_ACTION_CHAT":"Start text chat","PERMISSIONS_PREBOARDING_CHAT_TEXT":"Choosing this option will take you to a video call, but with your microphone/camera disabled. \\\\n\\\\nYou will only be able to text chat with us.","PERMISSIONS_PREBOARDING_CHAT_TITLE":"I prefer text chat","PERMISSIONS_PREBOARDING_CHROME_DIALOG_ALLOW":"Allow","PERMISSIONS_PREBOARDING_CHROME_DIALOG_BLOCK":"Block","PERMISSIONS_PREBOARDING_CHROME_DIALOG_TEXT_CAM":"Use your camera","PERMISSIONS_PREBOARDING_CHROME_DIALOG_TEXT_MIC":"Use your microphone","PERMISSIONS_PREBOARDING_CHROME_DIALOG_WANT":"wants to","PERMISSIONS_PREBOARDING_DIALOG_DEFAULT":"Click Allow permissions below, and when the popup shows, choose <b>Allow</b>. ","PERMISSIONS_PREBOARDING_DIALOG_GREAT_AUDIO":"Next, we will ask for your permission to access the microphone.","PERMISSIONS_PREBOARDING_DIALOG_GREAT_BOTH":"Next, we will ask for your permission to access the microphone and camera.","PERMISSIONS_PREBOARDING_ENTER_QUEUE":"Enter queue","PERMISSIONS_PREBOARDING_HEADER":"Pre-boarding","PERMISSIONS_PREBOARDING_IOS_DIALOG":"\\"{0}\\" Would like to Access the Camera","PERMISSIONS_PREBOARDING_IOS_DIALOG_BLOCK":"Dont allow","PERMISSIONS_PREBOARDING_IOS_DIALOG_BOTH":"\\"{0}\\" Would like to Access the Microphone and Camera","PERMISSIONS_PREBOARDING_IOS_DIALOG_CAM":"\\"{0}\\" Would like to Access the Camera","PERMISSIONS_PREBOARDING_IOS_DIALOG_MIC":"\\"{0}\\" Would like to Access the Microphone","PERMISSIONS_PREBOARDING_SAFARI_DIALOG_ALLOW":"Allow","PERMISSIONS_PREBOARDING_SAFARI_DIALOG_DENY":"Dont Allow","PERMISSIONS_PREBOARDING_SAFARI_DIALOG_NEVER":"Never for This Website","PERMISSIONS_PREBOARDING_SAFARI_DIALOG_TEXT":"You can change this setting in the Websites section of Safari Settings.","PERMISSIONS_PREBOARDING_SAFARI_DIALOG_TITLE_BOTH":"Allow {0} to use your camera and microphone?","PERMISSIONS_PREBOARDING_SAFARI_DIALOG_TITLE_MIC":"Allow {0} to use your microphone?","PERMISSIONS_PREBOARDING_WHY":"Why are we asking for this?","PERMISSIONS_PREBOARDING_WHY_BUTTON":"Ok","PERMISSIONS_PREBOARDING_WHY_TEXT":"In order for our sales staff to be able to provide you with the best experience, we wish for you to enable access to microphone and camera.\\\\n</br>We will never record anything from neither microphone nor camera. \\\\n</br>After the call, you can always edit the permissions in your system settings.","PERMISSIONS_PREBOARDING_WHY_TITLE":"Why are we asking for this?","PERMISSION_PREBOARDING_AUDIO_TEXT":"You see us, but we dont see you","PERMISSION_PREBOARDING_AUDIO_TITLE":"With audio only","PERMISSION_PREBOARDING_BOTH_TEXT":"You see us, and well see you","PERMISSION_PREBOARDING_BOTH_TITLE":"With my video on","PERMISSION_PREBOARDING_CHAT_TEXT":"I prefer to chat","PERMISSION_PREBOARDING_TITLE":"Hello, how would you like to join?","POPUP_BOOK_MEETING_BTN":"Book a Meeting","POPUP_ENTER_CHAT_BTN":"Enter chat now","POPUP_GREETING_TEXT":"Lets have a live shopping video call","POPUP_GREETING_TITLE":"Welcome!","POPUP_MAIN_ARIA_LABEL":"Video chat popup","POPUP_SERVICE_CLOSED":"Chat is currently closed and is available during normal business hours.","POPUP_SERVICE_CLOSED_BOOKING_AVAILABLE":"But you can instead book a meeting for when it suits you the best!","POPUP_TERMS_AGREE_BTN":"I agree","POPUP_TERMS_CLICK_AND_ACCEPT_MESSAGE":"By clicking \\"{0}\\", you agree to the <a href=\\"/legal/terms\\" target=\\"_blank\\">Terms of Service</a>, <a href=\\"/legal/privacy-policy\\" target=\\"_blank\\">Privacy Policy</a> and <a href=\\"/legal/cookie-policy\\" target=\\"_blank\\">Cookie Policy</a>.","POPUP_TERMS_MESSAGE":"To continue, please read and agree to our <a href=\\"/legal/terms\\" target=\\"_blank\\">Terms of Service</a>, <a href=\\"/legal/privacy-policy\\" target=\\"_blank\\">Privacy Policy</a> and <a href=\\"/legal/cookie-policy\\" target=\\"_blank\\">Cookie Policy</a>","POPUP_TERMS_TITLE":"But first...","POPUP_TITLE":"Get in touch with us","POST_CALL_ANSWER_THUMBS_DOWN":"Bad","POST_CALL_ANSWER_THUMBS_UP":"Good","POST_CALL_QUESTION_TITLE":"How was your call experience?","PRODUCT_ADDED_TO_CART":"Added to bag","PRODUCT_CARD_SALE_TAG":"SALE","PRODUCT_CONTEXT_MENU_ADD_TO_CART":"Add to cart","PRODUCT_CONTEXT_MENU_COMPARE":"Compare","PRODUCT_CONTEXT_MENU_COMPARE_REMOVE":"Stop comparing","PRODUCT_CONTEXT_MENU_PREVIEW":"Preview","PRODUCT_CONTEXT_MENU_REMOVE":"Remove","PRODUCT_DISPLAY_AREA_PRODUCT_LIST_TITLE":"All products","PRODUCT_DISPLAY_AREA_REMOVE_PRODUCT_BUTTON":"Remove product","PRODUCT_INFO_ACCORDION_TITLE":"Specifications","PRODUCT_LIST_HEADER_LABEL":"View products","PRODUCT_VARIANT_SELECTOR_EMPTY_ATTRIBUTE_VALUE":"n/a","QUEUE_CLIENT_WILL_LOSE_PLACE":"You will lose your place in the queue","QUEUE_INSUFFICENT_QUEUE_CONFIGURATION":"Insufficient queue configuration.","QUEUE_SERVER_DISCONNECTED_MESSAGE":"Connection to the queue server was unexpectedly closed.","QUEUE_SERVER_DISCONNECTED_TITLE":"Connection lost","QUEUE_UNABLE_TO_CONNECT_QUEUE_SERVER":"Unable to connect to queue server.","QUEUE_UNABLE_TO_ENTER":"Unable to enter queue.","RECENTLY_TRIED_ON_PRODUCTS":"Recently tried","REMOVE_RECENT_PRODUCT_FROM_LIST":"Remove recent product from list","REMOVE_SAFETY_BLUR_BUTTON_TEXT":"Remove safety blur","REPORT_CALL_QUESTION_BAD_SOUND_QUALITY_FROM_CUSTOMER":"Bad sound quality from customer","REPORT_CALL_QUESTION_BAD_VIDEO_QUALITY_FROM_CUSTOMER":"Bad video quality from customer","REPORT_CALL_QUESTION_CUSTOMER_COULD_NOT_HEAR_ME":"Customer could not hear me","REPORT_CALL_QUESTION_CUSTOMER_COULD_NOT_SEE_ME":"Customer could not see me","REPORT_CALL_QUESTION_I_COULD_NOT_HEAR_THE_CUSTOMER":"I could not hear the customer","REPORT_CALL_QUESTION_I_COULD_NOT_SEE_THE_CUSTOMER":"I could not see the customer","REPORT_CALL_SUBMIT_ACTION":"Submit","REPORT_CALL_TEXTAREA_PLACEHOLDER":"Tell us more","REPORT_CALL_TITLE":"Report call","REPORT_NEW_CALL_SUBMIT_LABEL":"Submit another report","REPORT_SENT_MESSAGE":"We have received your call report. Your feedback is valuable so we can improve our service.","REPORT_SENT_TITLE":"Thank you for your feedback!","RE_JOIN_BUTTON":"Re-join","SAFARI_MEDIA_GUIDE_SCREEN_STEP_FIVE":"Reload your browser","SAFARI_MEDIA_GUIDE_SCREEN_STEP_FOUR":"Change permission to <b>Ask</b> or <b>Allow</b>","SAFARI_MEDIA_GUIDE_SCREEN_STEP_ONE":"At the top left in your browser, click <b>Safari</b> > <b>Preferences</b>","SAFARI_MEDIA_GUIDE_SCREEN_STEP_THREE":"Select <b>Camera</b> or <b>Microphone</b>","SAFARI_MEDIA_GUIDE_SCREEN_STEP_TWO":"Select <b>Websites</b>","SAFARI_MEDIA_GUIDE_SCREEN_TITLE":"Adjust mic and camera permissions","SCREEN_READER_PAGE_TITLE_TEXT":"Bambuser agent","SCREEN_SHARE_ERROR_MESSAGE":"The browser may lack screen recording permissions or is not able to meet the requirements set for screen sharing.","SCREEN_SHARE_ERROR_TITLE":"Failed to start screen sharing","SCREEN_SHARING_INFORMATION_LABEL":"You are presenting your screen","SELECT_PRODUCTS_TO_COMPARE_TITE":"Select products to compare","SENDING_BOOKING_REQUEST":"Sending booking request","SETTINGS_BACKGROUND_EFFECT_LABEL":"Background effect","SETTINGS_BUTTON_ARIA_LABEL":"Audio/visual settings","SETTINGS_MODAL_AUDIO":"Speakers","SETTINGS_MODAL_CAMERA":"Camera","SETTINGS_MODAL_CAMERA_BLOCKED":"Enable video capture in your browser to use the camera","SETTINGS_MODAL_MICROPHONE":"Microphone","SETTINGS_MODAL_MICROPHONE_BLOCKED":"Enable audio capture in your browser to use the microphone","SETTINGS_MODAL_NOT_ENABLED":"Not enabled yet","SETTINGS_MODAL_NO_DEVICE_FOUND":"No device found","SETTINGS_MODAL_TEST_LABEL":"Test","SETTINGS_MODAL_TITLE":"Settings","SHEET_CLOSE":"Close","SHEET_COLLAPSE":"Collapse","SHOPPER_INFORMATION_HEADER_LABEL":"Your details","SHOPPER_INPUT_FORM_INSTRUCTIONS":"We ask for this information to be able to help you in the best way possible and easily follow up our conversation.","SHOPPER_INPUT_FORM_REQUEST":"The {0} is asking you to fill in your contact details.","SHOPPER_INPUT_FORM_SAVE_BUTTON_LABEL":"Save and continue","SHOPPER_INPUT_FORM_SKIP_BUTTON_LABEL":"Skip","SHOPPER_INPUT_FORM_SUBMITTED_LEAVE_BUTTON":"Close","SHOPPER_INPUT_FORM_SUBMITTED_LEAVE_TEXT":"We will contact you later.","SHOPPER_INPUT_FORM_SUBMITTED_LEAVE_TITLE":"Thank you!","SHOPPER_INPUT_FORM_TITLE":"Let us know how we can help you","SHOPPER_INPUT_REQUEST_BTN_LABEL":"Ask for contact details","SHOPPER_IN_CALL_INPUT_FORM_INSTRUCTIONS":"We ask for this information to easily follow up our conversation.","SHOW_ALL":"Show all","SHOW_LESS":"Show less","SUBMIT_BTN":"Submit","TERMS_AND_CONDITIONS_ACCEPT":"Accept","TERMS_AND_CONDITIONS_DECLINE":"Decline","TERMS_AND_CONDITIONS_TEXT":"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Purus gravida quis blandit turpis cursus in hac. Id interdum velit laoreet id. <a href=\\"https://google.com\\" target=\\"_blank\\"> Eleifend mi in nulla posuere sollicitudin aliquam.</a> Laoreet non curabitur gravida arcu ac tortor. Integer quis auctor elit sed vulputate. Viverra tellus in hac habitasse platea. Purus gravida quis blandit turpis cursus in hac. Adipiscing elit pellentesque habitant morbi tristique senectus et. Amet cursus sit amet dictum sit amet. Faucibus vitae aliquet nec ullamcorper sit amet risus nullam. Ultrices mi tempus imperdiet nulla malesuada pellentesque elit eget gravida. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Purus gravida quis blandit turpis cursus in hac. Id interdum velit laoreet id. Eleifend mi in nulla posuere sollicitudin aliquam. Laoreet non curabitur gravida arcu ac tortor. Integer quis auctor elit sed vulputate. Viverra tellus in hac habitasse platea. Purus gravida quis blandit turpis cursus in hac. Adipiscing elit pellentesque habitant morbi tristique senectus et. Amet cursus sit amet dictum sit amet. Faucibus vitae aliquet nec ullamcorper sit amet risus nullam. Ultrices mi tempus imperdiet nulla malesuada pellentesque elit eget gravida. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Purus gravida quis blandit turpis cursus in hac. Id interdum velit laoreet id. Eleifend mi in nulla posuere sollicitudin aliquam. Laoreet non curabitur gravida arcu ac tortor. Integer quis auctor elit sed vulputate. Viverra tellus in hac habitasse platea. Purus gravida quis blandit turpis cursus in hac. Adipiscing elit pellentesque habitant morbi tristique senectus et. Amet cursus sit amet dictum sit amet. Faucibus vitae aliquet nec ullamcorper sit amet risus nullam. Ultrices mi tempus imperdiet nulla malesuada pellentesque elit eget gravida.","TERMS_AND_CONDITIONS_TITLE":"Terms & Conditions","THANKYOU_AFTER_FEEDBACK":"Thank you for your feedback!","THANKYOU_BUTTON":"Back to Store","THANKYOU_DESCRIPTION":"Hope you enjoyed the service.","THANKYOU_FOOTER":"Copyright 2020 Bambuser AB. All rights reserved.","THANKYOU_START":"Call ended","THANKYOU_SUBTITLE_POLL":"Please fill out our poll","THANKYOU_TEXT_AFTER_POLL":"Hope you enjoyed the service!","THANKYOU_TITLE":"Thank you for your call","THANKYOU_TITLE_POLL":"Thank you for your call","THANK_YOU_AFTER_FEEDBACK":"Thank you for your feedback!","THANK_YOU_DESCRIPTION_FREE_TEXT_FEEDBACK":"Would you like to add something else?","THANK_YOU_TITLE_FREE_TEXT_FEEDBACK":"Thank you!","TOGGLE_SHOW_CALL_INFORMATION":"Toggle showing of call information","TRANSFER_NOT_ACCEPTED":"The request to take over the call was denied by the other end","TRANSFER_REQUEST_DENIED_TITLE":"Call transfer was denied","TRANSFER_REQUEST_FAILED_MESSAGE":"Failed to take over the call. Make sure you are authorized to do so.","VARIANT_SELECTION_ERROR_MESSAGE":"Failed to fetch the selected variant","VIDEO_ACCESS_ERROR_DIALOG":"Allow access to your camera so you can make video calls.","VIDEO_ACCESS_ERROR_DIALOG_TITLE":"Your camera is disabled by your system settings","VIEW_PRODUCT":"Go to product","VIEW_THE_CART":"View bag","VIRTUAL_TRY_ON_ADD_TO_DRAWER_LABEL":"Add to call","VIRTUAL_TRY_ON_BUTTON_LABEL":"Try-on","VIRTUAL_TRY_ON_BUTTON_LABEL_ACTIVE":"Trying","VIRTUAL_TRY_ON_END_TRY_ON":"End Try-on","VIRTUAL_TRY_ON_REMOVE_ALL_PRODUCTS":"Remove all products","VIRTUAL_TRY_ON_REMOVE_FROM_DRAWER_LABEL":"Remove from call","VIRTUAL_TRY_ON_REMOVE_FROM_TRY_ON":"Remove from Try-on","VTO_ASK_TO_TRY_ON":"Want to try something on? Ask your {0} for assistance.","VTO_CATEGORY_BLUSH":"Blush","VTO_CATEGORY_BRACELET":"Bracelets","VTO_CATEGORY_BRONZER":"Bronzers","VTO_CATEGORY_CONCEALER":"Concealers","VTO_CATEGORY_EARRINGS":"Earrings","VTO_CATEGORY_EYE_BROW":"Eyebrows","VTO_CATEGORY_EYE_CONTACT":"Eye contacts","VTO_CATEGORY_EYE_LASH":"Eyelashes","VTO_CATEGORY_EYE_LINE":"Eyeliners","VTO_CATEGORY_EYE_SHADOW":"Eyeshadows","VTO_CATEGORY_EYE_WEAR":"Eyewear","VTO_CATEGORY_HAIR_BAND":"Hairbands","VTO_CATEGORY_HAIR_DYE":"Hair dye","VTO_CATEGORY_LIPSTICK":"Lipsticks","VTO_CATEGORY_LIP_LINER":"Lip liners","VTO_CATEGORY_NAIL":"Nails","VTO_CATEGORY_RING":"Rings","VTO_CATEGORY_SKIN_TONER":"Skin toners","VTO_CATEGORY_WATCH":"Watches","VTO_CLIENT_CAMERA_DISABLED_TOOLTIP":"Client camera has to be enabled","VTO_CLIENT_TAB_HIDDEN_TOOLTIP":"Client needs to view the call to apply product","VTO_COLOR_LABEL":"Color","VTO_EMPTY_LABEL":"There are no products added to Try-on yet","VTO_EMPTY_LABEL_FOR_CLIENT":"You are currently not trying on any products.","VTO_PATTERN_LABEL":"Style/Pattern","VTO_PRODUCT_NOT_SUPPORTED_TOOLTIP":"Product does not support virtual try-on","VTO_START_TOOLTIP":"Apply product to client video","VTO_STOP_TOOLTIP":"Remove product from client video","WEBRTC_CONNECTION_ERROR_MESSAGE_AGENT":"Unable to start a WebRTC media transport between you and the client.","WEBRTC_CONNECTION_ERROR_TITLE":"Starting the call failed","WEBRTC_USER_MEDIA_ABORTERROR_MESSAGE":"Although the client and operating system both granted access to the hardware device, some problem occurred which prevented the device from being used. \\\\n\\\\nPossible solutions: \\\\n1. Client should close all other running applications and try one more time or restart device and schedule a new call. \\\\n2. Or use a different browser and/or device.","WEBRTC_USER_MEDIA_ABORTERROR_TITLE":"Client camera and/or microphone problem: Abort","WEBRTC_USER_MEDIA_NOTALLOWEDERROR_MESSAGE":"The client has denied access to share the device, either in the current session or globally in browser settings. \\\\n\\\\nSolution: Client must manually change this in the browser settings, either for the current webpage or globally for all webpages.","WEBRTC_USER_MEDIA_NOTALLOWEDERROR_TITLE":"Client camera and/or microphone problem: Blocked","WEBRTC_USER_MEDIA_NOTFOUNDERROR_MESSAGE":"Solution: \\\\n1. Client must plugin the missing camera and/or microphone, may require restart of call. \\\\n2. Or use another device which already has camera and microphone.","WEBRTC_USER_MEDIA_NOTFOUNDERROR_TITLE":"Client camera and/or microphone problem: Not found","WEBRTC_USER_MEDIA_NOTREADABLEERROR_MESSAGE":"Although the client granted permission to use the device, a hardware error occurred at the operating system, browser, or web page which prevented access to the device. \\\\n\\\\nPossible solutions: \\\\n1. Change to other camera and/or microphone in settings dialog. \\\\n2. Close all other running applications and try one more time. \\\\n3. Restart device. \\\\n4. Use a different browser and/or device.","WEBRTC_USER_MEDIA_NOTREADABLEERROR_TITLE":"Client camera and/or microphone problem: Not readable","WEBRTC_USER_MEDIA_OVERCONSTRAINEDERROR_MESSAGE":"The specified constraints resulted in no candidate devices which met the criteria requested ({0}). \\\\n\\\\nPossible solution: Client can use another device with a different camera and microphone that may allow the requested constraints.","WEBRTC_USER_MEDIA_OVERCONSTRAINEDERROR_TITLE":"Client camera and/or microphone problem.","WEBRTC_USER_MEDIA_SECURITYERROR_MESSAGE":"Sharing camera and/or microphone has been disabled for the current webpage for security reasons by the client. \\\\n\\\\nSolution: Client must change this manually in browser settings or use another device which hasn\'t these security settings.","WEBRTC_USER_MEDIA_SECURITYERROR_TITLE":"Client camera and/or microphone problem: Security error","WEBRTC_USER_MEDIA_TYPEERROR_MESSAGE":"Invalid configuration specified when trying to access the camera and/or microphone.","WEBRTC_USER_MEDIA_TYPEERROR_TITLE":"Client camera and/or microphone problem: Type error","WEBRTC_USER_MEDIA_UNKNOWNERROR_MESSAGE":"The client has some problem with camera and/or microphone ({0}).","WEBRTC_USER_MEDIA_UNKNOWNERROR_TITLE":"Client camera and/or microphone problem","delete":"Delete","edit":"Edit","unable_to_select_organization":"Unable to select organization"}'),p=n(55347),m=n(64305);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h=function(){function e(t,n,r){a()(this,e),this.viddget=n,this.text=Object.assign({},d),this.debugKeys=!1,this.settingsService=r}return c()(e,[{key:"load",value:function(){var e=this;this.debugKeys=this.settingsService.get("language.debugKeys",!1);for(var t=this.settingsService.get("language.locale"),n=this.settingsService.get("language.scope"),r=function(t){e.text=Object.assign({},d);var n,r=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;u().assign(e.text,i)}}catch(e){r.e(e)}finally{r.f()}},i=[],o=0,a=["".concat(m.Z.translationsBaseUrl,"/").concat(n,"/").concat(t,".json")];o<a.length;o++){var l=a[o];i.push(fetch(l,{headers:{"Content-Type":"application/json"},mode:"cors",method:"GET"}).then((function(e){return e.json()})))}return Promise.all(i).then(r).catch((function(t){var i=e.settingsService.get("language.defaultLocale");return console.warn("Unable to load translations, falling back to ".concat(n,"/").concat(i,":"),t.message),fetch("".concat(m.Z.translationsBaseUrl,"/").concat(n,"/").concat(i,".json"),{headers:{"Content-Type":"application/json"},mode:"cors",method:"GET"}).then((function(e){return e.json()})).then((function(e){r([e])})).catch((function(e){console.warn("Unable to load fallback translations, using bundeled translations:",e.message),r([])}))}))}},{key:"getFormattedPrice",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.field,o=void 0===i?"current":i;if(null==e||null===(t=e.price)||void 0===t||!t.hasOwnProperty(o))throw new Error("A price is required");if(null==e||null===(n=e.price)||void 0===n||!n.currency)throw new Error("A price currency is required");var a=(null==e?void 0:e.locale)||this.settingsService.get("language.locale"),l="{price:C}";return(0,p.Uw)(l,{locale:a,currency:e.price.currency,price:e.price[o]})}},{key:"numberFromFormattedNumber",value:function(e){var t=this.settingsService.get("language.thousandSeparator"," "),n=this.settingsService.get("language.decimalSeparator",".");return e=(e=e.replace(new RegExp(t,"g"),"")).replace(n,"."),parseFloat(e)}},{key:"getFormattedNumber",value:function(e){for(var t=this.settingsService.get("language.thousandSeparator"," "),n=this.settingsService.get("language.decimalSeparator","."),r=(e+="").split("."),i=r[0],o=r.length>1?".".concat(r[1]):"",a=/(\d+)(\d{3})/;a.test(i);)i=i.replace(a,"$1,$2");var l=i+o;return(l=l.replace(/,/g,t)).replace(".",n)}},{key:"_buildMessage",value:function(e,t){return e.replace(/{(\d)}/g,(function(e,n){return t[Number(n)]})).replace(/\\n/g,"\n")}},{key:"getText",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("object"===i()(e)){if(!e.hasOwnProperty("translate"))throw new Error("Unknown key argument for getText");var o=[];e.hasOwnProperty("args")&&(o=e.args),n=n.concat(o),e=e.translate}return this.debugKeys?e:null!==this.text&&this.text.hasOwnProperty(e)?this._buildMessage(this.text[e],n):e}},{key:"hasText",value:function(e){return null!==this.text&&this.text.hasOwnProperty(e)}},{key:"isRtlLanguage",value:function(){var e,t,n=this.settingsService.get("language.locale")||"en-US",r=null!==(e=new Intl.Locale(n))&&void 0!==e?e:{};return"rtl"===(null==r||null===(t=r.textInfo)||void 0===t?void 0:t.direction)||["fa-IR"].includes(n)}}]),e}();h.serviceName="languageService",h.inject=["settings"],h.explicitComponentExports=["getText","hasText","getFormattedNumber","numberFromFormattedNumber","getFormattedPrice","isRtlLanguage"],h.explicitActionExports=["getText","hasText","getFormattedNumber","numberFromFormattedNumber","isRtlLanguage"];var g=h},73074:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}}),n(82526),n(41817),n(32165),n(69826),n(91038),n(82772),n(66992),n(47042),n(51532),n(41539),n(88674),n(39714),n(78783),n(23123),n(23157),n(10072),n(99137),n(71957),n(96306),n(103),n(74592),n(58276),n(35082),n(12813),n(18222),n(38563),n(50336),n(7512),n(33948);var r=n(34575),i=n.n(r),o=n(93913),a=n.n(o),l=(n(92222),n(27852),n(4723),n(7643)),c=n.n(l);function s(e,t,n){if((n=n||{}).url=e,n.data=t,n.method=(n.method||"GET").toUpperCase(),n.type=n.type||"json",function(e){if(e.startsWith("/"))return!1;var t=e.match(/^(https?:\/\/[^\/\?#]+)/);t&&(e=t[1]),e.startsWith("https://")&&e.endsWith(":443")&&(e=e.slice(0,-4));var n=window.location,r=n.host,i=n.protocol;return"".concat(i,"//").concat(r)!==e}(e)&&(n.crossOrigin=!0,n.withCredentials=!0),"function"==typeof n.transformResponse){var r=n.transformResponse;return delete n.transformResponse,c()(n).then((function(e){return r(e)}))}return c()(n)}var u=n(65659),d=n.n(u),p=n(43805),m=n(64305);function f(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var g=function(){function e(t){i()(this,e),this.overrideStorage=void 0!==t.overrideStorage?t.overrideStorage:new Map,this.storage=new Map}return a()(e,[{key:"load",value:function(e,t){var n,r=this,i=[],o=f(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;a.indexOf("?")<0?a+="?t=".concat((new Date).getTime()):a+="&t=".concat((new Date).getTime()),i.push(s(a))}}catch(e){o.e(e)}finally{o.f()}return Promise.all(i).then((function(e){var n,i=d().merge({},t.baseSettings),o=f(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;i=d().merge(i,a)}}catch(e){o.e(e)}finally{o.f()}for(var l in i=d().merge(i,t.additionalSettings))r.set(l,i[l]);r._setLocale()}))}},{key:"has",value:function(){for(var e=!0,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i],l=this.get(a);if(void 0===l){e=!1;break}}return e}},{key:"get",value:function(e,t){var n=e.split("."),r=n.shift(),i=this.overrideStorage.get(r);for(void 0===i&&(i=this.storage.get(r));void 0!==i&&n.length>0;)i=i[r=n.shift()];return void 0===i&&(i=t),i}},{key:"set",value:function(e,t){this.storage.set(e,t)}},{key:"_getPreferredLocale",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e&&(!Array.isArray(e)||0!==e.length)){var r=function(e,t){return!!(e.indexOf("-")<0&&t.startsWith("".concat(e.toLowerCase(),"-")))||e===t},i=void 0;if(n.locale&&(i=e.find((function(e){return r(n.locale,e)}))),!i&&t&&Array.isArray(t)){var o=function(){var n,i=f(t);try{for(i.s();!(n=i.n()).done;){var o,a=n.value,l=f(e);try{for(l.s();!(o=l.n()).done;){var c=o.value;if(c&&r(a,c))return c}}catch(e){l.e(e)}finally{l.f()}}}catch(e){i.e(e)}finally{i.f()}};i=o()}return i}}},{key:"_setLocale",value:function(){var e,t,n=(0,p.Wz)(),r=this.get("language",{}),i=this.get("merchant.id"),o=(null===(e=m.Z.language)||void 0===e?void 0:e.extraLocales)||r.locales||[r.defaultLocale],a="org"===r.scope?i:"default";if(r.defaultLocale=(null===(t=m.Z.language)||void 0===t?void 0:t.defaultLocale)||r.defaultLocale||r.defaultLang||"en-US",r.scope=n.languageScope||a,a!==r.scope)r.locale=n.locale||r.defaultLocale;else{var l=this._getPreferredLocale(o,navigator.languages,n);r.locale=l||r.defaultLocale}console.log("Using locale",r.locale),this.set("language",r)}}]),e}();g.serviceName="settings",g.componentExports=["get","has"],g.storeExports=["get","has"],g.actionExports=["get","has","set","setOverride"];var v=g},81772:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}}),n(41539),n(12419),n(39714);var r=n(34575),i=n.n(r),o=n(93913),a=n.n(o),l=n(2205),c=n.n(l),s=n(78585),u=n.n(s),d=n(29754),p=n.n(d),m=n(26729);var f=function(e){c()(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p()(t);if(n){var i=p()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return u()(this,e)});function o(e){var t;return i()(this,o),(t=r.call(this)).dispatcher=e,t}return a()(o,[{key:"emitChange",value:function(){this.emit("change")}},{key:"addChangeListener",value:function(e){this.on("change",e)}},{key:"removeChangeListener",value:function(e){this.off("change",e)}}]),o}(n.n(m)())},79827:function(e,t,n){"use strict";n.d(t,{t:function(){return i},v:function(){return o}});var r=n(97464);function i(){var e=function e(n){if(9===n.keyCode){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.id="focusOutline",i.appendChild(o),o.appendChild(document.createTextNode("\n      :focus { \n        outline-offset: 1px;\n        outline: #000;\n        outline: 2px solid #7AACFE !important; /* for non-webkit browsers */\n        outline: 5px auto -webkit-focus-ring-color !important \n      }\n\n      ")),window.removeEventListener(r.Hb,e),window.addEventListener(r.cQ,t)}},t=function t(){document.getElementById("focusOutline").remove(),window.removeEventListener(r.cQ,t),window.addEventListener(r.Hb,e)};return window.addEventListener(r.Hb,e),function(){window.removeEventListener(r.cQ,t),window.removeEventListener(r.Hb,e)}}var o=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.type===r.OJ){if(e.key===r.tt)return!0;if(t&&e.key===r.PC)return!0}return!1}},8850:function(e,t,n){"use strict";n(82526),n(41817),n(32165),n(91038),n(66992),n(47042),n(41539),n(39714),n(78783),n(33948);var r=n(34575),i=n.n(r),o=n(93913),a=n.n(o);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c=function(){function e(t,n){i()(this,e),"function"==typeof t&&(n=t,t=void 0),this.callbacks=[],this.isRunning=!1,this.targetFPS=t||60,this._onAnimationFrame=this._onAnimationFrame.bind(this),"function"==typeof n&&this.callbacks.push(n)}return a()(e,[{key:"start",value:function(){this.isRunning||(this.isRunning=!0,this.lastFrame=(new Date).getTime()-1e3,window.requestAnimationFrame(this._onAnimationFrame))}},{key:"stop",value:function(){this.isRunning=!1}},{key:"_onAnimationFrame",value:function(){if(this.isRunning){var e=1e3/this.targetFPS,t=(new Date).getTime(),n=t-this.lastFrame;if(n>e){this.lastFrame=t-n%e;var r,i=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}(this.callbacks);try{for(i.s();!(r=i.n()).done;){var o=r.value;try{o()}catch(e){console.error(e)}}}catch(e){i.e(e)}finally{i.f()}}window.requestAnimationFrame(this._onAnimationFrame)}}}]),e}();t.Z=c},43805:function(e,t,n){"use strict";n.d(t,{C7:function(){return u},Wz:function(){return s}}),n(92222),n(82772),n(40561),n(9653),n(15306),n(64765),n(23123),n(34575),n(93913);var r=n(50008),i=n.n(r),o=n(80129),a=n.n(o),l=n(65659),c=n.n(l);function s(){var e=window.location.search.length>0?a().parse(window.location.search.substr(1)):{};return c().mapValues(e||{},(function e(t){return c().isObject(t)?c().mapValues(t,e):("true"===t?t=!0:"false"===t?t=!1:(/^(\-|\+)?([0-9]+)$/.test(t)||/^(\-|\+)?([0-9]+(\.[0-9]+)?)$/.test(t))&&(t=Number(t)),t)}))}function u(e){return function e(t,n){var r=[];for(var o in t)if(t.hasOwnProperty(o)){var a=n?"".concat(n,"[").concat(o,"]"):o,l=t[o];if("object"===i()(l)){var c=e(l,a);c.length>0&&r.push(c)}else r.push("".concat(encodeURIComponent(a),"=").concat(encodeURIComponent(l)))}return r.join("&")}(e)}n(8850)},99918:function(e,t,n){"use strict";n.d(t,{F:function(){return r},Q:function(){return i}}),n(69826),n(84944),n(21249),n(33792);var r=function(e){return{cart:{items:e.groups.map((function(e){return e.rows.map((function(e){return{sku:e.externalId,name:e.name,count:e.nrOfItems}}))})).flat()}}},i=function(e){var t;if(e.hasOwnProperty("inStock"))return!1===e.inStock;var n=null===(t=e.variants)||void 0===t?void 0:t.find((function(t){return t.externalId===(null==e?void 0:e.externalId)}));return!!n&&!1===(null==n?void 0:n.inStock)}},60414:function(e,t,n){"use strict";n.d(t,{A1:function(){return I},S1:function(){return O}}),n(21249),n(41539),n(12419),n(39714),n(23123),n(54747);var r=n(67154),i=n.n(r),o=n(6479),a=n.n(o),l=n(34575),c=n.n(l),s=n(93913),u=n.n(s),d=n(81506),p=n.n(d),m=n(2205),f=n.n(m),h=n(78585),g=n.n(h),v=n(29754),E=n.n(v),S=n(59713),T=n.n(S),b=n(63038),_=n.n(b),y=n(67294),C=n(57306);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E()(e);if(t){var i=E()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g()(this,n)}}var O=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"==typeof t&&(t=[t]),t=t.map((function(e){var t;if("string"==typeof e){var n=e.split("."),r=_()(n,2);t=r[0];var i=r[1];return[t,[void 0===i?"change":i]]}return e}));var o=r?y.PureComponent:y.Component,l=function(r){f()(l,r);var o=x(l);function l(e,r){var i;return c()(this,l),i=o.call(this,e,r),T()(p()(i),"_onDependencyUpdated",(function(){i.unmounting||i._setStateFromStores(i.props)})),i.dependencies=[],i.stores={},t.forEach((function(e){var t=_()(e,2),n=t[0],o=t[1],a=void 0===o?"change":o,l=r.getStore(n);if(!l)throw new Error("cannot subscribe to ".concat(n));i.stores[n]=l,i.dependencies.push({store:l,eventName:a})})),i.state=n(i.stores,i.props)||{},i}return u()(l,[{key:"componentDidMount",value:function(){var e=this;this.dependencies.forEach((function(t){var n=t.store,r=t.eventName;n.on(r,e._onDependencyUpdated)}))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this._setStateFromStores(e)}},{key:"componentWillUnmount",value:function(){var e=this;this.unmounting=!0,this.dependencies.forEach((function(t){var n=t.store,r=t.eventName;n.off(r,e._onDependencyUpdated)}))}},{key:"_setStateFromStores",value:function(e){var t=n(this.stores,e)||{};this.setState(t)}},{key:"render",value:function(){var t=this.props,n=t.forwardedRef,r=a()(t,["forwardedRef"]);return y.createElement(e,i()({},r,this.state,{ref:n}))}}]),l}(o);function s(e,t){return y.createElement(l,i()({},e,{forwardedRef:t}))}l.contextType=C.Il;var d=e.displayName||e.name;return s.displayName="componentWithStores(".concat(d,")"),y.forwardRef(s)},I=function(e,t,n){return O(e,t,n,!0)};t.ZP=O},82782:function(e,t,n){"use strict";function r(e,t){var n,r={};for(var i in void 0===t?(t=e,e=""):e+=".",t)r[n=t[i]]=e+n;return r}n.d(t,{Z:function(){return r}})},3999:function(e,t,n){"use strict";n.d(t,{NI:function(){return h},W5:function(){return g},ZR:function(){return f}}),n(92222),n(41539),n(12419),n(39714),n(27207);var r=n(34575),i=n.n(r),o=n(2205),a=n.n(o),l=n(78585),c=n.n(l),s=n(29754),u=n.n(s),d=n(65957),p=n.n(d);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u()(e);if(t){var i=u()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var f=function(e){a()(n,e);var t=m(n);function n(e){var r;return i()(this,n),(r=t.call(this,e)).name="HandledError",r}return n}(p()(Error)),h=function(e){a()(n,e);var t=m(n);function n(e,r){var o;i()(this,n);var a=e[0].toUpperCase()+e.substring(1).toLowerCase().replaceAll("_"," "),l="".concat(a).concat(r?": ".concat(r):"");return(o=t.call(this,l)).name="ErrorType",o.type=e,o.plainMessage=r,o}return n}(p()(Error)),g=(Error,function(e){a()(n,e);var t=m(n);function n(e){var r;return i()(this,n),(r=t.call(this,e)).name="TimeoutError",r}return n}(p()(Error)));Error},81752:function(e,t,n){"use strict";n.d(t,{OE:function(){return p},PT:function(){return E},SE:function(){return d},T$:function(){return s},V4:function(){return u}}),n(82526),n(41817),n(32165),n(92222),n(57327),n(69826),n(34553),n(91038),n(66992),n(21249),n(47042),n(38880),n(49337),n(47941),n(41539),n(54678),n(39714),n(70189),n(78783),n(88921),n(96248),n(13599),n(11477),n(64362),n(15389),n(90401),n(45164),n(91238),n(54837),n(87485),n(56767),n(76651),n(61437),n(35285),n(39865),n(54747),n(33948);var r=n(59713),i=n.n(r);function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){c=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e){var t="".concat(e.type);return(e.externalId||e.selectedVariant||e.variant)&&(t+="_",e.externalId&&(t+=e.externalId),t+="_",e.selectedVariant?t+=e.selectedVariant:e.variant&&(t+=e.variant)),t}var u=function(e){var t="";return null!=e&&e.attributes&&(t=e.attributes.filter((function(e){return e.isConfigurable&&e.public&&e.significant})).map((function(e){return e.value})).join(", ")),t},d=function(e,t){var n,r,i,o;return c(c({},e),{},{externalId:e.externalId||t.externalId,name:e.name||t.name,brandName:e.brandName||t.brandName,infoText:e.infoText||t.infoText,subtitle:e.subtitle||t.subtitle,images:Array.from(new Set(e.images.concat(t.images))),image:{front:{url:(null===(n=e.image.front)||void 0===n?void 0:n.url)||(null===(r=t.image.front)||void 0===r?void 0:r.url),thumbnailUrl:(null===(i=e.image.front)||void 0===i?void 0:i.thumbnailUrl)||(null===(o=t.image.front)||void 0===o?void 0:o.thumbnailUrl)}},price:t.price||e.price,url:e.url||t.url})},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=null!==t?e.variations.findIndex((function(e){return e.sku===t})):-1,r=n>=0?n:e.defaultVariationIndex||0,i=e.variations[r],o=i.name||e.name,a=i.brandName||e.brandName,l=i.description||e.description,u=i.subtitle||e.subtitle,d=i.imageUrls.length?i.imageUrls[0]:null,p=i.price,E=i.sku||e.sku,S=i.url||e.url,T=e.locale,b=c(c({type:"product",externalId:"".concat(E),name:o,brandName:a,infoText:l,subtitle:u,images:i.imageUrls,image:{front:{url:d,thumbnailUrl:d}},price:p,url:S},1===e.variations.length?{inStock:i.inStock}:{}),{},{attributes:f(e,i),variants:h(e,i),infobox:v(e,i),relatedProducts:g(e,i),rating:m(i),locale:T});return b.id=s(b),b},m=function(e){var t;if(e&&e.meta&&e.meta.data.rating&&(t=e.meta.data.rating),t){var n=t,r=n.maxValue,i=n.rating,o=n.numberOfRatings;o&&(o=parseFloat(o),isNaN(o)||(t.numberOfRatings=o)),r&&(r=parseFloat(r),isNaN(r)||(t.maxValue=r)),i&&(i=parseFloat(i),isNaN(i)||(t.rating=i))}return t},f=function(e,t){var n,r=[],i=o(e.attributes);try{var a=function(){var e,i=n.value,o=(t.attributes.find((function(e){return e.id===i.id}))||{}).option||"",a=i.options.find((function(e){return e.id==o}))||{name:o},l=a.name,s=a.meta,u=i.id,d=i.significant,p=i.name,m=i.type;r.push(c(c({id:u,type:m},s),{},{public:!0,significant:d,isConfigurable:!0,name:p,value:l,showInComparison:!0,options:(null===(e=t.attributes.find((function(e){return e.id===u})))||void 0===e?void 0:e.productOptions)||[]}))};for(i.s();!(n=i.n()).done;)a()}catch(e){i.e(e)}finally{i.f()}if(t.meta.data&&t.meta.data.specs){var l,s=o(t.meta.data.specs);try{for(s.s();!(l=s.n()).done;){var u=l.value;r.push({id:u.id||u.name,public:!0,name:u.name,value:u.value||"",showInComparison:!0})}}catch(e){s.e(e)}finally{s.f()}}return r},h=function(e,t){var n=[];if(e.variations.length>1){var r=t.name||e.name,i=t.description||e.description,a=t.subtitle||e.subtitle,l=t.imageUrls.length?t.imageUrls[0]:null,c=t.price,s=t.sku||e.sku,u=t.url||e.url;n.push({id:null,name:r,infoText:i,subtitle:a,price:c,inStock:t.inStock,url:u,identifier:null,externalId:"".concat(s),attributes:f(e,t),images:t.imageUrls,image:{front:{url:l,thumbnailUrl:l}},infobox:v(e,t),relatedProducts:g(e,t)});var d,p=o(e.variations);try{for(p.s();!(d=p.n()).done;){var m=d.value;if(m!==t){var h=m.name||e.name,E=m.description||e.description,S=m.subtitle||e.subtitle,T=m.imageUrls.length?m.imageUrls[0]:null,b=m.price,_=m.sku||e.sku,y=m.url||e.url;n.push({id:n.length,name:h,infoText:E,subtitle:S,price:b,inStock:m.inStock,url:y,identifier:null,externalId:_,attributes:f(e,m),images:m.imageUrls,image:{front:{url:T,thumbnailUrl:T}},infobox:v(e,m),relatedProducts:g(e,m)})}}}catch(e){p.e(e)}finally{p.f()}}return n},g=function(e,t){var n=[];if(!Array.isArray(t.relatedProducts))return n;var r,i=o(t.relatedProducts);try{for(i.s();!(r=i.n()).done;){var a=r.value;n.push(c(c({locale:e.locale},a),{},{sku:"".concat(a.sku)}))}}catch(e){i.e(e)}finally{i.f()}return n},v=function(e,t){var n=t.name||e.name,r=t.imageUrls.length?t.imageUrls[0]:null,i=['<h5 class="product-title">'.concat(n,"</h5>")];t.meta.data&&t.meta.data.subtitle&&i.push('<div class="sub-title">'.concat(t.meta.data.subtitle,"</div>"));var o=[{listtype:"Image",item_list:[{url:r}]},{listtype:"Text",item_list:i}],a=m(t);return a&&o.push({listtype:"Rating",item_list:a}),t.price&&o.push({listtype:"Price",item_list:t.price}),t.meta.data&&t.meta.data.uniqueSellingPoints&&o.push({listtype:"Bullet List",item_list:t.meta.data.uniqueSellingPoints}),{items:o}},E=function(e){return{name:e.name,sku:e.sku,attributes:[],defaultVariationIndex:0,variations:[{sku:e.sku,name:e.name,url:null,imageUrls:[],attributes:[],price:{original:e.price,current:e.price,currency:e.currency},description:null,meta:{data:{}}}]}}},79052:function(e,t,n){"use strict";n.d(t,{U:function(){return i}}),n(4723);var r=n(43805),i=function(){return(0,r.Wz)().orgId||(window.ORG_ID?window.ORG_ID:"")}},44444:function(e,t,n){"use strict";n.r(t),n.d(t,{DeviceType:function(){return c},__setupUserAgent:function(){return s},androidChromeNewerOrEqualTo:function(){return x},chromeNewerOrEqualTo:function(){return y},chromeOlderThan:function(){return C},firefoxOlderThan:function(){return O},getBrowserDescription:function(){return w},getPlatformMetadata:function(){return A},isAndroid:function(){return g},isChrome:function(){return h},isClientBrowserSupported:function(){return I},isEdge:function(){return S},isFirefox:function(){return f},isIOS:function(){return m},isMobileDevice:function(){return p},isPerfectCorpSupported:function(){return N},isSafari:function(){return v},isSupportedAgentBrowser:function(){return u},isTabletDevice:function(){return d},isYahooBrowser:function(){return E},mobileSafariNewerOrEqualTo:function(){return b},mobileSafariOlderThan:function(){return T},safariOlderThan:function(){return _}}),n(92222),n(26699),n(32023),n(4723),n(15306);var r,i,o,a=n(51206),l=n.n(a),c={MOBILE:"mobile",TABLET:"tablet",DESKTOP:"desktop"};function s(e){r=l().getParser(e),i=r.getPlatformType()===c.TABLET||d(),o=r.getPlatformType()===c.MOBILE}function u(){return r.satisfies({chrome:">70.0",edge:">79.0"})}function d(){return/iPad/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1||i}function p(){return o}function m(){return"iOS"===r.getOSName()}function f(){return"Firefox"===r.getBrowserName()}function h(){return"Chrome"===r.getBrowserName()}function g(){return"Android"===r.getOSName()}function v(){return"Safari"===r.getBrowserName()}function E(){var e,t,n;return null===(e=window)||void 0===e||null===(t=e.navigator)||void 0===t||null===(n=t.userAgent)||void 0===n?void 0:n.includes("ybrowser")}function S(){return"EdgeHTML"===r.getEngineName()}function T(e){return r.satisfies({mobile:{safari:"<".concat(e)}})}function b(e){return r.satisfies({mobile:{safari:">=".concat(e)}})}function _(e){return r.satisfies({safari:"<".concat(e)})}function y(e){return r.satisfies({chrome:">=".concat(e)})}function C(e){return r.satisfies({chrome:"<".concat(e)})}function x(e){return r.satisfies({android:{chrome:">=".concat(e)}})}function O(e){return r.satisfies({firefox:"<".concat(e)})}function I(){if(r.satisfies({chrome:"<65.0"}))return!1;if(r.satisfies({firefox:"<62.0"}))return!1;var e=r.getUA().match(/(EdgA|EdgiOS)\/([0-9]+)\./),t=r.getEngineName();return!("Trident"===t||"EdgeHTML"===t&&!e||r.satisfies({"Samsung Internet for Android":"<9.2"})||r.satisfies({safari:"<13.0"})||E())}function A(){var e,t,n=window.navigator.appVersion,i=window.navigator.userAgent,o=r.getBrowserName(),a=r.getBrowserVersion(),l={type:c.DESKTOP};d()&&(l.type=c.TABLET),p()&&(l.type=c.MOBILE);var s=[{s:"Windows 3.11",r:/Win16/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 10",r:/(Windows 10|Windows NT 10.0)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0)/},{s:"Windows ME",r:/Windows ME/},{s:"Windows",r:/(Windows|WinNT|Windows NT)/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"OS X",r:/Mac OS X/},{s:"OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var u in s){var m=s[u];if(m.r.test(i)){t=m.s;break}}switch(/Windows/.test(t)&&(e=/Windows (.*)/.exec(t)[1],t="Windows"),t){case"OS X":e=/Mac OS X (1[0-9]+[\.\_\d]+)/.exec(i)[1].replace(/_/g,".");break;case"Android":e=/Android ([\.\_\d]+)/.exec(i)[1];break;case"iOS":e=/OS (\d+)_(\d+)_?(\d+)?/.exec(n),e="".concat(e[1],".").concat(e[2],".").concat(0|e[3])}var f=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,h=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,g=0,v=0;return window.screen&&window.screen.width&&(g=window.screen.availWidth?window.screen.availWidth:window.screen.width,v=window.screen.availHeight?window.screen.availHeight:window.screen.height),{browser:{name:o,version:a},device:l,os:{name:t,version:e},window:{width:f,height:h},screen:{width:g,height:v},features:{webRTC:!0},userAgent:i,navigatorDescriptor:n}}s(window.navigator.userAgent);var N=function(){return!!r.satisfies({desktop:{chrome:">=64"},android:{chrome:">=70"},ios:{chrome:">=87",safari:">=12"},macos:{safari:"<15"},edge:">=17",firefox:">=63",uc:">=7.0.185.1002",qq:">=10.5"})};function w(e){var t=e||A(),n=t.browser.name;return void 0!==t.browser.version&&(n+=" ".concat(t.browser.version)),void 0!==t.os.name&&(n+=", ".concat(t.os.name),void 0!==t.os.version&&(n+=" ".concat(t.os.version))),n}},55347:function(e,t,n){"use strict";n.d(t,{Uw:function(){return o},fm:function(){return l}}),n(92222),n(82772),n(94986),n(47042),n(4723),n(15306),n(23123);var r=n(50008),i=n.n(r);function o(e,t){return e.indexOf("{")<0?e:(t="object"===i()(t)?t:Array.prototype.slice.call(arguments,1),e.replace(/\{\{|\}\}|\{(\w+)(:(([0#])(\.([0#]+))|C)?)?\}/g,(function(e,n){if("{{"==e)return"{";if("}}"==e)return"}";var r=n.split(":",1),i=t[r[0]],o=Array.prototype.slice.call(arguments,1),l="";if(void 0===i)return"";var c=i%1!=0,s=o[2];if(void 0!==s){var u={style:"decimal"};if("C"===s){if(t.currency)try{u.style="currency",u.currency=t.currency,new Intl.NumberFormat(void 0,u)}catch(e){u.style="decimal",l=t.currency,delete u.currency}u.maximumFractionDigits=2,u.minimumFractionDigits=c?2:0}u.minimumIntegerDigits=Math.max(1,s.split("0").length-1);var d=o[5];if(void 0!==d){var p=Math.max(d.lastIndexOf("0")+1,d.lastIndexOf("#")+1);p>0&&(u.maximumFractionDigits=p);var m=d.lastIndexOf("0")+1;m>0&&(u.minimumFractionDigits=m)}var f=new Intl.NumberFormat(a(t.locale),u),h="".concat(f.format(i)).concat(l);return h.replace(/\u00a0/g," ")}return i})))}function a(e){if(e)try{return Intl.getCanonicalLocales(e)[0]}catch(e){return}}function l(e){return e.charAt(0).toUpperCase()+e.slice(1)}},63407:function(e,t,n){"use strict";var r,i=n(63038),o=n.n(i),a=n(67294),l=n(46183),c=n(60414),s=n(52543),u=n(57306),d=(n(74516),n(94184)),p=n.n(d),m=n(99918),f=n(28449),h=(n(91390),(0,c.A1)((function(e){var t=e.product,n=e.isUpdatingBasket,i=e.classes,c=e.checkingOut,s=e.iconOnly,d=(0,u.bp)(),h=(0,a.useState)(!1),g=o()(h,2),v=g[0],E=g[1],S=(0,a.useState)(!1),T=o()(S,2),b=T[0],_=T[1];(0,a.useEffect)((function(){return!n&&v&&(E(!1),_(!0),r=setTimeout((function(){_(!1)}),f.hj)),function(){return clearTimeout(r)}}),[n]);var y=p()(i.addProductButton,v&&i.addProductButtonLoading,s&&i.fixedIconWidth);return a.createElement(l.zx,{icon:s?"cart":(0,m.Q)(t)||b?null:"cart",loading:v,type:"primary",disabled:v||(0,m.Q)(t)||c,className:y,onClick:function(e){},"data-testid":"add-to-cart-button",text:s?null:d.getText(function(){switch(!0){case b:return"AGENT_TOOL_PRODUCT_CARD_ADD_BUTTON_ADDED";case(0,m.Q)(t):return"AGENT_TOOL_PANEL_INFO_PRODUCT_OUT_OF_STOCK";default:return"AGENT_TOOL_PRODUCT_MENU_ITEM_ADD_TO_BASKET"}}())})}),["ProductStore","BasketStore"],(function(e,t){var n=e.BasketStore.getBasket();return{product:e.ProductStore.getProductByExternalId(t.externalId),isUpdatingBasket:n&&n.isLoading,checkingOut:e.BasketStore.checkingOut}})));(0,s.Z)((function(e){return{addProductButton:{margin:"2px 0 32px",height:"48px","& span":{fontSize:"14px"},"&:disabled":{color:e.palette.primary.contrastText,"& svg path":{stroke:e.palette.primary.contrastText}}},addProductButtonLoading:{backgroundColor:e.palette.primary.main},fixedIconWidth:{width:40,margin:0}}}))(h)},40718:function(e,t,n){"use strict";var r=n(67294),i=n(52543),o=n(57306);t.Z=(0,i.Z)((function(){return{saleBadge:{height:"16px",borderRadius:"2px",padding:"0px 4px",textAlign:"center",position:"absolute",background:"#E12147",color:"#fff",fontWeight:"500",fontSize:"9px",lineHeight:"16px"}}}))((function(e){var t=e.position,n=e.classes,i=(0,o.bp)();return r.createElement("div",{style:t,className:n.saleBadge},i.getText("PRODUCT_CARD_SALE_TAG"))}))},1166:function(e,t,n){"use strict";n.d(t,{Z:function(){return _}}),n(69826),n(21249);var r=n(67294),i=n(8991),o=n(53869),a=n(60414),l=(n(82526),n(57327),n(38880),n(49337),n(47941),n(54747),n(59713),n(46183)),c=n(52543),s=n(57306),u=n(45697),d=n.n(u),p=n(94184),m=n.n(p),f=n(28449),h=n(81752),g=n(40718),v=(n(63407),n(38784)),E=function(e){var t,n,i,o,a=e.product,c=e.onClick,u=e.className,d=e.classes,p=(0,s.bp)(),v=(null==a?void 0:a.price)&&p.getFormattedPrice(a),E=(null==a?void 0:a.thumbnail)||(null==a||null===(t=a.image)||void 0===t||null===(n=t.front)||void 0===n?void 0:n.url)||(null==a?void 0:a.imageUrl),S=(null==a?void 0:a.name)||(null==a?void 0:a.title),T=null==a||null===(i=a.price)||void 0===i?void 0:i.original,b=null==a||null===(o=a.price)||void 0===o?void 0:o.current,_=!!T&&T!==b,y=(0,h.V4)(a),C=(p.getStore("CompareStore").isProductInCompare(null==a?void 0:a.externalId),null==a||a.externalId,m()(d.container,u)),x={loader:{height:"10px",width:"10px",borderColor:"rgba(109, 105, 106, 1) rgba(109, 105, 106, 1) transparent"},imageStyle:{margin:10,backgroundColor:"#fff",borderRadius:"4px",width:"56px",height:"56px",boxShadow:"unset",position:"relative"},saleTag:{left:"14px",bottom:"14px"}};return r.createElement(l.L9,{onClick:function(e){return c(a)},className:C,"data-testid":"mobile-product-card"},r.createElement("div",{className:d.leftContent},r.createElement(l.S3,{src:E,size:f.Si.THUMBNAIL,style:x.imageStyle,ariaHidden:!0,className:d.imageContainer}),_&&r.createElement(g.Z,{position:x.saleTag})),r.createElement("div",{className:d.info},r.createElement(l.u,{text:S,placement:"top",width:250},r.createElement(l.xv,{className:d.title},S)),!!y&&r.createElement(l.xv,{className:d.attributes},y),v&&r.createElement(l.xv,{type:"secondary",className:d.price},v)),!1)};E.propTypes={product:d().shape({price:d().shape({currency:d().string.isRequired,current:d().number,original:d().number})})},E=(0,a.ZP)(E,["CompareStore"],(function(){}));var S=(0,c.Z)((function(e){return{container:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",margin:"0 4px",borderRadius:e.shape.borderRadius,transition:"all .1s linear",cursor:"pointer",animation:"fadeIn 0.5s 1",width:"calc(100vw * 0.853)",minWidth:"calc(100vw * 0.853)",height:"72px",scrollSnapAlign:"center",background:e.palette.white.main,"&:first-child":{marginLeft:v.ZP.smallSpace},"@media (orientation: landscape)":{width:"calc(100vh * 0.853)",minWidth:"calc(100vh * 0.853)"}},leftContent:{display:"flex",justifyContent:"center",alignItems:"center",position:"relative"},imageContainer:{margin:"10px 0 10px 10px",borderRadius:"4px",boxShadow:"0px 14px 19px -5px rgba(0, 0, 0, 0.16)",border:"1px solid rgba(0, 0, 0, 0.02)",backgroundColor:"#fff",position:"relative"},info:{display:"flex",alignItems:"flex-start",flexDirection:"column",margin:"0 10px 0 4px",overflowX:"hidden",flex:1},title:{maxWidth:"100%",textAlign:"left",whiteSpace:"nowrap",textOverflow:"ellipsis",fontSize:"14px",lineHeight:"17px",margin:"0 0 2px",fontWeight:500,overflow:"hidden"},attributes:{maxWidth:"100%",whiteSpace:"nowrap",textOverflow:"ellipsis",fontSize:"12px",lineHeight:"16px",fontWeight:400,overflow:"hidden",margin:"0 0 2px"},price:{fontSize:"12px",lineHeight:"15px",margin:"0px",fontWeight:500,color:"#000"},iconButtonWrapper:{margin:8}}}))(E),T=n(9042),b=n(38769),_=(0,n(20061).Z)((function(){return{container:{transition:"opacity 0.5s",overflowX:"auto",overflowY:"hidden",scrollSnapType:"x mandatory",maxWidth:"100%",width:"100%",height:f._l.HEIGHT,display:"none",justifyContent:"center",zIndex:3,"&::-webkit-scrollbar":{display:"none"}},show:{display:"flex"},sticky:{position:"absolute",bottom:"12px",zIndex:4},overflow:{justifyContent:"flex-start"},hidden:{visibility:"hidden",opacity:0,pointerEvents:"none"}}}))((0,a.S1)((function(e){var t=e.products,n=e.hidden,a=e.isSticky,l=e.classes,c=e.isDisplayingCallInformation,u=void 0===c||c,d=e.isPaused,p=(0,s.bp)(),h=(0,r.useRef)(),g=(0,b.Z)(t.length),E=u||d;(0,r.useEffect)((function(){t.length>1&&g<t.length&&h.current.scrollTo({left:500*t.length,behavior:"smooth"})}),[t]);var _,y=function(e){var n=t.find((function(t){return t===e.externalId}));n&&p.executeAction(T.P8,{externalId:n})},C=m()(l.container,t.length>0&&!n&&l.show,t.length>1&&l.overflow,a&&l.sticky,n&&l.hidden),x={withCallControls:{bottom:v.ZP.space+f.A3.CLIENT_MOBILE_BOTTOM_CONTROLS_HEIGHT,transition:{duration:.15,ease:"easeInOut"}},withoutCallControls:{bottom:v.ZP.smallSpace,transition:{duration:.15,ease:"easeInOut"}}};return r.createElement(i.E.div,{initial:"withoutCallControls",animate:a&&E?"withCallControls":"withoutCallControls",variants:x,className:C,ref:h,"data-testid":"mobile-product-carousel"},r.createElement(o.M,null,((_=t.map((function(e){var t=p.getStore("ProductStore").getProductByExternalId(e);return r.createElement(S,{key:e,product:t,onClick:y})}))).length>1&&_.push(r.createElement("div",{style:{minWidth:"4px"},key:"placeholder"})),_)))}),["CallSessionStore","ProductDrawerStore"],(function(e){return{isPaused:e.CallSessionStore.isPaused(),products:e.ProductDrawerStore.products}})))},38784:function(e,t,n){"use strict";function r(){return{"&::-webkit-scrollbar":{width:"10px",backgroundColor:"transparent"},"&::-webkit-scrollbar-thumb":{backgroundColor:"#C4C4C4",border:"3px solid transparent",backgroundClip:"padding-box",borderRadius:"5px"},"&::-webkit-scrollbar-track":{border:"3px solid transparent",backgroundClip:"padding-box"}}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transparent";return{"@supports (-webkit-tap-highlight-color: transparent)":{"-webkit-tap-highlight-color":"".concat(e)}}}n.d(t,{EZ:function(){return r},pv:function(){return i}}),t.ZP={space:16,smallSpace:8}},37618:function(e,t,n){"use strict";n(82526),n(57327),n(38880),n(49337),n(47941),n(54747);var r=n(67154),i=n.n(r),o=n(59713),a=n.n(o),l=n(6479),c=n.n(l),s=n(67294);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={userSelect:"none"};t.Z=function(e){var t=e.color,n=void 0===t?"black":t,r=(e.className,e.style),o=void 0===r?{}:r,a=c()(e,["color","className","style"]);return s.createElement("svg",i()({style:d(d({},p),o),width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},a),s.createElement("path",{fill:n,d:"M0 10.601C0 14.706 3.34465 18 7.50424 18C11.6638 18 15 14.706 15 10.601C15 10.1997 14.7114 9.90711 14.2954 9.90711C13.8964 9.90711 13.6333 10.1997 13.6333 10.601C13.6333 13.9619 10.9083 16.654 7.50424 16.654C4.10017 16.654 1.36672 13.9619 1.36672 10.601C1.36672 7.24849 4.10017 4.56479 7.50424 4.56479C8.14941 4.56479 8.75212 4.61496 9.25297 4.732L6.71477 7.20669C6.58744 7.34046 6.51952 7.50766 6.51952 7.68323C6.51952 8.06781 6.80815 8.35207 7.19015 8.35207C7.40238 8.35207 7.56367 8.28518 7.68251 8.15978L11.18 4.69856C11.3328 4.55643 11.3922 4.38922 11.3922 4.19693C11.3922 4.01301 11.3158 3.82908 11.18 3.69531L7.68251 0.20065C7.56367 0.0668834 7.39389 0 7.19015 0C6.80815 0 6.51952 0.300975 6.51952 0.685555C6.51952 0.861124 6.58744 1.02833 6.70628 1.1621L8.96435 3.36089C8.52292 3.27729 8.02207 3.21876 7.50424 3.21876C3.34465 3.21876 0 6.50441 0 10.601Z"}))}},30777:function(e,t,n){"use strict";n(82526),n(57327),n(38880),n(49337),n(47941),n(54747);var r=n(67154),i=n.n(r),o=n(59713),a=n.n(o),l=n(6479),c=n.n(l),s=n(67294);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={userSelect:"none"};t.Z=function(e){var t=e.color,n=void 0===t?"white":t,r=e.lineColor,o=void 0===r?"white":r,a=e.style,l=void 0===a?{}:a,u=c()(e,["color","lineColor","style"]);return s.createElement("svg",i()({style:d(d({},p),l),width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},u),s.createElement("path",{d:"M3.51471 2.05026L2.10049 3.46448L20.4853 21.8493L21.8995 20.435L3.51471 2.05026Z",fill:o}),s.createElement("path",{d:"M11.7496 15.942C9.73985 15.818 8.13168 14.2098 8.00761 12.2L11.7496 15.942Z",fill:n}),s.createElement("path",{d:"M12.0254 17.9497C12.5449 17.9475 13.0581 17.8779 13.5529 17.7453L15.1227 19.3151C14.4469 19.6016 13.7327 19.7947 12.9999 19.887V21.9498H10.9999V19.887C9.48763 19.6965 8.05338 19.0766 6.87237 18.0905C5.4248 16.8817 4.45079 15.2005 4.12225 13.3434L6.09167 12.995C6.33807 14.3878 7.06858 15.6487 8.15426 16.5553C9.23994 17.4618 10.611 17.9557 12.0254 17.9497Z",fill:n}),s.createElement("path",{d:"M17.7955 13.5026L19.3653 15.0724C19.6079 14.5002 19.7846 13.8979 19.8891 13.2766L17.9168 12.9449C17.8851 13.1333 17.8446 13.3194 17.7955 13.5026Z",fill:n}),s.createElement("path",{d:"M13.9999 9.70704L15.9999 11.707V6.94975C15.9999 4.74061 14.209 2.94975 11.9999 2.94975C10.7023 2.94975 9.54896 3.56765 8.81815 4.52528L10.2584 5.96556C10.6019 5.35905 11.2531 4.94975 11.9999 4.94975C13.1045 4.94975 13.9999 5.84518 13.9999 6.94975V9.70704Z",fill:n}))}},79641:function(e,t,n){"use strict";n(82526),n(57327),n(38880),n(49337),n(47941),n(54747);var r=n(67154),i=n.n(r),o=n(59713),a=n.n(o),l=n(6479),c=n.n(l),s=n(67294);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={userSelect:"none"};t.Z=function(e){var t=e.color,n=void 0===t?"white":t,r=e.lineColor,o=void 0===r?"white":r,a=e.style,l=void 0===a?{}:a,u=c()(e,["color","lineColor","style"]);return s.createElement("svg",i()({style:d(d({},p),l),width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},u),s.createElement("path",{d:"M2.80762 1.39343L1.3934 2.80765L21.1924 22.6066L22.6066 21.1924L2.80762 1.39343Z",fill:o}),s.createElement("path",{d:"M1 20V5.24267L3 7.24267V18H13.7574L15.7574 20H1Z",fill:n}),s.createElement("path",{d:"M19.3441 15.1015L21 15.6811V8.31899L16 10.069V6.00003H10.2426L8.24265 4.00003H18V7.25003L23 5.50003V18.5L22.6041 18.3614L19.3441 15.1015Z",fill:n}))}},87938:function(e,t,n){"use strict";n(82526),n(57327),n(38880),n(49337),n(47941),n(54747);var r=n(59713),i=n.n(r),o=n(63038),a=n.n(o),l=n(67294),c=n(52543),s=n(45697),u=n.n(s),d=n(94184),p=n.n(d),m=n(84602),f=n(57306),h=n(38648);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=function(e){var t=e.src,n=e.size,r=e.style,i=e.shimmerStyle,o=e.altName,c=e.ariaHidden,s=e.classes,u=e.testId,d=(0,f.G2)(h.Z),g=(0,l.useState)(null),E=a()(g,2),S=E[0],T=E[1],b=(0,l.useState)(!1),_=a()(b,2),y=_[0],C=_[1],x=(0,m.Z)();(0,l.useEffect)((function(){var e=setTimeout((function(){t&&!S&&x()&&C(!0)}),200),r=d.optimizedUrl(t,{fit:"contain",height:n});if(r){var i=new Image;i.onload=function(){i.complete&&0!==i.naturalWidth&&x()&&(clearTimeout(e),T(i.src))},i.onerror=function(){i.src!==t&&(i.src=t)},i.src=r}return function(){return clearTimeout(e)}}),[t,x]);var O=p()(s.loaderBase,y&&s.shimmer),I={maxWidth:"100%",maxHeight:"100%"},A=v(v({},I),i),N=v(v({width:"".concat(n,"px"),height:"".concat(n,"px"),margin:"auto"},I),r),w=v(v({objectFit:"contain",justifyContent:"center",alignItems:"center",display:"flex",height:"".concat(n,"px")},I),r);return S?l.createElement("img",{src:S,style:w,alt:o||"","aria-hidden":c||!1,"data-testid":u}):l.createElement("div",{className:s.shimmerWrapper,style:A,"data-testid":u},l.createElement("div",{className:O,style:N}))};E.propTypes={src:u().string.isRequired,size:u().number.isRequired,altName:u().string,ariaHidden:u().bool},t.Z=(0,c.Z)((function(e){return{"@keyframes shimmer":{"0%":{backgroundPosition:"-1000px 0"},"100%":{backgroundPosition:"1000px 0"}},loaderBase:{transition:"opacity .5s",opacity:0},shimmerWrapper:{display:"flex",flex:1,position:"relative"},shimmer:{borderRadius:e.shape.borderRadius,animation:"$shimmer 2s infinite linear",background:"linear-gradient(to right, #eff1f3 4%, #e2e2e2 25%, #eff1f3 36%)",backgroundSize:"1000px 100%",opacity:1}}}))(E)},46183:function(e,t,n){"use strict";n.d(t,{UQ:function(){return Xn},Qd:function(){return ir},dt:function(){return v},EU:function(){return x},zx:function(){return fn},Qu:function(){return kt},w7:function(){return B},kB:function(){return F},XZ:function(){return En},L9:function(){return Sr},J_:function(){return q},aM:function(){return $},yZ:function(){return le},Cz:function(){return Ft},n9:function(){return pt},qh:function(){return ve},LX:function(){return be},Li:function(){return Yr},S3:function(){return On.Z},II:function(){return xn},x_:function(){return Qe},Gz:function(){return xe},aN:function(){return sn},mB:function(){return Ne},Hs:function(){return At},vY:function(){return Nt.Z},V_:function(){return Ct},Lw:function(){return on},Uv:function(){return Lr},Bv:function(){return Be},HF:function(){return Fe},M6:function(){return We},El:function(){return et},P2:function(){return $t},A1:function(){return kn},wA:function(){return ct},ew:function(){return it},rs:function(){return gr},xv:function(){return _n},gx:function(){return Kn},Dx:function(){return Yn},u:function(){return fr},hn:function(){return Mt},GI:function(){return Bt.Z},uu:function(){return en}});var r=n(67154),i=n.n(r),o=n(6479),a=n.n(o),l=n(67294),c=n(45697),s=n.n(c),u=n(8920),d=n(52543),p=(n(82526),n(92222),n(57327),n(38880),n(49337),n(47941),n(54747),n(59713)),m=n.n(p);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g={display:"inline-block",userSelect:"none",flexShrink:0},v=function(e){var t=e.type,n=void 0===t?"large":t,r=e.width,i=void 0===r?24:r,o=e.height,a=void 0===o?24:o,c=e.color,s=void 0===c?"black":c,u=e.style,d=void 0===u?{}:u,p="large"===n?24:8,m="large"===n?1.5:1,f=p/2+.5;return"callcontrol"===n?l.createElement("svg",{width:i,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 11L11 4H13V11H20V13H13V20H11L11 13H4V11H11Z",fill:s})):l.createElement("svg",{style:h(h({},g),d),width:p,height:p,viewBox:"0 0 ".concat(p," ").concat(p),fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},l.createElement("rect",{y:f,width:m,height:p,transform:"rotate(-90 0 ".concat(f,")"),fill:s}),l.createElement("rect",{x:f,y:p,width:m,height:p,transform:"rotate(180 ".concat(f," ").concat(p,")"),fill:s}))};function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T={display:"inline-block",userSelect:"none",flexShrink:0,transform:"rotate(90deg)"},b=function(e){var t=e.type,n=void 0===t?"large":t,r=e.color,o=void 0===r?"black":r,c=e.style,s=void 0===c?{}:c,u=a()(e,["type","color","style"]),d="large"===n?4:1.5;return l.createElement("svg",i()({style:S(S({},T),s),width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},u),l.createElement("g",null,l.createElement("path",{d:"M7 15.0005L12 20.0005L17 15.0005",stroke:o,style:{strokeWidth:d}}),l.createElement("path",{d:"M12 20.0005V3.00049",stroke:o,style:{strokeWidth:d}})))};function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(37618);var C={display:"inline-block",userSelect:"none",flexShrink:0},x=function(e){var t=e.direction,n=void 0===t?"down":t,r=e.translateX,i=void 0===r?0:r,o=e.translateY,a=void 0===o?0:o,c=e.svg,s=void 0===c?{}:c,u=e.path,d=void 0===u?{}:u,p=e.style,m=void 0===p?{}:p,f=e.testId,h=void 0===f?"":f,g="0";switch(n){case"up":g="180";break;case"left":g="90";break;case"right":g="-90";break;default:g="0"}return l.createElement("svg",{"data-testid":h,style:y(y(y({},C),m),{},{transform:"rotate(".concat(g,"deg) translate(").concat(i,"px, ").concat(a,"px)")}),width:(null==s?void 0:s.width)||"8",height:(null==s?void 0:s.height)||"6",viewBox:(null==s?void 0:s.viewBox)||"0 0 8 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},l.createElement("path",{d:(null==d?void 0:d.d)||"M1 1.5L4 4.5L7 1.5",strokeWidth:(null==d?void 0:d.strokeWidth)||"1.5",strokeLinecap:(null==d?void 0:d.strokeLinecap)||"butt",stroke:d.stroke||"black"}))};function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A={userSelect:"none"},N=function(e){var t=e.color,n=void 0===t?"white":t,r=e.style,o=void 0===r?{}:r,c=a()(e,["color","style"]);return l.createElement("svg",i()({style:I(I({},A),o),width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},c),l.createElement("path",{d:"M12.3145 5.16947L8.58912 9.28067H5.01933C4.25233 9.28067 4 9.73797 4 10.1735V13.6962C4 14.1317 4.25233 14.681 5.01933 14.681H8.60661L12.3312 18.8566C12.4934 18.9492 12.6745 19 12.8557 19C13.0368 19 13.1854 18.9557 13.3475 18.8629C13.6722 18.6776 13.8394 18.3374 13.8394 17.9663V6.01328C13.8394 5.64241 13.6722 5.29987 13.3475 5.11454C13.0228 4.92921 12.6395 4.98414 12.3145 5.16947Z",fill:n}),l.createElement("path",{d:"M16.3678 9.08398C17.9997 10.834 17.9997 13.1673 16.3678 14.7804",stroke:n,strokeWidth:"1.25",strokeLinecap:"round"}),l.createElement("path",{d:"M19.3725 6.16602C22.0841 10.2493 22.0844 13.166 19.3725 17.0744",stroke:n,strokeWidth:"1.25",strokeLinecap:"round"}))};function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k={userSelect:"none"},L=function(e){var t=e.color,n=void 0===t?"white":t,r=e.lineColor,o=void 0===r?"white":r,c=e.style,s=void 0===c?{}:c,u=a()(e,["color","lineColor","style"]);return l.createElement("svg",i()({style:R(R({},k),s),width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},u),l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.8036 9.28067H5.01933C4.25233 9.28067 4 9.73797 4 10.1735V13.6962C4 14.1317 4.25233 14.681 5.01933 14.681H8.60661L12.3312 18.8566C12.4934 18.9492 12.6745 19 12.8557 19C13.0368 19 13.1854 18.9557 13.3475 18.8629C13.6722 18.6776 13.8394 18.3374 13.8394 17.9663V17.3165L5.8036 9.28067ZM13.8394 10.4078V6.01328C13.8394 5.64241 13.6722 5.29987 13.3475 5.11454C13.0228 4.92921 12.6395 4.98414 12.3145 5.16947L10.5492 7.11759L13.8394 10.4078ZM13.8394 12.4077V12.4078L9.59846 8.16681L9.59851 8.16676L13.8394 12.4077Z",fill:n}),l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.51113 3.51426C3.79515 3.23024 4.29402 3.26863 4.62539 3.6L20.396 19.3706C20.7273 19.7019 20.7657 20.2008 20.4817 20.4848C20.1977 20.7688 19.6988 20.7305 19.3674 20.3991L3.59687 4.62852C3.2655 4.29715 3.22711 3.79828 3.51113 3.51426Z",fill:o}))};function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M={display:"inline-block",userSelect:"none",flexShrink:0},B=function(e){var t=e.color,n=void 0===t?"black":t,r=e.type,o=e.style,c=void 0===o?{}:o,s=a()(e,["color","type","style"]);return"callcontrol"===r?l.createElement("svg",{style:P(P({},M),c),width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 1.5C11.3434 1.5 10.6932 1.62933 10.0866 1.8806C9.47995 2.13188 8.92876 2.50017 8.46447 2.96447C8.00017 3.42876 7.63188 3.97996 7.3806 4.58658C7.12933 5.19321 7 5.84339 7 6.5L4 6.5L4.75 17L4 22.5H20L19.25 17L20 6.5H17C17 5.84339 16.8707 5.19321 16.6194 4.58658C16.3681 3.97995 15.9998 3.42876 15.5355 2.96447C15.0712 2.50017 14.52 2.13188 13.9134 1.8806C13.3068 1.62933 12.6566 1.5 12 1.5ZM15 6.5C15 6.10603 14.9224 5.71593 14.7716 5.35195C14.6209 4.98797 14.3999 4.65726 14.1213 4.37868C13.8427 4.1001 13.512 3.87913 13.1481 3.72836C12.7841 3.5776 12.394 3.5 12 3.5C11.606 3.5 11.2159 3.5776 10.8519 3.72836C10.488 3.87913 10.1573 4.1001 9.87868 4.37868C9.6001 4.65726 9.37913 4.98797 9.22836 5.35195C9.0776 5.71593 9 6.10603 9 6.5L15 6.5ZM17.2403 17.0646L17.7088 20.5H6.29124L6.75971 17.0646L6.14795 8.5H17.852L17.2403 17.0646Z",fill:n})):"dropdown"===r?l.createElement("svg",i()({style:P(P({},M),c),width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},s),l.createElement("path",{d:"M4.66732 4.83333C4.66732 2.99238 6.1597 1.5 8.00065 1.5C9.8416 1.5 11.334 2.99238 11.334 4.83333M1.33398 4.83333H14.6673V15.6667H1.33398V4.83333Z",stroke:n,strokeWidth:"1.5"})):l.createElement("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},l.createElement("path",{d:"M4.66683 4.83333C4.66683 2.99238 6.15921 1.5 8.00016 1.5C9.84111 1.5 11.3335 2.99238 11.3335 4.83333M1.3335 4.83333H14.6668V15.6667H1.3335V4.83333Z",stroke:n,strokeWidth:"1.5"}))};function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var G={userSelect:"none"},F=function(e){var t=e.type,n=e.color,r=void 0===n?"black":n,o=e.style,c=void 0===o?{}:o,s=a()(e,["type","color","style"]);return"callcontrol"===t?l.createElement("svg",{style:U(U({},G),c),width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.25 16.75H21V2.75H3V16.75H7V21.25L13.25 16.75ZM9 17.3455L12.6049 14.75H19V4.75H5V14.75H9V17.3455Z",fill:r})):l.createElement("svg",i()({style:U(U({},G),c),width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},s),l.createElement("path",{d:"M3.3335 4.16699H16.6668V13.3337H7.50016L3.3335 16.667V13.3337V4.16699Z",stroke:r,strokeWidth:"2"}))},W=function(e){var t=e.color,n=void 0===t?"white":t,r=a()(e,["color"]);return l.createElement("svg",i()({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.4328 5L16 6.47597L10.1344 12L16 17.524L14.4328 19L7 12L14.4328 5Z",fill:n}))};function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z=(0,d.Z)({root:{display:"inline-block",userSelect:"none",flexShrink:0}})((function(e){var t=e.type,n=void 0===t?"large":t,r=e.color,i=void 0===r?"black":r,o=e.style,a=void 0===o?{}:o,c="small"===n?11:"fat"===n?20:13,s="small"===n?10:"fat"===n?14:12;return l.createElement("svg",{style:V({},a),width:c,height:s,viewBox:"0 0 20 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},l.createElement("path",{d:"M7.59081 11.5765L6.47121 12.6961L7.59081 13.8157L8.71041 12.6961L7.59081 11.5765ZM16.7974 0.130644L6.47121 10.4569L8.71041 12.6961L19.0366 2.36984L16.7974 0.130644ZM8.71041 10.4569L3.2031 4.94955L0.963896 7.18875L6.47121 12.6961L8.71041 10.4569Z",fill:i}))}));function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K={userSelect:"none"},q=function(e){var t=e.color,n=void 0===t?"black":t,r=e.className,i=e.style,o=void 0===i?{}:i;return l.createElement("svg",{style:Y(Y({},K),o),className:r,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.00004 18.0001L8.00004 7.41434L10.2928 9.70719L11.7071 8.29299L7.00005 3.58588L2.29285 8.29297L3.70704 9.7072L6.00004 7.41426L6.00004 18.0001H8.00004ZM15.9998 5.99994V16.5857L13.707 14.2928L12.2928 15.707L16.9998 20.4142L21.707 15.7071L20.2928 14.2928L17.9998 16.5858V5.99994H15.9998Z",fill:n}))};function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var J={display:"inline-block",userSelect:"none",flexShrink:0},$=function(e){var t=e.type,n=void 0===t?"large":t,r=e.color,o=void 0===r?"black":r,c=e.style,s=void 0===c?{}:c,u=a()(e,["type","color","style"]);if("small"===n||"medium"===n||"xs"===n){var d={xs:{width:7,height:7,viewBox:"0 0 12 12"},small:{width:12,height:12,viewBox:"0 0 12 12"},medium:{width:18,height:18,viewBox:"0 0 12 12"}};return l.createElement("svg",{style:X(X({},J),s),width:d[n].width,height:d[n].height,viewBox:d[n].viewBox,fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},l.createElement("path",{d:"M0.322118 10.0435C-0.104471 10.4614 -0.113177 11.2274 0.330824 11.6714C0.774825 12.1153 1.54094 12.0979 1.95883 11.6801L5.99836 7.64091L10.0379 11.6714C10.4732 12.1066 11.2219 12.1153 11.6659 11.6627C12.1099 11.2187 12.1099 10.4701 11.6746 10.0348L7.64378 6.00435L11.6746 1.96518C12.1099 1.52992 12.1099 0.781284 11.6659 0.337323C11.2219 -0.115343 10.4732 -0.106638 10.0379 0.328618L5.99836 4.35909L1.95883 0.319913C1.54094 -0.0979325 0.774825 -0.115343 0.330824 0.328618C-0.113177 0.772579 -0.104471 1.53863 0.322118 1.96518L4.36165 6.00435L0.322118 10.0435Z",fill:o}))}return"sharp"===n?l.createElement("svg",{style:X(X({},J),s),width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.5858 12.0001L4.79291 6.20718L6.20712 4.79297L12 10.5859L17.7929 4.79297L19.2071 6.20718L13.4142 12.0001L19.2071 17.793L17.7929 19.2072L12 13.4143L6.20712 19.2072L4.79291 17.793L10.5858 12.0001Z",fill:o})):"cancel"===n?l.createElement("svg",i()({style:X(X({},J),s),width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},u),l.createElement("path",{d:"M4.10742 4.10754L15.8925 15.8927M15.8925 4.10754L4.10742 15.8927",stroke:o,strokeWidth:"2"})):"close"===n?l.createElement("svg",{style:X(X({},J),s),width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},l.createElement("path",{d:"M1.45264 1.4528L14.5472 14.5474M14.5472 1.4528L1.45264 14.5474",stroke:o,strokeWidth:"2.22222",strokeLinecap:"round"})):"dismiss"===n?l.createElement("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},l.createElement("path",{d:"M0.632549 8.11055C0.304404 8.43197 0.297707 9.02124 0.639246 9.36275C0.980785 9.70426 1.57011 9.69087 1.89156 9.36945L4.99889 6.26239L8.10623 9.36275C8.44107 9.69756 9.017 9.70426 9.35854 9.35605C9.70008 9.01455 9.70008 8.43867 9.36523 8.10386L6.26459 5.0035L9.36523 1.89644C9.70008 1.56163 9.70008 0.985753 9.35854 0.644245C9.017 0.29604 8.44107 0.302737 8.10623 0.637549L4.99889 3.73791L1.89156 0.630852C1.57011 0.309433 0.980785 0.29604 0.639246 0.637549C0.297707 0.979057 0.304404 1.56833 0.632549 1.89644L3.73988 5.0035L0.632549 8.11055Z",fill:"white"})):l.createElement("svg",i()({style:X(X({},J),s),width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},u),l.createElement("rect",{y:"0.706055",width:"0.7",height:"15.9723",transform:"rotate(-45 0 0.706055)",fill:o}),l.createElement("rect",{width:"0.7",height:"15.9723",transform:"matrix(-0.707107 -0.707107 -0.707107 0.707107 12 0.706055)",fill:o}))};function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ne={display:"inline-block",userSelect:"none",flexShrink:0},re=function(e){var t=e.color,n=void 0===t?"black":t,r=e.style,o=void 0===r?{}:r,c=a()(e,["color","style"]);return l.createElement("svg",i()({style:te(te({},ne),o),width:"13",height:"16",viewBox:"0 0 13 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},c),l.createElement("path",{d:"M2.70129 7.27246L6.44155 11.1166L10.2857 7.27246",stroke:n,style:{strokeMiterlimit:10}}),l.createElement("path",{d:"M6.44153 0V10.5974",stroke:n,style:{strokeMiterlimit:10}}),l.createElement("path",{d:"M12.8831 15.5H0",stroke:n,style:{strokeMiterlimit:10}}))};function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ae={userSelect:"none"},le=function(e){var t=e.style,n=void 0===t?{}:t,r=e.color,o=void 0===r?"black":r,c=e.className,s=a()(e,["style","color","className"]);return l.createElement("svg",i()({style:oe(oe({},ae),n),className:c,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},s),l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.2071 14.7929L18.7929 16.2071L12 9.41421L5.20712 16.2071L3.79291 14.7929L12 6.58578L20.2071 14.7929Z",fill:o}))},ce=function(e){var t=e.color,n=void 0===t?"white":t;return l.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5 3H21V10.5H19V6.41421L14.2071 11.2071L12.7929 9.79289L17.5858 5H13.5V3ZM11.2071 14.2071L6.41421 19H10.5V21H3L3 13.5H5L5 17.5858L9.79289 12.7929L11.2071 14.2071Z",fill:n}))},se=function(e){var t=e.expand,n=void 0===t||t,r=e.color,i=void 0===r?"white":r;return n?l.createElement("svg",{width:"18",height:"15",viewBox:"0 0 18 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},l.createElement("path",{d:"M11.2837 11.5531L8.73266 14.103L6.18164 11.5508",stroke:i,strokeWidth:"1.27551",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M11.2837 3.38515L8.73266 0.835279L6.18164 3.38745",stroke:i,strokeWidth:"1.27551",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M1.0806 7.46912L16.3867 7.46912",stroke:i,strokeWidth:"1.27551",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"})):l.createElement("svg",{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},l.createElement("path",{d:"M11 14.4999L8.5 12.001L6 14.5021",stroke:i,strokeWidth:"1.25",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M11 1.5003L8.5 3.99918L6 1.49805",stroke:i,strokeWidth:"1.25",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M1 8L16 8",stroke:i,strokeWidth:"1.25",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}))};function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pe={userSelect:"none"},me=function(e){var t=e.color,n=void 0===t?"white":t,r=e.style,i=void 0===r?{}:r;return l.createElement("svg",{style:de(de({},pe),i),width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},l.createElement("path",{d:"M4 5H20V16H9L4 20V16V5Z",stroke:n,strokeWidth:"2"}),l.createElement("path",{d:"M11.4272 7V11.3636H12.5181V7H11.4272Z",fill:n}),l.createElement("circle",{cx:"11.9729",cy:"12.7278",r:"0.272727",fill:n,stroke:n,strokeWidth:"1.09091"}))};function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ge={display:"inline-block",userSelect:"none",flexShrink:0},ve=function(e){var t=e.opacity,n=void 0===t?1:t,r=e.style,i=void 0===r?{}:r;return l.createElement("svg",{style:he(he({},ge),i),width:"39",height:"40",viewBox:"0 0 39 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},l.createElement("g",{opacity:n},l.createElement("mask",{id:"path-1-inside-1",fill:"white"},l.createElement("rect",{x:"21.125",y:"11",width:"7.875",height:"7.875",rx:"1"})),l.createElement("rect",{x:"21.125",y:"11",width:"7.875",height:"7.875",rx:"1",stroke:"white",strokeWidth:"2.5",mask:"url(#path-1-inside-1)"}),l.createElement("mask",{id:"path-2-inside-2",fill:"white"},l.createElement("rect",{x:"11",y:"11",width:"7.875",height:"7.875",rx:"1"})),l.createElement("rect",{x:"11",y:"11",width:"7.875",height:"7.875",rx:"1",stroke:"white",strokeWidth:"2.5",mask:"url(#path-2-inside-2)"}),l.createElement("mask",{id:"path-3-inside-3",fill:"white"},l.createElement("rect",{x:"11",y:"21.125",width:"7.875",height:"7.875",rx:"1"})),l.createElement("rect",{x:"11",y:"21.125",width:"7.875",height:"7.875",rx:"1",stroke:"white",strokeWidth:"2.5",mask:"url(#path-3-inside-3)"}),l.createElement("mask",{id:"path-4-inside-4",fill:"white"},l.createElement("rect",{x:"21.125",y:"21.125",width:"7.875",height:"7.875",rx:"1"})),l.createElement("rect",{x:"21.125",y:"21.125",width:"7.875",height:"7.875",rx:"1",stroke:"white",strokeWidth:"2.5",mask:"url(#path-4-inside-4)"})))};function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Te={userSelect:"none"},be=function(e){var t=e.style,n=void 0===t?{}:t,r=a()(e,["style"]);return l.createElement("svg",i()({style:Se(Se({},Te),n),width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},r),l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 9.48589C10.5333 9.48589 9.1125 9.74455 7.78333 10.2308V13.4381C7.78333 13.8416 7.5725 14.2037 7.27 14.3693C6.37167 14.8762 5.55583 15.528 4.83167 16.2833C4.66667 16.4695 4.4375 16.573 4.19 16.573C3.93333 16.573 3.70417 16.4592 3.53917 16.273L1.26583 13.7071C1.10083 13.5312 1 13.2726 1 12.9829C1 12.6932 1.10083 12.4345 1.26583 12.2483C4.06167 9.25828 7.83833 7.41667 12 7.41667C16.1617 7.41667 19.9383 9.25828 22.7342 12.2483C22.8992 12.4345 23 12.6932 23 12.9829C23 13.2726 22.8992 13.5312 22.7342 13.7175L20.4608 16.2833C20.2958 16.4695 20.0667 16.5833 19.81 16.5833C19.5625 16.5833 19.3333 16.4695 19.1683 16.2936C18.4442 15.528 17.6192 14.8866 16.7208 14.3796C16.4183 14.2141 16.2075 13.8623 16.2075 13.4485V10.2412C14.8875 9.74455 13.4667 9.48589 12 9.48589Z",fill:"#E12147"}))};function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ce={display:"inline-block",userSelect:"none",flexShrink:0},xe=function(e){var t=e.opacity,n=void 0===t?1:t,r=e.style,i=void 0===r?{}:r;return l.createElement("svg",{style:ye(ye({},Ce),i),width:"39",height:"40",viewBox:"0 0 39 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},l.createElement("g",{opacity:n},l.createElement("mask",{id:"path-1-inside-1-list",fill:"white"},l.createElement("rect",{x:"12",y:"11",width:"14.87",height:"7.875",rx:"1"})),l.createElement("rect",{x:"12",y:"11",width:"14.87",height:"7.875",rx:"1",stroke:"white",strokeWidth:"2.5",mask:"url(#path-1-inside-1-list)"}),l.createElement("mask",{id:"path-2-inside-2-list",fill:"white"},l.createElement("rect",{x:"12",y:"21.125",width:"14.87",height:"7.875",rx:"1"})),l.createElement("rect",{x:"12",y:"21.125",width:"14.87",height:"7.875",rx:"1",stroke:"white",strokeWidth:"2.5",mask:"url(#path-2-inside-2-list)"})))};function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ae={userSelect:"none"},Ne=function(e){var t=e.color,n=void 0===t?"#3C3C43":t,r=(e.className,e.style),o=void 0===r?{}:r,c=a()(e,["color","className","style"]);return l.createElement("svg",i()({style:Ie(Ie({},Ae),o),width:"8",height:"12",viewBox:"0 0 8 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},c),l.createElement("path",{d:"M1.126 11.716H6.703C7.458 11.716 7.828 11.341 7.828 10.521V6.22C7.828 5.482 7.523 5.101 6.897 5.036V3.559C6.897 1.35 5.45 0.284 3.914 0.284C2.378 0.284 0.931 1.35 0.931 3.559V5.066C0.358 5.154 0 5.528 0 6.22V10.521C0 11.341 0.37 11.716 1.126 11.716ZM1.875 3.437C1.875 1.966 2.818 1.186 3.914 1.186C5.01 1.186 5.954 1.966 5.954 3.437V5.03L1.875 5.036V3.437Z",fill:n,fillOpacity:"0.6"}))},we={lg:{height:48,width:48},md:{height:32,width:32},sm:{height:16,width:16},xsl:{height:12,width:12},xs:{height:8,width:8}},Re=function(e){var t=e.color,n=void 0===t?"white":t;return l.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.5 11L13 11V3.5L15 3.5V7.58579L19.7929 2.79289L21.2071 4.20711L16.4142 9L20.5 9V11Z",fill:n}),l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.50001 13H11V20.5H9.00001V16.4142L4.20712 21.2071L2.79291 19.7929L7.5858 15H3.50001V13Z",fill:n}))},ke={userSelect:"none"},Le=function(e){var t=e.color,n=void 0===t?"white":t;return l.createElement("svg",{style:ke,width:"50",height:"50",viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},l.createElement("g",{filter:"url(#filter0_ddd)"},l.createElement("path",{d:"M37.5 8.33337L37.5 41.6667L29.1667 41.6667L29.1667 8.33337L37.5 8.33337Z",fill:n}),l.createElement("path",{d:"M20.8333 8.33337L20.8333 41.6667L12.5 41.6667L12.5 8.33337L20.8333 8.33337Z",fill:n}),l.createElement("path",{d:"M38 8.33337L38 7.83337L37.5 7.83337L29.1667 7.83337L28.6667 7.83337L28.6667 8.33337L28.6667 41.6667L28.6667 42.1667L29.1667 42.1667L37.5 42.1667L38 42.1667L38 41.6667L38 8.33337ZM21.3333 8.33337L21.3333 7.83337L20.8333 7.83337L12.5 7.83337L12 7.83337L12 8.33337L12 41.6667L12 42.1667L12.5 42.1667L20.8333 42.1667L21.3333 42.1667L21.3333 41.6667L21.3333 8.33337Z",stroke:"black",strokeOpacity:"0.05"})),l.createElement("defs",null,l.createElement("filter",{id:"filter0_ddd",x:"-36.5",y:"-16.6666",width:"123",height:"131.333",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},l.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),l.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),l.createElement("feOffset",{dy:"24"}),l.createElement("feGaussianBlur",{stdDeviation:"24"}),l.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.06 0"}),l.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow"}),l.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),l.createElement("feOffset",{dy:"2"}),l.createElement("feGaussianBlur",{stdDeviation:"3"}),l.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.04 0"}),l.createElement("feBlend",{mode:"normal",in2:"effect1_dropShadow",result:"effect2_dropShadow"}),l.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),l.createElement("feOffset",null),l.createElement("feGaussianBlur",{stdDeviation:"0.5"}),l.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.04 0"}),l.createElement("feBlend",{mode:"normal",in2:"effect2_dropShadow",result:"effect3_dropShadow"}),l.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect3_dropShadow",result:"shape"}))))};function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Me={userSelect:"none"},Be=function(e){var t=e.color,n=void 0===t?"black":t,r=e.style,o=void 0===r?{}:r,c=a()(e,["color","style"]);return l.createElement("svg",i()({style:Pe(Pe({},Me),o),width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},c),l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.89645 4.89645H11.8965V11.8964H4.89645V4.89645ZM6.89645 6.89645L6.89645 9.89645H9.89645V6.89645H6.89645Z",fill:n}),l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.8965 4.89645H20.8965V11.8964H13.8965V4.89645ZM15.8965 6.89645V9.89645H18.8965V6.89645H15.8965Z",fill:n}),l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.89645 13.8964H11.8965V20.8964H4.89645V13.8964ZM6.89646 15.8964V18.8964H9.89645V15.8964H6.89646Z",fill:n}),l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.3426 19.9284C21.6945 19.3329 21.8965 18.6383 21.8965 17.8964C21.8965 15.6873 20.1056 13.8964 17.8965 13.8964C15.6873 13.8964 13.8965 15.6873 13.8965 17.8964C13.8965 20.1056 15.6873 21.8964 17.8965 21.8964C18.6383 21.8964 19.3329 21.6945 19.9284 21.3426L21.6894 23.1036L23.1036 21.6893L21.3426 19.9284ZM17.8965 19.9964C19.0563 19.9964 19.9965 19.0562 19.9965 17.8964C19.9965 16.7366 19.0563 15.7964 17.8965 15.7964C16.7367 15.7964 15.7965 16.7366 15.7965 17.8964C15.7965 19.0562 16.7367 19.9964 17.8965 19.9964Z",fill:n}))};function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ge={display:"inline-block",userSelect:"none",flexShrink:0},Fe=function(e){var t=e.type,n=void 0===t?"large":t,r=e.color,o=void 0===r?"black":r,c=e.style,s=void 0===c?{}:c,u=a()(e,["type","color","style"]),d="large"===n?11:8,p=d/2+.5;return l.createElement("svg",i()({style:Ue(Ue({},Ge),s),width:d,height:d,viewBox:"0 0 ".concat(d," ").concat(d),fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},u),l.createElement("rect",{y:p,width:"1",height:d,transform:"rotate(-90 0 ".concat(p,")"),fill:o}))},We=function(e){var t=e.color,n=void 0===t?"white":t;return l.createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},l.createElement("path",{d:"M14.8753 16.2611C15.2611 16.2611 15.5611 15.9635 15.5611 15.5778C15.5611 15.2099 15.2433 14.8944 14.8753 14.8944H14.5559C16.1783 13.3819 17.1504 11.2382 17.1504 8.96444C17.1504 4.48986 13.4932 0.85 9.0002 0.85C8.61441 0.85 8.31447 1.14764 8.31447 1.53333C8.31447 1.91903 8.61441 2.21667 9.0002 2.21667C12.7395 2.21667 15.7789 5.24348 15.7789 8.96444C15.7789 10.945 14.8975 12.8167 13.4182 14.0876V13.4622C13.4182 13.0765 13.1182 12.7789 12.7324 12.7789C12.3466 12.7789 12.0467 13.0765 12.0467 13.4622V15.5778C12.0467 15.9635 12.3466 16.2611 12.7324 16.2611H14.8753ZM9.0002 15.7833C5.26088 15.7833 2.22145 12.7565 2.22145 9.03556C2.22145 7.05496 3.10291 5.18334 4.58224 3.91238V4.53778C4.58224 4.92348 4.88218 5.22111 5.26796 5.22111C5.65375 5.22111 5.95369 4.92348 5.95369 4.53778V2.42222C5.95369 2.03652 5.65375 1.73889 5.26796 1.73889H3.12505C2.73927 1.73889 2.43933 2.03652 2.43933 2.42222C2.43933 2.80792 2.73927 3.10556 3.12505 3.10556H3.44175C1.80557 4.6186 0.85 6.76259 0.85 9.03556C0.85 13.5101 4.50717 17.15 9.0002 17.15C9.38599 17.15 9.68592 16.8524 9.68592 16.4667C9.68592 16.081 9.38599 15.7833 9.0002 15.7833Z",fill:n,stroke:n,strokeWidth:"0.3"}))};function He(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?He(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):He(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ze={userSelect:"none"},Ze=function(e){var t=e.color,n=void 0===t?"black":t,r=e.style,o=void 0===r?{}:r,c=a()(e,["color","style"]);return l.createElement("svg",i()({style:Ve(Ve({},ze),o),width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},c),l.createElement("path",{d:"M0 5H3M3 5H5M3 5V16H13V5M5 5H11M5 5V4C5 2.34315 6.34315 1 8 1C9.65685 1 11 2.34315 11 4V5M11 5H13M13 5H16",stroke:n,strokeWidth:"1.5"}))};function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(43290);var qe={userSelect:"none"},Qe=function(e){var t=e.style,n=void 0===t?{}:t,r=e.color,o=void 0===r?"black":r,c=e.className,s=a()(e,["style","color","className"]);return l.createElement("svg",i()({style:Ke(Ke({},qe),n),className:c,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},s),l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15 1.19574L9 4.94574V9.99999H7V22H17V9.99999H15V1.19574ZM13 9.99999V4.80423L11 6.05423V9.99999H13ZM9 12H15V20H9V12Z",fill:o}))};function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $e={userSelect:"none"},et=function(e){var t=e.type,n=e.color,r=void 0===n?"black":n,o=e.style,c=void 0===o?{}:o,s=a()(e,["type","color","style"]);return"callcontrol"===t?l.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 4H21V16H3V4ZM5 6V14H19V6H5ZM17 20H7V18H17V20Z",fill:r})):l.createElement("svg",i()({style:Je(Je({},$e),c),width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},s),l.createElement("path",{d:"M0.75 14V14.25H1H19H19.25V14V1V0.75H19H1H0.75V1V14ZM2.75 19V19.25H3H17H17.25V19V18V17.75H17H3H2.75V18V19ZM17.75 2.25V12.75H2.25V2.25H17.75Z",fill:r,stroke:r,strokeWidth:"0.5"}))};function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rt={display:"inline-block",userSelect:"none",flexShrink:0},it=function(e){var t=e.style,n=void 0===t?{}:t,r=e.color,o=void 0===r?"black":r,c=e.className,s=a()(e,["style","color","className"]);return l.createElement("svg",i()({style:nt(nt({},rt),n),className:c,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},s),l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 4.06189V2H13V4.06189C14.4606 4.24403 15.7989 4.81989 16.9053 5.67991L18.3634 4.22183L19.7776 5.63604L18.3196 7.09406C19.1799 8.20064 19.7559 9.53916 19.9381 11H22V13H19.9381C19.7559 14.4608 19.1799 15.7994 18.3196 16.9059L19.7776 18.364L18.3634 19.7782L16.9053 18.3201C15.7989 19.1801 14.4606 19.756 13 19.9381V22H11V19.9381C9.53948 19.756 8.20122 19.1802 7.09478 18.3202L5.63679 19.7782L4.22258 18.364L5.68047 16.9061C4.82014 15.7995 4.24406 14.4609 4.06189 13H2V11H4.06189C4.24406 9.5391 4.82014 8.20054 5.68047 7.09393L4.22258 5.63604L5.63679 4.22183L7.09478 5.67981C8.20122 4.81984 9.53948 4.24402 11 4.06189ZM12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6ZM12 10C10.8954 10 10 10.8954 10 12C10 13.1046 10.8954 14 12 14C13.1046 14 14 13.1046 14 12C14 10.8954 13.1046 10 12 10ZM8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12C16 14.2091 14.2091 16 12 16C9.79086 16 8 14.2091 8 12Z",fill:o}))};function ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function at(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var lt={userSelect:"none"},ct=function(e){var t=e.className,n=e.style,r=void 0===n?{}:n;return l.createElement("svg",{style:at(at({},lt),{},{overrideStyles:r}),className:t,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},l.createElement("path",{d:"M7 12C7 13.1046 6.10457 14 5 14C3.89543 14 3 13.1046 3 12C3 10.8954 3.89543 10 5 10C6.10457 10 7 10.8954 7 12Z"}),l.createElement("path",{d:"M14 12C14 13.1046 13.1046 14 12 14C10.8954 14 10 13.1046 10 12C10 10.8954 10.8954 10 12 10C13.1046 10 14 10.8954 14 12Z"}),l.createElement("path",{d:"M19 14C20.1046 14 21 13.1046 21 12C21 10.8954 20.1046 10 19 10C17.8954 10 17 10.8954 17 12C17 13.1046 17.8954 14 19 14Z"}))};function st(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?st(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var dt={display:"inline-block",userSelect:"none",flexShrink:0},pt=function(e){var t=e.size,n=void 0===t?"xsl":t,r=e.color,o=void 0===r?"black":r,c=e.style,s=void 0===c?{}:c,u=a()(e,["size","color","style"]);return l.createElement("svg",i()({style:ut(ut({},dt),s)},we[n],{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},u),l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.33862 6.12168C9.85487 5.19244 10.4318 4.59631 11 4.27967V11H8.0325C8.15924 9.06477 8.64763 7.36547 9.33862 6.12168ZM6.02876 11C6.15066 8.89199 6.65497 6.95491 7.44453 5.42283C5.62162 6.68779 4.34981 8.69112 4.06189 11H6.02876ZM4.06189 13H6.02876C6.15067 15.108 6.65497 17.0451 7.44453 18.5772C5.62162 17.3122 4.34981 15.3089 4.06189 13ZM8.0325 13H11V19.7203C10.4318 19.4037 9.85487 18.8076 9.33862 17.8783C8.64763 16.6345 8.15924 14.9352 8.0325 13ZM13 13V19.7203C13.5682 19.4037 14.1451 18.8076 14.6614 17.8783C15.3524 16.6345 15.8408 14.9352 15.9675 13H13ZM17.9712 13C17.8493 15.108 17.345 17.0451 16.5555 18.5772C18.3784 17.3122 19.6502 15.3089 19.9381 13H17.9712ZM19.9381 11H17.9712C17.8493 8.89199 17.345 6.95491 16.5555 5.42283C18.3784 6.68779 19.6502 8.69112 19.9381 11ZM15.9675 11H13V4.27967C13.5682 4.59631 14.1451 5.19244 14.6614 6.12168C15.3524 7.36547 15.8408 9.06477 15.9675 11ZM12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",fill:o}))};function mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ht={display:"inline-block",userSelect:"none",flexShrink:0},gt=function(e){var t=e.color,n=void 0===t?"black":t,r=e.width,i=void 0===r?12:r,o=e.height,a=void 0===o?13:o;return l.createElement("svg",{style:ft({},ht),width:i,height:a,viewBox:"0 0 12 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.35363 1.41176H9.59066L3.03097 7.97145L4.02924 8.96972L10.5889 2.41003V5.64706H12.0007V0.705882V0H11.2948H6.35363V1.41176ZM0.705882 0.707031H0V1.41291V11.2953V12.0011H0.705882H10.5882H11.2941V11.2953V6.97174H9.88235V10.5894H1.41176V2.1188H5.02941V0.707031H0.705882Z",fill:n}))};function vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var St={display:"inline-block",userSelect:"none",flexShrink:0},Tt=function(e){var t=e.color,n=void 0===t?"black":t,r=e.size,o=void 0===r?"md":r,c=e.style,s=void 0===c?{}:c,u=a()(e,["color","size","style"]);return l.createElement("svg",i()({style:Et(Et({},St),s),viewBox:"0 0 21 21"},we[o],{fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},u),l.createElement("path",{d:"M3.9375 11.6932V4.5625C3.9375 4.39674 4.00335 4.23777 4.12056 4.12056C4.23777 4.00335 4.39674 3.9375 4.5625 3.9375H16.4375C16.6033 3.9375 16.7622 4.00335 16.8794 4.12056C16.9967 4.23777 17.0625 4.39674 17.0625 4.5625V16.4375C17.0625 16.6033 16.9967 16.7622 16.8794 16.8794C16.7622 16.9967 16.6033 17.0625 16.4375 17.0625H11.0966",stroke:n,strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M10.5 12.375L5.5 17.375L3 14.875",stroke:n,strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}))};function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var yt={userSelect:"none"},Ct=function(e){var t=e.color,n=void 0===t?"black":t,r=e.className,o=e.style,c=void 0===o?{}:o,s=a()(e,["color","className","style"]);return l.createElement("svg",i()({style:_t(_t({},yt),c),className:r,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},s),l.createElement("path",{d:"M6 12H18",stroke:n,strokeWidth:"2"}))};function xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var It={userSelect:"none"},At=function(e){var t=e.color,n=void 0===t?"white":t,r=e.outlined,o=void 0!==r&&r,c=e.style,s=void 0===c?{}:c,u=a()(e,["color","outlined","style"]);return o?l.createElement("svg",i()({style:Ot(Ot({},It),s),width:"13",height:"13",viewBox:"0 0 10 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},u),l.createElement("path",{d:"M5.32201 7.34809C4.86549 7.34809 4.48329 7.18353 4.1754 6.85441C3.86752 6.52529 3.71357 6.12717 3.71357 5.66003V1.66282C3.71357 1.21692 3.87017 0.840027 4.18336 0.532141C4.49656 0.224255 4.87611 0.0703125 5.32201 0.0703125C5.76791 0.0703125 6.14746 0.224255 6.46066 0.532141C6.77385 0.840027 6.93045 1.21692 6.93045 1.66282V5.66003C6.93045 6.12717 6.7765 6.52529 6.46862 6.85441C6.16073 7.18353 5.77853 7.34809 5.32201 7.34809ZM4.84426 12.1734V10.0076C3.71888 9.8908 2.77399 9.41836 2.00958 8.59025C1.24518 7.76215 0.862976 6.78541 0.862976 5.66003H1.81848C1.81848 6.62615 2.16087 7.43834 2.84565 8.09657C3.53043 8.75481 4.35589 9.08393 5.32201 9.08393C6.28813 9.08393 7.11359 8.75481 7.79837 8.09657C8.48315 7.43834 8.82554 6.62615 8.82554 5.66003H9.78104C9.78104 6.78541 9.39884 7.76215 8.63444 8.59025C7.87003 9.41836 6.92514 9.8908 5.79976 10.0076V12.1734H4.84426Z",fill:n})):l.createElement("svg",i()({style:Ot(Ot({},It),s),width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},u),l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99423 6.5C7.99423 4.29086 9.78509 2.5 11.9942 2.5C14.2034 2.5 15.9942 4.29086 15.9942 6.5V11.5C15.9942 13.7091 14.2034 15.5 11.9942 15.5C9.78509 15.5 7.99423 13.7091 7.99423 11.5V6.5ZM11.9942 4.5C10.8897 4.5 9.99423 5.39543 9.99423 6.5V11.5C9.99423 12.6046 10.8897 13.5 11.9942 13.5C13.0988 13.5 13.9942 12.6046 13.9942 11.5V6.5C13.9942 5.39543 13.0988 4.5 11.9942 4.5Z",fill:n}),l.createElement("path",{d:"M15.8788 16.0728C16.9568 15.157 17.6766 13.8899 17.9111 12.4951L19.8835 12.8268C19.5707 14.6866 18.611 16.376 17.1737 17.597C15.9837 18.6079 14.5297 19.2438 12.9942 19.4373V21.5H10.9942V19.4373C9.48195 19.2467 8.0477 18.6269 6.8667 17.6407C5.41913 16.432 4.44511 14.7507 4.11658 12.8937L6.08599 12.5453C6.3324 13.938 7.06291 15.199 8.14858 16.1055C9.23426 17.0121 10.6053 17.5059 12.0197 17.4999C13.4341 17.4939 14.8009 16.9885 15.8788 16.0728Z",fill:n}))},Nt=n(30777);function wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var kt=function(e){var t=e.sharp,n=void 0!==t&&t,r=e.color,o=void 0===r?"white":r,c=e.height,s=void 0===c?24:c,u=e.width,d=void 0===u?24:u,p=e.style,m=void 0===p?{}:p,f=e.className,h=a()(e,["sharp","color","height","width","style","className"]);return n?l.createElement("svg",i()({style:Rt({},m),className:f,width:d,height:s,viewBox:"3 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h),l.createElement("path",{stroke:o,strokeWidth:"1.5",d:"M8 5h17v14H5V5zm16 4H5"}),l.createElement("path",{fill:o,d:"M14 13h7v3h-3v-3z"})):l.createElement("svg",i()({style:Rt({},m),className:f,width:d,height:s,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h),l.createElement("rect",{x:"5",y:"5.00049",width:"15",height:"14",stroke:o,strokeWidth:"2"}),l.createElement("path",{d:"M20 9.00049L5 9.00049",stroke:o,strokeWidth:"2"}),l.createElement("rect",{x:"14",y:"13.0005",width:"3",height:"3",fill:o}))};function Lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pt={userSelect:"none"},Mt=function(e){var t=e.color,n=void 0===t?"white":t,r=e.height,o=void 0===r?24:r,c=e.width,s=void 0===c?24:c,u=e.outlined,d=e.style,p=void 0===d?{}:d,m=a()(e,["color","height","width","outlined","style"]);return u?l.createElement("svg",i()({width:14,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg"},m),l.createElement("path",{d:"M1.011 11.13a.96.96 0 0 1-.7-.3.96.96 0 0 1-.3-.7V1.463c0-.267.1-.5.3-.7.2-.2.434-.3.7-.3h8.667c.267 0 .5.1.7.3.2.2.3.433.3.7v3.583l2.667-2.666v6.833l-2.667-2.667v3.584c0 .266-.1.5-.3.7-.2.2-.433.3-.7.3H1.011Z",fill:n})):l.createElement("svg",i()({style:Dt(Dt({},Pt),p),width:s,height:o,fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},m),l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 4H1V20H18V16.75L23 18.5V5.5L18 7.25V4ZM16 6H3V18H16V13.931L21 15.681V8.31896L16 10.069V6Z",fill:n}))},Bt=n(79641);function jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gt={userSelect:"none"},Ft=function(e){var t=e.color,n=void 0===t?"white":t,r=e.style,o=void 0===r?{}:r,c=a()(e,["color","style"]);return l.createElement("svg",i()({style:Ut(Ut({},Gt),o),width:"3",height:"12",viewBox:"0 0 3 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},c),l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.5 8V0H2.5V8H0.5ZM1.5 9C0.671573 9 0 9.67157 0 10.5C0 11.3284 0.671573 12 1.5 12C2.32843 12 3 11.3284 3 10.5C3 9.67157 2.32843 9 1.5 9Z",fill:n}))};function Wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vt={display:"inline-block",userSelect:"none",flexShrink:0},zt=function(e){var t=e.color,n=void 0===t?"black":t,r=e.style,o=void 0===r?{}:r,c=a()(e,["color","style"]);return l.createElement("svg",i()({style:Ht(Ht({},Vt),o),width:"16",height:"19",viewBox:"0 0 16 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},c),l.createElement("path",{d:"M14.9999 19V17C14.9999 13.134 11.8659 12 7.99994 12C4.13395 12 0.999939 13.134 0.999939 17V19M11.9999 5C11.9999 7.20914 10.2091 9 7.99994 9C5.7908 9 3.99994 7.20914 3.99994 5C3.99994 2.79086 5.7908 1 7.99994 1C10.2091 1 11.9999 2.79086 11.9999 5Z",stroke:n,strokeWidth:"2"}))};function Zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zt(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Kt={display:"inline-block",userSelect:"none",flexShrink:0},qt=function(e){var t=e.color,n=void 0===t?"black":t,r=e.style,o=void 0===r?{}:r,c=a()(e,["color","style"]);return l.createElement("svg",i()({style:Yt(Yt({},Kt),o),width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},c),l.createElement("rect",{x:"2.82333",y:"5.22333",width:"17.3533",height:"13.5533",rx:"1.71",stroke:n,strokeWidth:"1.64667",strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("rect",{x:"5.10254",y:"16.56",width:"9.24667",height:"3.92667",rx:"0.633333",transform:"rotate(-90 5.10254 16.56)",fill:n}))};function Qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qt(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Jt={display:"inline-block",userSelect:"none",flexShrink:0},$t=function(e){var t=e.color,n=void 0===t?"black":t,r=e.style,o=void 0===r?{}:r,c=a()(e,["color","style"]);return l.createElement("svg",i()({style:Xt(Xt({},Jt),o),width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},c),l.createElement("path",{d:"M2.70129 7.27246L6.44155 11.1166L10.2857 7.27246",stroke:n,style:{strokeMiterlimit:10}}),l.createElement("path",{d:"M6.44153 0V10.5974",stroke:n,style:{strokeMiterlimit:10}}))},en=function(e){var t=e.color,n=void 0===t?"#171717":t,r=e.className;return l.createElement("svg",{className:r,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.6429 13.1429L16.5 14L18.6429 14.8571L19.5 17L20.3572 14.8571L22.5 14L20.3572 13.1429L19.5 11L18.6429 13.1429ZM14.5 7L16.6429 6.14286L17.5 4L18.3572 6.14286L20.5 7L18.3572 7.85714L17.5 10L16.6429 7.85714L14.5 7ZM7.47462 5L9.61748 4.14286L10.4746 2L11.3318 4.14286L13.4746 5L11.3318 5.85714L10.4746 8L9.61748 5.85714L7.47462 5ZM15.2532 12.3527L11.6045 8.93408L1.65411 19.283L5.30278 22.7017L15.2532 12.3527ZM5.22949 19.8925L4.49976 19.2088L11.6778 11.7432L12.4075 12.427L5.22949 19.8925Z",fill:n}))};function tn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tn(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rn={userSelect:"none"},on=function(e){var t=e.color,n=void 0===t?"#171717":t,r=e.className,o=e.style,c=void 0===o?{}:o,s=a()(e,["color","className","style"]);return l.createElement("svg",i()({style:nn(nn({},rn),c),className:r,width:"20",height:"20",viewBox:"0 -5 10 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",alt:"","aria-hidden":"true"},s),l.createElement("path",{d:"M1.44444 10.1111C2.24219 10.1111 2.88889 10.7578 2.88889 11.5556C2.88889 12.3533 2.24219 13 1.44444 13C0.6467 13 0 12.3533 0 11.5556C0 10.7578 0.6467 10.1111 1.44444 10.1111Z",fill:n,fillOpacity:"0.6"}),l.createElement("path",{d:"M1.44444 5.05556C2.24219 5.05556 2.88889 5.70226 2.88889 6.5C2.88889 7.29774 2.24219 7.94444 1.44444 7.94444C0.6467 7.94444 0 7.29774 0 6.5C0 5.70226 0.6467 5.05556 1.44444 5.05556Z",fill:n,fillOpacity:"0.6"}),l.createElement("path",{d:"M2.88889 1.44444C2.88889 0.646699 2.24219 0 1.44444 0C0.6467 0 0 0.646699 0 1.44444C0 2.24219 0.6467 2.88889 1.44444 2.88889C2.24219 2.88889 2.88889 2.24219 2.88889 1.44444Z",fill:n,fillOpacity:"0.6"}))},an=n(94184),ln=n.n(an),cn=function(e){var t=e.type,n=void 0===t?"normal":t,r=e.color,i=void 0===r?"normal":r,o=e.loading,a=void 0===o||o,c=e.classes,s=e.style,u=void 0===s?{}:s,d=e.position,p=void 0===d?"absolute":d;if(!a)return null;if("dots"===n)return l.createElement("div",{className:c[n],style:u},l.createElement("div",{className:c.dot,style:{backgroundColor:i}}),l.createElement("div",{className:c.dot,style:{backgroundColor:i,animationDelay:".5s"}}),l.createElement("div",{className:c.dot,style:{backgroundColor:i,animationDelay:"1s"}}));var m=ln()(c.root,c[n],c[i],c[p]);return l.createElement("div",{className:m,style:u})};cn.propTypes={type:s().oneOf(["normal","small","large","dots"]),color:s().string,loading:s().bool,position:s().oneOf(["absolute","relative"])};var sn=(0,d.Z)({"@keyframes bambuserLoaderNoTranslateSpin":{from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}},"@keyframes bambuserLoaderSpin":{from:{transform:"translate(-50%, -50%) rotate(0deg)"},to:{transform:"translate(-50%, -50%) rotate(360deg)"}},"@keyframes bambuserLoadingDots":{"0%":{opacity:.4,transform:"scale(1, 1)"},"50%":{opacity:1,transform:"scale(1.33, 1.33)"},"100%":{opacity:.4,transform:"scale(1, 1)"}},root:{width:"36px",height:"36px",borderRadius:"100%",borderColor:"#000 #000 transparent",borderStyle:"solid",borderWidth:"1px",animation:"$bambuserLoaderNoTranslateSpin",animationDuration:".8s",animationTimingFunction:"linear",animationIterationCount:"infinite"},absolute:{transform:"translate(-50%, -50%)",position:"absolute",top:"50%",left:"50%",animation:"$bambuserLoaderSpin",animationDuration:".8s",animationTimingFunction:"linear",animationIterationCount:"infinite"},relative:{position:"relative"},white:{borderColor:"#fff #fff transparent"},small:{width:"18px",height:"18px"},dot:{animation:"$bambuserLoadingDots",animationDuration:"1.5s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",backgroundColor:"black",borderRadius:"10px",display:"inline-block",height:"6px",width:"6px",margin:"0 2px"},large:{width:"86px",height:"86px"}})(cn),un=n(79827),dn=function(e){var t,n,r,i,o,a,l,c,s,u,d,p,m,f,h,g,v,E,S,T,b,_,y,C,x,O,I,A;return{color:(null==e||null===(t=e.general)||void 0===t||null===(n=t.buttons)||void 0===n||null===(r=n.primary)||void 0===r?void 0:r.color)||e.palette.primary.contrastText,backgroundColor:(null==e||null===(i=e.general)||void 0===i||null===(o=i.buttons)||void 0===o||null===(a=o.primary)||void 0===a?void 0:a.backgroundColor)||e.palette.primary.main,borderWidth:(null==e||null===(l=e.general)||void 0===l||null===(c=l.buttons)||void 0===c||null===(s=c.primary)||void 0===s?void 0:s.borderWidth)||"1px",borderColor:(null==e||null===(u=e.general)||void 0===u||null===(d=u.buttons)||void 0===d||null===(p=d.primary)||void 0===p?void 0:p.borderColor)||e.palette.primary.borderColor,borderStyle:"solid","&:hover":{backgroundColor:(null==e||null===(m=e.general)||void 0===m||null===(f=m.buttons)||void 0===f||null===(h=f.primary)||void 0===h||null===(g=h.hover)||void 0===g?void 0:g.backgroundColor)||e.palette.primary.hover,borderWidth:(null==e||null===(v=e.general)||void 0===v||null===(E=v.buttons)||void 0===E||null===(S=E.primary)||void 0===S||null===(T=S.hover)||void 0===T?void 0:T.borderWidth)||"1px",color:(null==e||null===(b=e.general)||void 0===b||null===(_=b.buttons)||void 0===_||null===(y=_.primary)||void 0===y||null===(C=y.hover)||void 0===C?void 0:C.color)||e.palette.primary.hoverText,borderColor:(null==e||null===(x=e.general)||void 0===x||null===(O=x.buttons)||void 0===O||null===(I=O.primary)||void 0===I||null===(A=I.hover)||void 0===A?void 0:A.borderColor)||e.palette.primary.hoverBorderColor}}},pn={backgroundColor:"#E12147",borderColor:"#E12147",color:"#fff","&:hover":{backgroundColor:"rgb(225, 33, 71, 0.85)"}},mn=function(e){var t,n=e.type,r=e.children,o=e.onClick,c=e.disabled,s=void 0!==c&&c,d=e.loading,p=void 0!==d&&d,m=e.icon,f=void 0===m?null:m,h=e.iconColor,g=e.classes,E=e.style,S=void 0===E?{}:E,T=e.size,_=void 0===T?"L":T,y=e.className,C=e.contentClassName,O=e.ariaLabel,I=void 0===O?null:O,A=e.text,w=a()(e,["type","children","onClick","disabled","loading","icon","iconColor","classes","style","size","className","contentClassName","ariaLabel","text"]),R=(0,u.Z)(),k=ln()(g.root,!!n&&g[n],(s||p)&&g.disabled,"action"===n&&g.action,f&&!r&&g.iconWithoutContent,"M"===_&&g.sizeM,"S"===_&&g.sizeS,"slim"===_&&g.slim,"square"===_&&g.sizeSquare,"soloIcon"===_&&g.sizeOnlyIcon,y),D=ln()(g.content,"slim"===_&&g.slimContent,"popupPrimary"===n&&g.primaryButtonContent,"popupSecondary"===n&&g.secondaryButtonContent,C),P=h||("primary"===n?"white":"black"),M="soloIcon"===_?g.icon:"";if("string"==typeof f)switch(t=f,f){case"plus":case"add":f=l.createElement(v,{color:s?R.palette.gray[40]:P,className:M});break;case"remove":f=l.createElement(Fe,{color:s?R.palette.gray[40]:P,className:M});break;case"plus-small":case"add-small":f=l.createElement(v,{type:"small",color:s?R.palette.gray[40]:P,className:M});break;case"download":f=l.createElement(re,{color:s?R.palette.gray[40]:P,className:M});break;case"download-small":f=l.createElement(re,{type:"small",color:s?R.palette.gray[40]:P,className:M});break;case"scroll-down":f=l.createElement($t,{type:"small",color:s?R.palette.gray[40]:P,className:M});break;case"close":f=l.createElement($,{type:"small",color:s?R.palette.gray[40]:P,className:M});break;case"close-medium":f=l.createElement($,{type:"medium",color:s?R.palette.gray[40]:P,className:g.iconSmall});break;case"close-sharp":f=l.createElement($,{type:"sharp",color:s?R.palette.gray[40]:P,className:g.sizeSquare});break;case"close-small":f=l.createElement($,{type:"small",color:s?R.palette.gray[40]:P,className:g.iconSmall});break;case"feedback":f=l.createElement(me,{color:s?R.palette.gray[40]:P,className:M});break;case"trash":f=l.createElement(Ze,{type:"small",color:s?R.palette.gray[40]:P,className:M});break;case"arrowStemLeft":f=l.createElement(b,{type:"small",color:s?R.palette.gray[40]:P,className:M,style:{transform:"rotate(-90deg)"}});break;case"arrowStemRight":f=l.createElement(b,{type:"small",color:s?R.palette.gray[40]:P,className:M,style:{transform:"rotate(90deg)"}});break;case"arrowRight":f=l.createElement(x,{svg:{width:"32",height:"32",viewBox:"0 0 24 24"},path:{strokeWidth:"2",d:"M6 9L12 15L18 9",stroke:s?R.palette.gray[40]:P},className:M,direction:"right"});break;case"arrowLeft":f=l.createElement(W,{color:s?R.palette.gray[40]:P});break;case"arrowDown":f=l.createElement(x,{svg:{width:"32",height:"32",viewBox:"0 0 24 24"},path:{strokeWidth:"2",d:"M6 9L12 15L18 9",stroke:s?R.palette.gray[40]:P},direction:"down"});break;case"arrowUp":f=l.createElement(x,{svg:{width:"32",height:"32",viewBox:"0 0 24 24"},path:{strokeWidth:"2",d:"M6 9L12 15L18 9",stroke:s?R.palette.gray[40]:P},direction:"up"});break;case"settings":f=l.createElement(it,{type:"large",color:s?R.palette.gray[40]:P,className:M});break;case"share":f=l.createElement(gt,{type:"large",color:s?R.palette.gray[40]:P,className:M});break;case"checkMark":f=l.createElement(Tt,{size:"sm",color:s?R.palette.gray[40]:P,className:M});break;case"cart":f=l.createElement(B,{size:"sm",color:s?R.palette.gray[40]:P,className:M});break;case"compare":f=l.createElement(q,{size:"sm",color:s?R.palette.gray[40]:P,className:M});break;case"expandVideo":f=l.createElement(ce,{size:"sm",color:s?R.palette.gray[40]:P,className:M});break;case"minimizeVideo":f=l.createElement(Re,{size:"sm",color:s?R.palette.gray[40]:P,className:M});break;case"calendar":f=l.createElement(kt,{size:"sm",color:s?R.palette.gray[40]:P,className:M});break;case"cameraActive":f=l.createElement(Mt,{size:"sm",color:s?R.palette.gray[40]:P,className:M});break;case"cameraInActive":f=l.createElement(Bt.Z,{size:"sm",color:s?R.palette.gray[40]:P,className:M});break;case"micActive":f=l.createElement(At,{size:"sm",color:s?R.palette.gray[40]:P,className:M});break;case"micInActive":f=l.createElement(Nt.Z,{size:"sm",color:s?R.palette.gray[40]:P,className:M});break;case"audioOn":f=l.createElement(N,{size:"sm",color:s?R.palette.gray[40]:P,className:M});break;case"audioOff":f=l.createElement(L,{size:"sm",color:s?R.palette.gray[40]:P,className:M});break;case"pause":f=l.createElement(Le,{size:"sm",color:s?R.palette.gray[40]:P,className:M});break;case"fullScreen":f=l.createElement(se,{expand:!0,size:"sm",color:s?R.palette.gray[40]:P});break;case"fitToScreen":f=l.createElement(se,{expand:!1,size:"sm",color:s?R.palette.gray[40]:P});break;case"userIcon":f=l.createElement(zt,{size:"sm",color:s?R.palette.gray[40]:P});break;case"showDrawer":f=l.createElement(qt,{size:"sm",color:s?R.palette.gray[40]:P});break;default:f=null}var j=w.href?"a":"button",U=w.href?{}:{disabled:s,onKeyPress:function(e){(0,un.v)(e)&&!s&&e.stopPropagation()},onClick:o};return l.createElement(j,i()({className:k},U,{style:S},w,{"aria-label":I||t||""}),l.createElement("span",{className:D,style:p?{visibility:"hidden"}:null},f&&l.createElement("span",{className:ln()(r||A?g.iconStyleWithContent:g.iconStyleWithoutContent)},f),A,r),!!p&&l.createElement(sn,{type:"small",color:P}))};mn.propTypes={type:s().string,icon:s().oneOfType([s().object,s().oneOf(["pause","plus","add","remove","plus-small","add-small","download","download-small","close","close-small","feedback","close-medium","close-sharp","trash","arrowStemLeft","arrowStemRight","arrowDown","arrowUp","arrowLeft","arrowRight","settings","share","checkMark","cart","compare","cameraActive","cameraInActive","expandVideo","minimizeVideo","micActive","micInActive","audioOn","audioOff","fitToScreen","fullScreen","userIcon","showDrawer"])])};var fn=(0,d.Z)((function(e){var t,n,r,i,o,a,l,c,s,u,d,p,m,f,h,g,v,E,S,T,b,_,y,C,x,O,I,A,N,w,R,k,L,D,P,M,B,j,U,G,F,W,H,V,z,Z,Y,K,q,Q,X,J,$,ee,te,ne,re,ie,oe,ae,le,ce,se,ue,de,pe,me,fe,he,ge,ve,Ee,Se,Te,be,_e,ye,Ce,xe,Oe,Ie,Ae,Ne,we,Re,ke,Le,De,Pe,Me,Be,je,Ue,Ge,Fe,We,He,Ve,ze,Ze,Ye,Ke,qe,Qe,Xe,Je,$e,et,tt,nt,rt,it,ot,at,lt,ct,st,ut,dt,pt,mt,ft,ht,gt,vt,Et,St,Tt,bt,_t,yt,Ct,xt,Ot,It,At,Nt,wt,Rt,kt,Lt,Dt,Pt,Mt,Bt,jt;return{root:{margin:0,position:"relative",fontFamily:e.typography.button.fontFamily,fontSize:e.typography.button.fontSize,lineHeight:e.typography.button.lineHeight,fontWeight:e.typography.button.fontWeight,padding:"13px 24px",borderRadius:e.shape.button.borderRadius,textTransform:e.typography.button.textTransform,cursor:"pointer",transition:"background-color 0.3s","&:disabled":{cursor:"not-allowed"},width:"100%",animation:"fadeIn 0.5s 1"},primary:dn(e),secondary:{color:(null==e||null===(t=e.general)||void 0===t||null===(n=t.buttons)||void 0===n||null===(r=n.secondary)||void 0===r?void 0:r.color)||e.palette.secondary.contrastText,backgroundColor:(null==e||null===(i=e.general)||void 0===i||null===(o=i.buttons)||void 0===o||null===(a=o.secondary)||void 0===a?void 0:a.backgroundColor)||e.palette.secondary.main,borderStyle:"solid",borderWidth:(null==e||null===(l=e.general)||void 0===l||null===(c=l.buttons)||void 0===c||null===(s=c.secondary)||void 0===s?void 0:s.borderWidth)||"1px",borderColor:(null==e||null===(u=e.general)||void 0===u||null===(d=u.buttons)||void 0===d||null===(p=d.secondary)||void 0===p?void 0:p.borderColor)||e.palette.secondary.contrastText,"&:hover":{backgroundColor:(null==e||null===(m=e.general)||void 0===m||null===(f=m.buttons)||void 0===f||null===(h=f.secondary)||void 0===h||null===(g=h.hover)||void 0===g?void 0:g.backgroundColor)||e.palette.secondary.hover,color:(null==e||null===(v=e.general)||void 0===v||null===(E=v.buttons)||void 0===E||null===(S=E.secondary)||void 0===S||null===(T=S.hover)||void 0===T?void 0:T.color)||e.palette.secondary.hoverText,borderColor:(null==e||null===(b=e.general)||void 0===b||null===(_=b.buttons)||void 0===_||null===(y=_.secondary)||void 0===y||null===(C=y.hover)||void 0===C?void 0:C.borderColor)||e.palette.secondary.hoverBorderColor}},popupPrimary:{color:(null==e||null===(x=e.general)||void 0===x||null===(O=x.buttons)||void 0===O||null===(I=O.primary)||void 0===I?void 0:I.color)||e.popup.primary.contrastText,backgroundColor:(null==e||null===(A=e.general)||void 0===A||null===(N=A.buttons)||void 0===N||null===(w=N.primary)||void 0===w?void 0:w.backgroundColor)||e.popup.primary.main,borderWidth:(null==e||null===(R=e.general)||void 0===R||null===(k=R.buttons)||void 0===k||null===(L=k.primary)||void 0===L?void 0:L.borderWidth)||"1px",borderColor:(null==e||null===(D=e.general)||void 0===D||null===(P=D.buttons)||void 0===P||null===(M=P.primary)||void 0===M?void 0:M.borderColor)||e.popup.primary.borderColor,borderRadius:(null==e||null===(B=e.general)||void 0===B||null===(j=B.buttons)||void 0===j||null===(U=j.primary)||void 0===U?void 0:U.borderRadius)||e.shape.button.borderRadius,borderStyle:"solid","&:hover":{backgroundColor:(null==e||null===(G=e.general)||void 0===G||null===(F=G.buttons)||void 0===F||null===(W=F.primary)||void 0===W||null===(H=W.hover)||void 0===H?void 0:H.backgroundColor)||e.popup.primary.hover,color:(null==e||null===(V=e.general)||void 0===V||null===(z=V.buttons)||void 0===z||null===(Z=z.primary)||void 0===Z||null===(Y=Z.hover)||void 0===Y?void 0:Y.color)||e.popup.primary.hoverText,borderWidth:(null==e||null===(K=e.general)||void 0===K||null===(q=K.buttons)||void 0===q||null===(Q=q.primary)||void 0===Q||null===(X=Q.hover)||void 0===X?void 0:X.borderWidth)||"1px",borderColor:(null==e||null===(J=e.general)||void 0===J||null===($=J.buttons)||void 0===$||null===(ee=$.primary)||void 0===ee||null===(te=ee.hover)||void 0===te?void 0:te.borderColor)||e.palette.primary.hoverBorderColor}},popupSecondary:{color:(null==e||null===(ne=e.general)||void 0===ne||null===(re=ne.buttons)||void 0===re||null===(ie=re.secondary)||void 0===ie?void 0:ie.color)||e.popup.secondary.contrastText,backgroundColor:(null==e||null===(oe=e.general)||void 0===oe||null===(ae=oe.buttons)||void 0===ae||null===(le=ae.secondary)||void 0===le?void 0:le.backgroundColor)||e.popup.secondary.main,borderWidth:(null==e||null===(ce=e.general)||void 0===ce||null===(se=ce.buttons)||void 0===se||null===(ue=se.secondary)||void 0===ue?void 0:ue.borderWidth)||"1px",borderColor:(null==e||null===(de=e.general)||void 0===de||null===(pe=de.buttons)||void 0===pe||null===(me=pe.secondary)||void 0===me?void 0:me.borderColor)||e.popup.secondary.borderColor,borderRadius:(null==e||null===(fe=e.general)||void 0===fe||null===(he=fe.buttons)||void 0===he||null===(ge=he.secondary)||void 0===ge?void 0:ge.borderRadius)||e.shape.button.borderRadius,borderStyle:"solid","&:hover":{backgroundColor:(null==e||null===(ve=e.general)||void 0===ve||null===(Ee=ve.buttons)||void 0===Ee||null===(Se=Ee.secondary)||void 0===Se||null===(Te=Se.hover)||void 0===Te?void 0:Te.backgroundColor)||e.popup.secondary.hover,color:(null==e||null===(be=e.general)||void 0===be||null===(_e=be.buttons)||void 0===_e||null===(ye=_e.secondary)||void 0===ye||null===(Ce=ye.hover)||void 0===Ce?void 0:Ce.color)||e.popup.secondary.hoverText,borderWidth:(null==e||null===(xe=e.general)||void 0===xe||null===(Oe=xe.buttons)||void 0===Oe||null===(Ie=Oe.secondary)||void 0===Ie||null===(Ae=Ie.hover)||void 0===Ae?void 0:Ae.borderWidth)||"1px",borderColor:(null==e||null===(Ne=e.general)||void 0===Ne||null===(we=Ne.buttons)||void 0===we||null===(Re=we.secondary)||void 0===Re||null===(ke=Re.hover)||void 0===ke?void 0:ke.borderColor)||e.palette.secondary.hoverBorderColor}},submit:dn(e),goOnline:{color:e.palette.white.main,backgroundColor:e.palette.green.main,border:"1px solid ".concat(e.palette.green.main),"&:hover":{background:e.palette.green.shade,borderColor:e.palette.green.shade},"&:disabled":{"&:hover":{backgroundColor:e.palette.green.main,border:"1px solid ".concat(e.palette.green.main)}}},goOffline:{color:e.palette.white.main,backgroundColor:e.palette.red.main,border:"1px solid ".concat(e.palette.red.main),"&:hover":{background:e.palette.red.shade,borderColor:e.palette.red.shade}},disabled:{color:"".concat((null==e||null===(Le=e.general)||void 0===Le||null===(De=Le.buttons)||void 0===De||null===(Pe=De.disabled)||void 0===Pe?void 0:Pe.color)||e.palette.gray[80]),backgroundColor:"".concat((null==e||null===(Me=e.general)||void 0===Me||null===(Be=Me.buttons)||void 0===Be||null===(je=Be.disabled)||void 0===je?void 0:je.backgroundColor)||e.palette.gray[60]),borderWidth:"".concat((null==e||null===(Ue=e.general)||void 0===Ue||null===(Ge=Ue.buttons)||void 0===Ge||null===(Fe=Ge.disabled)||void 0===Fe?void 0:Fe.borderWidth)||"1px"),borderStyle:"solid",borderColor:"".concat((null==e||null===(We=e.general)||void 0===We||null===(He=We.buttons)||void 0===He||null===(Ve=He.disabled)||void 0===Ve?void 0:Ve.borderColor)||e.palette.gray[60]),"&:hover":{color:"".concat((null==e||null===(ze=e.general)||void 0===ze||null===(Ze=ze.buttons)||void 0===Ze||null===(Ye=Ze.disabled)||void 0===Ye?void 0:Ye.color)||e.palette.gray[80]),backgroundColor:"".concat((null==e||null===(Ke=e.general)||void 0===Ke||null===(qe=Ke.buttons)||void 0===qe||null===(Qe=qe.disabled)||void 0===Qe?void 0:Qe.backgroundColor)||e.palette.gray[60]),borderWidth:"".concat((null==e||null===(Xe=e.general)||void 0===Xe||null===(Je=Xe.buttons)||void 0===Je||null===($e=Je.disabled)||void 0===$e?void 0:$e.borderWidth)||"1px"),borderStyle:"solid",borderColor:"".concat((null==e||null===(et=e.general)||void 0===et||null===(tt=et.buttons)||void 0===tt||null===(nt=tt.disabled)||void 0===nt?void 0:nt.borderColor)||e.palette.gray[60])}},cancel:pn,live:pn,action:{border:"none",backgroundColor:"#f8f8f8","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.09)"}},content:{alignItems:"center",display:"flex",justifyContent:"center",textTransform:e.typography.button.textTransform,fontSize:e.typography.button.fontSize},primaryButtonContent:{textTransform:(null==e||null===(rt=e.general)||void 0===rt||null===(it=rt.buttons)||void 0===it||null===(ot=it.primary)||void 0===ot?void 0:ot.textTransform)||e.typography.button.textTransform,letterSpacing:(null==e||null===(at=e.general)||void 0===at||null===(lt=at.buttons)||void 0===lt||null===(ct=lt.primary)||void 0===ct?void 0:ct.letterSpacing)||e.typography.button.letterSpacing,fontFamily:(null==e||null===(st=e.general)||void 0===st||null===(ut=st.buttons)||void 0===ut||null===(dt=ut.primary)||void 0===dt?void 0:dt.fontFamily)||e.typography.button.fontFamily,fontSize:(null==e||null===(pt=e.general)||void 0===pt||null===(mt=pt.buttons)||void 0===mt||null===(ft=mt.primary)||void 0===ft?void 0:ft.fontSize)||e.typography.button.fontSize,fontWeight:(null==e||null===(ht=e.general)||void 0===ht||null===(gt=ht.buttons)||void 0===gt||null===(vt=gt.primary)||void 0===vt?void 0:vt.fontWeight)||e.typography.button.fontWeight,fontStyle:(null==e||null===(Et=e.general)||void 0===Et||null===(St=Et.buttons)||void 0===St||null===(Tt=St.primary)||void 0===Tt?void 0:Tt.fontStyle)||e.typography.button.fontStyle},secondaryButtonContent:{textTransform:(null==e||null===(bt=e.general)||void 0===bt||null===(_t=bt.buttons)||void 0===_t||null===(yt=_t.secondary)||void 0===yt?void 0:yt.textTransform)||e.typography.button.textTransform,letterSpacing:(null==e||null===(Ct=e.general)||void 0===Ct||null===(xt=Ct.buttons)||void 0===xt||null===(Ot=xt.secondary)||void 0===Ot?void 0:Ot.letterSpacing)||e.typography.button.letterSpacing,fontFamily:(null==e||null===(It=e.general)||void 0===It||null===(At=It.buttons)||void 0===At||null===(Nt=At.secondary)||void 0===Nt?void 0:Nt.fontFamily)||e.typography.button.fontFamily,fontSize:(null==e||null===(wt=e.general)||void 0===wt||null===(Rt=wt.buttons)||void 0===Rt||null===(kt=Rt.secondary)||void 0===kt?void 0:kt.fontSize)||e.typography.button.fontSize,fontWeight:(null==e||null===(Lt=e.general)||void 0===Lt||null===(Dt=Lt.buttons)||void 0===Dt||null===(Pt=Dt.secondary)||void 0===Pt?void 0:Pt.fontWeight)||e.typography.button.fontWeight,fontStyle:(null==e||null===(Mt=e.general)||void 0===Mt||null===(Bt=Mt.buttons)||void 0===Bt||null===(jt=Bt.secondary)||void 0===jt?void 0:jt.fontStyle)||e.typography.button.fontStyle},iconStyleWithContent:{margin:-e.spacing(1),marginRight:null!=e&&e.rtl?0:e.spacing(1),marginLeft:null!=e&&e.rtl?e.spacing(1):0,display:"flex",alignItems:"center"},iconStyleWithoutContent:{display:"flex",alignItems:"center"},iconWithoutContent:{padding:0},sizeM:{width:136},sizeS:{width:78},slim:{borderRadius:"4px",padding:"10px 24px"},slimContent:{lineHeight:"16px"},sizeSquare:{width:48,height:48},sizeOnlyIcon:{width:24,height:24,background:"transparent",border:"none","&:hover":{backgroundColor:"transparent"},"&:disabled":{backgroundColor:"transparent",borderColor:"transparent"}},icon:{borderRadius:0,width:24,height:24},iconSmall:{width:16,height:16}}}),{name:"bambuserButton"})(mn);function hn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hn(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(41539),n(39714);var vn=function(e){var t=e.label,n=void 0===t?null:t,r=e.checked,o=void 0!==r&&r,c=e.onChange,s=e.style,u=void 0===s?{}:s,d=e.className,p=e.classes,f=e.disabled,h=a()(e,["label","checked","onChange","style","className","classes","disabled"]),g=ln()(p.checkbox),v=Math.random().toString();return l.createElement("div",{className:ln()(p.root,d,m()({},p.disabled,f)),style:gn({},u)},l.createElement("input",i()({onChange:c,id:v,className:g,type:"checkbox",disabled:f,defaultChecked:o,onKeyPress:function(e){if((0,un.v)(e,!1))return c()},"aria-checked":o},h,{tabIndex:0})),l.createElement("div",{className:ln()(p.checkmark,o&&p.checkmarkChecked)},o&&l.createElement(z,{type:"small",color:"white",style:{marginRight:1}})),n&&l.createElement("label",{htmlFor:v,className:p.label},n))},En=(0,d.Z)((function(e){var t,n;return{root:{position:"relative",display:"flex",marginBottom:8},checkbox:{WebkitAppearance:"none",width:20,height:20,margin:0,cursor:"pointer"},checkmark:{position:"absolute",top:0,left:0,width:20,height:20,border:"1px solid black",backgroundColor:"white",cursor:"pointer",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:(null===(t=e.shape)||void 0===t||null===(n=t.checkbox)||void 0===n?void 0:n.borderRadius)||0},checkmarkChecked:{backgroundColor:"black"},label:{marginLeft:8,fontSize:14,alignSelf:"center",cursor:"pointer"},disabled:{opacity:.5}}}))(vn);vn.propTypes={checked:s().bool,disabled:s().bool.isRequired,label:s().string,onChange:s().func.isRequired},vn.defaultProps={disabled:!1};var Sn=n(63038),Tn=n.n(Sn),bn=(n(26699),function(e){var t=e.element,n=void 0===t?"p":t,r=e.type,o=void 0===r?"body":r,c=e.uppercase,s=void 0!==c&&c,u=e.truncateAt,d=void 0!==u&&u,p=e.border,m=void 0!==p&&p,f=e.children,h=e.style,g=e.className,v=e.classes,E=a()(e,["element","type","uppercase","truncateAt","border","children","style","className","classes"]),S=ln()(v.root,"body"===o&&v.body,"secondary"===o&&v.secondary,m&&v.border,s&&v.uppercase,g,function(e,t){if(["h2","h3","h4","h5","h6"].includes(t))return ln()(e.title,e[t])}(v,o),Boolean(d)&&v.truncate),T=n;return d&&!isNaN(d)&&((h=h||{}).maxWidth="".concat(d,"px")),l.createElement(T,i()({style:h,className:S},E),f)});bn.propTypes={type:s().oneOf(["body","secondary","h2","h3","h4","h5","h6"]),uppercase:s().bool,truncateAt:s().oneOfType([s().number,s().bool])};var _n=(0,d.Z)((function(e){return{root:{padding:0,color:e.palette.text.primary,margin:"4px 0",wordBreak:"normal",overflowWrap:"anywhere",animation:"fadeIn 0.5s 1"},body:{fontSize:"14px"},secondary:{fontSize:"12px",color:e.palette.text.secondary},truncate:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},title:{fontWeight:500},h2:{fontSize:e.typography.h2.fontSize,lineHeight:e.typography.h2.lineHeight,fontWeight:e.typography.h2.fontWeight},h3:{fontSize:e.typography.h3.fontSize,lineHeight:e.typography.h3.lineHeight,fontWeight:e.typography.h3.fontWeight},h4:{fontSize:14,lineHeight:"16px"},h5:{fontSize:12,lineHeight:"14px"},h6:{fontSize:10,lineHeight:"12px",textTransform:"uppercase"},uppercase:{textTransform:"uppercase"},border:{display:"inline-block",borderBottomWidth:2,borderBottomStyle:"solid",paddingBottom:8,marginBottom:12,borderBottomColor:e.palette.text.primary}}}))(bn),yn={type:s().string,label:s().string,ariaLabel:s().string.isRequired,labelType:s().string,error:s().oneOfType([s().object,s().bool,s().string]),action:s().oneOfType([s().object,s().func,s().element,s().bool]),useLocalValue:s().bool,elementRight:s().oneOfType([s().element,s().bool]),elementLeft:s().oneOfType([s().element,s().bool]),onClickElementRight:s().func,classes:s().object,style:s().object,className:s().string,leftStyle:s().object,leftClassName:s().string,rightStyle:s().object,rightClassName:s().string,errorStyle:s().object,disabled:s().bool,inputRef:s().oneOfType([s().func,s().shape({current:s().instanceOf(Element)})])},Cn=(0,l.forwardRef)((function(e,t){var n=e.type,r=void 0===n?"text":n,o=e.label,c=void 0===o?null:o,s=e.ariaLabel,u=e.labelType,d=void 0===u?"h6":u,p=e.error,m=void 0===p?null:p,f=e.action,h=void 0===f?null:f,g=e.useLocalValue,v=void 0===g||g,E=e.elementRight,S=void 0===E?null:E,T=e.elementLeft,b=void 0===T?null:T,_=e.onClickElementRight,y=e.classes,C=e.labelClassName,x=e.style,O=void 0===x?{}:x,I=e.warning,A=void 0===I?null:I,N=e.className,w=e.leftStyle,R=void 0===w?{}:w,k=e.inputContainerClassName,L=e.leftClassName,D=e.rightStyle,P=void 0===D?{}:D,M=e.errorStyle,B=void 0===M?{}:M,j=e.focusOnMount,U=void 0!==j&&j,G=e.focused,F=void 0!==G&&G,W=e.rightClassName,H=e.disabled,V=void 0!==H&&H,z=e.isShown,Z=void 0!==z&&z,Y=a()(e,["type","label","ariaLabel","labelType","error","action","useLocalValue","elementRight","elementLeft","onClickElementRight","classes","labelClassName","style","warning","className","leftStyle","inputContainerClassName","leftClassName","rightStyle","errorStyle","focusOnMount","focused","rightClassName","disabled","isShown"]),K=(0,l.useState)(!1),q=Tn()(K,2),Q=q[0],X=q[1],J=(0,l.useState)(null),$=Tn()(J,2),ee=$[0],te=$[1],ne=Y.value,re=Y.onFocus,ie=Y.onChange,oe=Y.onBlur,ae=(0,l.useRef)(null),le=t||ae,ce=(0,l.useState)(null),se=Tn()(ce,2),ue=se[0],de=se[1],pe=ln()(y.input,N),me=ln()(y.inputContainer,m&&y.inputWithError,A&&y.inputWithWarning,(Q||(null==ee?void 0:ee.length)>0||(null==ne?void 0:ne.length)>0)&&!V&&y.inputContainerFocused,k,{focus:Q}),fe=ln()(y.label,C);(0,l.useEffect)((function(){U&&le.current&&le.current.focus()}),[]),(0,l.useEffect)((function(){Z&&(U||F)&&le.current&&le.current.focus()}),[Z,U,F]);var he=l.createElement("input",i()({type:r,className:pe,style:O,"aria-label":s},Y,{value:Q&&v?ee:ne,onFocus:function(e){"function"!=typeof re||V||re(e),te(e.target.value),X(!0)},onChange:function(e){var t=e.target,n=t.value,r=t.min,i=t.max;if("function"==typeof ie)if(r&&n<r||i&&n>i){var o=void 0!==r&&void 0!==i?"Value must be between ".concat(r," and ").concat(i):void 0!==r?"Value must be greater than or equal to ".concat(r):"Value must be less than or equal ".concat(i);de(o)}else de(null),ie(e);te(n)},onBlur:function(e){"function"==typeof oe&&oe(e),te(null),X(!1)},ref:le})),ge=S,ve=m||ue;return l.createElement("div",{className:y.root},c&&l.createElement(_n,{type:d,className:fe},c),l.createElement("div",{className:me},!!b&&l.createElement("div",{className:ln()(y.leftElementContainer,L),style:R},b),he,!!ge&&l.createElement("button",{onClick:function(e){"function"==typeof _&&_(e)},className:ln()(y.rightElementContainer,W,"input-icon-right","non-component-button"),style:P},ge),!!h&&l.createElement("div",{className:ln()(y.rightElementContainer,W,"input-icon-right"),style:P},h)),!!ve&&l.createElement("p",{className:y.error,style:B},ve),A&&l.createElement("p",{className:y.warning},A))}));Cn.propTypes=yn;var xn=(0,d.Z)((function(e){var t,n;return{root:{marginBottom:14,padding:2,position:"relative"},inputContainer:{display:"flex",outline:"solid 1px #999999",borderRadius:(null==e||null===(t=e.shape)||void 0===t||null===(n=t.input)||void 0===n?void 0:n.borderRadius)||0,width:"100%",animation:"fadeIn 0.5s 1",boxSizing:"border-box","&:hover":{outline:"solid 1px #121212"}},inputContainerFocused:{outline:"solid 1px #121212"},input:{color:e.palette.text.primary,background:"#ffffff",borderRadius:e.shape.input.borderRadius,fontSize:"16px",fontWeight:500,padding:"16px",lineHeight:"19px",display:"flex",flex:3,outline:"0px",border:"none","&:focus":{background:"#F7F7F7",caretColor:"#000"},"&::placeholder":{color:e.palette.gray[40]},"&:focus::placeholder":{color:e.palette.gray[20]}},leftElementContainer:{display:"flex",flex:1},rightElementContainer:{display:"flex",flex:1,maxWidth:"50px",backgroundColor:"#fff",cursor:"pointer"},inputWithError:{outlineColor:"#E12147","&:hover":{outlineColor:"#E12147"}},inputWithWarning:{outlineColor:"#FFAB00","&:hover":{outlineColor:"#FFAB00"}},error:{padding:0,margin:0,marginTop:7,fontSize:10,lineHeight:"10px",letterSpacing:"0.3px",color:"#E12147"},warning:{padding:0,margin:0,marginTop:7,fontSize:10,lineHeight:"10px",letterSpacing:"0.3px",color:"#FFAB00"},label:{marginBottom:"4px",paddingBottom:"1px"}}}))(Cn),On=n(87938);(0,d.Z)({container:{position:"relative",display:"flex",marginBottom:8},radio:{border:"1px solid black",WebkitAppearance:"none",width:20,height:20,borderRadius:10,margin:0,cursor:"pointer","&:checked":{backgroundColor:"#000","&::before":{content:'""',position:"absolute",width:8,height:8,top:6,left:6,borderRadius:4,backgroundColor:"#fff"}}},label:{fontSize:14,padding:"2px 5px 1px 5px",marginLeft:3,alignSelf:"center"}})((function(e){var t=e.isSelected,n=e.label,r=void 0===n?null:n,o=e.style,c=void 0===o?{}:o,s=e.classes,u=a()(e,["isSelected","label","style","classes"]),d=ln()(s.radio);return l.createElement("div",{className:s.container,style:c},l.createElement("input",i()({className:d,type:"radio",checked:t},u)),r&&l.createElement("span",{className:s.label},r))})),n(43575),n(69826),n(21249);var In=n(65659),An=n(57306),Nn=n(38784);function wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wn(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var kn=(0,d.Z)((function(e){return{container:{width:"100%",cursor:"default",position:"relative",borderRadius:"4px"},bottomMargin:{marginBottom:"12px"},inputContainer:{display:"flex",border:"1px solid #EAEAEA",borderRadius:e.shape.input.borderRadius,width:"100%",justifyContent:"space-between",alignItems:"center",color:"rgba(23, 23, 23, 0.6)",background:"#fff",fontSize:"12px",padding:"8px 12px",fontWeight:500,flex:3,whiteSpace:"nowrap",lineHeight:"16px","&:hover":{border:"1px solid #444444"},"& p":{margin:0,fontWeight:400,color:"rgba(23, 23, 23, 0.6)",textTransform:"capitalize",fontSize:"12px",lineHeight:"16px"},userSelect:"none"},inputContainerOpen:{border:"1px solid #444444"},optionContainer:{border:"1px solid #E9E9E9",borderRadius:"4px",padding:"8px 0",position:"absolute",zIndex:99,backgroundColor:e.palette.background.default,minWidth:"inherit",width:"100%",marginTop:"2px",boxShadow:"0px 0px 1px rgba(0, 0, 0, 0.04), 0px 2px 6px rgba(0, 0, 0, 0.04), 0px 24px 48px rgba(0, 0, 0, 0.06)"},optionWrapper:Rn({overflowY:"auto"},(0,Nn.EZ)()),option:{display:"flex",justifyContent:"space-between",fontSize:"12px",minHeight:"32px",padding:"0 15px",fontWeight:500,lineHeight:"32px",color:"#4C4C4C",width:"100%",textAlign:"left","&:hover":{background:"#F2F2F2",color:e.palette.primary.main}},selected:{display:"flex",justifyContent:"flex-end",alignItems:"center",minWidth:0},selectedValue:{paddingLeft:"8px",marginRight:"8px",color:"#171717",overflow:"hidden",textOverflow:"ellipsis"},selectedOption:{background:e.palette.primary.main,color:e.palette.primary.contrastText,"&:hover":{background:e.palette.primary.main,color:e.palette.primary.contrastText}},input:{justifyContent:"center",alignItems:"center",cursor:"default",color:"#000",paddingRight:"12px",position:"relative",flex:0},disabled:{cursor:"not-allowed",opacity:.5},labelContainer:{display:"flex",alignItems:"center"}}}))((function(e){var t=e.useInStockLabel,n=void 0===t||t,r=e.displayDisabledOptions,i=void 0!==r&&r,o=e.label,a=e.labelType,c=void 0===a?"h6":a,s=e.list,u=e.keyValue,d=e.keyLabel,p=e.classes,m=e.onChange,f=e.selectedValue,h=e.placeholder,g=e.className,v=e.vertical,E=void 0!==v&&v,S=e.disabled,T=e.maxListHeight,b=e.testId,_=e.selectedOptionClassName,y=e.disabledOptionClassName,C=e.optionClassName,O=(0,l.useState)(!1),I=Tn()(O,2),A=I[0],N=I[1],w=s.find((function(e){return(0,In.get)(e,u,null)===f})),R=(0,An.bp)(),k=(0,l.useRef)();(0,l.useEffect)((function(){return window.addEventListener("click",L),function(){return window.removeEventListener("click",L)}}),[]);var L=function(e){k.current&&!k.current.contains(e.target)&&N(!1)},D={svg:{width:"8",height:"6",viewBox:"0 0 8 6"},path:{d:"M1 1.5L4 4.5L7 1.5",stroke:"#4C4C4C",strokeWidth:"1.5",strokeLinecap:"round"}},P=ln()(p.container,E&&p.bottomMargin,g),M=ln()(p.inputContainer,A&&p.inputContainerOpen);return l.createElement("div",{className:P,"data-testid":b,ref:k},l.createElement(Sr,{className:M,onClick:function(){S||N(!A)},"data-testid":"current-value",disabled:S},o&&l.createElement(_n,{type:c},o),l.createElement("div",{className:p.selected},l.createElement("div",{className:p.selectedValue},(0,In.get)(w,d,"")||h,n&&!(0,In.get)(w,"inStock","")?" (".concat(R.getText("AGENT_TOOL_PANEL_INFO_PRODUCT_OUT_OF_STOCK"),")"):""),!S&&l.createElement(x,{translateY:A?-1:1,path:D.path,svg:D.svg,direction:A?"up":"down"}))),A&&l.createElement("div",{className:p.optionContainer},l.createElement("div",{className:p.optionWrapper,style:{maxHeight:T},role:"listbox"},s.map((function(e,t){var r=(0,In.get)(e,u,null),o=(0,In.get)(e,d,null),a=(0,In.get)(e,"inStock",null),c=(0,In.get)(e,"disabled",null),h=(0,In.get)(e,"element",null);if(!i&&c)return null;var g=ln()(p.option,C,r===f&&p.selectedOption,r===f&&_,c&&y);return l.createElement(Sr,{className:g,disabled:i&&c,key:r,onClick:function(){return m(r),void N(!1)},ariaLabel:o,onBlur:function(){s.length===t+1&&N(!1)}},l.createElement("div",{className:p.labelContainer},h,o)," ",l.createElement("div",null,n&&!a?"(".concat(R.getText("AGENT_TOOL_PANEL_INFO_PRODUCT_OUT_OF_STOCK"),")"):""))})))))})),Ln=n(93379),Dn=n.n(Ln),Pn=n(7795),Mn=n.n(Pn),Bn=n(90569),jn=n.n(Bn),Un=n(3565),Gn=n.n(Un),Fn=n(19216),Wn=n.n(Fn),Hn=n(44589),Vn=n.n(Hn),zn=n(85126),Zn={};Zn.styleTagTransform=Vn(),Zn.setAttributes=Gn(),Zn.insert=jn().bind(null,"head"),Zn.domAPI=Mn(),Zn.insertStyleElement=Wn(),Dn()(zn.Z,Zn),zn.Z&&zn.Z.locals&&zn.Z.locals;var Yn=(0,d.Z)((function(e){return{default:{padding:0,margin:0,fontWeight:500,color:"#9F9F9F","&$border":{borderBottomWidth:2}},h1:{fontSize:e.typography.h1.fontSize,fontWeight:e.typography.h1.fontWeight,lineHeight:e.typography.h1.lineHeight,"&$border":{borderBottomWidth:4}},h2:{fontSize:e.typography.h2.fontSize,lineHeight:e.typography.h2.lineHeight,fontWeight:e.typography.h2.fontWeight},h3:{fontSize:e.typography.h3.fontSize,lineHeight:e.typography.h3.lineHeight,fontWeight:e.typography.h3.fontWeight},h4:{fontSize:14,lineHeight:"16px"},h5:{fontSize:12,lineHeight:"14px"},h6:{fontSize:10,lineHeight:"12px",textTransform:"uppercase"},active:{color:"black"},chatTitle:{color:e.chat.header.textColor},panelTitle:{color:e.panel.header.textColor},border:{display:"inline-block",borderBottomWidth:2,borderBottomStyle:"solid",paddingBottom:8,marginBottom:12,borderBottomColor:"#9F9F9F","&$active":{borderBottomColor:"black"}},pageHeadlineMargins:m()({marginTop:46,marginBottom:20},e.breakpoints.down("sm"),{marginTop:130,marginBottom:40,"& h1":{marginTop:-4}}),uppercase:{textTransform:"uppercase"}}}),{name:"bambuserTitle"})((function(e){var t=e.type,n=void 0===t?"h1":t,r=e.panelTitle,o=void 0!==r&&r,c=e.active,s=void 0===c||c,u=e.chatTitle,d=void 0!==u&&u,p=e.border,m=e.uppercase,f=e.children,h=e.classes,g=e.className,v=a()(e,["type","panelTitle","active","chatTitle","border","uppercase","children","classes","className"]),E=n,S=["h1","h2","h3","h4","h5","h6"];if(!S.includes(n))throw Error("".concat(n," is invalid for Title, these are valid ").concat(S));return l.createElement(E,i()({className:ln()(h.default,h[n],s?h.active:null,o?h.panelTitle:null,d?h.chatTitle:null,p?h.border:null,m?h.uppercase:null,g)},v),f)})),Kn=(0,d.Z)({root:{marginBottom:14},textarea:{fontSize:14,padding:15,paddingBottom:14,border:"1px solid black",borderRadius:0,width:"100%",resize:"vertical","&:focus":{border:"1px solid #006CFF",outline:"none",caretColor:"#006CFF"}},textareaWithError:{border:"1px solid #E12147"},textareaWithAction:{paddingRight:64},actionWrapper:{position:"relative"},actionContainer:{position:"absolute",right:1,top:1,width:46,height:46,display:"flex"},iconContainer:{pointerEvents:"none",position:"absolute",right:15,top:15},error:{padding:0,margin:0,marginTop:7,fontSize:10,lineHeight:"10px",letterSpacing:"0.3px",color:"#E12147"}})((function(e){var t=e.type,n=void 0===t?"text":t,r=e.label,o=void 0===r?null:r,c=e.labelType,s=void 0===c?"h6":c,u=e.error,d=void 0===u?null:u,p=e.action,m=void 0===p?null:p,f=e.useLocalValue,h=void 0===f||f,g=e.iconRight,v=void 0===g?null:g,E=e.className,S=e.placeholder,T=void 0===S?null:S,b=e.classes,_=e.style,y=void 0===_?{}:_,C=a()(e,["type","label","labelType","error","action","useLocalValue","iconRight","className","placeholder","classes","style"]),x=(0,l.useState)(!1),O=Tn()(x,2),I=O[0],A=O[1],N=(0,l.useState)(null),w=Tn()(N,2),R=w[0],k=w[1],L=ln()(b.textarea,d&&b.textareaWithError,m&&b.textareaWithAction,E),D=C.value,P=C.onFocus,M=C.onChange,B=C.onBlur,j=l.createElement("textarea",i()({type:n,placeholder:T,className:L,style:y},C,{onFocus:function(e){"function"==typeof P&&P(e),k(e.target.value),A(!0)},onChange:function(e){"function"==typeof M&&M(e),k(e.target.value)},onBlur:function(e){"function"==typeof B&&B(e),k(null),A(!1)}}),I&&h?R:D);return l.createElement("div",{className:b.root},o&&l.createElement(_n,{type:s},o),!!m&&l.createElement("div",{className:b.actionWrapper},j,l.createElement("div",{className:b.actionContainer},m)),!!v&&l.createElement("div",{className:b.iconContainer},v),!m&&j,d&&l.createElement("p",{className:b.error},d))})),qn=(n(32023),n(319)),Qn=n.n(qn),Xn=function(e){var t=e.children,n=e.allowMultipleOpen,r=void 0!==n&&n,o=e.externalExpandedItems,c=void 0===o?[]:o,s=e.useLocalState,u=void 0===s||s,d=e.style,p=(e.nrOfAccordionItems,e.containerHeight),m=a()(e,["children","allowMultipleOpen","externalExpandedItems","useLocalState","style","nrOfAccordionItems","containerHeight"]),f=(0,l.useState)([]),h=Tn()(f,2),g=h[0],v=h[1],E=(0,l.useCallback)((function(e){if(u){var t=Qn()(g);r&&(t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e)),r||(t=t.includes(e)?[]:[e]),v(t)}}),[g,r,u]);return Array.isArray(t)||(t=[t]),l.createElement("div",i()({style:d},m),t.map((function(e,n){if(e){var r=u?n:e.key,i=u?g.includes(r):c.includes(r);return l.cloneElement(e,{key:r,index:r,onClick:E,open:i,nrOfAccordionItems:t.length,containerHeight:p})}})))},Jn=(n(15306),function(e){var t=e.text,n=e.classes;return l.createElement(_n,{type:"secondary",className:n.emptyText},t)});Jn.propTypes={text:s().string.isRequired};var $n=(0,d.Z)((function(){return{emptyText:{textAlign:"center",fontSize:"14px",margin:"30px 0 10px"}}}))(Jn),er=n(8991);function tr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tr(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rr={wrapper:{position:"relative"},header:{textAlign:"left",width:"calc(100% - 4px)",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",margin:2,paddingRight:4,borderBottom:"1px solid #eee"},numberOfItems:{fontSize:"12px",marginLeft:2},icon:{position:"absolute",top:20,alignSelf:"flex-end"},arrow:{height:"12px"},title:{color:"rgba(0, 0, 0, 1)",display:"flex",alignItems:"center",justifyContent:"flex-start",fontWeight:500,fontSize:"16px"},container:{overflow:"auto",width:"100%"},content:{width:"252px"},loaderWrapper:{margin:"30px auto 10px",alignItems:"center",display:"flex",justifyContent:"center"},loadingMoreWrapper:{margin:"20px auto"}},ir=function(e){var t=e.open,n=e.numberOfItems,r=e.title,i=e.icon,o=void 0===i?null:i,a=e.children,c=e.onClick,s=e.onClickExternal,u=e.index,d=e.defaultOpen,p=e.style,m=e.headerButtonStyle,f=e.headerStyle,h=e.headerHeight,g=void 0===h?60:h,v=e.preventClose,E=void 0!==v&&v,S=e.emptyStateText,T=e.isLoading,b=e.displayCount,_=void 0!==b&&b,y=e.nrOfAccordionItems,C=e.containerHeight,O=e.maxContent,I=void 0!==O&&O,A=e.onScrollEnd,N=e.isLoadingMore,w=e.contentStyle,R=void 0===w?{}:w,k=e.panelContainerStyle,L=void 0===k?{}:k,D=e.collapseFromBottom,P=void 0!==D&&D,M=(0,l.useState)(0),B=Tn()(M,2),j=B[0],U=B[1],G=(0,l.useState)(),F=Tn()(G,2),W=F[0],H=F[1],V=(0,l.useState)({}),z=Tn()(V,2),Z=z[0],Y=z[1],K=(0,l.useRef)(null),q=r.replace(/\s+/g,"");(0,l.useEffect)((function(){d&&c(u)}),[]);var Q=(0,l.useCallback)((function(e){null!==e&&Y({left:"".concat((null==e?void 0:e.getBoundingClientRect().width)+10,"px")})}),[]);(0,l.useEffect)((function(){K&&K.current&&setTimeout((function(){K&&K.current&&U(K.current.scrollHeight)}),0)}),[a]);var X={svg:{width:"14",height:"9",viewBox:"0 0 14 9"},path:{d:"M1 1L7 7L13 1",stroke:"black",strokeWidth:"2"}},J=C-y*g-15;J=J<0?g:J;var $={open:{opacity:1,visibility:"visible",height:I?"max-content":j>J?J:j,transitionEnd:{overflowY:"inherit"},transition:{opacity:{duration:.3},height:{duration:.3,ease:[.04,.62,.23,.98]}}},collapsed:{opacity:0,height:0,overflowY:"hidden",transitionEnd:{visibility:"hidden"},transition:{duration:.3}}},ee=nr(nr({},rr.header),{},{height:g},m),te=nr(nr({},rr.container),L),ne=l.createElement("button",{style:ee,onClick:function(){E||(c(u),"function"==typeof s&&s(u))},className:"non-component-button",id:"".concat(q,"-header"),"aria-controls":"".concat(q,"-panel"),"aria-expanded":t},l.createElement("div",{style:nr(nr({},rr.title),f),ref:Q},l.createElement("div",null,r),_&&void 0!==n&&l.createElement("div",{style:rr.numberOfItems},n)),!E&&l.createElement(x,{path:X.path,svg:X.svg,direction:t?"up":"down",style:rr.arrow}));return l.createElement("div",{style:nr(nr({},rr.wrapper),p)},(!t&&"open"!==W||!P)&&ne,o&&l.createElement("div",{style:nr(nr({},rr.icon),Z)},o),l.createElement(er.E.div,{role:"region",id:"".concat(q,"-panel"),"aria-labelledby":"".concat(q,"-header"),ref:K,style:te,onScroll:function(){if(K.current){var e=K.current,t=e.clientHeight,n=e.scrollHeight,r=e.scrollTop;Math.ceil(r)+t>=n&&"function"==typeof A&&A()}},initial:"collapsed",animate:t?"open":"collapsed",variants:$,onAnimationComplete:function(e){H(e)}},l.createElement("div",{style:nr(nr({},rr.content),R)},T?l.createElement("div",{style:rr.loaderWrapper},l.createElement(sn,{position:"relative",type:"small"})):S&&0===n?l.createElement($n,{text:S}):void 0,a,function(){if(N)return l.createElement("div",{style:nr(nr({},rr.loaderWrapper),rr.loadingMoreWrapper)},l.createElement(sn,{position:"relative",type:"small"}))}())),t&&"open"===W&&P&&ne)},or=n(44444),ar=n(28449);function lr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lr(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sr=ar.Zp.TOP,ur=ar.Zp.RIGHT,dr=ar.Zp.BOTTOM,pr=ar.Zp.LEFT,mr=function(e){var t=e.classes,n=e.text,r=e.placement,i=void 0===r?dr:r,o=e.space,a=void 0===o?10:o,c=e.children,s=e.disabled,u=void 0!==s&&s,d=e.delay,p=void 0===d?.3:d,m=e.width,f=void 0===m?150:m,h=e.styles,g=e.useMousePosition,v=void 0!==g&&g,E=(0,l.useState)(!1),S=Tn()(E,2),T=S[0],b=S[1],_=(0,l.useState)(!1),y=Tn()(_,2),C=y[0],x=y[1],O=(0,l.useState)({x:0,y:0,arrow:void 0}),I=Tn()(O,2),A=I[0],N=I[1],w=(0,l.useRef)();(0,l.useEffect)((function(){return document.addEventListener("scroll",R,!0),function(){return document.removeEventListener("scroll",R,!0)}}),[]),(0,l.useEffect)((function(){T&&!u&&n&&x(!0)}),[u,n,T]);var R=function(){x(!1)},k=function(){x(!1),b(!1)},L="rgba(62, 62, 62, 1)",D={top:"".concat(A.y,"px"),left:"".concat(A.x,"px"),backgroundColor:L,maxWidth:"".concat(f,"px")},P={borderWidth:"".concat(6,"px"),top:"".concat(A.y,"px"),left:"".concat(A.x,"px"),transform:A.arrow,borderColor:"transparent transparent ".concat(L," transparent")},M={show:{opacity:1,transition:{delay:p,duration:.2,type:"tween",ease:"easeInOut"}},hide:{opacity:0,transition:{delay:0,duration:0}}};return!n||(0,or.isMobileDevice)()||(0,or.isTabletDevice)()?c:l.createElement(l.Fragment,null,l.cloneElement(c,{onMouseEnter:function(e){w.current&&(N(v?{x:e.pageX-w.current.clientWidth/2,y:e.pageY-w.current.clientHeight-a,arrow:"rotate(180deg) translate(-".concat(w.current.clientWidth/2-6,"px, -").concat(w.current.clientHeight,"px)")}:function(e,t,n,r){var i=0,o={x:null,y:null,arrow:void 0,reset:function(e){this.x=e.x,this.y=e.y,this.arrow=e.arrow},restrictRect:function(e){this.x<e.l?this.x=e.l:this.x>e.r&&(this.x=e.r),this.y<e.t?this.y=e.t:this.y>e.b&&(this.y=e.b)}};return function n(a){i++;var l=function(e){return{current:e,negate:function(){return this.current===pr?ur:this.current===ur?pr:this.current===sr?dr:this.current===dr?sr:void 0},isHorizontal:function(){return this.current===pr||this.current===ur},isVertical:function(){return this.current===sr||this.current===dr}}}(a);o=function(e,t,n,r,i){var o=e.getBoundingClientRect();switch(r.current){case pr:return t.x=o.left-(n.offsetWidth+i),t.y=o.top+(e.offsetHeight-n.offsetHeight)/2,t.arrow="rotate(90deg) translate(".concat(n.clientHeight/2-6,"px, ").concat(-n.clientWidth,"px)"),t;case ur:return t.x=o.right+i,t.y=o.top+(e.offsetHeight-n.offsetHeight)/2,t.arrow="rotate(-90deg) translate(-".concat(n.clientHeight/2-6,"px, -").concat(12,"px)"),t;case sr:return t.x=o.left+(e.offsetWidth-n.offsetWidth)/2,t.y=o.top-(n.offsetHeight+i),t.arrow="rotate(180deg) translate(-".concat(n.clientWidth/2-6,"px, -").concat(n.clientHeight,"px)"),t;default:return t.x=o.left+(e.offsetWidth-n.offsetWidth)/2,t.y=o.bottom+i,t.arrow="translate(".concat(n.clientWidth/2-6,"px, -").concat(12,"px)"),t}}(e,o,t,l,r);var c={left:r+6,top:r+6,right:document.body.clientWidth-(t.clientWidth+r+6),bottom:window.innerHeight-(t.clientHeight+r+6)};if(i<3){if(l.isHorizontal()&&(o.x<c.left||o.x>c.right)||l.isVertical()&&(o.y<c.top||o.y>c.bottom)){var s=n(l.negate());o.reset(s)}o.restrictRect(c)}return o}(n)}(e.currentTarget,w.current,i,a)),u||x(!0))},onMouseLeave:function(){return k()},onBlur:function(){return k()},onFocus:function(){return x(!1)},onMouseOver:function(){return b(!0)},onMouseMove:v?function(e){N({x:e.pageX-w.current.clientWidth/2,y:e.pageY-w.current.clientHeight-10,arrow:"rotate(180deg) translate(-".concat(w.current.clientWidth/2-6,"px, -").concat(w.current.clientHeight,"px)")})}:null}),l.createElement(Lr,{type:"tooltip"},l.createElement(er.E.span,{className:t.container,animate:C&&T?"show":"hide",variants:M,ref:w,style:D},l.createElement("span",{className:t.arrow,style:P}),l.createElement(_n,{type:"secondary",className:t.text,style:cr({color:"rgba(255, 255, 255, 1)"},h)},n))))};mr.propTypes={children:s().object.isRequired,delay:s().number,disabled:s().bool,placement:s().oneOf([sr,ur,dr,pr]),space:s().number,text:s().string,width:s().number};var fr=(0,d.Z)((function(){return{container:{position:"fixed",fontSize:"12px",fontWeight:"700",color:"white",pointerEvents:"none",borderRadius:"4px",zIndex:99999,display:"inline-block",opacity:0},arrow:{content:'""',position:"fixed",zIndex:99999,borderStyle:"solid",transition:"border-color 0.3s"},text:{textAlign:"left",padding:"8px 12px",margin:0,fontSize:12,lineHeight:"18px",fontWeight:"700"}}}))(mr),hr=l.memo((function(e){var t=e.item,n=e.checked,r=e.onChange,o=e.disabled,c=void 0!==o&&o,s=e.className,u=e.classes,d=e.ariaLabel,p=e.overrideClasses,m=a()(e,["item","checked","onChange","disabled","className","classes","ariaLabel","overrideClasses"]),f=ln()(u.root,null==p?void 0:p.root,s,n&&u.rootChecked,n&&(null==p?void 0:p.rootChecked),c&&u.disabled,"non-component-button"),h=ln()(u.btn,null==p?void 0:p.btn,n&&u.btnChecked,n&&(null==p?void 0:p.btnChecked));return l.createElement("button",i()({className:f,role:"switch","aria-disabled":c,"aria-checked":n,"aria-label":d,onClick:function(){if("function"==typeof r&&!c)return r(t,!n)}},m),l.createElement("span",{className:h}))}));hr.propTypes={onChange:s().func.isRequired,ariaLabel:s().string.isRequired,checked:s().bool,item:s().oneOfType([s().string,s().number,s().object,s().array]).isRequired,overrideClasses:s().object};var gr=(0,d.Z)((function(e){return{root:{cursor:"pointer",minWidth:"40px",maxWidth:"40px",height:"24px",background:e.palette.gray[5],display:"block",borderRadius:"20px",transition:"background 0.2s ease-in 0s",position:"relative"},rootChecked:{background:e.palette.black.main},btn:{position:"absolute",top:"2px",left:"2px",minWidth:"20px",maxWidth:"20px",height:"20px",background:e.palette.secondary.main,borderRadius:"20px",transition:"transform 0.2s ease-in 0s",boxShadow:"0px 2px 2px 0px rgba(0, 0, 0, 0.28)"},btnChecked:{transform:"translateX(calc(100% - 4px))"},disabled:{cursor:"not-allowed"}}}))(hr),vr=function(e){var t=e.activeTab,n=e.onSelectTab,r=e.tabs,i=void 0===r?[]:r,o=e.classes,a=e.ariaLabel,c={color:(0,u.Z)().palette.text.hint};return l.createElement("div",{className:o.container,role:"tablist","aria-label":a},i.map((function(e,r){var i=e.id,a=e.label,s=e.count,u=e.ariaControls,d=t!==i;return l.createElement("div",{className:o.listItem,key:r,id:i,role:"tab","aria-selected":t===i,"aria-controls":u},l.createElement(Sr,{onClick:function(){return n(i)},className:o.content},l.createElement(_n,{className:o.label,style:d?c:{}},a),l.createElement(_n,{className:o.count,style:d?c:{}},s)))})))};vr.propTypes={tabs:s().arrayOf(s().shape({id:s().string.isRequired,label:s().string.isRequired,count:s().number})).isRequired,activeTab:s().string.isRequired,onSelectTab:s().func.isRequired,ariaLabel:s().string.isRequired},(0,d.Z)((function(){return{container:{display:"flex",justifyContent:"flex-start",flexDirection:"row",margin:"20px 0 10px",padding:"0 24px",width:"450px"},listItem:{listStyleType:"none",cursor:"pointer",marginRight:"24px"},content:{display:"flex",flexDirection:"row"},label:{fontWeight:500},count:{fontSize:"12px",margin:"4px 0 4px 2px",fontWeight:500}}}))(vr);var Er=l.forwardRef((function(e,t){var n=e.onClick,r=e.disabled,o=e.className,c=e.children,s=e.ariaLabel,u=e.tabIndex,d=e.cursorPointer,p=void 0===d||d,m=e.classes,f=a()(e,["onClick","disabled","className","children","ariaLabel","tabIndex","cursorPointer","classes"]),h=ln()(p&&m.cursorPointer,r&&m.disabled,o);return l.createElement("div",i()({className:h,ref:t,onClick:function(e){if(!r)return n(e)}},f,{role:"button",tabIndex:u||0,"aria-disabled":r,onKeyPress:function(e){if((0,un.v)(e)&&!r)return n(e)},"aria-label":s}),c)}));Er.propTypes={onClick:s().func.isRequired};var Sr=(0,d.Z)((function(){return{cursorPointer:{cursor:"pointer"},disabled:{pointerEvents:"none"}}}))(Er),Tr=(n(12419),n(34575)),br=n.n(Tr),_r=n(93913),yr=n.n(_r),Cr=n(81506),xr=n.n(Cr),Or=n(2205),Ir=n.n(Or),Ar=n(78585),Nr=n.n(Ar),wr=n(29754),Rr=n.n(wr),kr=n(73935);var Lr=function(e){Ir()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Rr()(t);if(n){var i=Rr()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Nr()(this,e)});function i(e){var t;return br()(this,i),t=r.call(this,e),m()(xr()(t),"getNode",(function(){return"tooltip"===t.props.type?document.getElementById("tooltip-root"):document.body})),t.el=document.createElement("div"),t}return yr()(i,[{key:"componentDidMount",value:function(){this.getNode().appendChild(this.el)}},{key:"componentWillUnmount",value:function(){this.getNode().removeChild(this.el)}},{key:"render",value:function(){var e=this.props.children;return kr.createPortal(e,this.el)}}]),i}(l.PureComponent);Lr.propTypes={children:s().object.isRequired,type:s().oneOf(["tooltip"]).isRequired};var Dr=n(20061),Pr={svg:{width:"14",height:"9",viewBox:"0 0 14 9"},path:{d:"M1 1L7 7L13 1",stroke:"black",strokeWidth:"2"}},Mr=function(e){var t=e.ariaLabel,n=e.classes,r=e.className,i=e.direction,o=e.onClick,a=e.visible,c=ln()(n.button,r,a&&n.show);return l.createElement(Sr,{className:c,onClick:o,ariaLabel:t,tabIndex:a?0:-1},l.createElement(x,{direction:i,translateY:1,path:Pr.path,svg:Pr.svg}))};Mr.propTypes={ariaLabel:s().string.isRequired,classes:s().object.isRequired,className:s().string,direction:s().oneOf(["left","right"]).isRequired,onClick:s().func.isRequired,visible:s().bool.isRequired};var Br=(0,Dr.Z)((function(){return{button:{opacity:0,pointerEvents:"none",background:"white",borderRadius:"100%",width:"24px",height:"24px",minWidth:"24px",minHeight:"24px",display:"flex",justifyContent:"center",alignItems:"center",userSelect:"none",cursor:"pointer",fontWeight:"bold",fontSize:"18px",margin:"4px",zIndex:2},show:{pointerEvents:"auto",transition:"opacity 0.2s",opacity:1}}}))(Mr),jr=function(e){var t=e.classes,n=e.visible,r=e.images,i=e.imageIndex,o=ln()(t.indicatorWrapper,n&&t.showPagination);return l.createElement("div",{className:o},r.map((function(e,n){return l.createElement("div",{key:e,className:ln()(t.indicator,n===i&&t.indicatorActive)})})))};jr.propTypes={classes:s().object.isRequired,images:s().array.isRequired,imageIndex:s().number.isRequired,visible:s().bool.isRequired};var Ur=(0,Dr.Z)((function(e){return{indicatorWrapper:{opacity:0,display:"flex",justifyContent:"center",margin:"12px 0 28px"},indicator:{background:e.palette.gray[20],height:"6px",width:"6px",margin:"0 4px",borderRadius:"8px"},indicatorActive:{background:e.palette.gray[80],width:"12px"},showPagination:{transition:"opacity 0.2s",opacity:1}}}))(jr),Gr=n(53869),Fr=n(79297);function Wr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wr(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vr=function(e){return{enter:function(t){return{x:t>0?e:-e,opacity:0}},center:function(){return{x:0,opacity:1}},exit:function(t){return{x:t<0?e:-e,opacity:0}}}},zr=l.forwardRef((function(e,t){var n=e.images,r=e.isLoading,i=e.showPaginationControls,o=void 0===i||i,a=e.showPaginationDots,c=void 0===a||a,s=e.containImageAnimation,u=void 0===s||s,d=e.paginationControlClassName,p=e.onIndexChange,m=e.size,f=void 0===m?320:m,h=e.classes,g=(0,l.useState)([0,0,0]),v=Tn()(g,2),E=Tn()(v[0],3),S=E[0],T=E[1],b=E[2],_=v[1],y=(0,An.bp)();(0,l.useEffect)((function(){_([0,0,0])}),[n]),(0,l.useEffect)((function(){"function"==typeof p&&p(b)}),[p,b]);var C=n.length>1;(0,l.useImperativeHandle)(t,(function(){return{slideToIndex:x}}));var x=function(e){e!==b&&O(0===e&&-b||(b>e?-(b-e):e),e)},O=function(e,t){_([S+e,e,0===t?0:t||(0,Fr.r)(0,n.length,S+e)])},I={max:{maxHeight:f,maxWidth:f},min:{minWidth:f,minHeight:f}},A={imgWrapper:Hr(Hr(Hr({},I.min),I.max),{},{position:u?"relative":"unset"}),img:Hr({},I.max),shimmer:Hr(Hr({},I.min),{},{justifyContent:"center"})};return l.createElement("div",{className:h.container},o&&l.createElement(Br,{className:d,onClick:function(){return O(-1)},ariaLabel:y.getText("IMAGE_CAROUSEL_PREVIOUS_IMAGE_BUTTON"),direction:"left",visible:C}),l.createElement("div",{className:h.wrapper},l.createElement("div",{className:h.imgWrapper,style:A.imgWrapper},r?l.createElement("div",{style:I.min}):l.createElement(Gr.M,{initial:!1,custom:T},l.createElement(er.E.div,{key:S,custom:T,variants:Vr(f),initial:"enter",animate:"center",exit:"exit",transition:{x:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2}},drag:C&&"x",dragConstraints:{left:0,right:0},dragElastic:1,className:h.img,onDragEnd:function(e,t){var n=t.offset,r=t.velocity,i=function(e,t){return Math.abs(e)*t}(n.x,r.x);i<-1e4?O(1):i>1e4&&O(-1)}},l.createElement(On.Z,{src:n[b],size:ar.Si.STAGE,shimmerStyle:A.shimmer,style:A.img})))),c&&l.createElement(Ur,{visible:C,images:n,imageIndex:b})),o&&l.createElement(Br,{className:d,onClick:function(){return O(1)},ariaLabel:y.getText("IMAGE_CAROUSEL_NEXT_IMAGE_BUTTON"),direction:"right",visible:C}))})),Zr={container:{flexDirection:"row",display:"flex",alignItems:"center",overflow:"hidden",justifyContent:"center"},wrapper:{overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",margin:"8px 15px 0 16px"},imgWrapper:{userSelect:"none",display:"flex",justifyContent:"center",alignItems:"center"},img:{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",maxHeight:"".concat(ar.Si.STAGE,"px"),maxWidth:"".concat(ar.Si.STAGE,"px")}};zr.propTypes={images:s().array.isRequired,isLoading:s().bool.isRequired,showPaginationControls:s().bool,paginationControlClassName:s().string,showPaginationDots:s().bool,containImageAnimation:s().bool,onIndexChange:s().func,size:s().number,classes:s().object.isRequired};var Yr=(0,Dr.Z)(Zr)(zr);(0,Dr.Z)((function(){return{root:{width:"100%",margin:"16px 0",borderTop:"1px solid #EDEDED"}}}))((function(e){var t=e.classes;return l.createElement("hr",{className:t.root})}))},43575:function(e,t,n){"use strict";n(69826),n(21249);var r=n(63038),i=n.n(r),o=n(67294),a=n(52543),l=n(94184),c=n.n(l),s=n(65659),u=n(46183);t.Z=(0,a.Z)((function(e){var t,n;return{container:{marginLeft:"15px",width:"250px",cursor:"default",position:"relative"},label:{lineHeight:"16px",letterSpacing:"0.08em",margin:"0 0 12px 0",float:null!=e&&e.rtl?"right":"unset"},inputContainer:{display:"flex",border:"solid 1px #E0E0E0",borderRadius:e.shape.input.borderRadius,width:"100%",justifyContent:"space-between",alignItems:"center",color:e.palette.text.primary,background:"".concat(null!==(t=e.palette)&&void 0!==t&&t.grey[0]?null===(n=e.palette)||void 0===n?void 0:n.grey[0]:"#fff"),fontSize:12,lineHeight:"16px",fontWeight:500,padding:12,flex:3,"&:focus":{caretColor:"#006CFF"}},optionContainer:{border:"1px solid #006CFF",marginBottom:"16px",position:"absolute",zIndex:99,backgroundColor:e.palette.background.default,minWidth:"inherit",width:"100%"},optionWrapper:{overflowY:"auto"},option:{fontSize:"12px",padding:"12px",lineHeight:"16px",fontWeight:500,color:e.palette.text.primary,width:"100%",textAlign:"left","&:hover":{background:e.palette.primary.main,color:e.palette.primary.contrastText}},input:{justifyContent:"center",alignItems:"center",cursor:"default",color:"#000",paddingRight:"12px",position:"relative",flex:0},disabled:{cursor:"not-allowed",opacity:.5}}}))((function(e){var t=e.label,n=e.labelType,r=void 0===n?"h5":n,a=e.list,l=e.keyValue,d=e.keyLabel,p=e.classes,m=e.onChange,f=e.defaultValue,h=e.placeholder,g=e.containerClassStyle,v=e.disabled,E=e.maxListHeight,S=(0,o.useState)(!1),T=i()(S,2),b=T[0],_=T[1],y=(0,o.useRef)(),C=a.find((function(e){return(0,s.get)(e,l,null)===f}));(0,o.useEffect)((function(){var e=function(e){b&&!y.current.contains(e.target)&&_(!1)};return document.addEventListener("click",e),function(){return document.removeEventListener("click",e)}}),[b]);var x={svg:{width:"14",height:"9",viewBox:"0 0 14 9"},path:{d:"M1 1L7 7L13 1",stroke:b?"#006cff":"black",strokeWidth:"2"}};return o.createElement("div",{className:c()(p.container,g)},t&&o.createElement(u.xv,{className:p.label,type:r,uppercase:!0}," ",t),o.createElement(u.L9,{className:p.inputContainer,onClick:function(){v||_(!b)},ref:y},(0,s.get)(C,d,"")||h,!v&&o.createElement(u.EU,{translateY:0,svg:x.svg,path:x.path,direction:b?"up":"down"})),b&&o.createElement("div",{className:p.optionContainer},o.createElement("div",{className:p.optionWrapper,style:{maxHeight:E},role:"listbox"},a.map((function(e,t){var n=(0,s.get)(e,l,null),r=(0,s.get)(e,d,null);return o.createElement(u.L9,{className:"".concat(p.option),key:n,onClick:function(){return m(n),void _(!1)},ariaLabel:r,onBlur:function(){a.length===t+1&&_(!1)}},r)})))))}))},71792:function(e,t,n){"use strict";n.d(t,{p:function(){return T}}),n(82526),n(92222),n(57327),n(21249),n(38880),n(49337),n(47941),n(15306),n(54747);var r=n(59713),i=n.n(r),o=n(67294),a=n(73083),l=n(13457),c=n(52543),s=n(65659),u=n(64305),d=n(57306);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f,h={red:{main:"rgb(163, 0, 42)",shade:"rgb(243, 0, 55)",contrastText:"#000"},blue:{main:"#006CFF",shade:"#0918A1",contrastText:"#000"},darkBlue:{main:"#002643",shade:"#0918A1",contrastText:"#FFF"},purple:{main:"#7D58EE",shade:"#6B00DE",contrastText:"#000"},green:{main:"rgb(0, 127, 127)",shade:"#0e5a5a",contrastText:"#000"},orange:{main:"#FFAB00",shade:"#F68928",contrastText:"#000"},black:{main:"#000",shade:"#000",contrastText:"#fff",hover:"rgba(0, 0, 0, 0.85)"},white:{main:"#fff",shade:"#fff",contrastText:"#000",hover:"rgba(0, 0, 0, 0.15)"},gray:{100:"#000",80:"#2a2a2a",60:"#747474",40:"#9f9f9f",20:"#c4c4c4",10:"#ECECEC",5:"#f1f1f1",0:"#f8f8f8"}},g={palette:m({divider:h.gray[0],background:{default:h.white.main},primary:m(m({},h.black),{},{borderColor:"transparent",hover:h.gray[80],hoverText:h.black.contrastText,hoverBorderColor:"transparent"}),secondary:m(m({},h.white),{},{hover:h.white.contrastText,hoverText:h.white.main,hoverBorderColor:"transparent"}),error:h.red,info:{main:h.gray[80],contrastText:h.white.main},success:h.green,warning:h.orange,text:{primary:h.black.main,secondary:h.gray[60],disabled:h.gray[60],hint:h.gray[60]}},h),initiation:{zIndex:999,position:"left",borderRadius:"8px",sideDock:{backgroundColor:h.black.main,textColor:h.white.main,button:{backgroundColor:h.white.main,textColor:h.black.main}},avatar:{backgroundColor:h.white.main,textColor:h.black.main,avatarBorderColor:h.white.main,cameraBackgroundColor:h.black.main,cameraColor:h.white.main,statusColor:h.green.main,button:{backgroundColor:h.black.main,textColor:h.white.main}}},typography:{useNextVariants:!0,h1:{fontWeight:500,fontSize:44,lineHeight:"64%"},h2:{fontWeight:500,fontSize:18,lineHeight:"24px"},h3:{fontWeight:500,fontSize:16,lineHeight:"19px"},body1:{fontWeight:400,fontSize:14,lineHeight:"20px"},button:{fontFamily:"inherit",fontWeight:600,fontSize:"16px",lineHeight:"14px",textTransform:"none"}},shape:{borderRadius:"8px",button:{borderRadius:0},checkbox:{borderRadius:"4px"},input:{borderRadius:"4px"}},popup:{primary:{main:h.black.main,contrastText:h.black.contrastText,borderColor:"transparent",hover:h.gray[80],hoverText:h.black.contrastText,hoverBorderColor:"transparent"},secondary:{main:h.white.main,contrastText:h.white.contrastText,borderColor:h.white.contrastText,hover:h.black.main,hoverText:h.black.contrastText,hoverBorderColor:"transparent"},header:{backgroundColor:h.gray[80],text:h.white.main,textTransform:"none",weight:700},leaveQueueButton:{text:h.red.shade},backgroundColor:h.white.main,textColor:h.black.main,borderRadius:"8px",settingsButton:{main:h.white.main,contrastText:h.gray[60],iconColor:h.black.main,borderColor:h.gray[20],hoverBackground:h.gray[0]},profilePictureRadius:"4px",typography:{greetingTitleTextTransform:"none",meetingDateTextTransform:"capitalize",agentNameTextTransform:"none",queueTimeLeftTextTransform:"none",queueLeaveTextTransform:"none",greetingTitle:{weight:700,fontSize:"44px",lineHeight:"46px",mobile:{weight:700,fontSize:"56px",lineHeight:"46px"}}},minimizedQueue:{backgroundColor:h.white.main,contrastText:h.white.contrastText,statusColor:h.green.main,statusOutlineRGB:"196, 196, 196"},thankYou:{blurred:!0,backgroundColor:h.gray[80],textColor:h.white.main,feedbackButton:{hover:"rgba(248, 248, 248, 0.32)",main:"rgba(248, 248, 248, 0.12)"}}},panel:{header:{backgroundColor:h.white.main,textColor:h.black.main,borderBottomColor:"rgba(196, 196, 196, 0.5)"},backgroundColor:h.white.main,textColor:h.black.main},chat:{header:{backgroundColor:h.black.main,textColor:h.white.main},message:{local:{backgroundColor:h.gray[80],textColor:h.white.main},remote:{backgroundColor:h.gray[10],textColor:h.black.main},borderRadius:"5px"}},sidebar:{desktop:{width:254,padding:0},mobile:{width:271}},boxShadow:{initial:"0px 0px 24px rgba(0, 0, 0, 0.06), 0px 0px 6px rgba(0, 0, 0, 0.04), 0px 0px 1px rgba(0, 0, 0, 0.04)",hover:"0px 24px 32px rgba(0, 0, 0, 0.04), 0px 16px 24px rgba(0, 0, 0, 0.04), 0px 4px 8px rgba(0, 0, 0, 0.04), 0px 0px 1px rgba(0, 0, 0, 0.04)"},overrides:{bambuserButton:{primary:{borderRadius:"8px"},secondary:{backgroundColor:"transparent",border:"1px solid ".concat(h.black.main),borderRadius:"8px"},root:{borderRadius:"8px"}}}},v='\n@font-face {\n  font-family: "Haas Grot Display";\n  src:\n    url(\''.concat("/assets/default/fonts/NeueHaasGrotDisp-65Medium-Web.woff2","') format('woff2'),\n    url('").concat("/assets/default/fonts/NeueHaasGrotDisp-65Medium-Web.woff","') format('woff');\n  font-weight: normal;\n  font-style: normal;\n  font-display: swap;\n}\n@font-face {\n    font-family: 'Haas Grot';\n    src:\n      url('").concat("/assets/default/fonts/NeueHaasGrotText-55Roman-Web.woff2","') format('woff2'),\n      url('").concat("/assets/default/fonts/NeueHaasGrotText-55Roman-Web.woff","') format('woff');\n    font-weight: normal;\n    font-style: normal;\n    font-display: swap;\n}\n@font-face {\n    font-family: 'Haas Grot';\n    src:\n      url('").concat("/assets/default/fonts/NeueHaasGrotText-65Medium-Web.woff2","') format('woff2'),\n      url('").concat("/assets/default/fonts/NeueHaasGrotText-65Medium-Web.woff","') format('woff');\n    font-weight: 500;\n    font-style: normal;\n    font-display: swap;\n}\n@font-face {\n    font-family: 'Haas Grot';\n    src:\n      url('").concat("/assets/default/fonts/NeueHaasGrotText-75Bold-Web.woff2","') format('woff2'),\n      url('").concat("/assets/default/fonts/NeueHaasGrotText-75Bold-Web.woff","') format('woff');\n    font-weight: 700;\n    font-style: normal;\n    font-display: swap;\n}\nbody, button {\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  font-family: 'Haas Grot', Helvetica, Arial, Verdana, Tahoma, sans-serif;\n}\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  font-family: \"Haas Grot Display\", Helvetica, Arial, Verdana, Tahoma, sans-serif;\n}"),E=g,S=!1,T=function(e){if(E=g,null!=e&&e.overlayWidget){var t=function(e){var t,n,r,i,o=(0,s.cloneDeep)(g);e&&e.hasOwnProperty("popup")&&delete o.overrides;var a=e||{}||o;(E=(0,s.merge)(o,a)).initiation.position=(null===(t=E)||void 0===t||null===(n=t.overlayWidget)||void 0===n||null===(r=n.position)||void 0===r?void 0:r.position)||E.initiation.position,E.popup.thankYou.blurred=!1;var l=document.querySelector("style[id=theme]");l||((l=document.createElement("style")).setAttribute("type","text/css"),l.setAttribute("id","theme"),document.head.appendChild(l));var c,u,d,p,m=(u=(c=((null==e||null===(i=e.general)||void 0===i?void 0:i.fonts)||{}).fonts||{}).manageFonts,d=c.primaryFont,p=c.secondaryFont,(u||[]).map((function(e){return"\n    @font-face {\n      font-family: ".concat(e.name,";\n      src:\n        url('").concat(e.storageUrl,"') format('").concat(e.format,"');\n      font-weight: ").concat(e.weight,";\n      font-style: ").concat(e.style,";\n      font-display: swap;\n    }")})).join("\n")+"\n  body, button {\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    font-family: ".concat(p,", Helvetica, Arial, Verdana, Tahoma, sans-serif;\n  }\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6 {\n    font-family: ").concat(d,", Helvetica, Arial, Verdana, Tahoma, sans-serif;\n  }")),f=document.querySelector("style[id=font]");f||((f=document.createElement("style")).setAttribute("type","text/css"),f.setAttribute("id","font"),document.head.appendChild(f)),"textContent"in f?f.textContent=m:f.styleSheet.cssText=m;var h="\n    :root {\n\n      --initiation-arrow-left: ".concat("right"===E.overlayWidget.position.position?"auto":"18%",";\n      --initiation-arrow-right: ").concat("right"===E.overlayWidget.position.position?"18%":"auto",";\n      --initiation-arrow-transform: ").concat("right"===E.overlayWidget.position.position?"scaleX(-1)":"",";\n      --initiation-dock-transform-origin: ").concat("right"===E.overlayWidget.position.position?"top left":"top right",";\n      --initiation-dock-transform: ").concat("right"===E.overlayWidget.position.position?"rotate(90deg) translateY(-355%)":"rotate(270deg) translateY(-100%)",";\n      --initiation-border-radius: ").concat(E.overlayWidget.avatar.popup.borderRadius,";\n      --initiation-side-dock-bg-color: ").concat(E.overlayWidget.sideDock.backgroundColor,";\n      --initiation-side-dock-text-color: ").concat(E.overlayWidget.sideDock.cameraColor,";\n      --initiation-side-dock-popup-bg-color: ").concat(E.overlayWidget.sideDock.popup.backgroundColor,";\n      --initiation-side-dock-popup-border-radius: ").concat(E.overlayWidget.sideDock.popup.borderRadius,";\n      --initiation-side-dock-popup-text-color: ").concat(E.overlayWidget.sideDock.popup.textColor,";\n      --initiation-side-dock-border-radius: ").concat(E.overlayWidget.sideDock.borderRadius,";\n      --initiation-avatar-bg-color: ").concat(E.overlayWidget.avatar.popup.backgroundColor,";\n      --initiation-avatar-text-color: ").concat(E.overlayWidget.avatar.popup.textColor,";\n      --initiation-avatar-border-color: ").concat(E.overlayWidget.avatar.borderColor,";\n      --initiation-avatar-cam-bg-color: ").concat(E.overlayWidget.avatar.cameraBackgroundColor,";\n      --initiation-avatar-status-color: ").concat(E.overlayWidget.avatar.statusColorActive,";\n      --initiation-avatar-button-bg-color: ").concat(E.overlayWidget.avatar.popup.buttonBackgroundColor,";\n      --initiation-avatar-button-text-color: ").concat(E.overlayWidget.avatar.popup.buttonTextColor,";\n\n  }");return"textContent"in l?l.textContent=h:l.styleSheet.cssText=h,E}(e);f=(0,a.Z)(t)}else E=function(e){var t,n,r=(0,s.cloneDeep)(g);e&&e.hasOwnProperty("styles")&&delete r.overrides;var i=(e||{}).styles||r,o=((e||{}).fonts||v).replace(/url\(('?)\/assets\//g,"url($1".concat(u.Z.assetsBaseUrl,"/"));E=(0,s.merge)(r,i);var a=document.querySelector("style[id=font]");a||((a=document.createElement("style")).setAttribute("type","text/css"),a.setAttribute("id","font"),document.head.appendChild(a)),"textContent"in a?a.textContent=o:a.styleSheet.cssText=o;var l=document.querySelector("style[id=theme]");function c(e,t,n){var r=(0,s.get)(t,n);return r?"".concat(e,": ").concat(r,";"):""}l||((l=document.createElement("style")).setAttribute("type","text/css"),l.setAttribute("id","theme"),document.head.appendChild(l)),null!==(t=E.popup)&&void 0!==t&&null!==(n=t.startScreen)&&void 0!==n&&n.backgroundImage&&(E.popup.header={backgroundImage:E.popup.startScreen.backgroundImage});var d="\n    :root {\n\n      --sale-color: ".concat((0,s.get)(E,"overrides.price.discount.color",E.palette.red.main),";\n      ").concat(c(" --popup-text-color",E,"popup.textColor"),"\n      ").concat(c("--popup-bg-color",E,"popup.backgroundColor"),"\n      ").concat(c("--item-count-bg-color",E,"actionButtons.itemCount.backgroundColor"),"\n      ").concat(c("--item-count-text-color",E,"actionButtons.itemCount.text"),"\n      ").concat(c("--chat-count-bg-color",E,"actionButtons.chatCount.backgroundColor"),"\n      ").concat(c("--chat-count-text-color",E,"actionButtons.chatCount.text"),"\n      ").concat(c("--input-tooltip-bg",E,"actionButtons.inputTooltip.backgroundColor"),"\n      ").concat(c("--input-tooltip-contrastText",E,"actionButtons.inputTooltip.contrastText"),"\n\n      --initiation-arrow-left: ").concat("right"===E.initiation.position?"auto":"18%",";\n      --initiation-arrow-right: ").concat("right"===E.initiation.position?"18%":"auto",";\n      --initiation-arrow-transform: ").concat("right"===E.initiation.position?"scaleX(-1)":"",";\n      --initiation-dock-transform-origin: ").concat("right"===E.initiation.position?"top left":"top right",";\n      --initiation-dock-transform: ").concat("right"===E.initiation.position?"rotate(90deg) translateY(-355%)":"rotate(270deg) translateY(-100%)",";\n      --initiation-border-radius: ").concat(E.initiation.borderRadius,";\n      --initiation-side-dock-bg-color: ").concat(E.initiation.sideDock.backgroundColor,";\n      --initiation-side-dock-text-color: ").concat(E.initiation.sideDock.textColor,";\n      --initiation-side-dock-popup-border-radius: ").concat(E.initiation.borderRadius,";\n      --initiation-side-dock-border-radius: ").concat(E.initiation.borderRadius,";\n      --initiation-avatar-bg-color: ").concat(E.initiation.avatar.backgroundColor,";\n      --initiation-avatar-text-color: ").concat(E.initiation.avatar.textColor,";\n      --initiation-avatar-border-color: ").concat(E.initiation.avatar.avatarBorderColor,";\n      --initiation-avatar-cam-bg-color: ").concat(E.initiation.avatar.cameraBackgroundColor,";\n      --initiation-avatar-status-color: ").concat(E.initiation.avatar.statusColor,";\n      --initiation-avatar-button-bg-color: ").concat(E.initiation.avatar.button.backgroundColor,";\n      --initiation-avatar-button-text-color: ").concat(E.initiation.avatar.button.textColor,";\n       \n\n      /* Panels */\n      --panel-border-radius: ").concat(E.shape.borderRadius,";\n      --panel-bg-color: ").concat(E.panel.backgroundColor,";\n      --panel-text-color:  ").concat(E.panel.textColor,";\n      --panel-header-bg:  ").concat(E.panel.header.backgroundColor,";\n      --panel-header-border-color: ").concat(E.panel.header.borderBottomColor,";\n\n      /* Chat */\n      --chat-header-bg:  ").concat(E.chat.header.backgroundColor,";\n      --message-local-bg: ").concat(E.chat.message.local.backgroundColor,";\n      --message-local-color: ").concat(E.chat.message.local.textColor,";\n      --message-remote-bg: ").concat(E.chat.message.remote.backgroundColor,";\n      --message-remote-color: ").concat(E.chat.message.remote.textColor,";\n      --message-border-radius: ").concat(E.chat.message.borderRadius,";\n      ").concat(c("--message-input-border-radius",E,"chat.input.borderRadius"),"\n      ").concat(c("--message-send-btn-border-radius",E,"chat.send.borderRadius"),"\n\n      /* Dialogs */\n      --dialog-border-radius: ").concat(E.shape.borderRadius,";\n      ").concat(c("--dialog-bg-color",E.overrides,"dialog.backgroundColor"),"\n      ").concat(c("--dialog-color",E.overrides,"dialog.color"),"\n  }");return"textContent"in l?l.textContent=d:l.styleSheet.cssText=d,E}(e),f=(0,a.Z)(E);S=!!e};T(window.theme),t.Z=(0,c.Z)({"@global":{body:{fontWeight:300,fontSize:10},textarea:{}}})((function(e){var t=(0,d.bp)(),n=e.children,r=e.allowCustomerTheme,i=void 0===r||r;if(window.theme){var a=S&&!i;!S&&i?T(window.theme):a&&T(null)}var c=t.isRtlLanguage();return c&&(f=m(m({},f),{},{rtl:c})),o.createElement(l.Z,{theme:f},n)}))},85126:function(e,t,n){"use strict";var r=n(87537),i=n.n(r),o=n(23645),a=n.n(o)()(i());a.push([e.id,".bambuser-table tr:nth-child(odd) {\n  background-color: #f8f8f8;\n}\n\n.bambuser-table tr:nth-child(even) {\n  background-color: white;\n}\n\n.bambuser-table tr:nth-child(even) button {\n  background-color: transparent;\n}\n\n.bambuser-table tr:nth-child(even) button:hover {\n  background-color: rgba(0, 0, 0, 0.09);\n}\n","",{version:3,sources:["webpack://./source/common/view/ui/table/table.css"],names:[],mappings:"AAAA;EACE,yBAAyB;AAC3B;;AAEA;EACE,uBAAuB;AACzB;;AAEA;EACE,6BAA6B;AAC/B;;AAEA;EACE,qCAAqC;AACvC",sourcesContent:[".bambuser-table tr:nth-child(odd) {\n  background-color: #f8f8f8;\n}\n\n.bambuser-table tr:nth-child(even) {\n  background-color: white;\n}\n\n.bambuser-table tr:nth-child(even) button {\n  background-color: transparent;\n}\n\n.bambuser-table tr:nth-child(even) button:hover {\n  background-color: rgba(0, 0, 0, 0.09);\n}\n"],sourceRoot:""}]),t.Z=a},1753:function(){},46700:function(e,t,n){var r={"./af":42786,"./af.js":42786,"./ar":30867,"./ar-dz":14130,"./ar-dz.js":14130,"./ar-kw":96135,"./ar-kw.js":96135,"./ar-ly":56440,"./ar-ly.js":56440,"./ar-ma":47702,"./ar-ma.js":47702,"./ar-sa":16040,"./ar-sa.js":16040,"./ar-tn":37100,"./ar-tn.js":37100,"./ar.js":30867,"./az":31083,"./az.js":31083,"./be":9808,"./be.js":9808,"./bg":68338,"./bg.js":68338,"./bm":67438,"./bm.js":67438,"./bn":8905,"./bn-bd":76225,"./bn-bd.js":76225,"./bn.js":8905,"./bo":11560,"./bo.js":11560,"./br":1278,"./br.js":1278,"./bs":80622,"./bs.js":80622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":50877,"./cv.js":50877,"./cy":47373,"./cy.js":47373,"./da":24780,"./da.js":24780,"./de":59740,"./de-at":60217,"./de-at.js":60217,"./de-ch":60894,"./de-ch.js":60894,"./de.js":59740,"./dv":5300,"./dv.js":5300,"./el":50837,"./el.js":50837,"./en-au":78348,"./en-au.js":78348,"./en-ca":77925,"./en-ca.js":77925,"./en-gb":22243,"./en-gb.js":22243,"./en-ie":46436,"./en-ie.js":46436,"./en-il":47207,"./en-il.js":47207,"./en-in":44175,"./en-in.js":44175,"./en-nz":76319,"./en-nz.js":76319,"./en-sg":31662,"./en-sg.js":31662,"./eo":92915,"./eo.js":92915,"./es":55655,"./es-do":55251,"./es-do.js":55251,"./es-mx":96112,"./es-mx.js":96112,"./es-us":71146,"./es-us.js":71146,"./es.js":55655,"./et":5603,"./et.js":5603,"./eu":77763,"./eu.js":77763,"./fa":76959,"./fa.js":76959,"./fi":11897,"./fi.js":11897,"./fil":42549,"./fil.js":42549,"./fo":94694,"./fo.js":94694,"./fr":94470,"./fr-ca":63049,"./fr-ca.js":63049,"./fr-ch":52330,"./fr-ch.js":52330,"./fr.js":94470,"./fy":5044,"./fy.js":5044,"./ga":29295,"./ga.js":29295,"./gd":2101,"./gd.js":2101,"./gl":38794,"./gl.js":38794,"./gom-deva":27884,"./gom-deva.js":27884,"./gom-latn":23168,"./gom-latn.js":23168,"./gu":95349,"./gu.js":95349,"./he":24206,"./he.js":24206,"./hi":30094,"./hi.js":30094,"./hr":30316,"./hr.js":30316,"./hu":22138,"./hu.js":22138,"./hy-am":11423,"./hy-am.js":11423,"./id":29218,"./id.js":29218,"./is":90135,"./is.js":90135,"./it":90626,"./it-ch":10150,"./it-ch.js":10150,"./it.js":90626,"./ja":39183,"./ja.js":39183,"./jv":24286,"./jv.js":24286,"./ka":12105,"./ka.js":12105,"./kk":47772,"./kk.js":47772,"./km":18758,"./km.js":18758,"./kn":79282,"./kn.js":79282,"./ko":33730,"./ko.js":33730,"./ku":1408,"./ku.js":1408,"./ky":33291,"./ky.js":33291,"./lb":36841,"./lb.js":36841,"./lo":55466,"./lo.js":55466,"./lt":57010,"./lt.js":57010,"./lv":37595,"./lv.js":37595,"./me":39861,"./me.js":39861,"./mi":35493,"./mi.js":35493,"./mk":95966,"./mk.js":95966,"./ml":87341,"./ml.js":87341,"./mn":5115,"./mn.js":5115,"./mr":10370,"./mr.js":10370,"./ms":9847,"./ms-my":41237,"./ms-my.js":41237,"./ms.js":9847,"./mt":72126,"./mt.js":72126,"./my":56165,"./my.js":56165,"./nb":64924,"./nb.js":64924,"./ne":16744,"./ne.js":16744,"./nl":93901,"./nl-be":59814,"./nl-be.js":59814,"./nl.js":93901,"./nn":83877,"./nn.js":83877,"./oc-lnc":92135,"./oc-lnc.js":92135,"./pa-in":15858,"./pa-in.js":15858,"./pl":64495,"./pl.js":64495,"./pt":89520,"./pt-br":57971,"./pt-br.js":57971,"./pt.js":89520,"./ro":96459,"./ro.js":96459,"./ru":21793,"./ru.js":21793,"./sd":40950,"./sd.js":40950,"./se":10490,"./se.js":10490,"./si":90124,"./si.js":90124,"./sk":64249,"./sk.js":64249,"./sl":14985,"./sl.js":14985,"./sq":51104,"./sq.js":51104,"./sr":49131,"./sr-cyrl":79915,"./sr-cyrl.js":79915,"./sr.js":49131,"./ss":85893,"./ss.js":85893,"./sv":98760,"./sv.js":98760,"./sw":91172,"./sw.js":91172,"./ta":27333,"./ta.js":27333,"./te":23110,"./te.js":23110,"./tet":52095,"./tet.js":52095,"./tg":27321,"./tg.js":27321,"./th":9041,"./th.js":9041,"./tk":19005,"./tk.js":19005,"./tl-ph":75768,"./tl-ph.js":75768,"./tlh":89444,"./tlh.js":89444,"./tr":72397,"./tr.js":72397,"./tzl":28254,"./tzl.js":28254,"./tzm":51106,"./tzm-latn":30699,"./tzm-latn.js":30699,"./tzm.js":51106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":67691,"./uk.js":67691,"./ur":13795,"./ur.js":13795,"./uz":6791,"./uz-latn":60588,"./uz-latn.js":60588,"./uz.js":6791,"./vi":65666,"./vi.js":65666,"./x-pseudo":14378,"./x-pseudo.js":14378,"./yo":75805,"./yo.js":75805,"./zh-cn":83839,"./zh-cn.js":83839,"./zh-hk":55726,"./zh-hk.js":55726,"./zh-mo":99807,"./zh-mo.js":99807,"./zh-tw":74152,"./zh-tw.js":74152};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=46700},16494:function(e,t,n){var r=n(67294);function i(e){return r.createElement("svg",e,[r.createElement("rect",{x:"1.5",width:"2",height:"24",fill:"#F8F8F8",key:0}),r.createElement("rect",{x:"11.5",width:"2",height:"24",fill:"#F8F8F8",key:1}),r.createElement("rect",{x:"21.5",width:"2",height:"24",fill:"#F8F8F8",key:2}),r.createElement("rect",{x:"31.5",width:"2",height:"24",fill:"#F8F8F8",key:3}),r.createElement("rect",{x:"41.5",width:"2",height:"24",fill:"#F8F8F8",key:4}),r.createElement("rect",{x:"51.5",width:"2",height:"24",fill:"#F8F8F8",key:5})])}i.defaultProps={width:"55",height:"24",viewBox:"0 0 55 24",fill:"none"},e.exports=i,i.default=i},63932:function(e,t,n){var r=n(67294);function i(e){return r.createElement("svg",e,[r.createElement("title",{key:0},"Group"),r.createElement("desc",{key:1},"Created with Sketch."),r.createElement("defs",{key:2}),r.createElement("g",{id:"Icon-lib",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:3},r.createElement("g",{id:"Artboard",transform:"translate(-582.000000, -968.000000)",fill:"#FFFFFF",fillRule:"nonzero"},r.createElement("g",{id:"lineart",transform:"translate(31.000000, 18.000000)"},r.createElement("g",{id:"Group",transform:"translate(551.000000, 950.000000)"},[r.createElement("path",{d:"M22.875,1 L18,1 C18,0.447 17.553,0 17,0 C16.447,0 16,0.447 16,1 L8,1 C8,0.447 7.553,0 7,0 C6.447,0 6,0.447 6,1 L1.125,1 C0.504,1 0,1.504 0,2.125 L0,22.875 C0,23.496 0.504,24 1.125,24 L22.875,24 C23.496,24 24,23.496 24,22.875 L24,2.125 C24,1.504 23.496,1 22.875,1 Z M22,22 L2,22 L2,8 L22,8 L22,22 Z M22,7 L2,7 L2,3 L6,3 L6,4 C6,4.553 6.447,5 7,5 C7.553,5 8,4.553 8,4 L8,3 L16,3 L16,4 C16,4.553 16.447,5 17,5 C17.553,5 18,4.553 18,4 L18,3 L22,3 L22,7 Z",id:"Shape",key:0}),r.createElement("path",{d:"M8,10 L4,10 L4,14 L8,14 L8,10 Z M7,13 L5,13 L5,11 L7,11 L7,13 Z",id:"Shape",key:1}),r.createElement("path",{d:"M14,10 L10,10 L10,14 L14,14 L14,10 Z M13,13 L11,13 L11,11 L13,11 L13,13 Z",id:"Shape",key:2}),r.createElement("path",{d:"M20,10 L16,10 L16,14 L20,14 L20,10 Z M19,13 L17,13 L17,11 L19,11 L19,13 Z",id:"Shape",key:3}),r.createElement("path",{d:"M8,16 L4,16 L4,20 L8,20 L8,16 Z M7,19 L5,19 L5,17 L7,17 L7,19 Z",id:"Shape",key:4}),r.createElement("path",{d:"M14,16 L10,16 L10,20 L14,20 L14,16 Z M13,19 L11,19 L11,17 L13,17 L13,19 Z",id:"Shape",key:5}),r.createElement("path",{d:"M20,16 L16,16 L16,20 L20,20 L20,16 Z M19,19 L17,19 L17,17 L19,17 L19,19 Z",id:"Shape",key:6})]))))])}i.defaultProps={width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1"},e.exports=i,i.default=i},26212:function(e,t,n){var r=n(67294);function i(e){return r.createElement("svg",e,[r.createElement("title",{key:0},"Group"),r.createElement("desc",{key:1},"Created with Sketch."),r.createElement("defs",{key:2}),r.createElement("g",{id:"Icon-lib",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:3},r.createElement("g",{id:"Artboard",transform:"translate(-832.000000, -968.000000)",fill:"#FFFFFF",fillRule:"nonzero"},r.createElement("g",{id:"lineart",transform:"translate(31.000000, 18.000000)"},r.createElement("g",{id:"Group",transform:"translate(801.000000, 950.000000)"},[r.createElement("path",{d:"M22.875,1 L18,1 C18,0.447 17.553,0 17,0 C16.447,0 16,0.447 16,1 L8,1 C8,0.447 7.553,0 7,0 C6.447,0 6,0.447 6,1 L1.125,1 C0.504,1 0,1.504 0,2.125 L0,22.875 C0,23.496 0.504,24 1.125,24 L22.875,24 C23.496,24 24,23.496 24,22.875 L24,2.125 C24,1.504 23.496,1 22.875,1 Z M22,22 L2,22 L2,8 L22,8 L22,22 Z M22,7 L2,7 L2,3 L6,3 L6,4 C6,4.553 6.447,5 7,5 C7.553,5 8,4.553 8,4 L8,3 L16,3 L16,4 C16,4.553 16.447,5 17,5 C17.553,5 18,4.553 18,4 L18,3 L22,3 L22,7 Z",id:"Shape",key:0}),r.createElement("path",{d:"M8.465,18.535 C8.856,18.926 9.488,18.926 9.879,18.535 L12,16.414 L14.121,18.535 C14.512,18.926 15.144,18.926 15.535,18.535 C15.926,18.144 15.927,17.512 15.535,17.121 L13.414,15 L15.535,12.879 C15.927,12.488 15.927,11.856 15.535,11.465 C15.144,11.074 14.512,11.074 14.121,11.465 L12,13.586 L9.879,11.465 C9.488,11.074 8.856,11.074 8.465,11.465 C8.074,11.856 8.073,12.488 8.465,12.879 L10.586,15 L8.465,17.121 C8.073,17.512 8.073,18.145 8.465,18.535 Z",id:"Shape",key:1})]))))])}i.defaultProps={width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1"},e.exports=i,i.default=i},94363:function(e,t,n){var r=n(67294);function i(e){return r.createElement("svg",e,[r.createElement("title",{key:0},"Group"),r.createElement("desc",{key:1},"Created with Sketch."),r.createElement("defs",{key:2}),r.createElement("g",{id:"Icon-lib",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:3},r.createElement("g",{id:"Artboard",transform:"translate(-800.000000, -2139.000000)",fill:"#FFFFFF",fillRule:"nonzero"},r.createElement("g",{id:"lineart",transform:"translate(49.000000, 39.000000)"},r.createElement("g",{id:"Group",transform:"translate(751.000000, 2100.000000)"},[r.createElement("path",{d:"M12,0 C5.373,0 0,5.373 0,12 C0,18.627 5.373,24 12,24 C18.627,24 24,18.627 24,12 C24,5.373 18.627,0 12,0 Z M12,22 C6.477,22 2,17.523 2,12 C2,6.477 6.477,2 12,2 C17.523,2 22,6.477 22,12 C22,17.523 17.523,22 12,22 Z",id:"Shape",key:0}),r.createElement("circle",{id:"Oval",cx:"15.5",cy:"9.5",r:"1.5",key:1}),r.createElement("circle",{id:"Oval",cx:"8.5",cy:"9.5",r:"1.5",key:2}),r.createElement("path",{d:"M15.064,14.736 L8.564,17.336 C8.307,17.439 8.183,17.729 8.286,17.985 C8.389,18.241 8.68,18.367 8.935,18.263 L15.435,15.663 C15.692,15.56 15.816,15.27 15.713,15.014 C15.61,14.758 15.32,14.633 15.064,14.736 Z",id:"Shape",key:3})]))))])}i.defaultProps={width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1"},e.exports=i,i.default=i},77020:function(){},24654:function(){},62676:function(){}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.m=t,e=[],r.O=function(t,n,i,o){if(!n){var a=1/0;for(u=0;u<e.length;u++){n=e[u][0],i=e[u][1],o=e[u][2];for(var l=!0,c=0;c<n.length;c++)(!1&o||a>=o)&&Object.keys(r.O).every((function(e){return r.O[e](n[c])}))?n.splice(c--,1):(l=!1,o<a&&(a=o));if(l){e.splice(u--,1);var s=i();void 0!==s&&(t=s)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,i,o]},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},r.p="https://one-to-one.bambuser.com/refresh-us/call-widget/",function(){var e={47:0};r.O.j=function(t){return 0===e[t]};var t=function(t,n){var i,o,a=n[0],l=n[1],c=n[2],s=0;if(a.some((function(t){return 0!==e[t]}))){for(i in l)r.o(l,i)&&(r.m[i]=l[i]);if(c)var u=c(r)}for(t&&t(n);s<a.length;s++)o=a[s],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(u)},n=self.webpackChunkOneToOneAPI=self.webpackChunkOneToOneAPI||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}(),r.nc=void 0,r.O(void 0,[216],(function(){return r(1753)}));var i=r.O(void 0,[216],(function(){return r(36742)}));return(i=r.O(i)).default}()}));
//# sourceMappingURL=https://debug.viddget.dev/d600b71d/221223083335/client/client.678ca3b62c05c1d0740e.js.map